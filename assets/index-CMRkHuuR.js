var gR=Object.defineProperty;var yR=(n,e,t)=>e in n?gR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cn=(n,e,t)=>yR(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function $m(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wf={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function bR(){if(zb)return Il;zb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var h in s)h!=="key"&&(l[h]=s[h])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:l}}return Il.Fragment=e,Il.jsx=t,Il.jsxs=t,Il}var Bb;function vR(){return Bb||(Bb=1,Wf.exports=bR()),Wf.exports}var ae=vR(),Yf={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function _R(){if(Hb)return kt;Hb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=g&&T[g]||T["@@iterator"],typeof T=="function"?T:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(T,se,Ee){this.props=T,this.context=se,this.refs=S,this.updater=Ee||b}w.prototype.isReactComponent={},w.prototype.setState=function(T,se){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,se,"setState")},w.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function _(){}_.prototype=w.prototype;function R(T,se,Ee){this.props=T,this.context=se,this.refs=S,this.updater=Ee||b}var A=R.prototype=new _;A.constructor=R,x(A,w.prototype),A.isPureReactComponent=!0;var k=Array.isArray,U={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function N(T,se,Ee,O,Q,be){return Ee=be.ref,{$$typeof:n,type:T,key:se,ref:Ee!==void 0?Ee:null,props:be}}function H(T,se){return N(T.type,se,void 0,void 0,void 0,T.props)}function C(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function D(T){var se={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(Ee){return se[Ee]})}var F=/\/+/g;function J(T,se){return typeof T=="object"&&T!==null&&T.key!=null?D(""+T.key):se.toString(36)}function Y(){}function W(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Y,Y):(T.status="pending",T.then(function(se){T.status==="pending"&&(T.status="fulfilled",T.value=se)},function(se){T.status==="pending"&&(T.status="rejected",T.reason=se)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function re(T,se,Ee,O,Q){var be=typeof T;(be==="undefined"||be==="boolean")&&(T=null);var ve=!1;if(T===null)ve=!0;else switch(be){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(T.$$typeof){case n:case e:ve=!0;break;case p:return ve=T._init,re(ve(T._payload),se,Ee,O,Q)}}if(ve)return Q=Q(T),ve=O===""?"."+J(T,0):O,k(Q)?(Ee="",ve!=null&&(Ee=ve.replace(F,"$&/")+"/"),re(Q,se,Ee,"",function(rt){return rt})):Q!=null&&(C(Q)&&(Q=H(Q,Ee+(Q.key==null||T&&T.key===Q.key?"":(""+Q.key).replace(F,"$&/")+"/")+ve)),se.push(Q)),1;ve=0;var Ie=O===""?".":O+":";if(k(T))for(var Ne=0;Ne<T.length;Ne++)O=T[Ne],be=Ie+J(O,Ne),ve+=re(O,se,Ee,be,Q);else if(Ne=y(T),typeof Ne=="function")for(T=Ne.call(T),Ne=0;!(O=T.next()).done;)O=O.value,be=Ie+J(O,Ne++),ve+=re(O,se,Ee,be,Q);else if(be==="object"){if(typeof T.then=="function")return re(W(T),se,Ee,O,Q);throw se=String(T),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ve}function j(T,se,Ee){if(T==null)return T;var O=[],Q=0;return re(T,O,"","",function(be){return se.call(Ee,be,Q++)}),O}function ce(T){if(T._status===-1){var se=T._result;se=se(),se.then(function(Ee){(T._status===0||T._status===-1)&&(T._status=1,T._result=Ee)},function(Ee){(T._status===0||T._status===-1)&&(T._status=2,T._result=Ee)}),T._status===-1&&(T._status=0,T._result=se)}if(T._status===1)return T._result.default;throw T._result}var X=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function _e(){}return kt.Children={map:j,forEach:function(T,se,Ee){j(T,function(){se.apply(this,arguments)},Ee)},count:function(T){var se=0;return j(T,function(){se++}),se},toArray:function(T){return j(T,function(se){return se})||[]},only:function(T){if(!C(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},kt.Component=w,kt.Fragment=t,kt.Profiler=s,kt.PureComponent=R,kt.StrictMode=i,kt.Suspense=f,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,kt.act=function(){throw Error("act(...) is not supported in production builds of React.")},kt.cache=function(T){return function(){return T.apply(null,arguments)}},kt.cloneElement=function(T,se,Ee){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var O=x({},T.props),Q=T.key,be=void 0;if(se!=null)for(ve in se.ref!==void 0&&(be=void 0),se.key!==void 0&&(Q=""+se.key),se)!E.call(se,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&se.ref===void 0||(O[ve]=se[ve]);var ve=arguments.length-2;if(ve===1)O.children=Ee;else if(1<ve){for(var Ie=Array(ve),Ne=0;Ne<ve;Ne++)Ie[Ne]=arguments[Ne+2];O.children=Ie}return N(T.type,Q,void 0,void 0,be,O)},kt.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:l,_context:T},T},kt.createElement=function(T,se,Ee){var O,Q={},be=null;if(se!=null)for(O in se.key!==void 0&&(be=""+se.key),se)E.call(se,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(Q[O]=se[O]);var ve=arguments.length-2;if(ve===1)Q.children=Ee;else if(1<ve){for(var Ie=Array(ve),Ne=0;Ne<ve;Ne++)Ie[Ne]=arguments[Ne+2];Q.children=Ie}if(T&&T.defaultProps)for(O in ve=T.defaultProps,ve)Q[O]===void 0&&(Q[O]=ve[O]);return N(T,be,void 0,void 0,null,Q)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(T){return{$$typeof:h,render:T}},kt.isValidElement=C,kt.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:ce}},kt.memo=function(T,se){return{$$typeof:d,type:T,compare:se===void 0?null:se}},kt.startTransition=function(T){var se=U.T,Ee={};U.T=Ee;try{var O=T(),Q=U.S;Q!==null&&Q(Ee,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(_e,X)}catch(be){X(be)}finally{U.T=se}},kt.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},kt.use=function(T){return U.H.use(T)},kt.useActionState=function(T,se,Ee){return U.H.useActionState(T,se,Ee)},kt.useCallback=function(T,se){return U.H.useCallback(T,se)},kt.useContext=function(T){return U.H.useContext(T)},kt.useDebugValue=function(){},kt.useDeferredValue=function(T,se){return U.H.useDeferredValue(T,se)},kt.useEffect=function(T,se){return U.H.useEffect(T,se)},kt.useId=function(){return U.H.useId()},kt.useImperativeHandle=function(T,se,Ee){return U.H.useImperativeHandle(T,se,Ee)},kt.useInsertionEffect=function(T,se){return U.H.useInsertionEffect(T,se)},kt.useLayoutEffect=function(T,se){return U.H.useLayoutEffect(T,se)},kt.useMemo=function(T,se){return U.H.useMemo(T,se)},kt.useOptimistic=function(T,se){return U.H.useOptimistic(T,se)},kt.useReducer=function(T,se,Ee){return U.H.useReducer(T,se,Ee)},kt.useRef=function(T){return U.H.useRef(T)},kt.useState=function(T){return U.H.useState(T)},kt.useSyncExternalStore=function(T,se,Ee){return U.H.useSyncExternalStore(T,se,Ee)},kt.useTransition=function(){return U.H.useTransition()},kt.version="19.0.0",kt}var Vb;function eg(){return Vb||(Vb=1,Yf.exports=_R()),Yf.exports}var ge=eg();const Gb=$m(ge);var Xf={exports:{}},Ol={},Qf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function wR(){return jb||(jb=1,function(n){function e(j,ce){var X=j.length;j.push(ce);e:for(;0<X;){var _e=X-1>>>1,T=j[_e];if(0<s(T,ce))j[_e]=ce,j[X]=T,X=_e;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var ce=j[0],X=j.pop();if(X!==ce){j[0]=X;e:for(var _e=0,T=j.length,se=T>>>1;_e<se;){var Ee=2*(_e+1)-1,O=j[Ee],Q=Ee+1,be=j[Q];if(0>s(O,X))Q<T&&0>s(be,O)?(j[_e]=be,j[Q]=X,_e=Q):(j[_e]=O,j[Ee]=X,_e=Ee);else if(Q<T&&0>s(be,X))j[_e]=be,j[Q]=X,_e=Q;else break e}}return ce}function s(j,ce){var X=j.sortIndex-ce.sortIndex;return X!==0?X:j.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],d=[],p=1,g=null,y=3,b=!1,x=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(j){for(var ce=t(d);ce!==null;){if(ce.callback===null)i(d);else if(ce.startTime<=j)i(d),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=t(d)}}function k(j){if(S=!1,A(j),!x)if(t(f)!==null)x=!0,W();else{var ce=t(d);ce!==null&&re(k,ce.startTime-j)}}var U=!1,E=-1,N=5,H=-1;function C(){return!(n.unstable_now()-H<N)}function D(){if(U){var j=n.unstable_now();H=j;var ce=!0;try{e:{x=!1,S&&(S=!1,_(E),E=-1),b=!0;var X=y;try{t:{for(A(j),g=t(f);g!==null&&!(g.expirationTime>j&&C());){var _e=g.callback;if(typeof _e=="function"){g.callback=null,y=g.priorityLevel;var T=_e(g.expirationTime<=j);if(j=n.unstable_now(),typeof T=="function"){g.callback=T,A(j),ce=!0;break t}g===t(f)&&i(f),A(j)}else i(f);g=t(f)}if(g!==null)ce=!0;else{var se=t(d);se!==null&&re(k,se.startTime-j),ce=!1}}break e}finally{g=null,y=X,b=!1}ce=void 0}}finally{ce?F():U=!1}}}var F;if(typeof R=="function")F=function(){R(D)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Y=J.port2;J.port1.onmessage=D,F=function(){Y.postMessage(null)}}else F=function(){w(D,0)};function W(){U||(U=!0,F())}function re(j,ce){E=w(function(){j(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){x||b||(x=!0,W())},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(j){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var X=y;y=ce;try{return j()}finally{y=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,ce){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=y;y=j;try{return ce()}finally{y=X}},n.unstable_scheduleCallback=function(j,ce,X){var _e=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?_e+X:_e):X=_e,j){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=X+T,j={id:p++,callback:ce,priorityLevel:j,startTime:X,expirationTime:T,sortIndex:-1},X>_e?(j.sortIndex=X,e(d,j),t(f)===null&&j===t(d)&&(S?(_(E),E=-1):S=!0,re(k,X-_e))):(j.sortIndex=T,e(f,j),x||b||(x=!0,W())),j},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(j){var ce=y;return function(){var X=y;y=ce;try{return j.apply(this,arguments)}finally{y=X}}}}(Zf)),Zf}var qb;function xR(){return qb||(qb=1,Qf.exports=wR()),Qf.exports}var Kf={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function SR(){if(Wb)return $n;Wb=1;var n=eg();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$n.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return l(f,d,null,p)},$n.flushSync=function(f){var d=c.T,p=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=d,i.p=p,i.d.f()}},$n.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},$n.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},$n.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=h(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&i.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},$n.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=h(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},$n.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=h(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},$n.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=h(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},$n.requestFormReset=function(f){i.d.r(f)},$n.unstable_batchedUpdates=function(f,d){return f(d)},$n.useFormState=function(f,d,p){return c.H.useFormState(f,d,p)},$n.useFormStatus=function(){return c.H.useHostTransitionStatus()},$n.version="19.0.0",$n}var Yb;function T_(){if(Yb)return Kf.exports;Yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kf.exports=SR(),Kf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function TR(){if(Xb)return Ol;Xb=1;var n=xR(),e=eg(),t=T_();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),b=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),k=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function E(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function H(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case f:return"Fragment";case h:return"Portal";case p:return"Profiler";case d:return"StrictMode";case S:return"Suspense";case w:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case b:return(r.displayName||"Context")+".Provider";case y:return(r._context.displayName||"Context")+".Consumer";case x:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case _:return a=r.displayName||null,a!==null?a:H(r.type)||"Memo";case R:a=r._payload,r=r._init;try{return H(r(a))}catch{}}return null}var C=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,F,J;function Y(r){if(F===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||"",J=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+F+r+J}var W=!1;function re(r,a){if(!r||W)return"";W=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(we){var me=we}Reflect.construct(r,[],ke)}else{try{ke.call()}catch(we){me=we}r.call(ke.prototype)}}else{try{throw Error()}catch(we){me=we}(ke=r())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(we){if(we&&me&&typeof we.stack=="string")return[we.stack,me.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),M=v[0],I=v[1];if(M&&I){var B=M.split(`
`),ee=I.split(`
`);for(m=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;m<ee.length&&!ee[m].includes("DetermineComponentFrameRoot");)m++;if(u===B.length||m===ee.length)for(u=B.length-1,m=ee.length-1;1<=u&&0<=m&&B[u]!==ee[m];)m--;for(;1<=u&&0<=m;u--,m--)if(B[u]!==ee[m]){if(u!==1||m!==1)do if(u--,m--,0>m||B[u]!==ee[m]){var Te=`
`+B[u].replace(" at new "," at ");return r.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",r.displayName)),Te}while(1<=u&&0<=m);break}}}finally{W=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Y(o):""}function j(r){switch(r.tag){case 26:case 27:case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 15:return r=re(r.type,!1),r;case 11:return r=re(r.type.render,!1),r;case 1:return r=re(r.type,!0),r;default:return""}}function ce(r){try{var a="";do a+=j(r),r=r.return;while(r);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function X(r){var a=r,o=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(o=a.return),r=a.return;while(r)}return a.tag===3?o:null}function _e(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function T(r){if(X(r)!==r)throw Error(i(188))}function se(r){var a=r.alternate;if(!a){if(a=X(r),a===null)throw Error(i(188));return a!==r?null:r}for(var o=r,u=a;;){var m=o.return;if(m===null)break;var v=m.alternate;if(v===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===o)return T(m),r;if(v===u)return T(m),a;v=v.sibling}throw Error(i(188))}if(o.return!==u.return)o=m,u=v;else{for(var M=!1,I=m.child;I;){if(I===o){M=!0,o=m,u=v;break}if(I===u){M=!0,u=m,o=v;break}I=I.sibling}if(!M){for(I=v.child;I;){if(I===o){M=!0,o=v,u=m;break}if(I===u){M=!0,u=v,o=m;break}I=I.sibling}if(!M)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:a}function Ee(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=Ee(r),a!==null)return a;r=r.sibling}return null}var O=Array.isArray,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ve=[],Ie=-1;function Ne(r){return{current:r}}function rt(r){0>Ie||(r.current=ve[Ie],ve[Ie]=null,Ie--)}function Ue(r,a){Ie++,ve[Ie]=r.current,r.current=a}var Tt=Ne(null),Ft=Ne(null),xt=Ne(null),q=Ne(null);function mn(r,a){switch(Ue(xt,a),Ue(Ft,r),Ue(Tt,null),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?pb(a):0;break;default:if(r=r===8?a.parentNode:a,a=r.tagName,r=r.namespaceURI)r=pb(r),a=mb(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}rt(Tt),Ue(Tt,a)}function ht(){rt(Tt),rt(Ft),rt(xt)}function yt(r){r.memoizedState!==null&&Ue(q,r);var a=Tt.current,o=mb(a,r.type);a!==o&&(Ue(Ft,r),Ue(Tt,o))}function st(r){Ft.current===r&&(rt(Tt),rt(Ft)),q.current===r&&(rt(q),Dl._currentValue=be)}var jt=Object.prototype.hasOwnProperty,it=n.unstable_scheduleCallback,z=n.unstable_cancelCallback,P=n.unstable_shouldYield,ue=n.unstable_requestPaint,Se=n.unstable_now,De=n.unstable_getCurrentPriorityLevel,V=n.unstable_ImmediatePriority,pe=n.unstable_UserBlockingPriority,xe=n.unstable_NormalPriority,Re=n.unstable_LowPriority,Je=n.unstable_IdlePriority,Ce=n.log,je=n.unstable_setDisableYieldValue,Ze=null,Ke=null;function Ye(r){if(Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Ze,r,void 0,(r.current.flags&128)===128)}catch{}}function ot(r){if(typeof Ce=="function"&&je(r),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Ze,r)}catch{}}var $e=Math.clz32?Math.clz32:qe,Rt=Math.log,$=Math.LN2;function qe(r){return r>>>=0,r===0?32:31-(Rt(r)/$|0)|0}var ye=128,Me=4194304;function He(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ve(r,a){var o=r.pendingLanes;if(o===0)return 0;var u=0,m=r.suspendedLanes,v=r.pingedLanes,M=r.warmLanes;r=r.finishedLanes!==0;var I=o&134217727;return I!==0?(o=I&~m,o!==0?u=He(o):(v&=I,v!==0?u=He(v):r||(M=I&~M,M!==0&&(u=He(M))))):(I=o&~m,I!==0?u=He(I):v!==0?u=He(v):r||(M=o&~M,M!==0&&(u=He(M)))),u===0?0:a!==0&&a!==u&&(a&m)===0&&(m=u&-u,M=a&-a,m>=M||m===32&&(M&4194176)!==0)?a:u}function bt(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function un(r,a){switch(r){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tn(){var r=ye;return ye<<=1,(ye&4194176)===0&&(ye=128),r}function G(){var r=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),r}function ne(r){for(var a=[],o=0;31>o;o++)a.push(r);return a}function fe(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Oe(r,a,o,u,m,v){var M=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var I=r.entanglements,B=r.expirationTimes,ee=r.hiddenUpdates;for(o=M&~o;0<o;){var Te=31-$e(o),ke=1<<Te;I[Te]=0,B[Te]=-1;var me=ee[Te];if(me!==null)for(ee[Te]=null,Te=0;Te<me.length;Te++){var we=me[Te];we!==null&&(we.lane&=-536870913)}o&=~ke}u!==0&&Ge(r,u,0),v!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=v&~(M&~a))}function Ge(r,a,o){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-$e(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194218}function et(r,a){var o=r.entangledLanes|=a;for(r=r.entanglements;o;){var u=31-$e(o),m=1<<u;m&a|r[u]&a&&(r[u]|=a),o&=~m}}function mt(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Qe(){var r=Q.p;return r!==0?r:(r=window.event,r===void 0?32:Lb(r.type))}function ut(r,a){var o=Q.p;try{return Q.p=r,a()}finally{Q.p=o}}var tt=Math.random().toString(36).slice(2),at="__reactFiber$"+tt,Xe="__reactProps$"+tt,_t="__reactContainer$"+tt,Yt="__reactEvents$"+tt,yn="__reactListeners$"+tt,An="__reactHandles$"+tt,zn="__reactResources$"+tt,Lt="__reactMarker$"+tt;function Jr(r){delete r[at],delete r[Xe],delete r[Yt],delete r[yn],delete r[An]}function qn(r){var a=r[at];if(a)return a;for(var o=r.parentNode;o;){if(a=o[_t]||o[at]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(r=bb(r);r!==null;){if(o=r[at])return o;r=bb(r)}return a}r=o,o=r.parentNode}return null}function L(r){if(r=r[at]||r[_t]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Z(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function de(r){var a=r[zn];return a||(a=r[zn]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function le(r){r[Lt]=!0}var ie=new Set,Pe={};function Be(r,a){Le(r,a),Le(r+"Capture",a)}function Le(r,a){for(Pe[r]=a,r=0;r<a.length;r++)ie.add(a[r])}var ze=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vt={},lt={};function ft(r){return jt.call(lt,r)?!0:jt.call(vt,r)?!1:dt.test(r)?lt[r]=!0:(vt[r]=!0,!1)}function Ct(r,a,o){if(ft(a))if(o===null)r.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+o)}}function en(r,a,o){if(o===null)r.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+o)}}function qt(r,a,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(a,o,""+u)}}function Mt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function gt(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ln(r){var a=gt(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),u=""+r[a];if(!r.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,v=o.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(M){u=""+M,v.call(this,M)}}),Object.defineProperty(r,a,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Vt(r){r._valueTracker||(r._valueTracker=Ln(r))}function fr(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return r&&(u=gt(r)?r.checked?"true":"false":r.value),r=u,r!==o?(a.setValue(r),!0):!1}function $r(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ar=/[\n"\\]/g;function Bn(r){return r.replace(ar,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function tn(r,a,o,u,m,v,M,I){r.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.type=M:r.removeAttribute("type"),a!=null?M==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Mt(a)):r.value!==""+Mt(a)&&(r.value=""+Mt(a)):M!=="submit"&&M!=="reset"||r.removeAttribute("value"),a!=null?Kn(r,M,Mt(a)):o!=null?Kn(r,M,Mt(o)):u!=null&&r.removeAttribute("value"),m==null&&v!=null&&(r.defaultChecked=!!v),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+Mt(I):r.removeAttribute("name")}function sr(r,a,o,u,m,v,M,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),a!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;o=o!=null?""+Mt(o):"",a=a!=null?""+Mt(a):o,I||a===r.value||(r.value=a),r.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=I?r.checked:!!u,r.defaultChecked=!!u,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(r.name=M)}function Kn(r,a,o){a==="number"&&$r(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function _n(r,a,o,u){if(r=r.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=a.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Mt(o),a=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function Wn(r,a,o){if(a!=null&&(a=""+Mt(a),a!==r.value&&(r.value=a),o==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=o!=null?""+Mt(o):""}function Cs(r,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(i(92));if(O(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=Mt(a),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function pr(r,a){if(a){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=a;return}}r.textContent=a}var fC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function x0(r,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,o):typeof o!="number"||o===0||fC.has(a)?a==="float"?r.cssFloat=o:r[a]=(""+o).trim():r[a]=o+"px"}function S0(r,a,o){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&x0(r,m,u)}else for(var v in a)a.hasOwnProperty(v)&&x0(r,v,a[v])}function qh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tc(r){return mC.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Wh=null;function Yh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ds=null,Rs=null;function T0(r){var a=L(r);if(a&&(r=a.stateNode)){var o=r[Xe]||null;e:switch(r=a.stateNode,a.type){case"input":if(tn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bn(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==r&&u.form===r.form){var m=u[Xe]||null;if(!m)throw Error(i(90));tn(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===r.form&&fr(u)}break e;case"textarea":Wn(r,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&_n(r,!!o.multiple,a,!1)}}}var Xh=!1;function E0(r,a,o){if(Xh)return r(a,o);Xh=!0;try{var u=r(a);return u}finally{if(Xh=!1,(Ds!==null||Rs!==null)&&(ou(),Ds&&(a=Ds,r=Rs,Rs=Ds=null,T0(a),r)))for(a=0;a<r.length;a++)T0(r[a])}}function Go(r,a){var o=r.stateNode;if(o===null)return null;var u=o[Xe]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,a,typeof o));return o}var Qh=!1;if(ze)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){Qh=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{Qh=!1}var ta=null,Zh=null,Ec=null;function M0(){if(Ec)return Ec;var r,a=Zh,o=a.length,u,m="value"in ta?ta.value:ta.textContent,v=m.length;for(r=0;r<o&&a[r]===m[r];r++);var M=o-r;for(u=1;u<=M&&a[o-u]===m[v-u];u++);return Ec=m.slice(r,1<u?1-u:void 0)}function Mc(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Ac(){return!0}function A0(){return!1}function mr(r){function a(o,u,m,v,M){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=v,this.target=M,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(o=r[I],this[I]=o?o(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ac:A0,this.isPropagationStopped=A0,this}return D(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),a}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=mr(Ba),qo=D({},Ba,{view:0,detail:0}),gC=mr(qo),Kh,Jh,Wo,Dc=D({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ed,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Wo&&(Wo&&r.type==="mousemove"?(Kh=r.screenX-Wo.screenX,Jh=r.screenY-Wo.screenY):Jh=Kh=0,Wo=r),Kh)},movementY:function(r){return"movementY"in r?r.movementY:Jh}}),C0=mr(Dc),yC=D({},Dc,{dataTransfer:0}),bC=mr(yC),vC=D({},qo,{relatedTarget:0}),$h=mr(vC),_C=D({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),wC=mr(_C),xC=D({},Ba,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),SC=mr(xC),TC=D({},Ba,{data:0}),D0=mr(TC),EC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CC(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=AC[r])?!!a[r]:!1}function ed(){return CC}var DC=D({},qo,{key:function(r){if(r.key){var a=EC[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Mc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?MC[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ed,charCode:function(r){return r.type==="keypress"?Mc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Mc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),RC=mr(DC),kC=D({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R0=mr(kC),PC=D({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ed}),LC=mr(PC),IC=D({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),OC=mr(IC),UC=D({},Dc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),NC=mr(UC),FC=D({},Ba,{newState:0,oldState:0}),zC=mr(FC),BC=[9,13,27,32],td=ze&&"CompositionEvent"in window,Yo=null;ze&&"documentMode"in document&&(Yo=document.documentMode);var HC=ze&&"TextEvent"in window&&!Yo,k0=ze&&(!td||Yo&&8<Yo&&11>=Yo),P0=" ",L0=!1;function I0(r,a){switch(r){case"keyup":return BC.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O0(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ks=!1;function VC(r,a){switch(r){case"compositionend":return O0(a);case"keypress":return a.which!==32?null:(L0=!0,P0);case"textInput":return r=a.data,r===P0&&L0?null:r;default:return null}}function GC(r,a){if(ks)return r==="compositionend"||!td&&I0(r,a)?(r=M0(),Ec=Zh=ta=null,ks=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return k0&&a.locale!=="ko"?null:a.data;default:return null}}var jC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U0(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!jC[r.type]:a==="textarea"}function N0(r,a,o,u){Ds?Rs?Rs.push(u):Rs=[u]:Ds=u,a=du(a,"onChange"),0<a.length&&(o=new Cc("onChange","change",null,o,u),r.push({event:o,listeners:a}))}var Xo=null,Qo=null;function qC(r){cb(r,0)}function Rc(r){var a=Z(r);if(fr(a))return r}function F0(r,a){if(r==="change")return a}var z0=!1;if(ze){var nd;if(ze){var rd="oninput"in document;if(!rd){var B0=document.createElement("div");B0.setAttribute("oninput","return;"),rd=typeof B0.oninput=="function"}nd=rd}else nd=!1;z0=nd&&(!document.documentMode||9<document.documentMode)}function H0(){Xo&&(Xo.detachEvent("onpropertychange",V0),Qo=Xo=null)}function V0(r){if(r.propertyName==="value"&&Rc(Qo)){var a=[];N0(a,Qo,r,Yh(r)),E0(qC,a)}}function WC(r,a,o){r==="focusin"?(H0(),Xo=a,Qo=o,Xo.attachEvent("onpropertychange",V0)):r==="focusout"&&H0()}function YC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Rc(Qo)}function XC(r,a){if(r==="click")return Rc(a)}function QC(r,a){if(r==="input"||r==="change")return Rc(a)}function ZC(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var xr=typeof Object.is=="function"?Object.is:ZC;function Zo(r,a){if(xr(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var o=Object.keys(r),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!jt.call(a,m)||!xr(r[m],a[m]))return!1}return!0}function G0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function j0(r,a){var o=G0(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=a&&u>=a)return{node:o,offset:a-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=G0(o)}}function q0(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?q0(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function W0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=$r(r.document);a instanceof r.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)r=a.contentWindow;else break;a=$r(r.document)}return a}function id(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function KC(r,a){var o=W0(a);a=r.focusedElem;var u=r.selectionRange;if(o!==a&&a&&a.ownerDocument&&q0(a.ownerDocument.documentElement,a)){if(u!==null&&id(a)){if(r=u.start,o=u.end,o===void 0&&(o=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(o,a.value.length);else if(o=(r=a.ownerDocument||document)&&r.defaultView||window,o.getSelection){o=o.getSelection();var m=a.textContent.length,v=Math.min(u.start,m);u=u.end===void 0?v:Math.min(u.end,m),!o.extend&&v>u&&(m=u,u=v,v=m),m=j0(a,v);var M=j0(a,u);m&&M&&(o.rangeCount!==1||o.anchorNode!==m.node||o.anchorOffset!==m.offset||o.focusNode!==M.node||o.focusOffset!==M.offset)&&(r=r.createRange(),r.setStart(m.node,m.offset),o.removeAllRanges(),v>u?(o.addRange(r),o.extend(M.node,M.offset)):(r.setEnd(M.node,M.offset),o.addRange(r)))}}for(r=[],o=a;o=o.parentNode;)o.nodeType===1&&r.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)o=r[a],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var JC=ze&&"documentMode"in document&&11>=document.documentMode,Ps=null,ad=null,Ko=null,sd=!1;function Y0(r,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;sd||Ps==null||Ps!==$r(u)||(u=Ps,"selectionStart"in u&&id(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ko&&Zo(Ko,u)||(Ko=u,u=du(ad,"onSelect"),0<u.length&&(a=new Cc("onSelect","select",null,a,o),r.push({event:a,listeners:u}),a.target=Ps)))}function Ha(r,a){var o={};return o[r.toLowerCase()]=a.toLowerCase(),o["Webkit"+r]="webkit"+a,o["Moz"+r]="moz"+a,o}var Ls={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},od={},X0={};ze&&(X0=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function Va(r){if(od[r])return od[r];if(!Ls[r])return r;var a=Ls[r],o;for(o in a)if(a.hasOwnProperty(o)&&o in X0)return od[r]=a[o];return r}var Q0=Va("animationend"),Z0=Va("animationiteration"),K0=Va("animationstart"),$C=Va("transitionrun"),eD=Va("transitionstart"),tD=Va("transitioncancel"),J0=Va("transitionend"),$0=new Map,e2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ei(r,a){$0.set(r,a),Be(a,[r])}var Or=[],Is=0,ld=0;function kc(){for(var r=Is,a=ld=Is=0;a<r;){var o=Or[a];Or[a++]=null;var u=Or[a];Or[a++]=null;var m=Or[a];Or[a++]=null;var v=Or[a];if(Or[a++]=null,u!==null&&m!==null){var M=u.pending;M===null?m.next=m:(m.next=M.next,M.next=m),u.pending=m}v!==0&&t2(o,m,v)}}function Pc(r,a,o,u){Or[Is++]=r,Or[Is++]=a,Or[Is++]=o,Or[Is++]=u,ld|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function cd(r,a,o,u){return Pc(r,a,o,u),Lc(r)}function na(r,a){return Pc(r,null,null,a),Lc(r)}function t2(r,a,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,v=r.return;v!==null;)v.childLanes|=o,u=v.alternate,u!==null&&(u.childLanes|=o),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(m=!0)),r=v,v=v.return;m&&a!==null&&r.tag===3&&(v=r.stateNode,m=31-$e(o),v=v.hiddenUpdates,r=v[m],r===null?v[m]=[a]:r.push(a),a.lane=o|536870912)}function Lc(r){if(50<xl)throw xl=0,gf=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Os={},n2=new WeakMap;function Ur(r,a){if(typeof r=="object"&&r!==null){var o=n2.get(r);return o!==void 0?o:(a={value:r,source:a,stack:ce(a)},n2.set(r,a),a)}return{value:r,source:a,stack:ce(a)}}var Us=[],Ns=0,Ic=null,Oc=0,Nr=[],Fr=0,Ga=null,Ci=1,Di="";function ja(r,a){Us[Ns++]=Oc,Us[Ns++]=Ic,Ic=r,Oc=a}function r2(r,a,o){Nr[Fr++]=Ci,Nr[Fr++]=Di,Nr[Fr++]=Ga,Ga=r;var u=Ci;r=Di;var m=32-$e(u)-1;u&=~(1<<m),o+=1;var v=32-$e(a)+m;if(30<v){var M=m-m%5;v=(u&(1<<M)-1).toString(32),u>>=M,m-=M,Ci=1<<32-$e(a)+m|o<<m|u,Di=v+r}else Ci=1<<v|o<<m|u,Di=r}function ud(r){r.return!==null&&(ja(r,1),r2(r,1,0))}function hd(r){for(;r===Ic;)Ic=Us[--Ns],Us[Ns]=null,Oc=Us[--Ns],Us[Ns]=null;for(;r===Ga;)Ga=Nr[--Fr],Nr[Fr]=null,Di=Nr[--Fr],Nr[Fr]=null,Ci=Nr[--Fr],Nr[Fr]=null}var or=null,Yn=null,Xt=!1,ti=null,di=!1,dd=Error(i(519));function qa(r){var a=Error(i(418,""));throw el(Ur(a,r)),dd}function i2(r){var a=r.stateNode,o=r.type,u=r.memoizedProps;switch(a[at]=r,a[Xe]=u,o){case"dialog":Gt("cancel",a),Gt("close",a);break;case"iframe":case"object":case"embed":Gt("load",a);break;case"video":case"audio":for(o=0;o<Tl.length;o++)Gt(Tl[o],a);break;case"source":Gt("error",a);break;case"img":case"image":case"link":Gt("error",a),Gt("load",a);break;case"details":Gt("toggle",a);break;case"input":Gt("invalid",a),sr(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Vt(a);break;case"select":Gt("invalid",a);break;case"textarea":Gt("invalid",a),Cs(a,u.value,u.defaultValue,u.children),Vt(a)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||fb(a.textContent,o)?(u.popover!=null&&(Gt("beforetoggle",a),Gt("toggle",a)),u.onScroll!=null&&Gt("scroll",a),u.onScrollEnd!=null&&Gt("scrollend",a),u.onClick!=null&&(a.onclick=fu),a=!0):a=!1,a||qa(r)}function a2(r){for(or=r.return;or;)switch(or.tag){case 3:case 27:di=!0;return;case 5:case 13:di=!1;return;default:or=or.return}}function Jo(r){if(r!==or)return!1;if(!Xt)return a2(r),Xt=!0,!1;var a=!1,o;if((o=r.tag!==3&&r.tag!==27)&&((o=r.tag===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Lf(r.type,r.memoizedProps)),o=!o),o&&(a=!0),a&&Yn&&qa(r),a2(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(a===0){Yn=ri(r.nextSibling);break e}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;r=r.nextSibling}Yn=null}}else Yn=or?ri(r.stateNode.nextSibling):null;return!0}function $o(){Yn=or=null,Xt=!1}function el(r){ti===null?ti=[r]:ti.push(r)}var tl=Error(i(460)),s2=Error(i(474)),fd={then:function(){}};function o2(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Uc(){}function l2(r,a,o){switch(o=r[o],o===void 0?r.push(a):o!==a&&(a.then(Uc,Uc),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===tl?Error(i(483)):r;default:if(typeof a.status=="string")a.then(Uc,Uc);else{if(r=hn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===tl?Error(i(483)):r}throw nl=a,tl}}var nl=null;function c2(){if(nl===null)throw Error(i(459));var r=nl;return nl=null,r}var Fs=null,rl=0;function Nc(r){var a=rl;return rl+=1,Fs===null&&(Fs=[]),l2(Fs,r,a)}function il(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Fc(r,a){throw a.$$typeof===l?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function u2(r){var a=r._init;return a(r._payload)}function h2(r){function a(oe,K){if(r){var he=oe.deletions;he===null?(oe.deletions=[K],oe.flags|=16):he.push(K)}}function o(oe,K){if(!r)return null;for(;K!==null;)a(oe,K),K=K.sibling;return null}function u(oe){for(var K=new Map;oe!==null;)oe.key!==null?K.set(oe.key,oe):K.set(oe.index,oe),oe=oe.sibling;return K}function m(oe,K){return oe=pa(oe,K),oe.index=0,oe.sibling=null,oe}function v(oe,K,he){return oe.index=he,r?(he=oe.alternate,he!==null?(he=he.index,he<K?(oe.flags|=33554434,K):he):(oe.flags|=33554434,K)):(oe.flags|=1048576,K)}function M(oe){return r&&oe.alternate===null&&(oe.flags|=33554434),oe}function I(oe,K,he,Ae){return K===null||K.tag!==6?(K=lf(he,oe.mode,Ae),K.return=oe,K):(K=m(K,he),K.return=oe,K)}function B(oe,K,he,Ae){var nt=he.type;return nt===f?Te(oe,K,he.props.children,Ae,he.key):K!==null&&(K.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===R&&u2(nt)===K.type)?(K=m(K,he.props),il(K,he),K.return=oe,K):(K=nu(he.type,he.key,he.props,null,oe.mode,Ae),il(K,he),K.return=oe,K)}function ee(oe,K,he,Ae){return K===null||K.tag!==4||K.stateNode.containerInfo!==he.containerInfo||K.stateNode.implementation!==he.implementation?(K=cf(he,oe.mode,Ae),K.return=oe,K):(K=m(K,he.children||[]),K.return=oe,K)}function Te(oe,K,he,Ae,nt){return K===null||K.tag!==7?(K=ts(he,oe.mode,Ae,nt),K.return=oe,K):(K=m(K,he),K.return=oe,K)}function ke(oe,K,he){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=lf(""+K,oe.mode,he),K.return=oe,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case c:return he=nu(K.type,K.key,K.props,null,oe.mode,he),il(he,K),he.return=oe,he;case h:return K=cf(K,oe.mode,he),K.return=oe,K;case R:var Ae=K._init;return K=Ae(K._payload),ke(oe,K,he)}if(O(K)||E(K))return K=ts(K,oe.mode,he,null),K.return=oe,K;if(typeof K.then=="function")return ke(oe,Nc(K),he);if(K.$$typeof===b)return ke(oe,$c(oe,K),he);Fc(oe,K)}return null}function me(oe,K,he,Ae){var nt=K!==null?K.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return nt!==null?null:I(oe,K,""+he,Ae);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case c:return he.key===nt?B(oe,K,he,Ae):null;case h:return he.key===nt?ee(oe,K,he,Ae):null;case R:return nt=he._init,he=nt(he._payload),me(oe,K,he,Ae)}if(O(he)||E(he))return nt!==null?null:Te(oe,K,he,Ae,null);if(typeof he.then=="function")return me(oe,K,Nc(he),Ae);if(he.$$typeof===b)return me(oe,K,$c(oe,he),Ae);Fc(oe,he)}return null}function we(oe,K,he,Ae,nt){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return oe=oe.get(he)||null,I(K,oe,""+Ae,nt);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case c:return oe=oe.get(Ae.key===null?he:Ae.key)||null,B(K,oe,Ae,nt);case h:return oe=oe.get(Ae.key===null?he:Ae.key)||null,ee(K,oe,Ae,nt);case R:var Nt=Ae._init;return Ae=Nt(Ae._payload),we(oe,K,he,Ae,nt)}if(O(Ae)||E(Ae))return oe=oe.get(he)||null,Te(K,oe,Ae,nt,null);if(typeof Ae.then=="function")return we(oe,K,he,Nc(Ae),nt);if(Ae.$$typeof===b)return we(oe,K,he,$c(K,Ae),nt);Fc(K,Ae)}return null}function ct(oe,K,he,Ae){for(var nt=null,Nt=null,pt=K,wt=K=0,Gn=null;pt!==null&&wt<he.length;wt++){pt.index>wt?(Gn=pt,pt=null):Gn=pt.sibling;var Qt=me(oe,pt,he[wt],Ae);if(Qt===null){pt===null&&(pt=Gn);break}r&&pt&&Qt.alternate===null&&a(oe,pt),K=v(Qt,K,wt),Nt===null?nt=Qt:Nt.sibling=Qt,Nt=Qt,pt=Gn}if(wt===he.length)return o(oe,pt),Xt&&ja(oe,wt),nt;if(pt===null){for(;wt<he.length;wt++)pt=ke(oe,he[wt],Ae),pt!==null&&(K=v(pt,K,wt),Nt===null?nt=pt:Nt.sibling=pt,Nt=pt);return Xt&&ja(oe,wt),nt}for(pt=u(pt);wt<he.length;wt++)Gn=we(pt,oe,wt,he[wt],Ae),Gn!==null&&(r&&Gn.alternate!==null&&pt.delete(Gn.key===null?wt:Gn.key),K=v(Gn,K,wt),Nt===null?nt=Gn:Nt.sibling=Gn,Nt=Gn);return r&&pt.forEach(function(wa){return a(oe,wa)}),Xt&&ja(oe,wt),nt}function At(oe,K,he,Ae){if(he==null)throw Error(i(151));for(var nt=null,Nt=null,pt=K,wt=K=0,Gn=null,Qt=he.next();pt!==null&&!Qt.done;wt++,Qt=he.next()){pt.index>wt?(Gn=pt,pt=null):Gn=pt.sibling;var wa=me(oe,pt,Qt.value,Ae);if(wa===null){pt===null&&(pt=Gn);break}r&&pt&&wa.alternate===null&&a(oe,pt),K=v(wa,K,wt),Nt===null?nt=wa:Nt.sibling=wa,Nt=wa,pt=Gn}if(Qt.done)return o(oe,pt),Xt&&ja(oe,wt),nt;if(pt===null){for(;!Qt.done;wt++,Qt=he.next())Qt=ke(oe,Qt.value,Ae),Qt!==null&&(K=v(Qt,K,wt),Nt===null?nt=Qt:Nt.sibling=Qt,Nt=Qt);return Xt&&ja(oe,wt),nt}for(pt=u(pt);!Qt.done;wt++,Qt=he.next())Qt=we(pt,oe,wt,Qt.value,Ae),Qt!==null&&(r&&Qt.alternate!==null&&pt.delete(Qt.key===null?wt:Qt.key),K=v(Qt,K,wt),Nt===null?nt=Qt:Nt.sibling=Qt,Nt=Qt);return r&&pt.forEach(function(mR){return a(oe,mR)}),Xt&&ja(oe,wt),nt}function Sn(oe,K,he,Ae){if(typeof he=="object"&&he!==null&&he.type===f&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case c:e:{for(var nt=he.key;K!==null;){if(K.key===nt){if(nt=he.type,nt===f){if(K.tag===7){o(oe,K.sibling),Ae=m(K,he.props.children),Ae.return=oe,oe=Ae;break e}}else if(K.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===R&&u2(nt)===K.type){o(oe,K.sibling),Ae=m(K,he.props),il(Ae,he),Ae.return=oe,oe=Ae;break e}o(oe,K);break}else a(oe,K);K=K.sibling}he.type===f?(Ae=ts(he.props.children,oe.mode,Ae,he.key),Ae.return=oe,oe=Ae):(Ae=nu(he.type,he.key,he.props,null,oe.mode,Ae),il(Ae,he),Ae.return=oe,oe=Ae)}return M(oe);case h:e:{for(nt=he.key;K!==null;){if(K.key===nt)if(K.tag===4&&K.stateNode.containerInfo===he.containerInfo&&K.stateNode.implementation===he.implementation){o(oe,K.sibling),Ae=m(K,he.children||[]),Ae.return=oe,oe=Ae;break e}else{o(oe,K);break}else a(oe,K);K=K.sibling}Ae=cf(he,oe.mode,Ae),Ae.return=oe,oe=Ae}return M(oe);case R:return nt=he._init,he=nt(he._payload),Sn(oe,K,he,Ae)}if(O(he))return ct(oe,K,he,Ae);if(E(he)){if(nt=E(he),typeof nt!="function")throw Error(i(150));return he=nt.call(he),At(oe,K,he,Ae)}if(typeof he.then=="function")return Sn(oe,K,Nc(he),Ae);if(he.$$typeof===b)return Sn(oe,K,$c(oe,he),Ae);Fc(oe,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,K!==null&&K.tag===6?(o(oe,K.sibling),Ae=m(K,he),Ae.return=oe,oe=Ae):(o(oe,K),Ae=lf(he,oe.mode,Ae),Ae.return=oe,oe=Ae),M(oe)):o(oe,K)}return function(oe,K,he,Ae){try{rl=0;var nt=Sn(oe,K,he,Ae);return Fs=null,nt}catch(pt){if(pt===tl)throw pt;var Nt=Vr(29,pt,null,oe.mode);return Nt.lanes=Ae,Nt.return=oe,Nt}finally{}}}var Wa=h2(!0),d2=h2(!1),zs=Ne(null),zc=Ne(0);function f2(r,a){r=Bi,Ue(zc,r),Ue(zs,a),Bi=r|a.baseLanes}function pd(){Ue(zc,Bi),Ue(zs,zs.current)}function md(){Bi=zc.current,rt(zs),rt(zc)}var zr=Ne(null),fi=null;function ra(r){var a=r.alternate;Ue(In,In.current&1),Ue(zr,r),fi===null&&(a===null||zs.current!==null||a.memoizedState!==null)&&(fi=r)}function p2(r){if(r.tag===22){if(Ue(In,In.current),Ue(zr,r),fi===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(fi=r)}}else ia()}function ia(){Ue(In,In.current),Ue(zr,zr.current)}function Ri(r){rt(zr),fi===r&&(fi=null),rt(In)}var In=Ne(0);function Bc(r){for(var a=r;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var nD=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(o){return o()})}},rD=n.unstable_scheduleCallback,iD=n.unstable_NormalPriority,On={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new nD,data:new Map,refCount:0}}function al(r){r.refCount--,r.refCount===0&&rD(iD,function(){r.controller.abort()})}var sl=null,yd=0,Bs=0,Hs=null;function aD(r,a){if(sl===null){var o=sl=[];yd=0,Bs=Tf(),Hs={status:"pending",value:void 0,then:function(u){o.push(u)}}}return yd++,a.then(m2,m2),a}function m2(){if(--yd===0&&sl!==null){Hs!==null&&(Hs.status="fulfilled");var r=sl;sl=null,Bs=0,Hs=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function sD(r,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var g2=C.S;C.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&aD(r,a),g2!==null&&g2(r,a)};var Ya=Ne(null);function bd(){var r=Ya.current;return r!==null?r:hn.pooledCache}function Hc(r,a){a===null?Ue(Ya,Ya.current):Ue(Ya,a.pool)}function y2(){var r=bd();return r===null?null:{parent:On._currentValue,pool:r}}var aa=0,Ot=null,nn=null,Cn=null,Vc=!1,Vs=!1,Xa=!1,Gc=0,ol=0,Gs=null,oD=0;function En(){throw Error(i(321))}function vd(r,a){if(a===null)return!1;for(var o=0;o<a.length&&o<r.length;o++)if(!xr(r[o],a[o]))return!1;return!0}function _d(r,a,o,u,m,v){return aa=v,Ot=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,C.H=r===null||r.memoizedState===null?Qa:sa,Xa=!1,v=o(u,m),Xa=!1,Vs&&(v=v2(a,o,u,m)),b2(r),v}function b2(r){C.H=pi;var a=nn!==null&&nn.next!==null;if(aa=0,Cn=nn=Ot=null,Vc=!1,ol=0,Gs=null,a)throw Error(i(300));r===null||Hn||(r=r.dependencies,r!==null&&Jc(r)&&(Hn=!0))}function v2(r,a,o,u){Ot=r;var m=0;do{if(Vs&&(Gs=null),ol=0,Vs=!1,25<=m)throw Error(i(301));if(m+=1,Cn=nn=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}C.H=Za,v=a(o,u)}while(Vs);return v}function lD(){var r=C.H,a=r.useState()[0];return a=typeof a.then=="function"?ll(a):a,r=r.useState()[0],(nn!==null?nn.memoizedState:null)!==r&&(Ot.flags|=1024),a}function wd(){var r=Gc!==0;return Gc=0,r}function xd(r,a,o){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~o}function Sd(r){if(Vc){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Vc=!1}aa=0,Cn=nn=Ot=null,Vs=!1,ol=Gc=0,Gs=null}function gr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Ot.memoizedState=Cn=r:Cn=Cn.next=r,Cn}function Dn(){if(nn===null){var r=Ot.alternate;r=r!==null?r.memoizedState:null}else r=nn.next;var a=Cn===null?Ot.memoizedState:Cn.next;if(a!==null)Cn=a,nn=r;else{if(r===null)throw Ot.alternate===null?Error(i(467)):Error(i(310));nn=r,r={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Cn===null?Ot.memoizedState=Cn=r:Cn=Cn.next=r}return Cn}var jc;jc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ll(r){var a=ol;return ol+=1,Gs===null&&(Gs=[]),r=l2(Gs,r,a),a=Ot,(Cn===null?a.memoizedState:Cn.next)===null&&(a=a.alternate,C.H=a===null||a.memoizedState===null?Qa:sa),r}function qc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ll(r);if(r.$$typeof===b)return Jn(r)}throw Error(i(438,String(r)))}function Td(r){var a=null,o=Ot.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=Ot.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=jc(),Ot.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(r),u=0;u<r;u++)o[u]=k;return a.index++,o}function ki(r,a){return typeof a=="function"?a(r):a}function Wc(r){var a=Dn();return Ed(a,nn,r)}function Ed(r,a,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var m=r.baseQueue,v=u.pending;if(v!==null){if(m!==null){var M=m.next;m.next=v.next,v.next=M}a.baseQueue=m=v,u.pending=null}if(v=r.baseState,m===null)r.memoizedState=v;else{a=m.next;var I=M=null,B=null,ee=a,Te=!1;do{var ke=ee.lane&-536870913;if(ke!==ee.lane?(Wt&ke)===ke:(aa&ke)===ke){var me=ee.revertLane;if(me===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ke===Bs&&(Te=!0);else if((aa&me)===me){ee=ee.next,me===Bs&&(Te=!0);continue}else ke={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},B===null?(I=B=ke,M=v):B=B.next=ke,Ot.lanes|=me,ma|=me;ke=ee.action,Xa&&o(v,ke),v=ee.hasEagerState?ee.eagerState:o(v,ke)}else me={lane:ke,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},B===null?(I=B=me,M=v):B=B.next=me,Ot.lanes|=ke,ma|=ke;ee=ee.next}while(ee!==null&&ee!==a);if(B===null?M=v:B.next=I,!xr(v,r.memoizedState)&&(Hn=!0,Te&&(o=Hs,o!==null)))throw o;r.memoizedState=v,r.baseState=M,r.baseQueue=B,u.lastRenderedState=v}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Md(r){var a=Dn(),o=a.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,v=a.memoizedState;if(m!==null){o.pending=null;var M=m=m.next;do v=r(v,M.action),M=M.next;while(M!==m);xr(v,a.memoizedState)||(Hn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),o.lastRenderedState=v}return[v,u]}function _2(r,a,o){var u=Ot,m=Dn(),v=Xt;if(v){if(o===void 0)throw Error(i(407));o=o()}else o=a();var M=!xr((nn||m).memoizedState,o);if(M&&(m.memoizedState=o,Hn=!0),m=m.queue,Dd(S2.bind(null,u,m,r),[r]),m.getSnapshot!==a||M||Cn!==null&&Cn.memoizedState.tag&1){if(u.flags|=2048,js(9,x2.bind(null,u,m,o,a),{destroy:void 0},null),hn===null)throw Error(i(349));v||(aa&60)!==0||w2(u,a,o)}return o}function w2(r,a,o){r.flags|=16384,r={getSnapshot:a,value:o},a=Ot.updateQueue,a===null?(a=jc(),Ot.updateQueue=a,a.stores=[r]):(o=a.stores,o===null?a.stores=[r]:o.push(r))}function x2(r,a,o,u){a.value=o,a.getSnapshot=u,T2(a)&&E2(r)}function S2(r,a,o){return o(function(){T2(a)&&E2(r)})}function T2(r){var a=r.getSnapshot;r=r.value;try{var o=a();return!xr(r,o)}catch{return!0}}function E2(r){var a=na(r,2);a!==null&&lr(a,r,2)}function Ad(r){var a=gr();if(typeof r=="function"){var o=r;if(r=o(),Xa){ot(!0);try{o()}finally{ot(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:r},a}function M2(r,a,o,u){return r.baseState=o,Ed(r,nn,typeof u=="function"?u:ki)}function cD(r,a,o,u,m){if(Qc(r))throw Error(i(485));if(r=a.action,r!==null){var v={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){v.listeners.push(M)}};C.T!==null?o(!0):v.isTransition=!1,u(v),o=a.pending,o===null?(v.next=a.pending=v,A2(a,v)):(v.next=o.next,a.pending=o.next=v)}}function A2(r,a){var o=a.action,u=a.payload,m=r.state;if(a.isTransition){var v=C.T,M={};C.T=M;try{var I=o(m,u),B=C.S;B!==null&&B(M,I),C2(r,a,I)}catch(ee){Cd(r,a,ee)}finally{C.T=v}}else try{v=o(m,u),C2(r,a,v)}catch(ee){Cd(r,a,ee)}}function C2(r,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){D2(r,a,u)},function(u){return Cd(r,a,u)}):D2(r,a,o)}function D2(r,a,o){a.status="fulfilled",a.value=o,R2(a),r.state=o,a=r.pending,a!==null&&(o=a.next,o===a?r.pending=null:(o=o.next,a.next=o,A2(r,o)))}function Cd(r,a,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,R2(a),a=a.next;while(a!==u)}r.action=null}function R2(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function k2(r,a){return a}function P2(r,a){if(Xt){var o=hn.formState;if(o!==null){e:{var u=Ot;if(Xt){if(Yn){t:{for(var m=Yn,v=di;m.nodeType!==8;){if(!v){m=null;break t}if(m=ri(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){Yn=ri(m.nextSibling),u=m.data==="F!";break e}}qa(u)}u=!1}u&&(a=o[0])}}return o=gr(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k2,lastRenderedState:a},o.queue=u,o=Z2.bind(null,Ot,u),u.dispatch=o,u=Ad(!1),v=Id.bind(null,Ot,!1,u.queue),u=gr(),m={state:a,dispatch:null,action:r,pending:null},u.queue=m,o=cD.bind(null,Ot,m,v,o),m.dispatch=o,u.memoizedState=r,[a,o,!1]}function L2(r){var a=Dn();return I2(a,nn,r)}function I2(r,a,o){a=Ed(r,a,k2)[0],r=Wc(ki)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?ll(a):a;var u=Dn(),m=u.queue,v=m.dispatch;return o!==u.memoizedState&&(Ot.flags|=2048,js(9,uD.bind(null,m,o),{destroy:void 0},null)),[a,v,r]}function uD(r,a){r.action=a}function O2(r){var a=Dn(),o=nn;if(o!==null)return I2(a,o,r);Dn(),a=a.memoizedState,o=Dn();var u=o.queue.dispatch;return o.memoizedState=r,[a,u,!1]}function js(r,a,o,u){return r={tag:r,create:a,inst:o,deps:u,next:null},a=Ot.updateQueue,a===null&&(a=jc(),Ot.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,a.lastEffect=r),r}function U2(){return Dn().memoizedState}function Yc(r,a,o,u){var m=gr();Ot.flags|=r,m.memoizedState=js(1|a,o,{destroy:void 0},u===void 0?null:u)}function Xc(r,a,o,u){var m=Dn();u=u===void 0?null:u;var v=m.memoizedState.inst;nn!==null&&u!==null&&vd(u,nn.memoizedState.deps)?m.memoizedState=js(a,o,v,u):(Ot.flags|=r,m.memoizedState=js(1|a,o,v,u))}function N2(r,a){Yc(8390656,8,r,a)}function Dd(r,a){Xc(2048,8,r,a)}function F2(r,a){return Xc(4,2,r,a)}function z2(r,a){return Xc(4,4,r,a)}function B2(r,a){if(typeof a=="function"){r=r();var o=a(r);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function H2(r,a,o){o=o!=null?o.concat([r]):null,Xc(4,4,B2.bind(null,a,r),o)}function Rd(){}function V2(r,a){var o=Dn();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&vd(a,u[1])?u[0]:(o.memoizedState=[r,a],r)}function G2(r,a){var o=Dn();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&vd(a,u[1]))return u[0];if(u=r(),Xa){ot(!0);try{r()}finally{ot(!1)}}return o.memoizedState=[u,a],u}function kd(r,a,o){return o===void 0||(aa&1073741824)!==0?r.memoizedState=a:(r.memoizedState=o,r=qy(),Ot.lanes|=r,ma|=r,o)}function j2(r,a,o,u){return xr(o,a)?o:zs.current!==null?(r=kd(r,o,u),xr(r,a)||(Hn=!0),r):(aa&42)===0?(Hn=!0,r.memoizedState=o):(r=qy(),Ot.lanes|=r,ma|=r,a)}function q2(r,a,o,u,m){var v=Q.p;Q.p=v!==0&&8>v?v:8;var M=C.T,I={};C.T=I,Id(r,!1,a,o);try{var B=m(),ee=C.S;if(ee!==null&&ee(I,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var Te=sD(B,u);cl(r,a,Te,Mr(r))}else cl(r,a,u,Mr(r))}catch(ke){cl(r,a,{then:function(){},status:"rejected",reason:ke},Mr())}finally{Q.p=v,C.T=M}}function hD(){}function Pd(r,a,o,u){if(r.tag!==5)throw Error(i(476));var m=W2(r).queue;q2(r,m,a,be,o===null?hD:function(){return Y2(r),o(u)})}function W2(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:be},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:o},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function Y2(r){var a=W2(r).next.queue;cl(r,a,{},Mr())}function Ld(){return Jn(Dl)}function X2(){return Dn().memoizedState}function Q2(){return Dn().memoizedState}function dD(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var o=Mr();r=ca(o);var u=ua(a,r,o);u!==null&&(lr(u,a,o),dl(u,a,o)),a={cache:gd()},r.payload=a;return}a=a.return}}function fD(r,a,o){var u=Mr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Qc(r)?K2(a,o):(o=cd(r,a,o,u),o!==null&&(lr(o,r,u),J2(o,a,u)))}function Z2(r,a,o){var u=Mr();cl(r,a,o,u)}function cl(r,a,o,u){var m={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qc(r))K2(a,m);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var M=a.lastRenderedState,I=v(M,o);if(m.hasEagerState=!0,m.eagerState=I,xr(I,M))return Pc(r,a,m,0),hn===null&&kc(),!1}catch{}finally{}if(o=cd(r,a,m,u),o!==null)return lr(o,r,u),J2(o,a,u),!0}return!1}function Id(r,a,o,u){if(u={lane:2,revertLane:Tf(),action:u,hasEagerState:!1,eagerState:null,next:null},Qc(r)){if(a)throw Error(i(479))}else a=cd(r,o,u,2),a!==null&&lr(a,r,2)}function Qc(r){var a=r.alternate;return r===Ot||a!==null&&a===Ot}function K2(r,a){Vs=Vc=!0;var o=r.pending;o===null?a.next=a:(a.next=o.next,o.next=a),r.pending=a}function J2(r,a,o){if((o&4194176)!==0){var u=a.lanes;u&=r.pendingLanes,o|=u,a.lanes=o,et(r,o)}}var pi={readContext:Jn,use:qc,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En};pi.useCacheRefresh=En,pi.useMemoCache=En,pi.useHostTransitionStatus=En,pi.useFormState=En,pi.useActionState=En,pi.useOptimistic=En;var Qa={readContext:Jn,use:qc,useCallback:function(r,a){return gr().memoizedState=[r,a===void 0?null:a],r},useContext:Jn,useEffect:N2,useImperativeHandle:function(r,a,o){o=o!=null?o.concat([r]):null,Yc(4194308,4,B2.bind(null,a,r),o)},useLayoutEffect:function(r,a){return Yc(4194308,4,r,a)},useInsertionEffect:function(r,a){Yc(4,2,r,a)},useMemo:function(r,a){var o=gr();a=a===void 0?null:a;var u=r();if(Xa){ot(!0);try{r()}finally{ot(!1)}}return o.memoizedState=[u,a],u},useReducer:function(r,a,o){var u=gr();if(o!==void 0){var m=o(a);if(Xa){ot(!0);try{o(a)}finally{ot(!1)}}}else m=a;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=fD.bind(null,Ot,r),[u.memoizedState,r]},useRef:function(r){var a=gr();return r={current:r},a.memoizedState=r},useState:function(r){r=Ad(r);var a=r.queue,o=Z2.bind(null,Ot,a);return a.dispatch=o,[r.memoizedState,o]},useDebugValue:Rd,useDeferredValue:function(r,a){var o=gr();return kd(o,r,a)},useTransition:function(){var r=Ad(!1);return r=q2.bind(null,Ot,r.queue,!0,!1),gr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,o){var u=Ot,m=gr();if(Xt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=a(),hn===null)throw Error(i(349));(Wt&60)!==0||w2(u,a,o)}m.memoizedState=o;var v={value:o,getSnapshot:a};return m.queue=v,N2(S2.bind(null,u,v,r),[r]),u.flags|=2048,js(9,x2.bind(null,u,v,o,a),{destroy:void 0},null),o},useId:function(){var r=gr(),a=hn.identifierPrefix;if(Xt){var o=Di,u=Ci;o=(u&~(1<<32-$e(u)-1)).toString(32)+o,a=":"+a+"R"+o,o=Gc++,0<o&&(a+="H"+o.toString(32)),a+=":"}else o=oD++,a=":"+a+"r"+o.toString(32)+":";return r.memoizedState=a},useCacheRefresh:function(){return gr().memoizedState=dD.bind(null,Ot)}};Qa.useMemoCache=Td,Qa.useHostTransitionStatus=Ld,Qa.useFormState=P2,Qa.useActionState=P2,Qa.useOptimistic=function(r){var a=gr();a.memoizedState=a.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=Id.bind(null,Ot,!0,o),o.dispatch=a,[r,a]};var sa={readContext:Jn,use:qc,useCallback:V2,useContext:Jn,useEffect:Dd,useImperativeHandle:H2,useInsertionEffect:F2,useLayoutEffect:z2,useMemo:G2,useReducer:Wc,useRef:U2,useState:function(){return Wc(ki)},useDebugValue:Rd,useDeferredValue:function(r,a){var o=Dn();return j2(o,nn.memoizedState,r,a)},useTransition:function(){var r=Wc(ki)[0],a=Dn().memoizedState;return[typeof r=="boolean"?r:ll(r),a]},useSyncExternalStore:_2,useId:X2};sa.useCacheRefresh=Q2,sa.useMemoCache=Td,sa.useHostTransitionStatus=Ld,sa.useFormState=L2,sa.useActionState=L2,sa.useOptimistic=function(r,a){var o=Dn();return M2(o,nn,r,a)};var Za={readContext:Jn,use:qc,useCallback:V2,useContext:Jn,useEffect:Dd,useImperativeHandle:H2,useInsertionEffect:F2,useLayoutEffect:z2,useMemo:G2,useReducer:Md,useRef:U2,useState:function(){return Md(ki)},useDebugValue:Rd,useDeferredValue:function(r,a){var o=Dn();return nn===null?kd(o,r,a):j2(o,nn.memoizedState,r,a)},useTransition:function(){var r=Md(ki)[0],a=Dn().memoizedState;return[typeof r=="boolean"?r:ll(r),a]},useSyncExternalStore:_2,useId:X2};Za.useCacheRefresh=Q2,Za.useMemoCache=Td,Za.useHostTransitionStatus=Ld,Za.useFormState=O2,Za.useActionState=O2,Za.useOptimistic=function(r,a){var o=Dn();return nn!==null?M2(o,nn,r,a):(o.baseState=r,[r,o.queue.dispatch])};function Od(r,a,o,u){a=r.memoizedState,o=o(u,a),o=o==null?a:D({},a,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Ud={isMounted:function(r){return(r=r._reactInternals)?X(r)===r:!1},enqueueSetState:function(r,a,o){r=r._reactInternals;var u=Mr(),m=ca(u);m.payload=a,o!=null&&(m.callback=o),a=ua(r,m,u),a!==null&&(lr(a,r,u),dl(a,r,u))},enqueueReplaceState:function(r,a,o){r=r._reactInternals;var u=Mr(),m=ca(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=ua(r,m,u),a!==null&&(lr(a,r,u),dl(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var o=Mr(),u=ca(o);u.tag=2,a!=null&&(u.callback=a),a=ua(r,u,o),a!==null&&(lr(a,r,o),dl(a,r,o))}};function $2(r,a,o,u,m,v,M){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,v,M):a.prototype&&a.prototype.isPureReactComponent?!Zo(o,u)||!Zo(m,v):!0}function ey(r,a,o,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==r&&Ud.enqueueReplaceState(a,a.state,null)}function Ka(r,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(r=r.defaultProps){o===a&&(o=D({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}var Zc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function ty(r){Zc(r)}function ny(r){console.error(r)}function ry(r){Zc(r)}function Kc(r,a){try{var o=r.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function iy(r,a,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Nd(r,a,o){return o=ca(o),o.tag=3,o.payload={element:null},o.callback=function(){Kc(r,a)},o}function ay(r){return r=ca(r),r.tag=3,r}function sy(r,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var v=u.value;r.payload=function(){return m(v)},r.callback=function(){iy(a,o,u)}}var M=o.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(r.callback=function(){iy(a,o,u),typeof m!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function pD(r,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&hl(a,o,m,!0),o=zr.current,o!==null){switch(o.tag){case 13:return fi===null?vf():o.alternate===null&&xn===0&&(xn=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===fd?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),wf(r,u,m)),!1;case 22:return o.flags|=65536,u===fd?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),wf(r,u,m)),!1}throw Error(i(435,o.tag))}return wf(r,u,m),vf(),!1}if(Xt)return a=zr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==dd&&(r=Error(i(422),{cause:u}),el(Ur(r,o)))):(u!==dd&&(a=Error(i(423),{cause:u}),el(Ur(a,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Ur(u,o),m=Nd(r.stateNode,u,m),Jd(r,m),xn!==4&&(xn=2)),!1;var v=Error(i(520),{cause:u});if(v=Ur(v,o),_l===null?_l=[v]:_l.push(v),xn!==4&&(xn=2),a===null)return!0;u=Ur(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=Nd(o.stateNode,u,r),Jd(o,r),!1;case 1:if(a=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ga===null||!ga.has(v))))return o.flags|=65536,m&=-m,o.lanes|=m,m=ay(m),sy(m,r,o,u),Jd(o,m),!1}o=o.return}while(o!==null);return!1}var oy=Error(i(461)),Hn=!1;function Xn(r,a,o,u){a.child=r===null?d2(a,null,o,u):Wa(a,r.child,o,u)}function ly(r,a,o,u,m){o=o.render;var v=a.ref;if("ref"in u){var M={};for(var I in u)I!=="ref"&&(M[I]=u[I])}else M=u;return $a(a),u=_d(r,a,o,M,v,m),I=wd(),r!==null&&!Hn?(xd(r,a,m),Pi(r,a,m)):(Xt&&I&&ud(a),a.flags|=1,Xn(r,a,u,m),a.child)}function cy(r,a,o,u,m){if(r===null){var v=o.type;return typeof v=="function"&&!of(v)&&v.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=v,uy(r,a,v,u,m)):(r=nu(o.type,null,u,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(v=r.child,!Wd(r,m)){var M=v.memoizedProps;if(o=o.compare,o=o!==null?o:Zo,o(M,u)&&r.ref===a.ref)return Pi(r,a,m)}return a.flags|=1,r=pa(v,u),r.ref=a.ref,r.return=a,a.child=r}function uy(r,a,o,u,m){if(r!==null){var v=r.memoizedProps;if(Zo(v,u)&&r.ref===a.ref)if(Hn=!1,a.pendingProps=u=v,Wd(r,m))(r.flags&131072)!==0&&(Hn=!0);else return a.lanes=r.lanes,Pi(r,a,m)}return Fd(r,a,o,u,m)}function hy(r,a,o){var u=a.pendingProps,m=u.children,v=(a.stateNode._pendingVisibility&2)!==0,M=r!==null?r.memoizedState:null;if(ul(r,a),u.mode==="hidden"||v){if((a.flags&128)!==0){if(u=M!==null?M.baseLanes|o:o,r!==null){for(m=a.child=r.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;a.childLanes=v&~u}else a.childLanes=0,a.child=null;return dy(r,a,u,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Hc(a,M!==null?M.cachePool:null),M!==null?f2(a,M):pd(),p2(a);else return a.lanes=a.childLanes=536870912,dy(r,a,M!==null?M.baseLanes|o:o,o)}else M!==null?(Hc(a,M.cachePool),f2(a,M),ia(),a.memoizedState=null):(r!==null&&Hc(a,null),pd(),ia());return Xn(r,a,m,o),a.child}function dy(r,a,o,u){var m=bd();return m=m===null?null:{parent:On._currentValue,pool:m},a.memoizedState={baseLanes:o,cachePool:m},r!==null&&Hc(a,null),pd(),p2(a),r!==null&&hl(r,a,u,!0),null}function ul(r,a){var o=a.ref;if(o===null)r!==null&&r.ref!==null&&(a.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(a.flags|=2097664)}}function Fd(r,a,o,u,m){return $a(a),o=_d(r,a,o,u,void 0,m),u=wd(),r!==null&&!Hn?(xd(r,a,m),Pi(r,a,m)):(Xt&&u&&ud(a),a.flags|=1,Xn(r,a,o,m),a.child)}function fy(r,a,o,u,m,v){return $a(a),a.updateQueue=null,o=v2(a,u,o,m),b2(r),u=wd(),r!==null&&!Hn?(xd(r,a,v),Pi(r,a,v)):(Xt&&u&&ud(a),a.flags|=1,Xn(r,a,o,v),a.child)}function py(r,a,o,u,m){if($a(a),a.stateNode===null){var v=Os,M=o.contextType;typeof M=="object"&&M!==null&&(v=Jn(M)),v=new o(u,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ud,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=u,v.state=a.memoizedState,v.refs={},Zd(a),M=o.contextType,v.context=typeof M=="object"&&M!==null?Jn(M):Os,v.state=a.memoizedState,M=o.getDerivedStateFromProps,typeof M=="function"&&(Od(a,o,M,u),v.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(M=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),M!==v.state&&Ud.enqueueReplaceState(v,v.state,null),pl(a,u,v,m),fl(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){v=a.stateNode;var I=a.memoizedProps,B=Ka(o,I);v.props=B;var ee=v.context,Te=o.contextType;M=Os,typeof Te=="object"&&Te!==null&&(M=Jn(Te));var ke=o.getDerivedStateFromProps;Te=typeof ke=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,Te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||ee!==M)&&ey(a,v,u,M),la=!1;var me=a.memoizedState;v.state=me,pl(a,u,v,m),fl(),ee=a.memoizedState,I||me!==ee||la?(typeof ke=="function"&&(Od(a,o,ke,u),ee=a.memoizedState),(B=la||$2(a,o,B,u,me,ee,M))?(Te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=ee),v.props=u,v.state=ee,v.context=M,u=B):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{v=a.stateNode,Kd(r,a),M=a.memoizedProps,Te=Ka(o,M),v.props=Te,ke=a.pendingProps,me=v.context,ee=o.contextType,B=Os,typeof ee=="object"&&ee!==null&&(B=Jn(ee)),I=o.getDerivedStateFromProps,(ee=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M!==ke||me!==B)&&ey(a,v,u,B),la=!1,me=a.memoizedState,v.state=me,pl(a,u,v,m),fl();var we=a.memoizedState;M!==ke||me!==we||la||r!==null&&r.dependencies!==null&&Jc(r.dependencies)?(typeof I=="function"&&(Od(a,o,I,u),we=a.memoizedState),(Te=la||$2(a,o,Te,u,me,we,B)||r!==null&&r.dependencies!==null&&Jc(r.dependencies))?(ee||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,we,B),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,we,B)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||M===r.memoizedProps&&me===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&me===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=we),v.props=u,v.state=we,v.context=B,u=Te):(typeof v.componentDidUpdate!="function"||M===r.memoizedProps&&me===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&me===r.memoizedState||(a.flags|=1024),u=!1)}return v=u,ul(r,a),u=(a.flags&128)!==0,v||u?(v=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,r!==null&&u?(a.child=Wa(a,r.child,null,m),a.child=Wa(a,null,o,m)):Xn(r,a,o,m),a.memoizedState=v.state,r=a.child):r=Pi(r,a,m),r}function my(r,a,o,u){return $o(),a.flags|=256,Xn(r,a,o,u),a.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Bd(r){return{baseLanes:r,cachePool:y2()}}function Hd(r,a,o){return r=r!==null?r.childLanes&~o:0,a&&(r|=Gr),r}function gy(r,a,o){var u=a.pendingProps,m=!1,v=(a.flags&128)!==0,M;if((M=v)||(M=r!==null&&r.memoizedState===null?!1:(In.current&2)!==0),M&&(m=!0,a.flags&=-129),M=(a.flags&32)!==0,a.flags&=-33,r===null){if(Xt){if(m?ra(a):ia(),Xt){var I=Yn,B;if(B=I){e:{for(B=I,I=di;B.nodeType!==8;){if(!I){I=null;break e}if(B=ri(B.nextSibling),B===null){I=null;break e}}I=B}I!==null?(a.memoizedState={dehydrated:I,treeContext:Ga!==null?{id:Ci,overflow:Di}:null,retryLane:536870912},B=Vr(18,null,null,0),B.stateNode=I,B.return=a,a.child=B,or=a,Yn=null,B=!0):B=!1}B||qa(a)}if(I=a.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return I.data==="$!"?a.lanes=16:a.lanes=536870912,null;Ri(a)}return I=u.children,u=u.fallback,m?(ia(),m=a.mode,I=Gd({mode:"hidden",children:I},m),u=ts(u,m,o,null),I.return=a,u.return=a,I.sibling=u,a.child=I,m=a.child,m.memoizedState=Bd(o),m.childLanes=Hd(r,M,o),a.memoizedState=zd,u):(ra(a),Vd(a,I))}if(B=r.memoizedState,B!==null&&(I=B.dehydrated,I!==null)){if(v)a.flags&256?(ra(a),a.flags&=-257,a=jd(r,a,o)):a.memoizedState!==null?(ia(),a.child=r.child,a.flags|=128,a=null):(ia(),m=u.fallback,I=a.mode,u=Gd({mode:"visible",children:u.children},I),m=ts(m,I,o,null),m.flags|=2,u.return=a,m.return=a,u.sibling=m,a.child=u,Wa(a,r.child,null,o),u=a.child,u.memoizedState=Bd(o),u.childLanes=Hd(r,M,o),a.memoizedState=zd,a=m);else if(ra(a),I.data==="$!"){if(M=I.nextSibling&&I.nextSibling.dataset,M)var ee=M.dgst;M=ee,u=Error(i(419)),u.stack="",u.digest=M,el({value:u,source:null,stack:null}),a=jd(r,a,o)}else if(Hn||hl(r,a,o,!1),M=(o&r.childLanes)!==0,Hn||M){if(M=hn,M!==null){if(u=o&-o,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(M.suspendedLanes|o))!==0?0:u,u!==0&&u!==B.retryLane)throw B.retryLane=u,na(r,u),lr(M,r,u),oy}I.data==="$?"||vf(),a=jd(r,a,o)}else I.data==="$?"?(a.flags|=128,a.child=r.child,a=DD.bind(null,r),I._reactRetry=a,a=null):(r=B.treeContext,Yn=ri(I.nextSibling),or=a,Xt=!0,ti=null,di=!1,r!==null&&(Nr[Fr++]=Ci,Nr[Fr++]=Di,Nr[Fr++]=Ga,Ci=r.id,Di=r.overflow,Ga=a),a=Vd(a,u.children),a.flags|=4096);return a}return m?(ia(),m=u.fallback,I=a.mode,B=r.child,ee=B.sibling,u=pa(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&31457280,ee!==null?m=pa(ee,m):(m=ts(m,I,o,null),m.flags|=2),m.return=a,u.return=a,u.sibling=m,a.child=u,u=m,m=a.child,I=r.child.memoizedState,I===null?I=Bd(o):(B=I.cachePool,B!==null?(ee=On._currentValue,B=B.parent!==ee?{parent:ee,pool:ee}:B):B=y2(),I={baseLanes:I.baseLanes|o,cachePool:B}),m.memoizedState=I,m.childLanes=Hd(r,M,o),a.memoizedState=zd,u):(ra(a),o=r.child,r=o.sibling,o=pa(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,r!==null&&(M=a.deletions,M===null?(a.deletions=[r],a.flags|=16):M.push(r)),a.child=o,a.memoizedState=null,o)}function Vd(r,a){return a=Gd({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Gd(r,a){return Vy(r,a,0,null)}function jd(r,a,o){return Wa(a,r.child,null,o),r=Vd(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function yy(r,a,o){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),Xd(r.return,a,o)}function qd(r,a,o,u,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=m)}function by(r,a,o){var u=a.pendingProps,m=u.revealOrder,v=u.tail;if(Xn(r,a,u.children,o),u=In.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&yy(r,o,a);else if(r.tag===19)yy(r,o,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(Ue(In,u),m){case"forwards":for(o=a.child,m=null;o!==null;)r=o.alternate,r!==null&&Bc(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),qd(a,!1,m,o,v);break;case"backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&Bc(r)===null){a.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}qd(a,!0,o,null,v);break;case"together":qd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Pi(r,a,o){if(r!==null&&(a.dependencies=r.dependencies),ma|=a.lanes,(o&a.childLanes)===0)if(r!==null){if(hl(r,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,o=pa(r,r.pendingProps),a.child=o,o.return=a;r.sibling!==null;)r=r.sibling,o=o.sibling=pa(r,r.pendingProps),o.return=a;o.sibling=null}return a.child}function Wd(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Jc(r)))}function mD(r,a,o){switch(a.tag){case 3:mn(a,a.stateNode.containerInfo),oa(a,On,r.memoizedState.cache),$o();break;case 27:case 5:yt(a);break;case 4:mn(a,a.stateNode.containerInfo);break;case 10:oa(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(ra(a),a.flags|=128,null):(o&a.child.childLanes)!==0?gy(r,a,o):(ra(a),r=Pi(r,a,o),r!==null?r.sibling:null);ra(a);break;case 19:var m=(r.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(hl(r,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return by(r,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ue(In,In.current),u)break;return null;case 22:case 23:return a.lanes=0,hy(r,a,o);case 24:oa(a,On,r.memoizedState.cache)}return Pi(r,a,o)}function vy(r,a,o){if(r!==null)if(r.memoizedProps!==a.pendingProps)Hn=!0;else{if(!Wd(r,o)&&(a.flags&128)===0)return Hn=!1,mD(r,a,o);Hn=(r.flags&131072)!==0}else Hn=!1,Xt&&(a.flags&1048576)!==0&&r2(a,Oc,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var u=a.elementType,m=u._init;if(u=m(u._payload),a.type=u,typeof u=="function")of(u)?(r=Ka(u,r),a.tag=1,a=py(null,a,u,r,o)):(a.tag=0,a=Fd(null,a,u,r,o));else{if(u!=null){if(m=u.$$typeof,m===x){a.tag=11,a=ly(null,a,u,r,o);break e}else if(m===_){a.tag=14,a=cy(null,a,u,r,o);break e}}throw a=H(u)||u,Error(i(306,a,""))}}return a;case 0:return Fd(r,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=Ka(u,a.pendingProps),py(r,a,u,m,o);case 3:e:{if(mn(a,a.stateNode.containerInfo),r===null)throw Error(i(387));var v=a.pendingProps;m=a.memoizedState,u=m.element,Kd(r,a),pl(a,v,null,o);var M=a.memoizedState;if(v=M.cache,oa(a,On,v),v!==m.cache&&Qd(a,[On],o,!0),fl(),v=M.element,m.isDehydrated)if(m={element:v,isDehydrated:!1,cache:M.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=my(r,a,v,o);break e}else if(v!==u){u=Ur(Error(i(424)),a),el(u),a=my(r,a,v,o);break e}else for(Yn=ri(a.stateNode.containerInfo.firstChild),or=a,Xt=!0,ti=null,di=!0,o=d2(a,null,v,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if($o(),v===u){a=Pi(r,a,o);break e}Xn(r,a,v,o)}a=a.child}return a;case 26:return ul(r,a),r===null?(o=xb(a.type,null,a.pendingProps,null))?a.memoizedState=o:Xt||(o=a.type,r=a.pendingProps,u=pu(xt.current).createElement(o),u[at]=a,u[Xe]=r,Qn(u,o,r),le(u),a.stateNode=u):a.memoizedState=xb(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return yt(a),r===null&&Xt&&(u=a.stateNode=vb(a.type,a.pendingProps,xt.current),or=a,di=!0,Yn=ri(u.firstChild)),u=a.pendingProps.children,r!==null||Xt?Xn(r,a,u,o):a.child=Wa(a,null,u,o),ul(r,a),a.child;case 5:return r===null&&Xt&&((m=u=Yn)&&(u=qD(u,a.type,a.pendingProps,di),u!==null?(a.stateNode=u,or=a,Yn=ri(u.firstChild),di=!1,m=!0):m=!1),m||qa(a)),yt(a),m=a.type,v=a.pendingProps,M=r!==null?r.memoizedProps:null,u=v.children,Lf(m,v)?u=null:M!==null&&Lf(m,M)&&(a.flags|=32),a.memoizedState!==null&&(m=_d(r,a,lD,null,null,o),Dl._currentValue=m),ul(r,a),Xn(r,a,u,o),a.child;case 6:return r===null&&Xt&&((r=o=Yn)&&(o=WD(o,a.pendingProps,di),o!==null?(a.stateNode=o,or=a,Yn=null,r=!0):r=!1),r||qa(a)),null;case 13:return gy(r,a,o);case 4:return mn(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=Wa(a,null,u,o):Xn(r,a,u,o),a.child;case 11:return ly(r,a,a.type,a.pendingProps,o);case 7:return Xn(r,a,a.pendingProps,o),a.child;case 8:return Xn(r,a,a.pendingProps.children,o),a.child;case 12:return Xn(r,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,oa(a,a.type,u.value),Xn(r,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,$a(a),m=Jn(m),u=u(m),a.flags|=1,Xn(r,a,u,o),a.child;case 14:return cy(r,a,a.type,a.pendingProps,o);case 15:return uy(r,a,a.type,a.pendingProps,o);case 19:return by(r,a,o);case 22:return hy(r,a,o);case 24:return $a(a),u=Jn(On),r===null?(m=bd(),m===null&&(m=hn,v=gd(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=o),m=v),a.memoizedState={parent:u,cache:m},Zd(a),oa(a,On,m)):((r.lanes&o)!==0&&(Kd(r,a),pl(a,null,null,o),fl()),m=r.memoizedState,v=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),oa(a,On,u)):(u=v.cache,oa(a,On,u),u!==m.cache&&Qd(a,[On],o,!0))),Xn(r,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}var Yd=Ne(null),Ja=null,Li=null;function oa(r,a,o){Ue(Yd,a._currentValue),a._currentValue=o}function Ii(r){r._currentValue=Yd.current,rt(Yd)}function Xd(r,a,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===o)break;r=r.return}}function Qd(r,a,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var v=m.dependencies;if(v!==null){var M=m.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=m;for(var B=0;B<a.length;B++)if(I.context===a[B]){v.lanes|=o,I=v.alternate,I!==null&&(I.lanes|=o),Xd(v.return,o,r),u||(M=null);break e}v=I.next}}else if(m.tag===18){if(M=m.return,M===null)throw Error(i(341));M.lanes|=o,v=M.alternate,v!==null&&(v.lanes|=o),Xd(M,o,r),M=null}else M=m.child;if(M!==null)M.return=m;else for(M=m;M!==null;){if(M===r){M=null;break}if(m=M.sibling,m!==null){m.return=M.return,M=m;break}M=M.return}m=M}}function hl(r,a,o,u){r=null;for(var m=a,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var M=m.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var I=m.type;xr(m.pendingProps.value,M.value)||(r!==null?r.push(I):r=[I])}}else if(m===q.current){if(M=m.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Dl):r=[Dl])}m=m.return}r!==null&&Qd(a,r,o,u),a.flags|=262144}function Jc(r){for(r=r.firstContext;r!==null;){if(!xr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function $a(r){Ja=r,Li=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Jn(r){return _y(Ja,r)}function $c(r,a){return Ja===null&&$a(r),_y(r,a)}function _y(r,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Li===null){if(r===null)throw Error(i(308));Li=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Li=Li.next=a;return o}var la=!1;function Zd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kd(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ca(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ua(r,a,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(vn&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=Lc(r),t2(r,null,o),a}return Pc(r,u,a,o),Lc(r)}function dl(r,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194176)!==0)){var u=a.lanes;u&=r.pendingLanes,o|=u,a.lanes=o,et(r,o)}}function Jd(r,a){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var M={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?m=v=M:v=v.next=M,o=o.next}while(o!==null);v===null?m=v=a:v=v.next=a}else m=v=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=a:r.next=a,o.lastBaseUpdate=a}var $d=!1;function fl(){if($d){var r=Hs;if(r!==null)throw r}}function pl(r,a,o,u){$d=!1;var m=r.updateQueue;la=!1;var v=m.firstBaseUpdate,M=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var B=I,ee=B.next;B.next=null,M===null?v=ee:M.next=ee,M=B;var Te=r.alternate;Te!==null&&(Te=Te.updateQueue,I=Te.lastBaseUpdate,I!==M&&(I===null?Te.firstBaseUpdate=ee:I.next=ee,Te.lastBaseUpdate=B))}if(v!==null){var ke=m.baseState;M=0,Te=ee=B=null,I=v;do{var me=I.lane&-536870913,we=me!==I.lane;if(we?(Wt&me)===me:(u&me)===me){me!==0&&me===Bs&&($d=!0),Te!==null&&(Te=Te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ct=r,At=I;me=a;var Sn=o;switch(At.tag){case 1:if(ct=At.payload,typeof ct=="function"){ke=ct.call(Sn,ke,me);break e}ke=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=At.payload,me=typeof ct=="function"?ct.call(Sn,ke,me):ct,me==null)break e;ke=D({},ke,me);break e;case 2:la=!0}}me=I.callback,me!==null&&(r.flags|=64,we&&(r.flags|=8192),we=m.callbacks,we===null?m.callbacks=[me]:we.push(me))}else we={lane:me,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Te===null?(ee=Te=we,B=ke):Te=Te.next=we,M|=me;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;we=I,I=we.next,we.next=null,m.lastBaseUpdate=we,m.shared.pending=null}}while(!0);Te===null&&(B=ke),m.baseState=B,m.firstBaseUpdate=ee,m.lastBaseUpdate=Te,v===null&&(m.shared.lanes=0),ma|=M,r.lanes=M,r.memoizedState=ke}}function wy(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function xy(r,a){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)wy(o[r],a)}function ml(r,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var v=o.create,M=o.inst;u=v(),M.destroy=u}o=o.next}while(o!==m)}}catch(I){ln(a,a.return,I)}}function ha(r,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&r)===r){var M=u.inst,I=M.destroy;if(I!==void 0){M.destroy=void 0,m=a;var B=o;try{I()}catch(ee){ln(m,B,ee)}}}u=u.next}while(u!==v)}}catch(ee){ln(a,a.return,ee)}}function Sy(r){var a=r.updateQueue;if(a!==null){var o=r.stateNode;try{xy(a,o)}catch(u){ln(r,r.return,u)}}}function Ty(r,a,o){o.props=Ka(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){ln(r,a,u)}}function es(r,a){try{var o=r.ref;if(o!==null){var u=r.stateNode;switch(r.tag){case 26:case 27:case 5:var m=u;break;default:m=u}typeof o=="function"?r.refCleanup=o(m):o.current=m}}catch(v){ln(r,a,v)}}function Sr(r,a){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){ln(r,a,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){ln(r,a,m)}else o.current=null}function Ey(r){var a=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){ln(r,r.return,m)}}function My(r,a,o){try{var u=r.stateNode;BD(u,r.type,o,a),u[Xe]=a}catch(m){ln(r,r.return,m)}}function Ay(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function ef(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ay(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tf(r,a,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?o.nodeType===8?o.parentNode.insertBefore(r,a):o.insertBefore(r,a):(o.nodeType===8?(a=o.parentNode,a.insertBefore(r,o)):(a=o,a.appendChild(r)),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=fu));else if(u!==4&&u!==27&&(r=r.child,r!==null))for(tf(r,a,o),r=r.sibling;r!==null;)tf(r,a,o),r=r.sibling}function eu(r,a,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?o.insertBefore(r,a):o.appendChild(r);else if(u!==4&&u!==27&&(r=r.child,r!==null))for(eu(r,a,o),r=r.sibling;r!==null;)eu(r,a,o),r=r.sibling}var Oi=!1,wn=!1,nf=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,Vn=null,Dy=!1;function gD(r,a){if(r=r.containerInfo,kf=_u,r=W0(r),id(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var M=0,I=-1,B=-1,ee=0,Te=0,ke=r,me=null;t:for(;;){for(var we;ke!==o||m!==0&&ke.nodeType!==3||(I=M+m),ke!==v||u!==0&&ke.nodeType!==3||(B=M+u),ke.nodeType===3&&(M+=ke.nodeValue.length),(we=ke.firstChild)!==null;)me=ke,ke=we;for(;;){if(ke===r)break t;if(me===o&&++ee===m&&(I=M),me===v&&++Te===u&&(B=M),(we=ke.nextSibling)!==null)break;ke=me,me=ke.parentNode}ke=we}o=I===-1||B===-1?null:{start:I,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(Pf={focusedElem:r,selectionRange:o},_u=!1,Vn=a;Vn!==null;)if(a=Vn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Vn=r;else for(;Vn!==null;){switch(a=Vn,v=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,o=a,m=v.memoizedProps,v=v.memoizedState,u=o.stateNode;try{var ct=Ka(o.type,m,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(ct,v),u.__reactInternalSnapshotBeforeUpdate=r}catch(At){ln(o,o.return,At)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,o=r.nodeType,o===9)Uf(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Uf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Vn=r;break}Vn=a.return}return ct=Dy,Dy=!1,ct}function Ry(r,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ni(r,o),u&4&&ml(5,o);break;case 1:if(Ni(r,o),u&4)if(r=o.stateNode,a===null)try{r.componentDidMount()}catch(I){ln(o,o.return,I)}else{var m=Ka(o.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(m,a,r.__reactInternalSnapshotBeforeUpdate)}catch(I){ln(o,o.return,I)}}u&64&&Sy(o),u&512&&es(o,o.return);break;case 3:if(Ni(r,o),u&64&&(u=o.updateQueue,u!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{xy(u,r)}catch(I){ln(o,o.return,I)}}break;case 26:Ni(r,o),u&512&&es(o,o.return);break;case 27:case 5:Ni(r,o),a===null&&u&4&&Ey(o),u&512&&es(o,o.return);break;case 12:Ni(r,o);break;case 13:Ni(r,o),u&4&&Ly(r,o);break;case 22:if(m=o.memoizedState!==null||Oi,!m){a=a!==null&&a.memoizedState!==null||wn;var v=Oi,M=wn;Oi=m,(wn=a)&&!M?da(r,o,(o.subtreeFlags&8772)!==0):Ni(r,o),Oi=v,wn=M}u&512&&(o.memoizedProps.mode==="manual"?es(o,o.return):Sr(o,o.return));break;default:Ni(r,o)}}function ky(r){var a=r.alternate;a!==null&&(r.alternate=null,ky(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Jr(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Rn=null,Tr=!1;function Ui(r,a,o){for(o=o.child;o!==null;)Py(r,a,o),o=o.sibling}function Py(r,a,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Ze,o)}catch{}switch(o.tag){case 26:wn||Sr(o,a),Ui(r,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wn||Sr(o,a);var u=Rn,m=Tr;for(Rn=o.stateNode,Ui(r,a,o),o=o.stateNode,a=o.attributes;a.length;)o.removeAttributeNode(a[0]);Jr(o),Rn=u,Tr=m;break;case 5:wn||Sr(o,a);case 6:m=Rn;var v=Tr;if(Rn=null,Ui(r,a,o),Rn=m,Tr=v,Rn!==null)if(Tr)try{r=Rn,u=o.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)}catch(M){ln(o,a,M)}else try{Rn.removeChild(o.stateNode)}catch(M){ln(o,a,M)}break;case 18:Rn!==null&&(Tr?(a=Rn,o=o.stateNode,a.nodeType===8?Of(a.parentNode,o):a.nodeType===1&&Of(a,o),Ll(a)):Of(Rn,o.stateNode));break;case 4:u=Rn,m=Tr,Rn=o.stateNode.containerInfo,Tr=!0,Ui(r,a,o),Rn=u,Tr=m;break;case 0:case 11:case 14:case 15:wn||ha(2,o,a),wn||ha(4,o,a),Ui(r,a,o);break;case 1:wn||(Sr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Ty(o,a,u)),Ui(r,a,o);break;case 21:Ui(r,a,o);break;case 22:wn||Sr(o,a),wn=(u=wn)||o.memoizedState!==null,Ui(r,a,o),wn=u;break;default:Ui(r,a,o)}}function Ly(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ll(r)}catch(o){ln(a,a.return,o)}}function yD(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new Cy),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new Cy),a;default:throw Error(i(435,r.tag))}}function rf(r,a){var o=yD(r);a.forEach(function(u){var m=RD.bind(null,r,u);o.has(u)||(o.add(u),u.then(m,m))})}function Br(r,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],v=r,M=a,I=M;e:for(;I!==null;){switch(I.tag){case 27:case 5:Rn=I.stateNode,Tr=!1;break e;case 3:Rn=I.stateNode.containerInfo,Tr=!0;break e;case 4:Rn=I.stateNode.containerInfo,Tr=!0;break e}I=I.return}if(Rn===null)throw Error(i(160));Py(v,M,m),Rn=null,Tr=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Iy(a,r),a=a.sibling}var ni=null;function Iy(r,a){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Br(a,r),Hr(r),u&4&&(ha(3,r,r.return),ml(3,r),ha(5,r,r.return));break;case 1:Br(a,r),Hr(r),u&512&&(wn||o===null||Sr(o,o.return)),u&64&&Oi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=ni;if(Br(a,r),Hr(r),u&512&&(wn||o===null||Sr(o,o.return)),u&4){var v=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Lt]||v[at]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(u),m.head.insertBefore(v,m.querySelector("head > title"))),Qn(v,u,o),v[at]=r,le(v),u=v;break e;case"link":var M=Eb("link","href",m).get(u+(o.href||""));if(M){for(var I=0;I<M.length;I++)if(v=M[I],v.getAttribute("href")===(o.href==null?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){M.splice(I,1);break t}}v=m.createElement(u),Qn(v,u,o),m.head.appendChild(v);break;case"meta":if(M=Eb("meta","content",m).get(u+(o.content||""))){for(I=0;I<M.length;I++)if(v=M[I],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){M.splice(I,1);break t}}v=m.createElement(u),Qn(v,u,o),m.head.appendChild(v);break;default:throw Error(i(468,u))}v[at]=r,le(v),u=v}r.stateNode=u}else Mb(m,r.type,r.stateNode);else r.stateNode=Tb(m,u,r.memoizedProps);else v!==u?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,u===null?Mb(m,r.type,r.stateNode):Tb(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&My(r,r.memoizedProps,o.memoizedProps)}break;case 27:if(u&4&&r.alternate===null){m=r.stateNode,v=r.memoizedProps;try{for(var B=m.firstChild;B;){var ee=B.nextSibling,Te=B.nodeName;B[Lt]||Te==="HEAD"||Te==="BODY"||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&B.rel.toLowerCase()==="stylesheet"||m.removeChild(B),B=ee}for(var ke=r.type,me=m.attributes;me.length;)m.removeAttributeNode(me[0]);Qn(m,ke,v),m[at]=r,m[Xe]=v}catch(ct){ln(r,r.return,ct)}}case 5:if(Br(a,r),Hr(r),u&512&&(wn||o===null||Sr(o,o.return)),r.flags&32){m=r.stateNode;try{pr(m,"")}catch(ct){ln(r,r.return,ct)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,My(r,m,o!==null?o.memoizedProps:m)),u&1024&&(nf=!0);break;case 6:if(Br(a,r),Hr(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(ct){ln(r,r.return,ct)}}break;case 3:if(yu=null,m=ni,ni=mu(a.containerInfo),Br(a,r),ni=m,Hr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ll(a.containerInfo)}catch(ct){ln(r,r.return,ct)}nf&&(nf=!1,Oy(r));break;case 4:u=ni,ni=mu(r.stateNode.containerInfo),Br(a,r),Hr(r),ni=u;break;case 12:Br(a,r),Hr(r);break;case 13:Br(a,r),Hr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ff=Se()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rf(r,u)));break;case 22:if(u&512&&(wn||o===null||Sr(o,o.return)),B=r.memoizedState!==null,ee=o!==null&&o.memoizedState!==null,Te=Oi,ke=wn,Oi=Te||B,wn=ke||ee,Br(a,r),wn=ke,Oi=Te,Hr(r),a=r.stateNode,a._current=r,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,u&8192&&(a._visibility=B?a._visibility&-2:a._visibility|1,B&&(a=Oi||wn,o===null||ee||a||qs(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(o=null,a=r;;){if(a.tag===5||a.tag===26||a.tag===27){if(o===null){ee=o=a;try{if(m=ee.stateNode,B)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{M=ee.stateNode,I=ee.memoizedProps.style;var we=I!=null&&I.hasOwnProperty("display")?I.display:null;M.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(ct){ln(ee,ee.return,ct)}}}else if(a.tag===6){if(o===null){ee=a;try{ee.stateNode.nodeValue=B?"":ee.memoizedProps}catch(ct){ln(ee,ee.return,ct)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,rf(r,o))));break;case 19:Br(a,r),Hr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,rf(r,u)));break;case 21:break;default:Br(a,r),Hr(r)}}function Hr(r){var a=r.flags;if(a&2){try{if(r.tag!==27){e:{for(var o=r.return;o!==null;){if(Ay(o)){var u=o;break e}o=o.return}throw Error(i(160))}switch(u.tag){case 27:var m=u.stateNode,v=ef(r);eu(r,v,m);break;case 5:var M=u.stateNode;u.flags&32&&(pr(M,""),u.flags&=-33);var I=ef(r);eu(r,I,M);break;case 3:case 4:var B=u.stateNode.containerInfo,ee=ef(r);tf(r,ee,B);break;default:throw Error(i(161))}}}catch(Te){ln(r,r.return,Te)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Oy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Oy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Ni(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ry(r,a.alternate,a),a=a.sibling}function qs(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:ha(4,a,a.return),qs(a);break;case 1:Sr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&Ty(a,a.return,o),qs(a);break;case 26:case 27:case 5:Sr(a,a.return),qs(a);break;case 22:Sr(a,a.return),a.memoizedState===null&&qs(a);break;default:qs(a)}r=r.sibling}}function da(r,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=r,v=a,M=v.flags;switch(v.tag){case 0:case 11:case 15:da(m,v,o),ml(4,v);break;case 1:if(da(m,v,o),u=v,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ee){ln(u,u.return,ee)}if(u=v,m=u.updateQueue,m!==null){var I=u.stateNode;try{var B=m.shared.hiddenCallbacks;if(B!==null)for(m.shared.hiddenCallbacks=null,m=0;m<B.length;m++)wy(B[m],I)}catch(ee){ln(u,u.return,ee)}}o&&M&64&&Sy(v),es(v,v.return);break;case 26:case 27:case 5:da(m,v,o),o&&u===null&&M&4&&Ey(v),es(v,v.return);break;case 12:da(m,v,o);break;case 13:da(m,v,o),o&&M&4&&Ly(m,v);break;case 22:v.memoizedState===null&&da(m,v,o),es(v,v.return);break;default:da(m,v,o)}a=a.sibling}}function af(r,a){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&al(o))}function sf(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&al(r))}function fa(r,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Uy(r,a,o,u),a=a.sibling}function Uy(r,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:fa(r,a,o,u),m&2048&&ml(9,a);break;case 3:fa(r,a,o,u),m&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&al(r)));break;case 12:if(m&2048){fa(r,a,o,u),r=a.stateNode;try{var v=a.memoizedProps,M=v.id,I=v.onPostCommit;typeof I=="function"&&I(M,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){ln(a,a.return,B)}}else fa(r,a,o,u);break;case 23:break;case 22:v=a.stateNode,a.memoizedState!==null?v._visibility&4?fa(r,a,o,u):gl(r,a):v._visibility&4?fa(r,a,o,u):(v._visibility|=4,Ws(r,a,o,u,(a.subtreeFlags&10256)!==0)),m&2048&&af(a.alternate,a);break;case 24:fa(r,a,o,u),m&2048&&sf(a.alternate,a);break;default:fa(r,a,o,u)}}function Ws(r,a,o,u,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=r,M=a,I=o,B=u,ee=M.flags;switch(M.tag){case 0:case 11:case 15:Ws(v,M,I,B,m),ml(8,M);break;case 23:break;case 22:var Te=M.stateNode;M.memoizedState!==null?Te._visibility&4?Ws(v,M,I,B,m):gl(v,M):(Te._visibility|=4,Ws(v,M,I,B,m)),m&&ee&2048&&af(M.alternate,M);break;case 24:Ws(v,M,I,B,m),m&&ee&2048&&sf(M.alternate,M);break;default:Ws(v,M,I,B,m)}a=a.sibling}}function gl(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=r,u=a,m=u.flags;switch(u.tag){case 22:gl(o,u),m&2048&&af(u.alternate,u);break;case 24:gl(o,u),m&2048&&sf(u.alternate,u);break;default:gl(o,u)}a=a.sibling}}var yl=8192;function Ys(r){if(r.subtreeFlags&yl)for(r=r.child;r!==null;)Ny(r),r=r.sibling}function Ny(r){switch(r.tag){case 26:Ys(r),r.flags&yl&&r.memoizedState!==null&&aR(ni,r.memoizedState,r.memoizedProps);break;case 5:Ys(r);break;case 3:case 4:var a=ni;ni=mu(r.stateNode.containerInfo),Ys(r),ni=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=yl,yl=16777216,Ys(r),yl=a):Ys(r));break;default:Ys(r)}}function Fy(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function bl(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Vn=u,By(u,r)}Fy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zy(r),r=r.sibling}function zy(r){switch(r.tag){case 0:case 11:case 15:bl(r),r.flags&2048&&ha(9,r,r.return);break;case 3:bl(r);break;case 12:bl(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&4&&(r.return===null||r.return.tag!==13)?(a._visibility&=-5,tu(r)):bl(r);break;default:bl(r)}}function tu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Vn=u,By(u,r)}Fy(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:ha(8,a,a.return),tu(a);break;case 22:o=a.stateNode,o._visibility&4&&(o._visibility&=-5,tu(a));break;default:tu(a)}r=r.sibling}}function By(r,a){for(;Vn!==null;){var o=Vn;switch(o.tag){case 0:case 11:case 15:ha(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:al(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Vn=u;else e:for(o=r;Vn!==null;){u=Vn;var m=u.sibling,v=u.return;if(ky(u),u===o){Vn=null;break e}if(m!==null){m.return=v,Vn=m;break e}Vn=v}}}function bD(r,a,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(r,a,o,u){return new bD(r,a,o,u)}function of(r){return r=r.prototype,!(!r||!r.isReactComponent)}function pa(r,a){var o=r.alternate;return o===null?(o=Vr(r.tag,a,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=a,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&31457280,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,a=r.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Hy(r,a){r.flags&=31457282;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,a=o.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function nu(r,a,o,u,m,v){var M=0;if(u=r,typeof r=="function")of(r)&&(M=1);else if(typeof r=="string")M=rR(r,o,Tt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case f:return ts(o.children,m,v,a);case d:M=8,m|=24;break;case p:return r=Vr(12,o,a,m|2),r.elementType=p,r.lanes=v,r;case S:return r=Vr(13,o,a,m),r.elementType=S,r.lanes=v,r;case w:return r=Vr(19,o,a,m),r.elementType=w,r.lanes=v,r;case A:return Vy(o,m,v,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case g:case b:M=10;break e;case y:M=9;break e;case x:M=11;break e;case _:M=14;break e;case R:M=16,u=null;break e}M=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return a=Vr(M,o,a,m),a.elementType=r,a.type=u,a.lanes=v,a}function ts(r,a,o,u){return r=Vr(7,r,u,a),r.lanes=o,r}function Vy(r,a,o,u){r=Vr(22,r,u,a),r.elementType=A,r.lanes=o;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=m._current;if(v===null)throw Error(i(456));if((m._pendingVisibility&2)===0){var M=na(v,2);M!==null&&(m._pendingVisibility|=2,lr(M,v,2))}},attach:function(){var v=m._current;if(v===null)throw Error(i(456));if((m._pendingVisibility&2)!==0){var M=na(v,2);M!==null&&(m._pendingVisibility&=-3,lr(M,v,2))}}};return r.stateNode=m,r}function lf(r,a,o){return r=Vr(6,r,null,a),r.lanes=o,r}function cf(r,a,o){return a=Vr(4,r.children!==null?r.children:[],r.key,a),a.lanes=o,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function Fi(r){r.flags|=4}function Gy(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ab(a)){if(a=zr.current,a!==null&&((Wt&4194176)===Wt?fi!==null:(Wt&62914560)!==Wt&&(Wt&536870912)===0||a!==fi))throw nl=fd,s2;r.flags|=8192}}function ru(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?G():536870912,r.lanes|=a,Qs|=a)}function vl(r,a){if(!Xt)switch(r.tailMode){case"hidden":a=r.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function bn(r){var a=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(a)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&31457280,u|=m.flags&31457280,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,a}function vD(r,a,o){var u=a.pendingProps;switch(hd(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(a),null;case 1:return bn(a),null;case 3:return o=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ii(On),ht(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Jo(a)?Fi(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ti!==null&&(yf(ti),ti=null))),bn(a),null;case 26:return o=a.memoizedState,r===null?(Fi(a),o!==null?(bn(a),Gy(a,o)):(bn(a),a.flags&=-16777217)):o?o!==r.memoizedState?(Fi(a),bn(a),Gy(a,o)):(bn(a),a.flags&=-16777217):(r.memoizedProps!==u&&Fi(a),bn(a),a.flags&=-16777217),null;case 27:st(a),o=xt.current;var m=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Fi(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return bn(a),null}r=Tt.current,Jo(a)?i2(a):(r=vb(m,u,o),a.stateNode=r,Fi(a))}return bn(a),null;case 5:if(st(a),o=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Fi(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return bn(a),null}if(r=Tt.current,Jo(a))i2(a);else{switch(m=pu(xt.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?m.createElement(o,{is:u.is}):m.createElement(o)}}r[at]=a,r[Xe]=u;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=r;e:switch(Qn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Fi(a)}}return bn(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&Fi(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(r=xt.current,Jo(a)){if(r=a.stateNode,o=a.memoizedProps,u=null,m=or,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[at]=a,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||fb(r.nodeValue,o)),r||qa(a)}else r=pu(r).createTextNode(u),r[at]=a,a.stateNode=r}return bn(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Jo(a),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[at]=a}else $o(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bn(a),m=!1}else ti!==null&&(yf(ti),ti=null),m=!0;if(!m)return a.flags&256?(Ri(a),a):(Ri(a),null)}if(Ri(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var v=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==m&&(u.flags|=2048)}return o!==r&&o&&(a.child.flags|=8192),ru(a,a.updateQueue),bn(a),null;case 4:return ht(),r===null&&Cf(a.stateNode.containerInfo),bn(a),null;case 10:return Ii(a.type),bn(a),null;case 19:if(rt(In),m=a.memoizedState,m===null)return bn(a),null;if(u=(a.flags&128)!==0,v=m.rendering,v===null)if(u)vl(m,!1);else{if(xn!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(v=Bc(r),v!==null){for(a.flags|=128,vl(m,!1),r=v.updateQueue,a.updateQueue=r,ru(a,r),a.subtreeFlags=0,r=o,o=a.child;o!==null;)Hy(o,r),o=o.sibling;return Ue(In,In.current&1|2),a.child}r=r.sibling}m.tail!==null&&Se()>iu&&(a.flags|=128,u=!0,vl(m,!1),a.lanes=4194304)}else{if(!u)if(r=Bc(v),r!==null){if(a.flags|=128,u=!0,r=r.updateQueue,a.updateQueue=r,ru(a,r),vl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Xt)return bn(a),null}else 2*Se()-m.renderingStartTime>iu&&o!==536870912&&(a.flags|=128,u=!0,vl(m,!1),a.lanes=4194304);m.isBackwards?(v.sibling=a.child,a.child=v):(r=m.last,r!==null?r.sibling=v:a.child=v,m.last=v)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Se(),a.sibling=null,r=In.current,Ue(In,u?r&1|2:r&1),a):(bn(a),null);case 22:case 23:return Ri(a),md(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(bn(a),a.subtreeFlags&6&&(a.flags|=8192)):bn(a),o=a.updateQueue,o!==null&&ru(a,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),r!==null&&rt(Ya),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Ii(On),bn(a),null;case 25:return null}throw Error(i(156,a.tag))}function _D(r,a){switch(hd(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ii(On),ht(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return st(a),null;case 13:if(Ri(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));$o()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return rt(In),null;case 4:return ht(),null;case 10:return Ii(a.type),null;case 22:case 23:return Ri(a),md(),r!==null&&rt(Ya),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Ii(On),null;case 25:return null;default:return null}}function jy(r,a){switch(hd(a),a.tag){case 3:Ii(On),ht();break;case 26:case 27:case 5:st(a);break;case 4:ht();break;case 13:Ri(a);break;case 19:rt(In);break;case 10:Ii(a.type);break;case 22:case 23:Ri(a),md(),r!==null&&rt(Ya);break;case 24:Ii(On)}}var wD={getCacheForType:function(r){var a=Jn(On),o=a.data.get(r);return o===void 0&&(o=r(),a.data.set(r,o)),o}},xD=typeof WeakMap=="function"?WeakMap:Map,vn=0,hn=null,zt=null,Wt=0,dn=0,Er=null,zi=!1,Xs=!1,uf=!1,Bi=0,xn=0,ma=0,ns=0,hf=0,Gr=0,Qs=0,_l=null,mi=null,df=!1,ff=0,iu=1/0,au=null,ga=null,su=!1,rs=null,wl=0,pf=0,mf=null,xl=0,gf=null;function Mr(){if((vn&2)!==0&&Wt!==0)return Wt&-Wt;if(C.T!==null){var r=Bs;return r!==0?r:Tf()}return Qe()}function qy(){Gr===0&&(Gr=(Wt&536870912)===0||Xt?Tn():536870912);var r=zr.current;return r!==null&&(r.flags|=32),Gr}function lr(r,a,o){(r===hn&&dn===2||r.cancelPendingCommit!==null)&&(Zs(r,0),Hi(r,Wt,Gr,!1)),fe(r,o),((vn&2)===0||r!==hn)&&(r===hn&&((vn&2)===0&&(ns|=o),xn===4&&Hi(r,Wt,Gr,!1)),gi(r))}function Wy(r,a,o){if((vn&6)!==0)throw Error(i(327));var u=!o&&(a&60)===0&&(a&r.expiredLanes)===0||bt(r,a),m=u?ED(r,a):_f(r,a,!0),v=u;do{if(m===0){Xs&&!u&&Hi(r,a,0,!1);break}else if(m===6)Hi(r,a,0,!zi);else{if(o=r.current.alternate,v&&!SD(o)){m=_f(r,a,!1),v=!1;continue}if(m===2){if(v=a,r.errorRecoveryDisabledLanes&v)var M=0;else M=r.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){a=M;e:{var I=r;m=_l;var B=I.current.memoizedState.isDehydrated;if(B&&(Zs(I,M).flags|=256),M=_f(I,M,!1),M!==2){if(uf&&!B){I.errorRecoveryDisabledLanes|=v,ns|=v,m=4;break e}v=mi,mi=m,v!==null&&yf(v)}m=M}if(v=!1,m!==2)continue}}if(m===1){Zs(r,0),Hi(r,a,0,!0);break}e:{switch(u=r,m){case 0:case 1:throw Error(i(345));case 4:if((a&4194176)===a){Hi(u,a,Gr,!zi);break e}break;case 2:mi=null;break;case 3:case 5:break;default:throw Error(i(329))}if(u.finishedWork=o,u.finishedLanes=a,(a&62914560)===a&&(v=ff+300-Se(),10<v)){if(Hi(u,a,Gr,!zi),Ve(u,0)!==0)break e;u.timeoutHandle=gb(Yy.bind(null,u,o,mi,au,df,a,Gr,ns,Qs,zi,2,-0,0),v);break e}Yy(u,o,mi,au,df,a,Gr,ns,Qs,zi,0,-0,0)}}break}while(!0);gi(r)}function yf(r){mi===null?mi=r:mi.push.apply(mi,r)}function Yy(r,a,o,u,m,v,M,I,B,ee,Te,ke,me){var we=a.subtreeFlags;if((we&8192||(we&16785408)===16785408)&&(Cl={stylesheets:null,count:0,unsuspend:iR},Ny(a),a=sR(),a!==null)){r.cancelPendingCommit=a(eb.bind(null,r,o,u,m,M,I,B,1,ke,me)),Hi(r,v,M,!ee);return}eb(r,o,u,m,M,I,B,Te,ke,me)}function SD(r){for(var a=r;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],v=m.getSnapshot;m=m.value;try{if(!xr(v(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Hi(r,a,o,u){a&=~hf,a&=~ns,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var m=a;0<m;){var v=31-$e(m),M=1<<v;u[v]=-1,m&=~M}o!==0&&Ge(r,o,a)}function ou(){return(vn&6)===0?(Sl(0),!1):!0}function bf(){if(zt!==null){if(dn===0)var r=zt.return;else r=zt,Li=Ja=null,Sd(r),Fs=null,rl=0,r=zt;for(;r!==null;)jy(r.alternate,r),r=r.return;zt=null}}function Zs(r,a){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,VD(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),bf(),hn=r,zt=o=pa(r.current,null),Wt=a,dn=0,Er=null,zi=!1,Xs=bt(r,a),uf=!1,Qs=Gr=hf=ns=ma=xn=0,mi=_l=null,df=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var m=31-$e(u),v=1<<m;a|=r[m],u&=~v}return Bi=a,kc(),o}function Xy(r,a){Ot=null,C.H=pi,a===tl?(a=c2(),dn=3):a===s2?(a=c2(),dn=4):dn=a===oy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Er=a,zt===null&&(xn=1,Kc(r,Ur(a,r.current)))}function Qy(){var r=C.H;return C.H=pi,r===null?pi:r}function Zy(){var r=C.A;return C.A=wD,r}function vf(){xn=4,zi||(Wt&4194176)!==Wt&&zr.current!==null||(Xs=!0),(ma&134217727)===0&&(ns&134217727)===0||hn===null||Hi(hn,Wt,Gr,!1)}function _f(r,a,o){var u=vn;vn|=2;var m=Qy(),v=Zy();(hn!==r||Wt!==a)&&(au=null,Zs(r,a)),a=!1;var M=xn;e:do try{if(dn!==0&&zt!==null){var I=zt,B=Er;switch(dn){case 8:bf(),M=6;break e;case 3:case 2:case 6:zr.current===null&&(a=!0);var ee=dn;if(dn=0,Er=null,Ks(r,I,B,ee),o&&Xs){M=0;break e}break;default:ee=dn,dn=0,Er=null,Ks(r,I,B,ee)}}TD(),M=xn;break}catch(Te){Xy(r,Te)}while(!0);return a&&r.shellSuspendCounter++,Li=Ja=null,vn=u,C.H=m,C.A=v,zt===null&&(hn=null,Wt=0,kc()),M}function TD(){for(;zt!==null;)Ky(zt)}function ED(r,a){var o=vn;vn|=2;var u=Qy(),m=Zy();hn!==r||Wt!==a?(au=null,iu=Se()+500,Zs(r,a)):Xs=bt(r,a);e:do try{if(dn!==0&&zt!==null){a=zt;var v=Er;t:switch(dn){case 1:dn=0,Er=null,Ks(r,a,v,1);break;case 2:if(o2(v)){dn=0,Er=null,Jy(a);break}a=function(){dn===2&&hn===r&&(dn=7),gi(r)},v.then(a,a);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:o2(v)?(dn=0,Er=null,Jy(a)):(dn=0,Er=null,Ks(r,a,v,7));break;case 5:var M=null;switch(zt.tag){case 26:M=zt.memoizedState;case 5:case 27:var I=zt;if(!M||Ab(M)){dn=0,Er=null;var B=I.sibling;if(B!==null)zt=B;else{var ee=I.return;ee!==null?(zt=ee,lu(ee)):zt=null}break t}}dn=0,Er=null,Ks(r,a,v,5);break;case 6:dn=0,Er=null,Ks(r,a,v,6);break;case 8:bf(),xn=6;break e;default:throw Error(i(462))}}MD();break}catch(Te){Xy(r,Te)}while(!0);return Li=Ja=null,C.H=u,C.A=m,vn=o,zt!==null?0:(hn=null,Wt=0,kc(),xn)}function MD(){for(;zt!==null&&!P();)Ky(zt)}function Ky(r){var a=vy(r.alternate,r,Bi);r.memoizedProps=r.pendingProps,a===null?lu(r):zt=a}function Jy(r){var a=r,o=a.alternate;switch(a.tag){case 15:case 0:a=fy(o,a,a.pendingProps,a.type,void 0,Wt);break;case 11:a=fy(o,a,a.pendingProps,a.type.render,a.ref,Wt);break;case 5:Sd(a);default:jy(o,a),a=zt=Hy(a,Bi),a=vy(o,a,Bi)}r.memoizedProps=r.pendingProps,a===null?lu(r):zt=a}function Ks(r,a,o,u){Li=Ja=null,Sd(a),Fs=null,rl=0;var m=a.return;try{if(pD(r,m,a,o,Wt)){xn=1,Kc(r,Ur(o,r.current)),zt=null;return}}catch(v){if(m!==null)throw zt=m,v;xn=1,Kc(r,Ur(o,r.current)),zt=null;return}a.flags&32768?(Xt||u===1?r=!0:Xs||(Wt&536870912)!==0?r=!1:(zi=r=!0,(u===2||u===3||u===6)&&(u=zr.current,u!==null&&u.tag===13&&(u.flags|=16384))),$y(a,r)):lu(a)}function lu(r){var a=r;do{if((a.flags&32768)!==0){$y(a,zi);return}r=a.return;var o=vD(a.alternate,a,Bi);if(o!==null){zt=o;return}if(a=a.sibling,a!==null){zt=a;return}zt=a=r}while(a!==null);xn===0&&(xn=5)}function $y(r,a){do{var o=_D(r.alternate,r);if(o!==null){o.flags&=32767,zt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(r=r.sibling,r!==null)){zt=r;return}zt=r=o}while(r!==null);xn=6,zt=null}function eb(r,a,o,u,m,v,M,I,B,ee){var Te=C.T,ke=Q.p;try{Q.p=2,C.T=null,AD(r,a,o,u,ke,m,v,M,I,B,ee)}finally{C.T=Te,Q.p=ke}}function AD(r,a,o,u,m,v,M,I){do Js();while(rs!==null);if((vn&6)!==0)throw Error(i(327));var B=r.finishedWork;if(u=r.finishedLanes,B===null)return null;if(r.finishedWork=null,r.finishedLanes=0,B===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var ee=B.lanes|B.childLanes;if(ee|=ld,Oe(r,u,ee,v,M,I),r===hn&&(zt=hn=null,Wt=0),(B.subtreeFlags&10256)===0&&(B.flags&10256)===0||su||(su=!0,pf=ee,mf=o,kD(xe,function(){return Js(),null})),o=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||o?(o=C.T,C.T=null,v=Q.p,Q.p=2,M=vn,vn|=4,gD(r,B),Iy(B,r),KC(Pf,r.containerInfo),_u=!!kf,Pf=kf=null,r.current=B,Ry(r,B.alternate,B),ue(),vn=M,Q.p=v,C.T=o):r.current=B,su?(su=!1,rs=r,wl=u):tb(r,ee),ee=r.pendingLanes,ee===0&&(ga=null),Ye(B.stateNode),gi(r),a!==null)for(m=r.onRecoverableError,B=0;B<a.length;B++)ee=a[B],m(ee.value,{componentStack:ee.stack});return(wl&3)!==0&&Js(),ee=r.pendingLanes,(u&4194218)!==0&&(ee&42)!==0?r===gf?xl++:(xl=0,gf=r):xl=0,Sl(0),null}function tb(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,al(a)))}function Js(){if(rs!==null){var r=rs,a=pf;pf=0;var o=mt(wl),u=C.T,m=Q.p;try{if(Q.p=32>o?32:o,C.T=null,rs===null)var v=!1;else{o=mf,mf=null;var M=rs,I=wl;if(rs=null,wl=0,(vn&6)!==0)throw Error(i(331));var B=vn;if(vn|=4,zy(M.current),Uy(M,M.current,I,o),vn=B,Sl(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Ze,M)}catch{}v=!0}return v}finally{Q.p=m,C.T=u,tb(r,a)}}return!1}function nb(r,a,o){a=Ur(o,a),a=Nd(r.stateNode,a,2),r=ua(r,a,2),r!==null&&(fe(r,2),gi(r))}function ln(r,a,o){if(r.tag===3)nb(r,r,o);else for(;a!==null;){if(a.tag===3){nb(a,r,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ga===null||!ga.has(u))){r=Ur(o,r),o=ay(2),u=ua(a,o,2),u!==null&&(sy(o,u,a,r),fe(u,2),gi(u));break}}a=a.return}}function wf(r,a,o){var u=r.pingCache;if(u===null){u=r.pingCache=new xD;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(uf=!0,m.add(o),r=CD.bind(null,r,a,o),a.then(r,r))}function CD(r,a,o){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,hn===r&&(Wt&o)===o&&(xn===4||xn===3&&(Wt&62914560)===Wt&&300>Se()-ff?(vn&2)===0&&Zs(r,0):hf|=o,Qs===Wt&&(Qs=0)),gi(r)}function rb(r,a){a===0&&(a=G()),r=na(r,a),r!==null&&(fe(r,a),gi(r))}function DD(r){var a=r.memoizedState,o=0;a!==null&&(o=a.retryLane),rb(r,o)}function RD(r,a){var o=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),rb(r,o)}function kD(r,a){return it(r,a)}var cu=null,$s=null,xf=!1,uu=!1,Sf=!1,is=0;function gi(r){r!==$s&&r.next===null&&($s===null?cu=$s=r:$s=$s.next=r),uu=!0,xf||(xf=!0,LD(PD))}function Sl(r,a){if(!Sf&&uu){Sf=!0;do for(var o=!1,u=cu;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var v=0;else{var M=u.suspendedLanes,I=u.pingedLanes;v=(1<<31-$e(42|r)+1)-1,v&=m&~(M&~I),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(o=!0,sb(u,v))}else v=Wt,v=Ve(u,u===hn?v:0),(v&3)===0||bt(u,v)||(o=!0,sb(u,v));u=u.next}while(o);Sf=!1}}function PD(){uu=xf=!1;var r=0;is!==0&&(HD()&&(r=is),is=0);for(var a=Se(),o=null,u=cu;u!==null;){var m=u.next,v=ib(u,a);v===0?(u.next=null,o===null?cu=m:o.next=m,m===null&&($s=o)):(o=u,(r!==0||(v&3)!==0)&&(uu=!0)),u=m}Sl(r)}function ib(r,a){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var M=31-$e(v),I=1<<M,B=m[M];B===-1?((I&o)===0||(I&u)!==0)&&(m[M]=un(I,a)):B<=a&&(r.expiredLanes|=I),v&=~I}if(a=hn,o=Wt,o=Ve(r,r===a?o:0),u=r.callbackNode,o===0||r===a&&dn===2||r.cancelPendingCommit!==null)return u!==null&&u!==null&&z(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||bt(r,o)){if(a=o&-o,a===r.callbackPriority)return a;switch(u!==null&&z(u),mt(o)){case 2:case 8:o=pe;break;case 32:o=xe;break;case 268435456:o=Je;break;default:o=xe}return u=ab.bind(null,r),o=it(o,u),r.callbackPriority=a,r.callbackNode=o,a}return u!==null&&u!==null&&z(u),r.callbackPriority=2,r.callbackNode=null,2}function ab(r,a){var o=r.callbackNode;if(Js()&&r.callbackNode!==o)return null;var u=Wt;return u=Ve(r,r===hn?u:0),u===0?null:(Wy(r,u,a),ib(r,Se()),r.callbackNode!=null&&r.callbackNode===o?ab.bind(null,r):null)}function sb(r,a){if(Js())return null;Wy(r,a,!0)}function LD(r){GD(function(){(vn&6)!==0?it(V,r):r()})}function Tf(){return is===0&&(is=Tn()),is}function ob(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Tc(""+r)}function lb(r,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,r.id&&o.setAttribute("form",r.id),a.parentNode.insertBefore(o,a),r=new FormData(r),o.parentNode.removeChild(o),r}function ID(r,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var v=ob((m[Xe]||null).action),M=u.submitter;M&&(a=(a=M[Xe]||null)?ob(a.formAction):M.getAttribute("formAction"),a!==null&&(v=a,M=null));var I=new Cc("action","action",null,u,m);r.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(is!==0){var B=M?lb(m,M):new FormData(m);Pd(o,{pending:!0,data:B,method:m.method,action:v},null,B)}}else typeof v=="function"&&(I.preventDefault(),B=M?lb(m,M):new FormData(m),Pd(o,{pending:!0,data:B,method:m.method,action:v},v,B))},currentTarget:m}]})}}for(var Ef=0;Ef<e2.length;Ef++){var Mf=e2[Ef],OD=Mf.toLowerCase(),UD=Mf[0].toUpperCase()+Mf.slice(1);ei(OD,"on"+UD)}ei(Q0,"onAnimationEnd"),ei(Z0,"onAnimationIteration"),ei(K0,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei($C,"onTransitionRun"),ei(eD,"onTransitionStart"),ei(tD,"onTransitionCancel"),ei(J0,"onTransitionEnd"),Le("onMouseEnter",["mouseout","mouseover"]),Le("onMouseLeave",["mouseout","mouseover"]),Le("onPointerEnter",["pointerout","pointerover"]),Le("onPointerLeave",["pointerout","pointerover"]),Be("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Be("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Be("onBeforeInput",["compositionend","keypress","textInput","paste"]),Be("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Be("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Be("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ND=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function cb(r,a){a=(a&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var v=void 0;if(a)for(var M=u.length-1;0<=M;M--){var I=u[M],B=I.instance,ee=I.currentTarget;if(I=I.listener,B!==v&&m.isPropagationStopped())break e;v=I,m.currentTarget=ee;try{v(m)}catch(Te){Zc(Te)}m.currentTarget=null,v=B}else for(M=0;M<u.length;M++){if(I=u[M],B=I.instance,ee=I.currentTarget,I=I.listener,B!==v&&m.isPropagationStopped())break e;v=I,m.currentTarget=ee;try{v(m)}catch(Te){Zc(Te)}m.currentTarget=null,v=B}}}}function Gt(r,a){var o=a[Yt];o===void 0&&(o=a[Yt]=new Set);var u=r+"__bubble";o.has(u)||(ub(a,r,2,!1),o.add(u))}function Af(r,a,o){var u=0;a&&(u|=4),ub(o,r,u,a)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Cf(r){if(!r[hu]){r[hu]=!0,ie.forEach(function(o){o!=="selectionchange"&&(ND.has(o)||Af(o,!1,r),Af(o,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[hu]||(a[hu]=!0,Af("selectionchange",!1,a))}}function ub(r,a,o,u){switch(Lb(a)){case 2:var m=cR;break;case 8:m=uR;break;default:m=Hf}o=m.bind(null,a,o,r),m=void 0,!Qh||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(a,o,{capture:!0,passive:m}):r.addEventListener(a,o,!0):m!==void 0?r.addEventListener(a,o,{passive:m}):r.addEventListener(a,o,!1)}function Df(r,a,o,u,m){var v=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var M=u.tag;if(M===3||M===4){var I=u.stateNode.containerInfo;if(I===m||I.nodeType===8&&I.parentNode===m)break;if(M===4)for(M=u.return;M!==null;){var B=M.tag;if((B===3||B===4)&&(B=M.stateNode.containerInfo,B===m||B.nodeType===8&&B.parentNode===m))return;M=M.return}for(;I!==null;){if(M=qn(I),M===null)return;if(B=M.tag,B===5||B===6||B===26||B===27){u=v=M;continue e}I=I.parentNode}}u=u.return}E0(function(){var ee=v,Te=Yh(o),ke=[];e:{var me=$0.get(r);if(me!==void 0){var we=Cc,ct=r;switch(r){case"keypress":if(Mc(o)===0)break e;case"keydown":case"keyup":we=RC;break;case"focusin":ct="focus",we=$h;break;case"focusout":ct="blur",we=$h;break;case"beforeblur":case"afterblur":we=$h;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=C0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=bC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=LC;break;case Q0:case Z0:case K0:we=wC;break;case J0:we=OC;break;case"scroll":case"scrollend":we=gC;break;case"wheel":we=NC;break;case"copy":case"cut":case"paste":we=SC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=R0;break;case"toggle":case"beforetoggle":we=zC}var At=(a&4)!==0,Sn=!At&&(r==="scroll"||r==="scrollend"),oe=At?me!==null?me+"Capture":null:me;At=[];for(var K=ee,he;K!==null;){var Ae=K;if(he=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||he===null||oe===null||(Ae=Go(K,oe),Ae!=null&&At.push(El(K,Ae,he))),Sn)break;K=K.return}0<At.length&&(me=new we(me,ct,null,o,Te),ke.push({event:me,listeners:At}))}}if((a&7)===0){e:{if(me=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",me&&o!==Wh&&(ct=o.relatedTarget||o.fromElement)&&(qn(ct)||ct[_t]))break e;if((we||me)&&(me=Te.window===Te?Te:(me=Te.ownerDocument)?me.defaultView||me.parentWindow:window,we?(ct=o.relatedTarget||o.toElement,we=ee,ct=ct?qn(ct):null,ct!==null&&(Sn=X(ct),At=ct.tag,ct!==Sn||At!==5&&At!==27&&At!==6)&&(ct=null)):(we=null,ct=ee),we!==ct)){if(At=C0,Ae="onMouseLeave",oe="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(At=R0,Ae="onPointerLeave",oe="onPointerEnter",K="pointer"),Sn=we==null?me:Z(we),he=ct==null?me:Z(ct),me=new At(Ae,K+"leave",we,o,Te),me.target=Sn,me.relatedTarget=he,Ae=null,qn(Te)===ee&&(At=new At(oe,K+"enter",ct,o,Te),At.target=he,At.relatedTarget=Sn,Ae=At),Sn=Ae,we&&ct)t:{for(At=we,oe=ct,K=0,he=At;he;he=eo(he))K++;for(he=0,Ae=oe;Ae;Ae=eo(Ae))he++;for(;0<K-he;)At=eo(At),K--;for(;0<he-K;)oe=eo(oe),he--;for(;K--;){if(At===oe||oe!==null&&At===oe.alternate)break t;At=eo(At),oe=eo(oe)}At=null}else At=null;we!==null&&hb(ke,me,we,At,!1),ct!==null&&Sn!==null&&hb(ke,Sn,ct,At,!0)}}e:{if(me=ee?Z(ee):window,we=me.nodeName&&me.nodeName.toLowerCase(),we==="select"||we==="input"&&me.type==="file")var nt=F0;else if(U0(me))if(z0)nt=QC;else{nt=YC;var Nt=WC}else we=me.nodeName,!we||we.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?ee&&qh(ee.elementType)&&(nt=F0):nt=XC;if(nt&&(nt=nt(r,ee))){N0(ke,nt,o,Te);break e}Nt&&Nt(r,me,ee),r==="focusout"&&ee&&me.type==="number"&&ee.memoizedProps.value!=null&&Kn(me,"number",me.value)}switch(Nt=ee?Z(ee):window,r){case"focusin":(U0(Nt)||Nt.contentEditable==="true")&&(Ps=Nt,ad=ee,Ko=null);break;case"focusout":Ko=ad=Ps=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,Y0(ke,o,Te);break;case"selectionchange":if(JC)break;case"keydown":case"keyup":Y0(ke,o,Te)}var pt;if(td)e:{switch(r){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else ks?I0(r,o)&&(wt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(wt="onCompositionStart");wt&&(k0&&o.locale!=="ko"&&(ks||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&ks&&(pt=M0()):(ta=Te,Zh="value"in ta?ta.value:ta.textContent,ks=!0)),Nt=du(ee,wt),0<Nt.length&&(wt=new D0(wt,r,null,o,Te),ke.push({event:wt,listeners:Nt}),pt?wt.data=pt:(pt=O0(o),pt!==null&&(wt.data=pt)))),(pt=HC?VC(r,o):GC(r,o))&&(wt=du(ee,"onBeforeInput"),0<wt.length&&(Nt=new D0("onBeforeInput","beforeinput",null,o,Te),ke.push({event:Nt,listeners:wt}),Nt.data=pt)),ID(ke,r,ee,o,Te)}cb(ke,a)})}function El(r,a,o){return{instance:r,listener:a,currentTarget:o}}function du(r,a){for(var o=a+"Capture",u=[];r!==null;){var m=r,v=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=Go(r,o),m!=null&&u.unshift(El(r,m,v)),m=Go(r,a),m!=null&&u.push(El(r,m,v))),r=r.return}return u}function eo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function hb(r,a,o,u,m){for(var v=a._reactName,M=[];o!==null&&o!==u;){var I=o,B=I.alternate,ee=I.stateNode;if(I=I.tag,B!==null&&B===u)break;I!==5&&I!==26&&I!==27||ee===null||(B=ee,m?(ee=Go(o,v),ee!=null&&M.unshift(El(o,ee,B))):m||(ee=Go(o,v),ee!=null&&M.push(El(o,ee,B)))),o=o.return}M.length!==0&&r.push({event:a,listeners:M})}var FD=/\r\n?/g,zD=/\u0000|\uFFFD/g;function db(r){return(typeof r=="string"?r:""+r).replace(FD,`
`).replace(zD,"")}function fb(r,a){return a=db(a),db(r)===a}function fu(){}function rn(r,a,o,u,m,v){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||pr(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&pr(r,""+u);break;case"className":en(r,"class",u);break;case"tabIndex":en(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":en(r,o,u);break;case"style":S0(r,u,v);break;case"data":if(a!=="object"){en(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Tc(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(a!=="input"&&rn(r,a,"name",m.name,m,null),rn(r,a,"formEncType",m.formEncType,m,null),rn(r,a,"formMethod",m.formMethod,m,null),rn(r,a,"formTarget",m.formTarget,m,null)):(rn(r,a,"encType",m.encType,m,null),rn(r,a,"method",m.method,m,null),rn(r,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Tc(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=fu);break;case"onScroll":u!=null&&Gt("scroll",r);break;case"onScrollEnd":u!=null&&Gt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Tc(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Gt("beforetoggle",r),Gt("toggle",r),Ct(r,"popover",u);break;case"xlinkActuate":qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ct(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=pC.get(o)||o,Ct(r,o,u))}}function Rf(r,a,o,u,m,v){switch(o){case"style":S0(r,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?pr(r,u):(typeof u=="number"||typeof u=="bigint")&&pr(r,""+u);break;case"onScroll":u!=null&&Gt("scroll",r);break;case"onScrollEnd":u!=null&&Gt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pe.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),v=r[Xe]||null,v=v!=null?v[o]:null,typeof v=="function"&&r.removeEventListener(a,v,m),typeof u=="function")){typeof v!="function"&&v!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(a,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Ct(r,o,u)}}}function Qn(r,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",r),Gt("load",r);var u=!1,m=!1,v;for(v in o)if(o.hasOwnProperty(v)){var M=o[v];if(M!=null)switch(v){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rn(r,a,v,M,o,null)}}m&&rn(r,a,"srcSet",o.srcSet,o,null),u&&rn(r,a,"src",o.src,o,null);return;case"input":Gt("invalid",r);var I=v=M=m=null,B=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var Te=o[u];if(Te!=null)switch(u){case"name":m=Te;break;case"type":M=Te;break;case"checked":B=Te;break;case"defaultChecked":ee=Te;break;case"value":v=Te;break;case"defaultValue":I=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(i(137,a));break;default:rn(r,a,u,Te,o,null)}}sr(r,v,I,B,ee,M,m,!1),Vt(r);return;case"select":Gt("invalid",r),u=M=v=null;for(m in o)if(o.hasOwnProperty(m)&&(I=o[m],I!=null))switch(m){case"value":v=I;break;case"defaultValue":M=I;break;case"multiple":u=I;default:rn(r,a,m,I,o,null)}a=v,o=M,r.multiple=!!u,a!=null?_n(r,!!u,a,!1):o!=null&&_n(r,!!u,o,!0);return;case"textarea":Gt("invalid",r),v=m=u=null;for(M in o)if(o.hasOwnProperty(M)&&(I=o[M],I!=null))switch(M){case"value":u=I;break;case"defaultValue":m=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:rn(r,a,M,I,o,null)}Cs(r,u,m,v),Vt(r);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rn(r,a,B,u,o,null)}return;case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":Gt("load",r);break;case"video":case"audio":for(u=0;u<Tl.length;u++)Gt(Tl[u],r);break;case"image":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"embed":case"source":case"link":Gt("error",r),Gt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rn(r,a,ee,u,o,null)}return;default:if(qh(a)){for(Te in o)o.hasOwnProperty(Te)&&(u=o[Te],u!==void 0&&Rf(r,a,Te,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&rn(r,a,I,u,o,null))}function BD(r,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,M=null,I=null,B=null,ee=null,Te=null;for(we in o){var ke=o[we];if(o.hasOwnProperty(we)&&ke!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":B=ke;default:u.hasOwnProperty(we)||rn(r,a,we,null,u,ke)}}for(var me in u){var we=u[me];if(ke=o[me],u.hasOwnProperty(me)&&(we!=null||ke!=null))switch(me){case"type":v=we;break;case"name":m=we;break;case"checked":ee=we;break;case"defaultChecked":Te=we;break;case"value":M=we;break;case"defaultValue":I=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,a));break;default:we!==ke&&rn(r,a,me,we,u,ke)}}tn(r,M,I,B,ee,Te,v,m);return;case"select":we=M=I=me=null;for(v in o)if(B=o[v],o.hasOwnProperty(v)&&B!=null)switch(v){case"value":break;case"multiple":we=B;default:u.hasOwnProperty(v)||rn(r,a,v,null,u,B)}for(m in u)if(v=u[m],B=o[m],u.hasOwnProperty(m)&&(v!=null||B!=null))switch(m){case"value":me=v;break;case"defaultValue":I=v;break;case"multiple":M=v;default:v!==B&&rn(r,a,m,v,u,B)}a=I,o=M,u=we,me!=null?_n(r,!!o,me,!1):!!u!=!!o&&(a!=null?_n(r,!!o,a,!0):_n(r,!!o,o?[]:"",!1));return;case"textarea":we=me=null;for(I in o)if(m=o[I],o.hasOwnProperty(I)&&m!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:rn(r,a,I,null,u,m)}for(M in u)if(m=u[M],v=o[M],u.hasOwnProperty(M)&&(m!=null||v!=null))switch(M){case"value":me=m;break;case"defaultValue":we=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==v&&rn(r,a,M,m,u,v)}Wn(r,me,we);return;case"option":for(var ct in o)if(me=o[ct],o.hasOwnProperty(ct)&&me!=null&&!u.hasOwnProperty(ct))switch(ct){case"selected":r.selected=!1;break;default:rn(r,a,ct,null,u,me)}for(B in u)if(me=u[B],we=o[B],u.hasOwnProperty(B)&&me!==we&&(me!=null||we!=null))switch(B){case"selected":r.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:rn(r,a,B,me,u,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in o)me=o[At],o.hasOwnProperty(At)&&me!=null&&!u.hasOwnProperty(At)&&rn(r,a,At,null,u,me);for(ee in u)if(me=u[ee],we=o[ee],u.hasOwnProperty(ee)&&me!==we&&(me!=null||we!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,a));break;default:rn(r,a,ee,me,u,we)}return;default:if(qh(a)){for(var Sn in o)me=o[Sn],o.hasOwnProperty(Sn)&&me!==void 0&&!u.hasOwnProperty(Sn)&&Rf(r,a,Sn,void 0,u,me);for(Te in u)me=u[Te],we=o[Te],!u.hasOwnProperty(Te)||me===we||me===void 0&&we===void 0||Rf(r,a,Te,me,u,we);return}}for(var oe in o)me=o[oe],o.hasOwnProperty(oe)&&me!=null&&!u.hasOwnProperty(oe)&&rn(r,a,oe,null,u,me);for(ke in u)me=u[ke],we=o[ke],!u.hasOwnProperty(ke)||me===we||me==null&&we==null||rn(r,a,ke,me,u,we)}var kf=null,Pf=null;function pu(r){return r.nodeType===9?r:r.ownerDocument}function pb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mb(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Lf(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var If=null;function HD(){var r=window.event;return r&&r.type==="popstate"?r===If?!1:(If=r,!0):(If=null,!1)}var gb=typeof setTimeout=="function"?setTimeout:void 0,VD=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,GD=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(r){return yb.resolve(null).then(r).catch(jD)}:gb;function jD(r){setTimeout(function(){throw r})}function Of(r,a){var o=a,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(u===0){r.removeChild(m),Ll(a);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=m}while(o);Ll(a)}function Uf(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Uf(o),Jr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function qD(r,a,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Lt])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==m.rel||r.getAttribute("href")!==(m.href==null?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=ri(r.nextSibling),r===null)break}return null}function WD(r,a,o){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ri(r.nextSibling),r===null))return null;return r}function ri(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}function bb(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return r;a--}else o==="/$"&&a++}r=r.previousSibling}return null}function vb(r,a,o){switch(a=pu(o),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var jr=new Map,_b=new Set;function mu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Vi=Q.d;Q.d={f:YD,r:XD,D:QD,C:ZD,L:KD,m:JD,X:eR,S:$D,M:tR};function YD(){var r=Vi.f(),a=ou();return r||a}function XD(r){var a=L(r);a!==null&&a.tag===5&&a.type==="form"?Y2(a):Vi.r(r)}var to=typeof document>"u"?null:document;function wb(r,a,o){var u=to;if(u&&typeof a=="string"&&a){var m=Bn(a);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),_b.has(m)||(_b.add(m),r={rel:r,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),Qn(a,"link",r),le(a),u.head.appendChild(a)))}}function QD(r){Vi.D(r),wb("dns-prefetch",r,null)}function ZD(r,a){Vi.C(r,a),wb("preconnect",r,a)}function KD(r,a,o){Vi.L(r,a,o);var u=to;if(u&&r&&a){var m='link[rel="preload"][as="'+Bn(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Bn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Bn(o.imageSizes)+'"]')):m+='[href="'+Bn(r)+'"]';var v=m;switch(a){case"style":v=no(r);break;case"script":v=ro(r)}jr.has(v)||(r=D({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:r,as:a},o),jr.set(v,r),u.querySelector(m)!==null||a==="style"&&u.querySelector(Ml(v))||a==="script"&&u.querySelector(Al(v))||(a=u.createElement("link"),Qn(a,"link",r),le(a),u.head.appendChild(a)))}}function JD(r,a){Vi.m(r,a);var o=to;if(o&&r){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Bn(u)+'"][href="'+Bn(r)+'"]',v=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ro(r)}if(!jr.has(v)&&(r=D({rel:"modulepreload",href:r},a),jr.set(v,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Al(v)))return}u=o.createElement("link"),Qn(u,"link",r),le(u),o.head.appendChild(u)}}}function $D(r,a,o){Vi.S(r,a,o);var u=to;if(u&&r){var m=de(u).hoistableStyles,v=no(r);a=a||"default";var M=m.get(v);if(!M){var I={loading:0,preload:null};if(M=u.querySelector(Ml(v)))I.loading=5;else{r=D({rel:"stylesheet",href:r,"data-precedence":a},o),(o=jr.get(v))&&Nf(r,o);var B=M=u.createElement("link");le(B),Qn(B,"link",r),B._p=new Promise(function(ee,Te){B.onload=ee,B.onerror=Te}),B.addEventListener("load",function(){I.loading|=1}),B.addEventListener("error",function(){I.loading|=2}),I.loading|=4,gu(M,a,u)}M={type:"stylesheet",instance:M,count:1,state:I},m.set(v,M)}}}function eR(r,a){Vi.X(r,a);var o=to;if(o&&r){var u=de(o).hoistableScripts,m=ro(r),v=u.get(m);v||(v=o.querySelector(Al(m)),v||(r=D({src:r,async:!0},a),(a=jr.get(m))&&Ff(r,a),v=o.createElement("script"),le(v),Qn(v,"link",r),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function tR(r,a){Vi.M(r,a);var o=to;if(o&&r){var u=de(o).hoistableScripts,m=ro(r),v=u.get(m);v||(v=o.querySelector(Al(m)),v||(r=D({src:r,async:!0,type:"module"},a),(a=jr.get(m))&&Ff(r,a),v=o.createElement("script"),le(v),Qn(v,"link",r),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function xb(r,a,o,u){var m=(m=xt.current)?mu(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=no(o.href),o=de(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=no(o.href);var v=de(m).hoistableStyles,M=v.get(r);if(M||(m=m.ownerDocument||m,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,M),(v=m.querySelector(Ml(r)))&&!v._p&&(M.instance=v,M.state.loading=5),jr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},jr.set(r,o),v||nR(m,r,o,M.state))),a&&u===null)throw Error(i(528,""));return M}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ro(o),o=de(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function no(r){return'href="'+Bn(r)+'"'}function Ml(r){return'link[rel="stylesheet"]['+r+"]"}function Sb(r){return D({},r,{"data-precedence":r.precedence,precedence:null})}function nR(r,a,o,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Qn(a,"link",o),le(a),r.head.appendChild(a))}function ro(r){return'[src="'+Bn(r)+'"]'}function Al(r){return"script[async]"+r}function Tb(r,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+Bn(o.href)+'"]');if(u)return a.instance=u,le(u),u;var m=D({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),le(u),Qn(u,"style",m),gu(u,o.precedence,r),a.instance=u;case"stylesheet":m=no(o.href);var v=r.querySelector(Ml(m));if(v)return a.state.loading|=4,a.instance=v,le(v),v;u=Sb(o),(m=jr.get(m))&&Nf(u,m),v=(r.ownerDocument||r).createElement("link"),le(v);var M=v;return M._p=new Promise(function(I,B){M.onload=I,M.onerror=B}),Qn(v,"link",u),a.state.loading|=4,gu(v,o.precedence,r),a.instance=v;case"script":return v=ro(o.src),(m=r.querySelector(Al(v)))?(a.instance=m,le(m),m):(u=o,(m=jr.get(v))&&(u=D({},o),Ff(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),le(m),Qn(m,"link",u),r.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,gu(u,o.precedence,r));return a.instance}function gu(r,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,v=m,M=0;M<u.length;M++){var I=u[M];if(I.dataset.precedence===a)v=I;else if(v!==m)break}v?v.parentNode.insertBefore(r,v.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(r,a.firstChild))}function Nf(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Ff(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var yu=null;function Eb(r,a,o){if(yu===null){var u=new Map,m=yu=new Map;m.set(o,u)}else m=yu,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var v=o[m];if(!(v[Lt]||v[at]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var M=v.getAttribute(a)||"";M=r+M;var I=u.get(M);I?I.push(v):u.set(M,[v])}}return u}function Mb(r,a,o){r=r.ownerDocument||r,r.head.insertBefore(o,a==="title"?r.querySelector("head > title"):null)}function rR(r,a,o){if(o===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ab(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Cl=null;function iR(){}function aR(r,a,o){if(Cl===null)throw Error(i(475));var u=Cl;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=no(o.href),v=r.querySelector(Ml(m));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=bu.bind(u),r.then(u,u)),a.state.loading|=4,a.instance=v,le(v);return}v=r.ownerDocument||r,o=Sb(o),(m=jr.get(m))&&Nf(o,m),v=v.createElement("link"),le(v);var M=v;M._p=new Promise(function(I,B){M.onload=I,M.onerror=B}),Qn(v,"link",o),a.instance=v}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=bu.bind(u),r.addEventListener("load",a),r.addEventListener("error",a))}}function sR(){if(Cl===null)throw Error(i(475));var r=Cl;return r.stylesheets&&r.count===0&&zf(r,r.stylesheets),0<r.count?function(a){var o=setTimeout(function(){if(r.stylesheets&&zf(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(o)}}:null}function bu(){if(this.count--,this.count===0){if(this.stylesheets)zf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var vu=null;function zf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,vu=new Map,a.forEach(oR,r),vu=null,bu.call(r))}function oR(r,a){if(!(a.state.loading&4)){var o=vu.get(r);if(o)var u=o.get(null);else{o=new Map,vu.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var M=m[v];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(o.set(M.dataset.precedence,M),u=M)}u&&o.set(null,u)}m=a.instance,M=m.getAttribute("data-precedence"),v=o.get(M)||u,v===u&&o.set(null,m),o.set(M,m),this.count++,u=bu.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),v?v.parentNode.insertBefore(m,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),a.state.loading|=4}}var Dl={$$typeof:b,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function lR(r,a,o,u,m,v,M,I){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ne(0),this.hiddenUpdates=ne(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Cb(r,a,o,u,m,v,M,I,B,ee,Te,ke){return r=new lR(r,a,o,M,I,B,ee,ke),a=1,v===!0&&(a|=24),v=Vr(3,null,null,a),r.current=v,v.stateNode=r,a=gd(),a.refCount++,r.pooledCache=a,a.refCount++,v.memoizedState={element:u,isDehydrated:o,cache:a},Zd(v),r}function Db(r){return r?(r=Os,r):Os}function Rb(r,a,o,u,m,v){m=Db(m),u.context===null?u.context=m:u.pendingContext=m,u=ca(a),u.payload={element:o},v=v===void 0?null:v,v!==null&&(u.callback=v),o=ua(r,u,a),o!==null&&(lr(o,r,a),dl(o,r,a))}function kb(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<a?o:a}}function Bf(r,a){kb(r,a),(r=r.alternate)&&kb(r,a)}function Pb(r){if(r.tag===13){var a=na(r,67108864);a!==null&&lr(a,r,67108864),Bf(r,67108864)}}var _u=!0;function cR(r,a,o,u){var m=C.T;C.T=null;var v=Q.p;try{Q.p=2,Hf(r,a,o,u)}finally{Q.p=v,C.T=m}}function uR(r,a,o,u){var m=C.T;C.T=null;var v=Q.p;try{Q.p=8,Hf(r,a,o,u)}finally{Q.p=v,C.T=m}}function Hf(r,a,o,u){if(_u){var m=Vf(u);if(m===null)Df(r,a,u,wu,o),Ib(r,u);else if(dR(m,r,a,o,u))u.stopPropagation();else if(Ib(r,u),a&4&&-1<hR.indexOf(r)){for(;m!==null;){var v=L(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var M=He(v.pendingLanes);if(M!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;M;){var B=1<<31-$e(M);I.entanglements[1]|=B,M&=~B}gi(v),(vn&6)===0&&(iu=Se()+500,Sl(0))}}break;case 13:I=na(v,2),I!==null&&lr(I,v,2),ou(),Bf(v,2)}if(v=Vf(u),v===null&&Df(r,a,u,wu,o),v===m)break;m=v}m!==null&&u.stopPropagation()}else Df(r,a,u,null,o)}}function Vf(r){return r=Yh(r),Gf(r)}var wu=null;function Gf(r){if(wu=null,r=qn(r),r!==null){var a=X(r);if(a===null)r=null;else{var o=a.tag;if(o===13){if(r=_e(a),r!==null)return r;r=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return wu=r,null}function Lb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case V:return 2;case pe:return 8;case xe:case Re:return 32;case Je:return 268435456;default:return 32}default:return 32}}var jf=!1,ya=null,ba=null,va=null,Rl=new Map,kl=new Map,_a=[],hR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ib(r,a){switch(r){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":Rl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(a.pointerId)}}function Pl(r,a,o,u,m,v){return r===null||r.nativeEvent!==v?(r={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:v,targetContainers:[m]},a!==null&&(a=L(a),a!==null&&Pb(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function dR(r,a,o,u,m){switch(a){case"focusin":return ya=Pl(ya,r,a,o,u,m),!0;case"dragenter":return ba=Pl(ba,r,a,o,u,m),!0;case"mouseover":return va=Pl(va,r,a,o,u,m),!0;case"pointerover":var v=m.pointerId;return Rl.set(v,Pl(Rl.get(v)||null,r,a,o,u,m)),!0;case"gotpointercapture":return v=m.pointerId,kl.set(v,Pl(kl.get(v)||null,r,a,o,u,m)),!0}return!1}function Ob(r){var a=qn(r.target);if(a!==null){var o=X(a);if(o!==null){if(a=o.tag,a===13){if(a=_e(o),a!==null){r.blockedOn=a,ut(r.priority,function(){if(o.tag===13){var u=Mr(),m=na(o,u);m!==null&&lr(m,o,u),Bf(o,u)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function xu(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var o=Vf(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Wh=u,o.target.dispatchEvent(u),Wh=null}else return a=L(o),a!==null&&Pb(a),r.blockedOn=o,!1;a.shift()}return!0}function Ub(r,a,o){xu(r)&&o.delete(a)}function fR(){jf=!1,ya!==null&&xu(ya)&&(ya=null),ba!==null&&xu(ba)&&(ba=null),va!==null&&xu(va)&&(va=null),Rl.forEach(Ub),kl.forEach(Ub)}function Su(r,a){r.blockedOn===a&&(r.blockedOn=null,jf||(jf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fR)))}var Tu=null;function Nb(r){Tu!==r&&(Tu=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Tu===r&&(Tu=null);for(var a=0;a<r.length;a+=3){var o=r[a],u=r[a+1],m=r[a+2];if(typeof u!="function"){if(Gf(u||o)===null)continue;break}var v=L(o);v!==null&&(r.splice(a,3),a-=3,Pd(v,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Ll(r){function a(B){return Su(B,r)}ya!==null&&Su(ya,r),ba!==null&&Su(ba,r),va!==null&&Su(va,r),Rl.forEach(a),kl.forEach(a);for(var o=0;o<_a.length;o++){var u=_a[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<_a.length&&(o=_a[0],o.blockedOn===null);)Ob(o),o.blockedOn===null&&_a.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],v=o[u+1],M=m[Xe]||null;if(typeof v=="function")M||Nb(o);else if(M){var I=null;if(v&&v.hasAttribute("formAction")){if(m=v,M=v[Xe]||null)I=M.formAction;else if(Gf(m)!==null)continue}else I=M.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),Nb(o)}}}function qf(r){this._internalRoot=r}Eu.prototype.render=qf.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var o=a.current,u=Mr();Rb(o,u,r,a,null,null)},Eu.prototype.unmount=qf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;r.tag===0&&Js(),Rb(r.current,2,null,r,null,null),ou(),a[_t]=null}};function Eu(r){this._internalRoot=r}Eu.prototype.unstable_scheduleHydration=function(r){if(r){var a=Qe();r={blockedOn:null,target:r,priority:a};for(var o=0;o<_a.length&&a!==0&&a<_a[o].priority;o++);_a.splice(o,0,r),o===0&&Ob(r)}};var Fb=e.version;if(Fb!=="19.0.0")throw Error(i(527,Fb,"19.0.0"));Q.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=se(a),r=r!==null?Ee(r):null,r=r===null?null:r.stateNode,r};var pR={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:C,findFiberByHostInstance:qn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{Ze=Mu.inject(pR),Ke=Mu}catch{}}return Ol.createRoot=function(r,a){if(!s(r))throw Error(i(299));var o=!1,u="",m=ty,v=ny,M=ry,I=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks)),a=Cb(r,1,!1,null,null,o,u,m,v,M,I,null),r[_t]=a.current,Cf(r.nodeType===8?r.parentNode:r),new qf(a)},Ol.hydrateRoot=function(r,a,o){if(!s(r))throw Error(i(299));var u=!1,m="",v=ty,M=ny,I=ry,B=null,ee=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(M=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(B=o.unstable_transitionCallbacks),o.formState!==void 0&&(ee=o.formState)),a=Cb(r,1,!0,a,o??null,u,m,v,M,I,B,ee),a.context=Db(null),o=a.current,u=Mr(),m=ca(u),m.callback=null,ua(o,m,u),a.current.lanes=u,fe(a,u),gi(a),r[_t]=a.current,Cf(r),new Eu(a)},Ol.version="19.0.0",Ol}var Qb;function ER(){if(Qb)return Xf.exports;Qb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xf.exports=TR(),Xf.exports}var MR=ER(),Ul={},Zb;function AR(){if(Zb)return Ul;Zb=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.parse=c,Ul.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,b){const x=new l,S=y.length;if(S<2)return x;const w=(b==null?void 0:b.decode)||p;let _=0;do{const R=y.indexOf("=",_);if(R===-1)break;const A=y.indexOf(";",_),k=A===-1?S:A;if(R>k){_=y.lastIndexOf(";",R-1)+1;continue}const U=h(y,_,R),E=f(y,R,U),N=y.slice(U,E);if(x[N]===void 0){let H=h(y,R+1,k),C=f(y,k,H);const D=w(y.slice(H,C));x[N]=D}_=k+1}while(_<S);return x}function h(y,b,x){do{const S=y.charCodeAt(b);if(S!==32&&S!==9)return b}while(++b<x);return x}function f(y,b,x){for(;b>x;){const S=y.charCodeAt(--b);if(S!==32&&S!==9)return b+1}return x}function d(y,b,x){const S=(x==null?void 0:x.encode)||encodeURIComponent;if(!n.test(y))throw new TypeError(`argument name is invalid: ${y}`);const w=S(b);if(!e.test(w))throw new TypeError(`argument val is invalid: ${b}`);let _=y+"="+w;if(!x)return _;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);_+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);_+="; Domain="+x.domain}if(x.path){if(!i.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);_+="; Path="+x.path}if(x.expires){if(!g(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);_+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(_+="; HttpOnly"),x.secure&&(_+="; Secure"),x.partitioned&&(_+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return _}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function g(y){return s.call(y)==="[object Date]"}return Ul}AR();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var E_=n=>{throw TypeError(n)},CR=(n,e,t)=>e.has(n)||E_("Cannot "+t),Jf=(n,e,t)=>(CR(n,e,"read from private field"),t?t.call(n):e.get(n)),DR=(n,e,t)=>e.has(n)?E_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Kb="popstate";function RR(n={}){function e(s,l){let{pathname:c="/",search:h="",hash:f=""}=ea(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),lc("",{pathname:c,search:h,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let f=s.location.href,d=f.indexOf("#");h=d===-1?f:f.slice(0,d)}return h+"#"+(typeof l=="string"?l:Oa(l))}function i(s,l){Mn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return PR(e,t,i,n)}function Ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Mn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kR(){return Math.random().toString(36).substring(2,10)}function Jb(n,e){return{usr:n.state,key:n.key,idx:e}}function lc(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ea(e):e,state:t,key:e&&e.key||i||kR()}}function Oa({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ea(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function PR(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:l=!1}=i,c=s.history,h="POP",f=null,d=p();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function p(){return(c.state||{idx:null}).idx}function g(){h="POP";let w=p(),_=w==null?null:w-d;d=w,f&&f({action:h,location:S.location,delta:_})}function y(w,_){h="PUSH";let R=lc(S.location,w,_);t&&t(R,w),d=p()+1;let A=Jb(R,d),k=S.createHref(R);try{c.pushState(A,"",k)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(k)}l&&f&&f({action:h,location:S.location,delta:1})}function b(w,_){h="REPLACE";let R=lc(S.location,w,_);t&&t(R,w),d=p();let A=Jb(R,d),k=S.createHref(R);c.replaceState(A,"",k),l&&f&&f({action:h,location:S.location,delta:0})}function x(w){return M_(w)}let S={get action(){return h},get location(){return n(s,c)},listen(w){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Kb,g),f=w,()=>{s.removeEventListener(Kb,g),f=null}},createHref(w){return e(s,w)},createURL:x,encodeLocation(w){let _=x(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:b,go(w){return c.go(w)}};return S}function M_(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Oa(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var Kl,$b=class{constructor(n){if(DR(this,Kl,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Jf(this,Kl).has(n))return Jf(this,Kl).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Jf(this,Kl).set(n,e)}};Kl=new WeakMap;var LR=new Set(["lazy","caseSensitive","path","id","index","children"]);function IR(n){return LR.has(n)}var OR=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function UR(n){return OR.has(n)}function NR(n){return n.index===!0}function yh(n,e,t=[],i={}){return n.map((s,l)=>{let c=[...t,String(l)],h=typeof s.id=="string"?s.id:c.join("-");if(Ht(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ht(!i[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),NR(s)){let f={...s,...e(s),id:h};return i[h]=f,f}else{let f={...s,...e(s),id:h,children:void 0};return i[h]=f,s.children&&(f.children=yh(s.children,e,c,i)),f}})}function ka(n,e,t="/"){return ah(n,e,t,!1)}function ah(n,e,t,i){let s=typeof e=="string"?ea(e):e,l=Zr(s.pathname||"/",t);if(l==null)return null;let c=A_(n);zR(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let d=ZR(l);h=XR(c[f],d,i)}return h}function FR(n,e){let{route:t,pathname:i,params:s}=n;return{id:t.id,pathname:i,params:s,data:e[t.id],handle:t.handle}}function A_(n,e=[],t=[],i=""){let s=(l,c,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};f.relativePath.startsWith("/")&&(Ht(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let d=xi([i,f.relativePath]),p=t.concat(f);l.children&&l.children.length>0&&(Ht(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),A_(l.children,e,p,d)),!(l.path==null&&!l.index)&&e.push({path:d,score:WR(d,l.index),routesMeta:p})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))s(l,c);else for(let f of C_(l.path))s(l,c,f)}),e}function C_(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return s?[l,""]:[l];let c=C_(i.join("/")),h=[];return h.push(...c.map(f=>f===""?l:[l,f].join("/"))),s&&h.push(...c),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function zR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:YR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var BR=/^:[\w-]+$/,HR=3,VR=2,GR=1,jR=10,qR=-2,ev=n=>n==="*";function WR(n,e){let t=n.split("/"),i=t.length;return t.some(ev)&&(i+=qR),e&&(i+=VR),t.filter(s=>!ev(s)).reduce((s,l)=>s+(BR.test(l)?HR:l===""?GR:jR),i)}function YR(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function XR(n,e,t=!1){let{routesMeta:i}=n,s={},l="/",c=[];for(let h=0;h<i.length;++h){let f=i[h],d=h===i.length-1,p=l==="/"?e:e.slice(l.length)||"/",g=bh({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),y=f.route;if(!g&&d&&t&&!i[i.length-1].route.index&&(g=bh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(s,g.params),c.push({params:s,pathname:xi([l,g.pathname]),pathnameBase:$R(xi([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=xi([l,g.pathnameBase]))}return c}function bh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=QR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((d,{paramName:p,isOptional:g},y)=>{if(p==="*"){let x=h[y]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const b=h[y];return g&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:c,pattern:n}}function QR(n,e=!1,t=!0){Mn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function ZR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Zr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function KR(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?ea(n):n;return{pathname:t?t.startsWith("/")?t:JR(t,e):e,search:ek(i),hash:tk(s)}}function JR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function $f(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tg(n){let e=D_(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function ng(n,e,t,i=!1){let s;typeof n=="string"?s=ea(n):(s={...n},Ht(!s.pathname||!s.pathname.includes("?"),$f("?","pathname","search",s)),Ht(!s.pathname||!s.pathname.includes("#"),$f("#","pathname","hash",s)),Ht(!s.search||!s.search.includes("#"),$f("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,h;if(c==null)h=t;else{let g=e.length-1;if(!i&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}h=g>=0?e[g]:"/"}let f=KR(s,h),d=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}var xi=n=>n.join("/").replace(/\/\/+/g,"/"),$R=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ek=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,tk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,vh=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function cc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var R_=["POST","PUT","PATCH","DELETE"],nk=new Set(R_),rk=["GET",...R_],ik=new Set(rk),ak=new Set([301,302,303,307,308]),sk=new Set([307,308]),ep={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ok={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Nl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},rg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lk=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),k_="remix-router-transitions",P_=Symbol("ResetLoaderData");function ck(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Ht(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],s=n.mapRouteProperties||lk,l={},c=yh(n.routes,s,void 0,l),h,f=n.basename||"/",d=n.dataStrategy||pk,p={unstable_middleware:!1,...n.future},g=null,y=new Set,b=null,x=null,S=null,w=n.hydrationData!=null,_=ka(c,n.history.location,f),R=!1,A=null,k;if(_==null&&!n.patchRoutesOnNavigation){let G=Wr(404,{pathname:n.history.location.pathname}),{matches:ne,route:fe}=dv(c);k=!0,_=ne,A={[fe.id]:G}}else if(_&&!n.hydrationData&&Ve(_,c,n.history.location.pathname).active&&(_=null),_)if(_.some(G=>G.route.lazy))k=!1;else if(!_.some(G=>G.route.loader))k=!0;else{let G=n.hydrationData?n.hydrationData.loaderData:null,ne=n.hydrationData?n.hydrationData.errors:null;if(ne){let fe=_.findIndex(Oe=>ne[Oe.route.id]!==void 0);k=_.slice(0,fe+1).every(Oe=>!Zp(Oe.route,G,ne))}else k=_.every(fe=>!Zp(fe.route,G,ne))}else{k=!1,_=[];let G=Ve(null,c,n.history.location.pathname);G.active&&G.matches&&(R=!0,_=G.matches)}let U,E={historyAction:n.history.action,location:n.history.location,matches:_,initialized:k,navigation:ep,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||A,fetchers:new Map,blockers:new Map},N="POP",H=!1,C,D=!1,F=new Map,J=null,Y=!1,W=!1,re=new Set,j=new Map,ce=0,X=-1,_e=new Map,T=new Set,se=new Map,Ee=new Map,O=new Set,Q=new Map,be,ve=null;function Ie(){if(g=n.history.listen(({action:G,location:ne,delta:fe})=>{if(be){be(),be=void 0;return}Mn(Q.size===0||fe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Oe=Rt({currentLocation:E.location,nextLocation:ne,historyAction:G});if(Oe&&fe!=null){let Ge=new Promise(et=>{be=et});n.history.go(fe*-1),$e(Oe,{state:"blocked",location:ne,proceed(){$e(Oe,{state:"proceeding",proceed:void 0,reset:void 0,location:ne}),Ge.then(()=>n.history.go(fe))},reset(){let et=new Map(E.blockers);et.set(Oe,Nl),Ue({blockers:et})}});return}return q(G,ne)}),t){Ek(e,F);let G=()=>Mk(e,F);e.addEventListener("pagehide",G),J=()=>e.removeEventListener("pagehide",G)}return E.initialized||q("POP",E.location,{initialHydration:!0}),U}function Ne(){g&&g(),J&&J(),y.clear(),C&&C.abort(),E.fetchers.forEach((G,ne)=>Re(ne)),E.blockers.forEach((G,ne)=>ot(ne))}function rt(G){return y.add(G),()=>y.delete(G)}function Ue(G,ne={}){E={...E,...G};let fe=[],Oe=[];E.fetchers.forEach((Ge,et)=>{Ge.state==="idle"&&(O.has(et)?fe.push(et):Oe.push(et))}),O.forEach(Ge=>{!E.fetchers.has(Ge)&&!j.has(Ge)&&fe.push(Ge)}),[...y].forEach(Ge=>Ge(E,{deletedFetchers:fe,viewTransitionOpts:ne.viewTransitionOpts,flushSync:ne.flushSync===!0})),fe.forEach(Ge=>Re(Ge)),Oe.forEach(Ge=>E.fetchers.delete(Ge))}function Tt(G,ne,{flushSync:fe}={}){var tt,at;let Oe=E.actionData!=null&&E.navigation.formMethod!=null&&kr(E.navigation.formMethod)&&E.navigation.state==="loading"&&((tt=G.state)==null?void 0:tt._isRedirect)!==!0,Ge;ne.actionData?Object.keys(ne.actionData).length>0?Ge=ne.actionData:Ge=null:Oe?Ge=E.actionData:Ge=null;let et=ne.loaderData?uv(E.loaderData,ne.loaderData,ne.matches||[],ne.errors):E.loaderData,mt=E.blockers;mt.size>0&&(mt=new Map(mt),mt.forEach((Xe,_t)=>mt.set(_t,Nl)));let Qe=H===!0||E.navigation.formMethod!=null&&kr(E.navigation.formMethod)&&((at=G.state)==null?void 0:at._isRedirect)!==!0;h&&(c=h,h=void 0),Y||N==="POP"||(N==="PUSH"?n.history.push(G,G.state):N==="REPLACE"&&n.history.replace(G,G.state));let ut;if(N==="POP"){let Xe=F.get(E.location.pathname);Xe&&Xe.has(G.pathname)?ut={currentLocation:E.location,nextLocation:G}:F.has(G.pathname)&&(ut={currentLocation:G,nextLocation:E.location})}else if(D){let Xe=F.get(E.location.pathname);Xe?Xe.add(G.pathname):(Xe=new Set([G.pathname]),F.set(E.location.pathname,Xe)),ut={currentLocation:E.location,nextLocation:G}}Ue({...ne,actionData:Ge,loaderData:et,historyAction:N,location:G,initialized:!0,navigation:ep,revalidation:"idle",restoreScrollPosition:He(G,ne.matches||E.matches),preventScrollReset:Qe,blockers:mt},{viewTransitionOpts:ut,flushSync:fe===!0}),N="POP",H=!1,D=!1,Y=!1,W=!1,ve==null||ve.resolve(),ve=null}async function Ft(G,ne){if(typeof G=="number"){n.history.go(G);return}let fe=Qp(E.location,E.matches,f,G,ne==null?void 0:ne.fromRouteId,ne==null?void 0:ne.relative),{path:Oe,submission:Ge,error:et}=tv(!1,fe,ne),mt=E.location,Qe=lc(E.location,Oe,ne&&ne.state);Qe={...Qe,...n.history.encodeLocation(Qe)};let ut=ne&&ne.replace!=null?ne.replace:void 0,tt="PUSH";ut===!0?tt="REPLACE":ut===!1||Ge!=null&&kr(Ge.formMethod)&&Ge.formAction===E.location.pathname+E.location.search&&(tt="REPLACE");let at=ne&&"preventScrollReset"in ne?ne.preventScrollReset===!0:void 0,Xe=(ne&&ne.flushSync)===!0,_t=Rt({currentLocation:mt,nextLocation:Qe,historyAction:tt});if(_t){$e(_t,{state:"blocked",location:Qe,proceed(){$e(_t,{state:"proceeding",proceed:void 0,reset:void 0,location:Qe}),Ft(G,ne)},reset(){let Yt=new Map(E.blockers);Yt.set(_t,Nl),Ue({blockers:Yt})}});return}await q(tt,Qe,{submission:Ge,pendingError:et,preventScrollReset:at,replace:ne&&ne.replace,enableViewTransition:ne&&ne.viewTransition,flushSync:Xe})}function xt(){ve||(ve=Ak()),De(),Ue({revalidation:"loading"});let G=ve.promise;return E.navigation.state==="submitting"?G:E.navigation.state==="idle"?(q(E.historyAction,E.location,{startUninterruptedRevalidation:!0}),G):(q(N||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation,enableViewTransition:D===!0}),G)}async function q(G,ne,fe){C&&C.abort(),C=null,N=G,Y=(fe&&fe.startUninterruptedRevalidation)===!0,Me(E.location,E.matches),H=(fe&&fe.preventScrollReset)===!0,D=(fe&&fe.enableViewTransition)===!0;let Oe=h||c,Ge=fe&&fe.overrideNavigation,et=fe!=null&&fe.initialHydration&&E.matches&&E.matches.length>0&&!R?E.matches:ka(Oe,ne,f),mt=(fe&&fe.flushSync)===!0;if(et&&E.initialized&&!W&&_k(E.location,ne)&&!(fe&&fe.submission&&kr(fe.submission.formMethod))){Tt(ne,{matches:et},{flushSync:mt});return}let Qe=Ve(et,Oe,ne.pathname);if(Qe.active&&Qe.matches&&(et=Qe.matches),!et){let{error:An,notFoundMatches:zn,route:Lt}=$(ne.pathname);Tt(ne,{matches:zn,loaderData:{},errors:{[Lt.id]:An}},{flushSync:mt});return}C=new AbortController;let ut=wo(n.history,ne,C.signal,fe&&fe.submission),tt=new $b(n.unstable_getContext?await n.unstable_getContext():void 0),at;if(fe&&fe.pendingError)at=[ds(et).route.id,{type:"error",error:fe.pendingError}];else if(fe&&fe.submission&&kr(fe.submission.formMethod)){let An=await mn(ut,ne,fe.submission,et,tt,Qe.active,fe&&fe.initialHydration===!0,{replace:fe.replace,flushSync:mt});if(An.shortCircuited)return;if(An.pendingActionResult){let[zn,Lt]=An.pendingActionResult;if(Rr(Lt)&&cc(Lt.error)&&Lt.error.status===404){C=null,Tt(ne,{matches:An.matches,loaderData:{},errors:{[zn]:Lt.error}});return}}et=An.matches||et,at=An.pendingActionResult,Ge=tp(ne,fe.submission),mt=!1,Qe.active=!1,ut=wo(n.history,ut.url,ut.signal)}let{shortCircuited:Xe,matches:_t,loaderData:Yt,errors:yn}=await ht(ut,ne,et,tt,Qe.active,Ge,fe&&fe.submission,fe&&fe.fetcherSubmission,fe&&fe.replace,fe&&fe.initialHydration===!0,mt,at);Xe||(C=null,Tt(ne,{matches:_t||et,...hv(at),loaderData:Yt,errors:yn}))}async function mn(G,ne,fe,Oe,Ge,et,mt,Qe={}){De();let ut=Sk(ne,fe);if(Ue({navigation:ut},{flushSync:Qe.flushSync===!0}),et){let Xe=await bt(Oe,ne.pathname,G.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let _t=ds(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,pendingActionResult:[_t,{type:"error",error:Xe.error}]}}else if(Xe.matches)Oe=Xe.matches;else{let{notFoundMatches:_t,error:Yt,route:yn}=$(ne.pathname);return{matches:_t,pendingActionResult:[yn.id,{type:"error",error:Yt}]}}}let tt,at=Jl(Oe,ne);if(!at.route.action&&!at.route.lazy)tt={type:"error",error:Wr(405,{method:G.method,pathname:ne.pathname,routeId:at.route.id})};else{let Xe=Eo(s,l,G,Oe,at,mt?[]:i,Ge),_t=await ue(G,Xe,Ge,null);if(tt=_t[at.route.id],!tt){for(let Yt of Oe)if(_t[Yt.route.id]){tt=_t[Yt.route.id];break}}if(G.signal.aborted)return{shortCircuited:!0}}if(ms(tt)){let Xe;return Qe&&Qe.replace!=null?Xe=Qe.replace:Xe=ov(tt.response.headers.get("Location"),new URL(G.url),f)===E.location.pathname+E.location.search,await P(G,tt,!0,{submission:fe,replace:Xe}),{shortCircuited:!0}}if(Rr(tt)){let Xe=ds(Oe,at.route.id);return(Qe&&Qe.replace)!==!0&&(N="PUSH"),{matches:Oe,pendingActionResult:[Xe.route.id,tt,at.route.id]}}return{matches:Oe,pendingActionResult:[at.route.id,tt]}}async function ht(G,ne,fe,Oe,Ge,et,mt,Qe,ut,tt,at,Xe){let _t=et||tp(ne,mt),Yt=mt||Qe||pv(_t),yn=!Y&&!tt;if(Ge){if(yn){let ze=yt(Xe);Ue({navigation:_t,...ze!==void 0?{actionData:ze}:{}},{flushSync:at})}let Le=await bt(fe,ne.pathname,G.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){let ze=ds(Le.partialMatches).route.id;return{matches:Le.partialMatches,loaderData:{},errors:{[ze]:Le.error}}}else if(Le.matches)fe=Le.matches;else{let{error:ze,notFoundMatches:dt,route:vt}=$(ne.pathname);return{matches:dt,loaderData:{},errors:{[vt.id]:ze}}}}let An=h||c,{dsMatches:zn,revalidatingFetchers:Lt}=nv(G,Oe,s,l,n.history,E,fe,Yt,ne,tt?[]:i,tt===!0,W,re,O,se,T,An,f,n.patchRoutesOnNavigation!=null,Xe);if(X=++ce,!n.dataStrategy&&!zn.some(Le=>Le.shouldLoad)&&Lt.length===0){let Le=Ze();return Tt(ne,{matches:fe,loaderData:{},errors:Xe&&Rr(Xe[1])?{[Xe[0]]:Xe[1].error}:null,...hv(Xe),...Le?{fetchers:new Map(E.fetchers)}:{}},{flushSync:at}),{shortCircuited:!0}}if(yn){let Le={};if(!Ge){Le.navigation=_t;let ze=yt(Xe);ze!==void 0&&(Le.actionData=ze)}Lt.length>0&&(Le.fetchers=st(Lt)),Ue(Le,{flushSync:at})}Lt.forEach(Le=>{Ce(Le.key),Le.controller&&j.set(Le.key,Le.controller)});let Jr=()=>Lt.forEach(Le=>Ce(Le.key));C&&C.signal.addEventListener("abort",Jr);let{loaderResults:qn,fetcherResults:L}=await Se(zn,Lt,G,Oe);if(G.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Jr),Lt.forEach(Le=>j.delete(Le.key));let Z=Au(qn);if(Z)return await P(G,Z.result,!0,{replace:ut}),{shortCircuited:!0};if(Z=Au(L),Z)return T.add(Z.key),await P(G,Z.result,!0,{replace:ut}),{shortCircuited:!0};let{loaderData:de,errors:le}=cv(E,fe,qn,Xe,Lt,L);tt&&E.errors&&(le={...E.errors,...le});let ie=Ze(),Pe=Ke(X),Be=ie||Pe||Lt.length>0;return{matches:fe,loaderData:de,errors:le,...Be?{fetchers:new Map(E.fetchers)}:{}}}function yt(G){if(G&&!Rr(G[1]))return{[G[0]]:G[1].data};if(E.actionData)return Object.keys(E.actionData).length===0?null:E.actionData}function st(G){return G.forEach(ne=>{let fe=E.fetchers.get(ne.key),Oe=Fl(void 0,fe?fe.data:void 0);E.fetchers.set(ne.key,Oe)}),new Map(E.fetchers)}async function jt(G,ne,fe,Oe){Ce(G);let Ge=(Oe&&Oe.flushSync)===!0,et=h||c,mt=Qp(E.location,E.matches,f,fe,ne,Oe==null?void 0:Oe.relative),Qe=ka(et,mt,f),ut=Ve(Qe,et,mt);if(ut.active&&ut.matches&&(Qe=ut.matches),!Qe){pe(G,ne,Wr(404,{pathname:mt}),{flushSync:Ge});return}let{path:tt,submission:at,error:Xe}=tv(!0,mt,Oe);if(Xe){pe(G,ne,Xe,{flushSync:Ge});return}let _t=Jl(Qe,tt),Yt=new $b(n.unstable_getContext?await n.unstable_getContext():void 0),yn=(Oe&&Oe.preventScrollReset)===!0;if(at&&kr(at.formMethod)){await it(G,ne,tt,_t,Qe,Yt,ut.active,Ge,yn,at);return}se.set(G,{routeId:ne,path:tt}),await z(G,ne,tt,_t,Qe,Yt,ut.active,Ge,yn,at)}async function it(G,ne,fe,Oe,Ge,et,mt,Qe,ut,tt){De(),se.delete(G);function at(ft){if(!ft.route.action&&!ft.route.lazy){let Ct=Wr(405,{method:tt.formMethod,pathname:fe,routeId:ne});return pe(G,ne,Ct,{flushSync:Qe}),!0}return!1}if(!mt&&at(Oe))return;let Xe=E.fetchers.get(G);V(G,Tk(tt,Xe),{flushSync:Qe});let _t=new AbortController,Yt=wo(n.history,fe,_t.signal,tt);if(mt){let ft=await bt(Ge,fe,Yt.signal,G);if(ft.type==="aborted")return;if(ft.type==="error"){pe(G,ne,ft.error,{flushSync:Qe});return}else if(ft.matches){if(Ge=ft.matches,Oe=Jl(Ge,fe),at(Oe))return}else{pe(G,ne,Wr(404,{pathname:fe}),{flushSync:Qe});return}}j.set(G,_t);let yn=ce,An=Eo(s,l,Yt,Ge,Oe,i,et),Lt=(await ue(Yt,An,et,G))[Oe.route.id];if(Yt.signal.aborted){j.get(G)===_t&&j.delete(G);return}if(O.has(G)){if(ms(Lt)||Rr(Lt)){V(G,Da(void 0));return}}else{if(ms(Lt))if(j.delete(G),X>yn){V(G,Da(void 0));return}else return T.add(G),V(G,Fl(tt)),P(Yt,Lt,!1,{fetcherSubmission:tt,preventScrollReset:ut});if(Rr(Lt)){pe(G,ne,Lt.error);return}}let Jr=E.navigation.location||E.location,qn=wo(n.history,Jr,_t.signal),L=h||c,Z=E.navigation.state!=="idle"?ka(L,E.navigation.location,f):E.matches;Ht(Z,"Didn't find any matches after fetcher action");let de=++ce;_e.set(G,de);let le=Fl(tt,Lt.data);E.fetchers.set(G,le);let{dsMatches:ie,revalidatingFetchers:Pe}=nv(qn,et,s,l,n.history,E,Z,tt,Jr,i,!1,W,re,O,se,T,L,f,n.patchRoutesOnNavigation!=null,[Oe.route.id,Lt]);Pe.filter(ft=>ft.key!==G).forEach(ft=>{let Ct=ft.key,en=E.fetchers.get(Ct),qt=Fl(void 0,en?en.data:void 0);E.fetchers.set(Ct,qt),Ce(Ct),ft.controller&&j.set(Ct,ft.controller)}),Ue({fetchers:new Map(E.fetchers)});let Be=()=>Pe.forEach(ft=>Ce(ft.key));_t.signal.addEventListener("abort",Be);let{loaderResults:Le,fetcherResults:ze}=await Se(ie,Pe,qn,et);if(_t.signal.aborted)return;if(_t.signal.removeEventListener("abort",Be),_e.delete(G),j.delete(G),Pe.forEach(ft=>j.delete(ft.key)),E.fetchers.has(G)){let ft=Da(Lt.data);E.fetchers.set(G,ft)}let dt=Au(Le);if(dt)return P(qn,dt.result,!1,{preventScrollReset:ut});if(dt=Au(ze),dt)return T.add(dt.key),P(qn,dt.result,!1,{preventScrollReset:ut});let{loaderData:vt,errors:lt}=cv(E,Z,Le,void 0,Pe,ze);Ke(de),E.navigation.state==="loading"&&de>X?(Ht(N,"Expected pending action"),C&&C.abort(),Tt(E.navigation.location,{matches:Z,loaderData:vt,errors:lt,fetchers:new Map(E.fetchers)})):(Ue({errors:lt,loaderData:uv(E.loaderData,vt,Z,lt),fetchers:new Map(E.fetchers)}),W=!1)}async function z(G,ne,fe,Oe,Ge,et,mt,Qe,ut,tt){let at=E.fetchers.get(G);V(G,Fl(tt,at?at.data:void 0),{flushSync:Qe});let Xe=new AbortController,_t=wo(n.history,fe,Xe.signal);if(mt){let Lt=await bt(Ge,fe,_t.signal,G);if(Lt.type==="aborted")return;if(Lt.type==="error"){pe(G,ne,Lt.error,{flushSync:Qe});return}else if(Lt.matches)Ge=Lt.matches,Oe=Jl(Ge,fe);else{pe(G,ne,Wr(404,{pathname:fe}),{flushSync:Qe});return}}j.set(G,Xe);let Yt=ce,yn=Eo(s,l,_t,Ge,Oe,i,et),zn=(await ue(_t,yn,et,G))[Oe.route.id];if(j.get(G)===Xe&&j.delete(G),!_t.signal.aborted){if(O.has(G)){V(G,Da(void 0));return}if(ms(zn))if(X>Yt){V(G,Da(void 0));return}else{T.add(G),await P(_t,zn,!1,{preventScrollReset:ut});return}if(Rr(zn)){pe(G,ne,zn.error);return}V(G,Da(zn.data))}}async function P(G,ne,fe,{submission:Oe,fetcherSubmission:Ge,preventScrollReset:et,replace:mt}={}){ne.response.headers.has("X-Remix-Revalidate")&&(W=!0);let Qe=ne.response.headers.get("Location");Ht(Qe,"Expected a Location header on the redirect Response"),Qe=ov(Qe,new URL(G.url),f);let ut=lc(E.location,Qe,{_isRedirect:!0});if(t){let yn=!1;if(ne.response.headers.has("X-Remix-Reload-Document"))yn=!0;else if(rg.test(Qe)){const An=M_(Qe,!0);yn=An.origin!==e.location.origin||Zr(An.pathname,f)==null}if(yn){mt?e.location.replace(Qe):e.location.assign(Qe);return}}C=null;let tt=mt===!0||ne.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:at,formAction:Xe,formEncType:_t}=E.navigation;!Oe&&!Ge&&at&&Xe&&_t&&(Oe=pv(E.navigation));let Yt=Oe||Ge;if(sk.has(ne.response.status)&&Yt&&kr(Yt.formMethod))await q(tt,ut,{submission:{...Yt,formAction:Qe},preventScrollReset:et||H,enableViewTransition:fe?D:void 0});else{let yn=tp(ut,Oe);await q(tt,ut,{overrideNavigation:yn,fetcherSubmission:Ge,preventScrollReset:et||H,enableViewTransition:fe?D:void 0})}}async function ue(G,ne,fe,Oe){let Ge,et={};try{Ge=await mk(d,G,ne,Oe,fe,!1)}catch(mt){return ne.filter(Qe=>Qe.shouldLoad).forEach(Qe=>{et[Qe.route.id]={type:"error",error:mt}}),et}if(G.signal.aborted)return et;for(let[mt,Qe]of Object.entries(Ge))if(wk(Qe)){let ut=Qe.result;et[mt]={type:"redirect",response:bk(ut,G,mt,ne,f)}}else et[mt]=await yk(Qe);return et}async function Se(G,ne,fe,Oe){let Ge=ue(fe,G,Oe,null),et=Promise.all(ne.map(async ut=>{if(ut.matches&&ut.match&&ut.request&&ut.controller){let at=(await ue(ut.request,ut.matches,Oe,ut.key))[ut.match.route.id];return{[ut.key]:at}}else return Promise.resolve({[ut.key]:{type:"error",error:Wr(404,{pathname:ut.path})}})})),mt=await Ge,Qe=(await et).reduce((ut,tt)=>Object.assign(ut,tt),{});return{loaderResults:mt,fetcherResults:Qe}}function De(){W=!0,se.forEach((G,ne)=>{j.has(ne)&&re.add(ne),Ce(ne)})}function V(G,ne,fe={}){E.fetchers.set(G,ne),Ue({fetchers:new Map(E.fetchers)},{flushSync:(fe&&fe.flushSync)===!0})}function pe(G,ne,fe,Oe={}){let Ge=ds(E.matches,ne);Re(G),Ue({errors:{[Ge.route.id]:fe},fetchers:new Map(E.fetchers)},{flushSync:(Oe&&Oe.flushSync)===!0})}function xe(G){return Ee.set(G,(Ee.get(G)||0)+1),O.has(G)&&O.delete(G),E.fetchers.get(G)||ok}function Re(G){let ne=E.fetchers.get(G);j.has(G)&&!(ne&&ne.state==="loading"&&_e.has(G))&&Ce(G),se.delete(G),_e.delete(G),T.delete(G),O.delete(G),re.delete(G),E.fetchers.delete(G)}function Je(G){let ne=(Ee.get(G)||0)-1;ne<=0?(Ee.delete(G),O.add(G)):Ee.set(G,ne),Ue({fetchers:new Map(E.fetchers)})}function Ce(G){let ne=j.get(G);ne&&(ne.abort(),j.delete(G))}function je(G){for(let ne of G){let fe=xe(ne),Oe=Da(fe.data);E.fetchers.set(ne,Oe)}}function Ze(){let G=[],ne=!1;for(let fe of T){let Oe=E.fetchers.get(fe);Ht(Oe,`Expected fetcher: ${fe}`),Oe.state==="loading"&&(T.delete(fe),G.push(fe),ne=!0)}return je(G),ne}function Ke(G){let ne=[];for(let[fe,Oe]of _e)if(Oe<G){let Ge=E.fetchers.get(fe);Ht(Ge,`Expected fetcher: ${fe}`),Ge.state==="loading"&&(Ce(fe),_e.delete(fe),ne.push(fe))}return je(ne),ne.length>0}function Ye(G,ne){let fe=E.blockers.get(G)||Nl;return Q.get(G)!==ne&&Q.set(G,ne),fe}function ot(G){E.blockers.delete(G),Q.delete(G)}function $e(G,ne){let fe=E.blockers.get(G)||Nl;Ht(fe.state==="unblocked"&&ne.state==="blocked"||fe.state==="blocked"&&ne.state==="blocked"||fe.state==="blocked"&&ne.state==="proceeding"||fe.state==="blocked"&&ne.state==="unblocked"||fe.state==="proceeding"&&ne.state==="unblocked",`Invalid blocker state transition: ${fe.state} -> ${ne.state}`);let Oe=new Map(E.blockers);Oe.set(G,ne),Ue({blockers:Oe})}function Rt({currentLocation:G,nextLocation:ne,historyAction:fe}){if(Q.size===0)return;Q.size>1&&Mn(!1,"A router only supports one blocker at a time");let Oe=Array.from(Q.entries()),[Ge,et]=Oe[Oe.length-1],mt=E.blockers.get(Ge);if(!(mt&&mt.state==="proceeding")&&et({currentLocation:G,nextLocation:ne,historyAction:fe}))return Ge}function $(G){let ne=Wr(404,{pathname:G}),fe=h||c,{matches:Oe,route:Ge}=dv(fe);return{notFoundMatches:Oe,route:Ge,error:ne}}function qe(G,ne,fe){if(b=G,S=ne,x=fe||null,!w&&E.navigation===ep){w=!0;let Oe=He(E.location,E.matches);Oe!=null&&Ue({restoreScrollPosition:Oe})}return()=>{b=null,S=null,x=null}}function ye(G,ne){return x&&x(G,ne.map(Oe=>FR(Oe,E.loaderData)))||G.key}function Me(G,ne){if(b&&S){let fe=ye(G,ne);b[fe]=S()}}function He(G,ne){if(b){let fe=ye(G,ne),Oe=b[fe];if(typeof Oe=="number")return Oe}return null}function Ve(G,ne,fe){if(n.patchRoutesOnNavigation)if(G){if(Object.keys(G[0].params).length>0)return{active:!0,matches:ah(ne,fe,f,!0)}}else return{active:!0,matches:ah(ne,fe,f,!0)||[]};return{active:!1,matches:null}}async function bt(G,ne,fe,Oe){if(!n.patchRoutesOnNavigation)return{type:"success",matches:G};let Ge=G;for(;;){let et=h==null,mt=h||c,Qe=l;try{await n.patchRoutesOnNavigation({signal:fe,path:ne,matches:Ge,fetcherKey:Oe,patch:(at,Xe)=>{fe.aborted||rv(at,Xe,mt,Qe,s)}})}catch(at){return{type:"error",error:at,partialMatches:Ge}}finally{et&&!fe.aborted&&(c=[...c])}if(fe.aborted)return{type:"aborted"};let ut=ka(mt,ne,f);if(ut)return{type:"success",matches:ut};let tt=ah(mt,ne,f,!0);if(!tt||Ge.length===tt.length&&Ge.every((at,Xe)=>at.route.id===tt[Xe].route.id))return{type:"success",matches:null};Ge=tt}}function un(G){l={},h=yh(G,s,void 0,l)}function Tn(G,ne){let fe=h==null;rv(G,ne,h||c,l,s),fe&&(c=[...c],Ue({}))}return U={get basename(){return f},get future(){return p},get state(){return E},get routes(){return c},get window(){return e},initialize:Ie,subscribe:rt,enableScrollRestoration:qe,navigate:Ft,fetch:jt,revalidate:xt,createHref:G=>n.history.createHref(G),encodeLocation:G=>n.history.encodeLocation(G),getFetcher:xe,deleteFetcher:Je,dispose:Ne,getBlocker:Ye,deleteBlocker:ot,patchRoutes:Tn,_internalFetchControllers:j,_internalSetRoutes:un},U}function uk(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Qp(n,e,t,i,s,l){let c,h;if(s){c=[];for(let d of e)if(c.push(d),d.route.id===s){h=d;break}}else c=e,h=e[e.length-1];let f=ng(i||".",tg(c),Zr(n.pathname,t)||n.pathname,l==="path");if(i==null&&(f.search=n.search,f.hash=n.hash),(i==null||i===""||i===".")&&h){let d=ig(f.search);if(h.route.index&&!d)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&d){let p=new URLSearchParams(f.search),g=p.getAll("index");p.delete("index"),g.filter(b=>b).forEach(b=>p.append("index",b));let y=p.toString();f.search=y?`?${y}`:""}}return t!=="/"&&(f.pathname=f.pathname==="/"?t:xi([t,f.pathname])),Oa(f)}function tv(n,e,t){if(!t||!uk(t))return{path:e};if(t.formMethod&&!xk(t.formMethod))return{path:e,error:Wr(405,{method:t.formMethod})};let i=()=>({path:e,error:Wr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=F_(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!kr(l))return i();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((y,[b,x])=>`${y}${b}=${x}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!kr(l))return i();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}Ht(typeof FormData=="function","FormData is not available in this environment");let h,f;if(t.formData)h=Jp(t.formData),f=t.formData;else if(t.body instanceof FormData)h=Jp(t.body),f=t.body;else if(t.body instanceof URLSearchParams)h=t.body,f=lv(h);else if(t.body==null)h=new URLSearchParams,f=new FormData;else try{h=new URLSearchParams(t.body),f=lv(h)}catch{return i()}let d={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(kr(d.formMethod))return{path:e,submission:d};let p=ea(e);return n&&p.search&&ig(p.search)&&h.append("index",""),p.search=`?${h}`,{path:Oa(p),submission:d}}function nv(n,e,t,i,s,l,c,h,f,d,p,g,y,b,x,S,w,_,R,A){var Y;let k=A?Rr(A[1])?A[1].error:A[1].data:void 0,U=s.createURL(l.location),E=s.createURL(f),N;if(p&&l.errors){let W=Object.keys(l.errors)[0];N=c.findIndex(re=>re.route.id===W)}else if(A&&Rr(A[1])){let W=A[0];N=c.findIndex(re=>re.route.id===W)-1}let H=A?A[1].statusCode:void 0,C=H&&H>=400,D={currentUrl:U,currentParams:((Y=l.matches[0])==null?void 0:Y.params)||{},nextUrl:E,nextParams:c[0].params,...h,actionResult:k,actionStatus:H},F=c.map((W,re)=>{let{route:j}=W,ce=null;if(N!=null&&re>N?ce=!1:j.lazy?ce=!0:j.loader==null?ce=!1:p?ce=Zp(j,l.loaderData,l.errors):hk(l.loaderData,l.matches[re],W)&&(ce=!0),ce!==null)return Kp(t,i,n,W,d,e,ce);let X=C?!1:g||U.pathname+U.search===E.pathname+E.search||U.search!==E.search||dk(l.matches[re],W),_e={...D,defaultShouldRevalidate:X},T=_h(W,_e);return Kp(t,i,n,W,d,e,T,_e)}),J=[];return x.forEach((W,re)=>{if(p||!c.some(O=>O.route.id===W.routeId)||b.has(re))return;let j=l.fetchers.get(re),ce=j&&j.state!=="idle"&&j.data===void 0,X=ka(w,W.path,_);if(!X){if(R&&ce)return;J.push({key:re,routeId:W.routeId,path:W.path,matches:null,match:null,request:null,controller:null});return}if(S.has(re))return;let _e=Jl(X,W.path),T=new AbortController,se=wo(s,W.path,T.signal),Ee=null;if(y.has(re))y.delete(re),Ee=Eo(t,i,se,X,_e,d,e);else if(ce)g&&(Ee=Eo(t,i,se,X,_e,d,e));else{let O={...D,defaultShouldRevalidate:C?!1:g};_h(_e,O)&&(Ee=Eo(t,i,se,X,_e,d,e,O))}Ee&&J.push({key:re,routeId:W.routeId,path:W.path,matches:Ee,match:_e,request:se,controller:T})}),{dsMatches:F,revalidatingFetchers:J}}function Zp(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!i&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!s}function hk(n,e,t){let i=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return i||s}function dk(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function _h(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function rv(n,e,t,i,s){let l;if(n){let f=i[n];Ht(f,`No route found to patch children into: routeId = ${n}`),f.children||(f.children=[]),l=f.children}else l=t;let c=e.filter(f=>!l.some(d=>L_(f,d))),h=yh(c,s,[n||"_","patch",String((l==null?void 0:l.length)||"0")],i);l.push(...h)}function L_(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var s;return(s=e.children)==null?void 0:s.some(l=>L_(t,l))}):!1}var iv=new WeakMap,I_=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let s=t[e.id];if(Ht(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=iv.get(s);c||(c={},iv.set(s,c));let h=c[n];if(h)return h;let f=(async()=>{let d=IR(n),g=s[n]!==void 0&&n!=="hasErrorBoundary";if(d)Mn(!d,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(g)Mn(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let y=await l();y!=null&&(Object.assign(s,{[n]:y}),Object.assign(s,i(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(y=>y===void 0)&&(s.lazy=void 0))})();return c[n]=f,f},av=new WeakMap;function fk(n,e,t,i,s){let l=t[n.id];if(Ht(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let p=av.get(l);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let g=(async()=>{Ht(typeof n.lazy=="function","No lazy route function found");let y=await n.lazy(),b={};for(let x in y){let S=y[x];if(S===void 0)continue;let w=UR(x),R=l[x]!==void 0&&x!=="hasErrorBoundary";w?Mn(!w,"Route property "+x+" is not a supported property to be returned from a lazy route function. This property will be ignored."):R?Mn(!R,`Route "${l.id}" has a static property "${x}" defined but its lazy function is also returning a value for this property. The lazy route property "${x}" will be ignored.`):b[x]=S}Object.assign(l,b),Object.assign(l,{...i(l),lazy:void 0})})();return av.set(l,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let c=Object.keys(n.lazy),h=[],f;for(let p of c){if(s&&s.includes(p))continue;let g=I_({key:p,route:n,manifest:t,mapRouteProperties:i});g&&(h.push(g),p===e&&(f=g))}let d=h.length>0?Promise.all(h).then(()=>{}):void 0;return d==null||d.catch(()=>{}),f==null||f.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:f}}async function sv(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function pk(n){return n.matches.some(e=>e.route.unstable_middleware)?O_(n,!1,()=>sv(n),(e,t)=>({[t]:{type:"error",result:e}})):sv(n)}async function O_(n,e,t,i){let{matches:s,request:l,params:c,context:h}=n,f={handlerResult:void 0};try{let d=s.flatMap(g=>g.route.unstable_middleware?g.route.unstable_middleware.map(y=>[g.route.id,y]):[]),p=await U_({request:l,params:c,context:h},d,e,f,t);return e?p:f.handlerResult}catch(d){if(!f.middlewareError)throw d;let p=await i(f.middlewareError.error,f.middlewareError.routeId);return f.handlerResult?Object.assign(f.handlerResult,p):p}}async function U_(n,e,t,i,s,l=0){let{request:c}=n;if(c.signal.aborted)throw c.signal.reason?c.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${c.method} ${c.url}`);let h=e[l];if(!h)return i.handlerResult=await s(),i.handlerResult;let[f,d]=h,p=!1,g,y=async()=>{if(p)throw new Error("You may only call `next()` once per middleware");p=!0,await U_(n,e,t,i,s,l+1)};try{let b=await d({request:n.request,params:n.params,context:n.context},y);return p?b===void 0?g:b:y()}catch(b){throw i.middlewareError?i.middlewareError.error!==b&&(i.middlewareError={routeId:f,error:b}):i.middlewareError={routeId:f,error:b},b}}function N_(n,e,t,i,s){let l=I_({key:"unstable_middleware",route:i.route,manifest:e,mapRouteProperties:n}),c=fk(i.route,kr(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Kp(n,e,t,i,s,l,c,h=null){let f=!1,d=N_(n,e,t,i,s);return{...i,_lazyPromises:d,shouldLoad:c,unstable_shouldRevalidateArgs:h,unstable_shouldCallHandler(p){return f=!0,h?typeof p=="boolean"?_h(i,{...h,defaultShouldRevalidate:p}):_h(i,h):c},resolve(p){return f||c||p&&t.method==="GET"&&(i.route.lazy||i.route.loader)?gk({request:t,match:i,lazyHandlerPromise:d==null?void 0:d.handler,lazyRoutePromise:d==null?void 0:d.route,handlerOverride:p,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function Eo(n,e,t,i,s,l,c,h=null){return i.map(f=>f.route.id!==s.route.id?{...f,shouldLoad:!1,unstable_shouldRevalidateArgs:h,unstable_shouldCallHandler:()=>!1,_lazyPromises:N_(n,e,t,f,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Kp(n,e,t,f,l,c,!0,h))}async function mk(n,e,t,i,s,l){t.some(d=>{var p;return(p=d._lazyPromises)==null?void 0:p.middleware})&&await Promise.all(t.map(d=>{var p;return(p=d._lazyPromises)==null?void 0:p.middleware}));let c={request:e,params:t[0].params,context:s,matches:t},f=await n({...c,fetcherKey:i,unstable_runClientMiddleware:d=>{let p=c;return O_(p,!1,()=>d({...p,fetcherKey:i,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(g,y)=>({[y]:{type:"error",result:g}}))}});try{await Promise.all(t.flatMap(d=>{var p,g;return[(p=d._lazyPromises)==null?void 0:p.handler,(g=d._lazyPromises)==null?void 0:g.route]}))}catch{}return f}async function gk({request:n,match:e,lazyHandlerPromise:t,lazyRoutePromise:i,handlerOverride:s,scopedContext:l}){let c,h,f=kr(n.method),d=f?"action":"loader",p=g=>{let y,b=new Promise((w,_)=>y=_);h=()=>y(),n.signal.addEventListener("abort",h);let x=w=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${d}" [routeId: ${e.route.id}]`)):g({request:n,params:e.params,context:l},...w!==void 0?[w]:[]),S=(async()=>{try{return{type:"data",result:await(s?s(_=>x(_)):x())}}catch(w){return{type:"error",result:w}}})();return Promise.race([S,b])};try{let g=f?e.route.action:e.route.loader;if(t||i)if(g){let y,[b]=await Promise.all([p(g).catch(x=>{y=x}),t,i]);if(y!==void 0)throw y;c=b}else{await t;let y=f?e.route.action:e.route.loader;if(y)[c]=await Promise.all([p(y),i]);else if(d==="action"){let b=new URL(n.url),x=b.pathname+b.search;throw Wr(405,{method:n.method,pathname:x,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(g)c=await p(g);else{let y=new URL(n.url),b=y.pathname+y.search;throw Wr(404,{pathname:b})}}catch(g){return{type:"error",result:g}}finally{h&&n.signal.removeEventListener("abort",h)}return c}async function yk(n){var i,s,l,c,h,f;let{result:e,type:t}=n;if(z_(e)){let d;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new vh(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:"data",data:d,statusCode:e.status,headers:e.headers}}return t==="error"?fv(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new vh(((l=e.init)==null?void 0:l.status)||500,void 0,e.data),statusCode:cc(e)?e.status:void 0,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:cc(e)?e.status:void 0}:fv(e)?{type:"data",data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function bk(n,e,t,i,s){let l=n.headers.get("Location");if(Ht(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!rg.test(l)){let c=i.slice(0,i.findIndex(h=>h.route.id===t)+1);l=Qp(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function ov(n,e,t){if(rg.test(n)){let i=n,s=i.startsWith("//")?new URL(e.protocol+i):new URL(i),l=Zr(s.pathname,t)!=null;if(s.origin===e.origin&&l)return s.pathname+s.search+s.hash}return n}function wo(n,e,t,i){let s=n.createURL(F_(e)).toString(),l={signal:t};if(i&&kr(i.formMethod)){let{formMethod:c,formEncType:h}=i;l.method=c.toUpperCase(),h==="application/json"?(l.headers=new Headers({"Content-Type":h}),l.body=JSON.stringify(i.json)):h==="text/plain"?l.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?l.body=Jp(i.formData):l.body=i.formData}return new Request(s,l)}function Jp(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function lv(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function vk(n,e,t,i=!1,s=!1){let l={},c=null,h,f=!1,d={},p=t&&Rr(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let y=g.route.id,b=e[y];if(Ht(!ms(b),"Cannot handle redirect results in processLoaderData"),Rr(b)){let x=b.error;if(p!==void 0&&(x=p,p=void 0),c=c||{},s)c[y]=x;else{let S=ds(n,y);c[S.route.id]==null&&(c[S.route.id]=x)}i||(l[y]=P_),f||(f=!0,h=cc(b.error)?b.error.status:500),b.headers&&(d[y]=b.headers)}else l[y]=b.data,b.statusCode&&b.statusCode!==200&&!f&&(h=b.statusCode),b.headers&&(d[y]=b.headers)}),p!==void 0&&t&&(c={[t[0]]:p},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:h||200,loaderHeaders:d}}function cv(n,e,t,i,s,l){let{loaderData:c,errors:h}=vk(e,t,i);return s.filter(f=>!f.matches||f.matches.some(d=>d.shouldLoad)).forEach(f=>{let{key:d,match:p,controller:g}=f,y=l[d];if(Ht(y,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(Rr(y)){let b=ds(n.matches,p==null?void 0:p.route.id);h&&h[b.route.id]||(h={...h,[b.route.id]:y.error}),n.fetchers.delete(d)}else if(ms(y))Ht(!1,"Unhandled fetcher revalidation redirect");else{let b=Da(y.data);n.fetchers.set(d,b)}}),{loaderData:c,errors:h}}function uv(n,e,t,i){let s=Object.entries(e).filter(([,l])=>l!==P_).reduce((l,[c,h])=>(l[c]=h,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),i&&i.hasOwnProperty(c))break}return s}function hv(n){return n?Rr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function ds(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function dv(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Wr(n,{pathname:e,routeId:t,method:i,type:s,message:l}={}){let c="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?h=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(h="Unable to encode submission body")):n===403?(c="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",h=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?h=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(h=`Invalid request method "${i.toUpperCase()}"`)),new vh(n||500,c,new Error(h),!0)}function Au(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,s]=e[t];if(ms(s))return{key:i,result:s}}}function F_(n){let e=typeof n=="string"?ea(n):n;return Oa({...e,hash:""})}function _k(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function wk(n){return z_(n.result)&&ak.has(n.result.status)}function Rr(n){return n.type==="error"}function ms(n){return(n&&n.type)==="redirect"}function fv(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function z_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function xk(n){return ik.has(n.toUpperCase())}function kr(n){return nk.has(n.toUpperCase())}function ig(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Jl(n,e){let t=typeof e=="string"?ea(e).search:e.search;if(n[n.length-1].route.index&&ig(t||""))return n[n.length-1];let i=D_(n);return i[i.length-1]}function pv(n){let{formMethod:e,formAction:t,formEncType:i,text:s,formData:l,json:c}=n;if(!(!e||!t||!i)){if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function tp(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Sk(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Fl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Tk(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Da(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Ek(n,e){try{let t=n.sessionStorage.getItem(k_);if(t){let i=JSON.parse(t);for(let[s,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function Mk(n,e){if(e.size>0){let t={};for(let[i,s]of e)t[i]=[...s];try{n.sessionStorage.setItem(k_,JSON.stringify(t))}catch(i){Mn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function Ak(){let n,e,t=new Promise((i,s)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Ts=ge.createContext(null);Ts.displayName="DataRouter";var fc=ge.createContext(null);fc.displayName="DataRouterState";var ag=ge.createContext({isTransitioning:!1});ag.displayName="ViewTransition";var B_=ge.createContext(new Map);B_.displayName="Fetchers";var Ck=ge.createContext(null);Ck.displayName="Await";var Mi=ge.createContext(null);Mi.displayName="Navigation";var kh=ge.createContext(null);kh.displayName="Location";var hi=ge.createContext({outlet:null,matches:[],isDataRoute:!1});hi.displayName="Route";var sg=ge.createContext(null);sg.displayName="RouteError";function Dk(n,{relative:e}={}){Ht(pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=ge.useContext(Mi),{hash:s,pathname:l,search:c}=mc(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:xi([t,l])),i.createHref({pathname:h,search:c,hash:s})}function pc(){return ge.useContext(kh)!=null}function Ai(){return Ht(pc(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(kh).location}var H_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function V_(n){ge.useContext(Mi).static||ge.useLayoutEffect(n)}function Rk(){let{isDataRoute:n}=ge.useContext(hi);return n?qk():kk()}function kk(){Ht(pc(),"useNavigate() may be used only in the context of a <Router> component.");let n=ge.useContext(Ts),{basename:e,navigator:t}=ge.useContext(Mi),{matches:i}=ge.useContext(hi),{pathname:s}=Ai(),l=JSON.stringify(tg(i)),c=ge.useRef(!1);return V_(()=>{c.current=!0}),ge.useCallback((f,d={})=>{if(Mn(c.current,H_),!c.current)return;if(typeof f=="number"){t.go(f);return}let p=ng(f,JSON.parse(l),s,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:xi([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,l,s,n])}var Pk=ge.createContext(null);function Lk(n){let e=ge.useContext(hi).outlet;return e&&ge.createElement(Pk.Provider,{value:n},e)}function og(){let{matches:n}=ge.useContext(hi),e=n[n.length-1];return e?e.params:{}}function mc(n,{relative:e}={}){let{matches:t}=ge.useContext(hi),{pathname:i}=Ai(),s=JSON.stringify(tg(t));return ge.useMemo(()=>ng(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function Ik(n,e,t,i){Ht(pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=ge.useContext(Mi),{matches:l}=ge.useContext(hi),c=l[l.length-1],h=c?c.params:{},f=c?c.pathname:"/",d=c?c.pathnameBase:"/",p=c&&c.route;{let _=p&&p.path||"";G_(f,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=Ai(),y;y=g;let b=y.pathname||"/",x=b;if(d!=="/"){let _=d.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=ka(n,{pathname:x});return Mn(p||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Mn(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),zk(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},h,_.params),pathname:xi([d,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:xi([d,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),l,t,i)}function Ok(){let n=jk(),e=cc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=ge.createElement(ge.Fragment,null,ge.createElement("p",null," Hey developer "),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:l},"ErrorBoundary")," or"," ",ge.createElement("code",{style:l},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:s},t):null,c)}var Uk=ge.createElement(Ok,null),Nk=class extends ge.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?ge.createElement(hi.Provider,{value:this.props.routeContext},ge.createElement(sg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fk({routeContext:n,match:e,children:t}){let i=ge.useContext(Ts);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(hi.Provider,{value:n},t)}function zk(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=t==null?void 0:t.errors;if(l!=null){let f=s.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);Ht(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,h=-1;if(t)for(let f=0;f<s.length;f++){let d=s[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(h=f),d.route.id){let{loaderData:p,errors:g}=t,y=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){c=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,d,p)=>{let g,y=!1,b=null,x=null;t&&(g=l&&d.route.id?l[d.route.id]:void 0,b=d.route.errorElement||Uk,c&&(h<0&&p===0?(G_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,x=null):h===p&&(y=!0,x=d.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,p+1)),w=()=>{let _;return g?_=b:y?_=x:d.route.Component?_=ge.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=f,ge.createElement(Fk,{match:d,routeContext:{outlet:f,matches:S,isDataRoute:t!=null},children:_})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?ge.createElement(Nk,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}function lg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bk(n){let e=ge.useContext(Ts);return Ht(e,lg(n)),e}function Hk(n){let e=ge.useContext(fc);return Ht(e,lg(n)),e}function Vk(n){let e=ge.useContext(hi);return Ht(e,lg(n)),e}function cg(n){let e=Vk(n),t=e.matches[e.matches.length-1];return Ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Gk(){return cg("useRouteId")}function jk(){var i;let n=ge.useContext(sg),e=Hk("useRouteError"),t=cg("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function qk(){let{router:n}=Bk("useNavigate"),e=cg("useNavigate"),t=ge.useRef(!1);return V_(()=>{t.current=!0}),ge.useCallback(async(s,l={})=>{Mn(t.current,H_),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var mv={};function G_(n,e,t){!e&&!mv[n]&&(mv[n]=!0,Mn(!1,t))}var gv={};function yv(n,e){!n&&!gv[e]&&(gv[e]=!0,console.warn(e))}function Wk(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Mn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:ge.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Mn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:ge.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Mn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:ge.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var Yk=["HydrateFallback","hydrateFallbackElement"],Xk=class{constructor(){this.status="pending",this.promise=new Promise((n,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",n(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function Qk({router:n,flushSync:e}){let[t,i]=ge.useState(n.state),[s,l]=ge.useState(),[c,h]=ge.useState({isTransitioning:!1}),[f,d]=ge.useState(),[p,g]=ge.useState(),[y,b]=ge.useState(),x=ge.useRef(new Map),S=ge.useCallback((A,{deletedFetchers:k,flushSync:U,viewTransitionOpts:E})=>{A.fetchers.forEach((H,C)=>{H.data!==void 0&&x.current.set(C,H.data)}),k.forEach(H=>x.current.delete(H)),yv(U===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(yv(E==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!N){e&&U?e(()=>i(A)):ge.startTransition(()=>i(A));return}if(e&&U){e(()=>{p&&(f&&f.resolve(),p.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let H=n.window.document.startViewTransition(()=>{e(()=>i(A))});H.finished.finally(()=>{e(()=>{d(void 0),g(void 0),l(void 0),h({isTransitioning:!1})})}),e(()=>g(H));return}p?(f&&f.resolve(),p.skipTransition(),b({state:A,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(l(A),h({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[n.window,e,p,f]);ge.useLayoutEffect(()=>n.subscribe(S),[n,S]),ge.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new Xk)},[c]),ge.useEffect(()=>{if(f&&s&&n.window){let A=s,k=f.promise,U=n.window.document.startViewTransition(async()=>{ge.startTransition(()=>i(A)),await k});U.finished.finally(()=>{d(void 0),g(void 0),l(void 0),h({isTransitioning:!1})}),g(U)}},[s,f,n.window]),ge.useEffect(()=>{f&&s&&t.location.key===s.location.key&&f.resolve()},[f,p,t.location,s]),ge.useEffect(()=>{!c.isTransitioning&&y&&(l(y.state),h({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),b(void 0))},[c.isTransitioning,y]);let w=ge.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,k,U)=>n.navigate(A,{state:k,preventScrollReset:U==null?void 0:U.preventScrollReset}),replace:(A,k,U)=>n.navigate(A,{replace:!0,state:k,preventScrollReset:U==null?void 0:U.preventScrollReset})}),[n]),_=n.basename||"/",R=ge.useMemo(()=>({router:n,navigator:w,static:!1,basename:_}),[n,w,_]);return ge.createElement(ge.Fragment,null,ge.createElement(Ts.Provider,{value:R},ge.createElement(fc.Provider,{value:t},ge.createElement(B_.Provider,{value:x.current},ge.createElement(ag.Provider,{value:c},ge.createElement($k,{basename:_,location:t.location,navigationType:t.historyAction,navigator:w},ge.createElement(Zk,{routes:n.routes,future:n.future,state:t})))))),null)}var Zk=ge.memo(Kk);function Kk({routes:n,future:e,state:t}){return Ik(n,void 0,t,e)}function Jk(n){return Lk(n.context)}function $k({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:l=!1}){Ht(!pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=ge.useMemo(()=>({basename:c,navigator:s,static:l,future:{}}),[c,s,l]);typeof t=="string"&&(t=ea(t));let{pathname:f="/",search:d="",hash:p="",state:g=null,key:y="default"}=t,b=ge.useMemo(()=>{let x=Zr(f,c);return x==null?null:{location:{pathname:x,search:d,hash:p,state:g,key:y},navigationType:i}},[c,f,d,p,g,y,i]);return Mn(b!=null,`<Router basename="${c}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:ge.createElement(Mi.Provider,{value:h},ge.createElement(kh.Provider,{children:e,value:b}))}var sh="get",oh="application/x-www-form-urlencoded";function Ph(n){return n!=null&&typeof n.tagName=="string"}function eP(n){return Ph(n)&&n.tagName.toLowerCase()==="button"}function tP(n){return Ph(n)&&n.tagName.toLowerCase()==="form"}function nP(n){return Ph(n)&&n.tagName.toLowerCase()==="input"}function rP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iP(n,e){return n.button===0&&(!e||e==="_self")&&!rP(n)}var Cu=null;function aP(){if(Cu===null)try{new FormData(document.createElement("form"),0),Cu=!1}catch{Cu=!0}return Cu}var sP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function np(n){return n!=null&&!sP.has(n)?(Mn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oh}"`),null):n}function oP(n,e){let t,i,s,l,c;if(tP(n)){let h=n.getAttribute("action");i=h?Zr(h,e):null,t=n.getAttribute("method")||sh,s=np(n.getAttribute("enctype"))||oh,l=new FormData(n)}else if(eP(n)||nP(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(i=f?Zr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||sh,s=np(n.getAttribute("formenctype"))||np(h.getAttribute("enctype"))||oh,l=new FormData(h,n),!aP()){let{name:d,type:p,value:g}=n;if(p==="image"){let y=d?`${d}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else d&&l.append(d,g)}}else{if(Ph(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sh,i=null,s=oh,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:l,body:c}}function ug(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function lP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function uP(n,e,t){let i=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await lP(l,t);return c.links?c.links():[]}return[]}));return pP(i.flat(1).filter(cP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function bv(n,e,t,i,s,l){let c=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,h=(f,d)=>{var p;return t[d].pathname!==f.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,d)=>c(f,d)||h(f,d)):l==="data"?e.filter((f,d)=>{var g;let p=i.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(c(f,d)||h(f,d))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function hP(n,e,{includeHydrateFallback:t}={}){return dP(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function dP(n){return[...new Set(n)]}function fP(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function pP(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let l=JSON.stringify(fP(s));return t.has(l)||(t.add(l),i.push({key:l,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mP=new Set([100,101,204,205]);function gP(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Zr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function j_(){let n=ge.useContext(Ts);return ug(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yP(){let n=ge.useContext(fc);return ug(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var hg=ge.createContext(void 0);hg.displayName="FrameworkContext";function q_(){let n=ge.useContext(hg);return ug(n,"You must render this element inside a <HydratedRouter> element"),n}function bP(n,e){let t=ge.useContext(hg),[i,s]=ge.useState(!1),[l,c]=ge.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,y=ge.useRef(null);ge.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let S=_=>{_.forEach(R=>{c(R.isIntersecting)})},w=new IntersectionObserver(S,{threshold:.5});return y.current&&w.observe(y.current),()=>{w.disconnect()}}},[n]),ge.useEffect(()=>{if(i){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[i]);let b=()=>{s(!0)},x=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,y,{}]:[l,y,{onFocus:zl(h,b),onBlur:zl(f,x),onMouseEnter:zl(d,b),onMouseLeave:zl(p,x),onTouchStart:zl(g,b)}]:[!1,y,{}]}function zl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vP({page:n,...e}){let{router:t}=j_(),i=ge.useMemo(()=>ka(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?ge.createElement(wP,{page:n,matches:i,...e}):null}function _P(n){let{manifest:e,routeModules:t}=q_(),[i,s]=ge.useState([]);return ge.useEffect(()=>{let l=!1;return uP(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),i}function wP({page:n,matches:e,...t}){let i=Ai(),{manifest:s,routeModules:l}=q_(),{basename:c}=j_(),{loaderData:h,matches:f}=yP(),d=ge.useMemo(()=>bv(n,e,f,s,i,"data"),[n,e,f,s,i]),p=ge.useMemo(()=>bv(n,e,f,s,i,"assets"),[n,e,f,s,i]),g=ge.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let x=new Set,S=!1;if(e.forEach(_=>{var A;let R=s.routes[_.route.id];!R||!R.hasLoader||(!d.some(k=>k.route.id===_.route.id)&&_.route.id in h&&((A=l[_.route.id])!=null&&A.shouldRevalidate)||R.hasClientLoader?S=!0:x.add(_.route.id))}),x.size===0)return[];let w=gP(n,c);return S&&x.size>0&&w.searchParams.set("_routes",e.filter(_=>x.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[c,h,i,s,d,e,n,l]),y=ge.useMemo(()=>hP(p,s),[p,s]),b=_P(p);return ge.createElement(ge.Fragment,null,g.map(x=>ge.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),y.map(x=>ge.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),b.map(({key:x,link:S})=>ge.createElement("link",{key:x,...S})))}function xP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var W_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{W_&&(window.__reactRouterVersion="7.6.2")}catch{}function SP(n,e){return ck({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:RR({window:e==null?void 0:e.window}),hydrationData:TP(),routes:n,mapRouteProperties:Wk,hydrationRouteProperties:Yk,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function TP(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:EP(n.errors)}),n}function EP(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,s]of e)if(s&&s.__type==="RouteErrorResponse")t[i]=new vh(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(s.message);l.stack="",t[i]=l}}else t[i]=s;return t}var Y_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Na=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:l,replace:c,state:h,target:f,to:d,preventScrollReset:p,viewTransition:g,...y},b){let{basename:x}=ge.useContext(Mi),S=typeof d=="string"&&Y_.test(d),w,_=!1;if(typeof d=="string"&&S&&(w=d,W_))try{let C=new URL(window.location.href),D=d.startsWith("//")?new URL(C.protocol+d):new URL(d),F=Zr(D.pathname,x);D.origin===C.origin&&F!=null?d=F+D.search+D.hash:_=!0}catch{Mn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=Dk(d,{relative:s}),[A,k,U]=bP(i,y),E=CP(d,{replace:c,state:h,target:f,preventScrollReset:p,relative:s,viewTransition:g});function N(C){e&&e(C),C.defaultPrevented||E(C)}let H=ge.createElement("a",{...y,...U,href:w||R,onClick:_||l?e:N,ref:xP(b,k),target:f,"data-discover":!S&&t==="render"?"true":void 0});return A&&!S?ge.createElement(ge.Fragment,null,H,ge.createElement(vP,{page:R})):H});Na.displayName="Link";var dg=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:h,children:f,...d},p){let g=mc(c,{relative:d.relative}),y=Ai(),b=ge.useContext(fc),{navigator:x,basename:S}=ge.useContext(Mi),w=b!=null&&LP(g)&&h===!0,_=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,R=y.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(R=R.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&S&&(A=Zr(A,S)||A);const k=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let U=R===_||!s&&R.startsWith(_)&&R.charAt(k)==="/",E=A!=null&&(A===_||!s&&A.startsWith(_)&&A.charAt(_.length)==="/"),N={isActive:U,isPending:E,isTransitioning:w},H=U?e:void 0,C;typeof i=="function"?C=i(N):C=[i,U?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(N):l;return ge.createElement(Na,{...d,"aria-current":H,className:C,ref:p,style:D,to:c,viewTransition:h},typeof f=="function"?f(N):f)});dg.displayName="NavLink";var MP=ge.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:l,method:c=sh,action:h,onSubmit:f,relative:d,preventScrollReset:p,viewTransition:g,...y},b)=>{let x=kP(),S=PP(h,{relative:d}),w=c.toLowerCase()==="get"?"get":"post",_=typeof h=="string"&&Y_.test(h),R=A=>{if(f&&f(A),A.defaultPrevented)return;A.preventDefault();let k=A.nativeEvent.submitter,U=(k==null?void 0:k.getAttribute("formmethod"))||c;x(k||A.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:l,relative:d,preventScrollReset:p,viewTransition:g})};return ge.createElement("form",{ref:b,method:w,action:S,onSubmit:i?f:R,...y,"data-discover":!_&&n==="render"?"true":void 0})});MP.displayName="Form";function AP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X_(n){let e=ge.useContext(Ts);return Ht(e,AP(n)),e}function CP(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:l,viewTransition:c}={}){let h=Rk(),f=Ai(),d=mc(n,{relative:l});return ge.useCallback(p=>{if(iP(p,e)){p.preventDefault();let g=t!==void 0?t:Oa(f)===Oa(d);h(n,{replace:g,state:i,preventScrollReset:s,relative:l,viewTransition:c})}},[f,h,d,t,i,e,n,s,l,c])}var DP=0,RP=()=>`__${String(++DP)}__`;function kP(){let{router:n}=X_("useSubmit"),{basename:e}=ge.useContext(Mi),t=Gk();return ge.useCallback(async(i,s={})=>{let{action:l,method:c,encType:h,formData:f,body:d}=oP(i,e);if(s.navigate===!1){let p=s.fetcherKey||RP();await n.fetch(p,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:f,body:d,formMethod:s.method||c,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:f,body:d,formMethod:s.method||c,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function PP(n,{relative:e}={}){let{basename:t}=ge.useContext(Mi),i=ge.useContext(hi);Ht(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),l={...mc(n||".",{relative:e})},c=Ai();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),f=h.getAll("index");if(f.some(p=>p==="")){h.delete("index"),f.filter(g=>g).forEach(g=>h.append("index",g));let p=h.toString();l.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xi([t,l.pathname])),Oa(l)}function LP(n,e={}){let t=ge.useContext(ag);Ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=X_("useViewTransitionState"),s=mc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Zr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Zr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return bh(s.pathname,c)!=null||bh(s.pathname,l)!=null}[...mP];var IP=T_();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OP(n){return ge.createElement(Qk,{flushSync:IP.flushSync,...n})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $p=function(){return $p=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},$p.apply(this,arguments)};function UP(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}var Mo="",tc=null,lh=null,Q_=null;function fg(){Mo="",tc!==null&&tc.disconnect(),lh!==null&&(window.clearTimeout(lh),lh=null)}function vv(n){var e=["BUTTON","INPUT","SELECT","TEXTAREA"],t=["A","AREA"];return e.includes(n.tagName)&&!n.hasAttribute("disabled")||t.includes(n.tagName)&&n.hasAttribute("href")}function _v(){var n=null;if(Mo==="#")n=document.body;else{var e=Mo.replace("#","");n=document.getElementById(e),n===null&&Mo==="#top"&&(n=document.body)}if(n!==null){Q_(n);var t=n.getAttribute("tabindex");return t===null&&!vv(n)&&n.setAttribute("tabindex",-1),n.focus({preventScroll:!0}),t===null&&!vv(n)&&(n.blur(),n.removeAttribute("tabindex")),fg(),!0}return!1}function NP(n){window.setTimeout(function(){_v()===!1&&(tc===null&&(tc=new MutationObserver(_v)),tc.observe(document,{attributes:!0,childList:!0,subtree:!0}),lh=window.setTimeout(function(){fg()},n||1e4))},0)}function Z_(n){return Gb.forwardRef(function(e,t){var i="";typeof e.to=="string"&&e.to.includes("#")?i="#"+e.to.split("#").slice(1).join("#"):typeof e.to=="object"&&typeof e.to.hash=="string"&&(i=e.to.hash);var s={};n===dg&&(s.isActive=function(h,f){return h&&h.isExact&&f.hash===i});function l(h){fg(),Mo=e.elementId?"#"+e.elementId:i,e.onClick&&e.onClick(h),Mo!==""&&!h.defaultPrevented&&h.button===0&&(!e.target||e.target==="_self")&&!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)&&(Q_=e.scroll||function(f){return e.smooth?f.scrollIntoView({behavior:"smooth"}):f.scrollIntoView()},NP(e.timeout))}var c=UP(e,["scroll","smooth","timeout","elementId"]);return Gb.createElement(n,$p({},s,c,{onClick:l,ref:t}),e.children)})}var $l=Z_(Na);Z_(dg);function FP(){const e=Ai().pathname;return ae.jsx("nav",{id:"menu-header",children:ae.jsxs("ul",{children:[ae.jsx("li",{className:e==="/"?"menu-header-highlight":"menu-header",children:ae.jsx($l,{to:"/",children:"ABOUT"})}),ae.jsx("li",{className:e.includes("/portfolio")?"menu-header-highlight":"menu-header",children:ae.jsx($l,{to:"/portfolio",children:"PORTFOLIO"})}),ae.jsx("li",{className:e.includes("/blog")?"menu-header-highlight":"menu-header",children:ae.jsx($l,{to:"/blog",children:"BLOG"})}),ae.jsx("li",{className:e.includes("/readings")?"menu-header-highlight":"menu-header",children:ae.jsx($l,{to:"/readings",children:"READINGS"})})]})})}const zP="/assets/avatar-vertical-transparent-bg-DDp9KiZP.png",BP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVEAAACJBAMAAABnQhaHAAAAG1BMVEX////n5+fX2Nff4N/HyMfv7+/P0M/39/fAwb/0oz3zAAAAAXRSTlMAQObYZgAAAZZJREFUeJzt27tOwzAUgGFzEWHkEbrB2IXLWKEKMiIWGDsgmrESl3ZE0IsfG4WQpGnOcZVIroP4//Eojr8QkKgqG0NERERE/zObt2q+9uXJVrs++ZnfDzfmN5fVhdFFbOsNz31J9+ubzVPqu6DoVVaeCVekjf1Io0TY68uYPcmwnKytlB4le9A7L9IjcbO+eRTno7WV0iNm3XqRXol7LUwszj/LhQcq1C59SCNlL81Rvv6ZLrWO199aqolelXm/WCm/jKyeB6n8a2qt5hgVKxOHdOBBeqjsFW81aFekfXiQHjv2cxtcVzkUSJEiRYoUaWPpw/S3WX305pIu8qumO5JOHKPyf0NBunKNkCJFihQpUqRIkSJF+uelQkiRIkWKFClSpEiRIkUaQMp3J0iRIkWKtBg95427Lm35c0eKFClSpJq02eeCkFIhpEiRIkWKNKQ0dkjLO3VBmjikg05JW55LCyBtedYvgLTl+ckA0pZnUkNItQONdl7cuyNS9W/qtCnUu1Q5j75xar0LUiIiIiIiIiIi2tI3lF4vTER7mbIAAAAASUVORK5CYII=",HP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAACJBAMAAADH+ClAAAAAG1BMVEX////X2Nfv7+/f4N/n5+fHyMfP0M/39/fAwb+yfcs9AAAAAXRSTlMAQObYZgAAAbxJREFUaIHt2rFPg1AQBnAaU3Xs5sqmo3FyZGRsYqIri8kbTRx0lCqVP9vp3d3jgWLgu3T4vqnvCPzacOlRSlEwDMMwzOmlj/mWUpBaJ7VLqb0sLOXghZT6LxfwTMG9C7hV8NYFvFFQPCgYpPTpApqe0cZFgqZndi6g6RnZCwrWUmnVQ4Ihq2BB0zONC2h6pnQBtWeOxgOCtRQOPmCQQuMCmp6pXEDtGR2+UFB7RocvFKxlrcMXCgZZVy6g9kx6CmHgRpZm+CLBbbrEg7Us9foJCoZ8DyioPWOHLxDcJCsHULea6yckWOc7YMEQF8nwxYHaM8nwxYHaM40PqBtLH7COrwff3DAwxNfp8IWB2jPp8IWB2jOVBzjI490icCR/gH1/5Q12pTPYP3mDR2/Qft/4gDtvcO8NfniDC24MESRIkOAYeHiLWQO8jgd7nwT16GuAc38BEyRIkCBBggRPE5y+eACBIyFIkCDBVUDz0Euekbe1GDz/xfvf028zQfNMSJYWAZonGLIcEGBxPw02EHD6JHZy8FVB8/fwIObW+KrgVNu0+gHXBYvX5xGuezDezMschmEYhmEYhmHg+QGLtOzQiRVWKgAAAABJRU5ErkJggg==",VP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALcAAACJBAMAAACcMLRxAAAAGFBMVEX////X2Nfv7+/HyMfP0M/f4N/39/fAwb+AxnliAAAAAXRSTlMAQObYZgAAAQRJREFUaIHt2LsKwkAQheE0Wltpm0cQlOQNtJegrYVoKyq7r2+1IZDZcXCdYPGfMpz5imRz2VQVIYSQ6TLv2jjO5jDsCAWtFfpDq8zgzoBnWj1+yY09awsutnp8n51rLLjYSvgsP/Yy4VIr4TdlrrbgUivhJ2VsYcKFVsLzpzzGtQkXWglvlbG7CRdawTAWTLjQAgcH/zX+uKZoY7bWCFc6Xx8CBwcHBwe340L+4AXt+gmtfPyX48q2pRyvHXFtq1iMN464uj0vxZeVG/7hl0gZvj064sNV7nFBz46461L0vYlcb3/fB5frI9fysmA3Bw4ODg4ODg4ODg4ODk4IIYQQQibJG6M05SwabFWGAAAAAElFTkSuQmCC",GP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='Layer_1'%20data-name='Layer%201'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%20style='fill:%2333A0FF'%3e%3cdefs%3e%3cfilter%20id='blue-shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0'%20stdDeviation='0.5'%20flood-color='%2366B3FF'/%3e%3c/filter%3e%3c/defs%3e%3cg%20filter='url(%23blue-shadow)'%3e%3cpath%20d='M3,21.976a1,1,0,0,1-1-1V0H0V20.976a3,3,0,0,0,3,3H24v-2Z'/%3e%3crect%20x='5'%20y='12'%20width='2'%20height='7'/%3e%3crect%20x='10'%20y='10'%20width='2'%20height='9'/%3e%3crect%20x='15'%20y='13'%20width='2'%20height='6'/%3e%3crect%20x='20'%20y='9'%20width='2'%20height='10'/%3e%3cpolygon%20points='11%204.414%2016%209.414%2023.707%201.707%2022.293%200.293%2016%206.586%2011%201.586%205.293%207.293%206.707%208.707%2011%204.414'/%3e%3c/g%3e%3c/svg%3e",jP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%3e%3cdefs%3e%3cfilter%20id='blue-glow'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='0.5'/%3e%3cfeOffset%20dx='0'%20dy='0'%20result='offsetblur'/%3e%3cfeFlood%20flood-color='%2366B3FF'/%3e%3cfeComposite%20in2='offsetblur'%20operator='in'/%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3cg%20id='_01_align_center'%20data-name='01%20align%20center'%20style='fill:%2333A0FF'%20filter='url(%23blue-glow)'%3e%3cpath%20d='M5,19H9.414L23.057,5.357a3.125,3.125,0,0,0,0-4.414,3.194,3.194,0,0,0-4.414,0L5,14.586Zm2-3.586L20.057,2.357a1.148,1.148,0,0,1,1.586,0,1.123,1.123,0,0,1,0,1.586L8.586,17H7Z'/%3e%3cpath%20d='M23.621,7.622,22,9.243V16H16v6H2V3A1,1,0,0,1,3,2H14.758L16.379.379A5.013,5.013,0,0,1,16.84,0H3A3,3,0,0,0,0,3V24H18.414L24,18.414V7.161A5.15,5.15,0,0,1,23.621,7.622ZM18,21.586V18h3.586Z'/%3e%3c/g%3e%3c/svg%3e",qP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='Layer_1'%20data-name='Layer%201'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%20style='fill:%2333A0FF'%3e%3cdefs%3e%3cfilter%20id='blue-shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0'%20stdDeviation='0.5'%20flood-color='%2366B3FF'/%3e%3c/filter%3e%3c/defs%3e%3cg%20filter='url(%23blue-shadow)'%3e%3cpath%20d='M21,24H16V22h5a1,1,0,0,0,1-1V16h2v5A3,3,0,0,1,21,24Z'/%3e%3cpath%20d='M2,8H0V3A3,3,0,0,1,3,0H8V2H3A1,1,0,0,0,2,3Z'/%3e%3cpath%20d='M8,24H3a3,3,0,0,1-3-3V16H2v5a1,1,0,0,0,1,1H8Z'/%3e%3cpath%20d='M24,8H22V3a1,1,0,0,0-1-1H16V0h5a3,3,0,0,1,3,3Z'/%3e%3cpath%20d='M12,11a4,4,0,1,1,4-4A4,4,0,0,1,12,11Zm0-6a2,2,0,1,0,2,2A2,2,0,0,0,12,5Z'/%3e%3cpath%20d='M19,20H17V16a1,1,0,0,0-1-1H8a1,1,0,0,0-1,1v4H5V16a3,3,0,0,1,3-3h8a3,3,0,0,1,3,3Z'/%3e%3c/g%3e%3c/svg%3e",WP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='Layer_1'%20data-name='Layer%201'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%20style='fill:%2333A0FF'%3e%3cdefs%3e%3cfilter%20id='blue-shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0'%20stdDeviation='0.5'%20flood-color='%2366B3FF'/%3e%3c/filter%3e%3c/defs%3e%3cg%20filter='url(%23blue-shadow)'%3e%3cpath%20d='M24,4.591V20.688l-12,3.332L0,20.688V4.591c0-.771,.339-1.496,.931-1.989,.021-.018,.047-.029,.069-.046V19.928l11,3.053,11-3.053V2.556c.022,.017,.047,.028,.069,.046,.592,.494,.931,1.219,.931,1.989ZM12,21.02l-9-2.572V3.501c0-.792,.363-1.519,.995-1.996,.633-.477,1.432-.624,2.192-.408l4.189,1.197c.679,.194,1.247,.624,1.624,1.185,.377-.561,.945-.991,1.624-1.185l4.189-1.197c.76-.217,1.56-.069,2.192,.408,.632,.477,.995,1.205,.995,1.996v14.947l-9,2.572Zm.5-1.183l7.5-2.143V3.501c0-.475-.218-.912-.597-1.198-.265-.199-.579-.303-.899-.303-.139,0-.278,.02-.416,.059l-4.19,1.197c-.823,.235-1.398,.998-1.398,1.854v14.727Zm-1-14.727c0-.857-.575-1.62-1.398-1.854l-4.189-1.197c-.457-.131-.935-.042-1.315,.244-.379,.286-.597,.723-.597,1.198v14.193l7.5,2.143V5.11Z'/%3e%3c/g%3e%3c/svg%3e",wv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='Layer_1'%20data-name='Layer%201'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%20style='fill:%23ffffff'%3e%3cdefs%3e%3cfilter%20id='white-shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0'%20stdDeviation='0.5'%20flood-color='%23ffffff'/%3e%3c/filter%3e%3c/defs%3e%3cg%20filter='url(%23white-shadow)'%3e%3cpath%20d='M3,21.976a1,1,0,0,1-1-1V0H0V20.976a3,3,0,0,0,3,3H24v-2Z'/%3e%3crect%20x='5'%20y='12'%20width='2'%20height='7'/%3e%3crect%20x='10'%20y='10'%20width='2'%20height='9'/%3e%3crect%20x='15'%20y='13'%20width='2'%20height='6'/%3e%3crect%20x='20'%20y='9'%20width='2'%20height='10'/%3e%3cpolygon%20points='11%204.414%2016%209.414%2023.707%201.707%2022.293%200.293%2016%206.586%2011%201.586%205.293%207.293%206.707%208.707%2011%204.414'/%3e%3c/g%3e%3c/svg%3e",xv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%3e%3cdefs%3e%3cfilter%20id='white-glow'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='0.5'/%3e%3cfeOffset%20dx='0'%20dy='0'%20result='offsetblur'/%3e%3cfeFlood%20flood-color='%23ffffff'/%3e%3cfeComposite%20in2='offsetblur'%20operator='in'/%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3cg%20id='_01_align_center'%20data-name='01%20align%20center'%20style='fill:%23ffffff'%20filter='url(%23white-glow)'%3e%3cpath%20d='M5,19H9.414L23.057,5.357a3.125,3.125,0,0,0,0-4.414,3.194,3.194,0,0,0-4.414,0L5,14.586Zm2-3.586L20.057,2.357a1.148,1.148,0,0,1,1.586,0,1.123,1.123,0,0,1,0,1.586L8.586,17H7Z'/%3e%3cpath%20d='M23.621,7.622,22,9.243V16H16v6H2V3A1,1,0,0,1,3,2H14.758L16.379.379A5.013,5.013,0,0,1,16.84,0H3A3,3,0,0,0,0,3V24H18.414L24,18.414V7.161A5.15,5.15,0,0,1,23.621,7.622ZM18,21.586V18h3.586Z'/%3e%3c/g%3e%3c/svg%3e",Sv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='Layer_1'%20data-name='Layer%201'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%20style='fill:%23ffffff'%3e%3cdefs%3e%3cfilter%20id='white-shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0'%20stdDeviation='0.5'%20flood-color='%23ffffff'/%3e%3c/filter%3e%3c/defs%3e%3cg%20filter='url(%23white-shadow)'%3e%3cpath%20d='M21,24H16V22h5a1,1,0,0,0,1-1V16h2v5A3,3,0,0,1,21,24Z'/%3e%3cpath%20d='M2,8H0V3A3,3,0,0,1,3,0H8V2H3A1,1,0,0,0,2,3Z'/%3e%3cpath%20d='M8,24H3a3,3,0,0,1-3-3V16H2v5a1,1,0,0,0,1,1H8Z'/%3e%3cpath%20d='M24,8H22V3a1,1,0,0,0-1-1H16V0h5a3,3,0,0,1,3,3Z'/%3e%3cpath%20d='M12,11a4,4,0,1,1,4-4A4,4,0,0,1,12,11Zm0-6a2,2,0,1,0,2,2A2,2,0,0,0,12,5Z'/%3e%3cpath%20d='M19,20H17V16a1,1,0,0,0-1-1H8a1,1,0,0,0-1,1v4H5V16a3,3,0,0,1,3-3h8a3,3,0,0,1,3,3Z'/%3e%3c/g%3e%3c/svg%3e",Tv="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='Layer_1'%20data-name='Layer%201'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%20style='fill:%23ffffff'%3e%3cdefs%3e%3cfilter%20id='white-shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0'%20stdDeviation='0.5'%20flood-color='%23ffffff'/%3e%3c/filter%3e%3c/defs%3e%3cg%20filter='url(%23white-shadow)'%3e%3cpath%20d='M24,4.591V20.688l-12,3.332L0,20.688V4.591c0-.771,.339-1.496,.931-1.989,.021-.018,.047-.029,.069-.046V19.928l11,3.053,11-3.053V2.556c.022,.017,.047,.028,.069,.046,.592,.494,.931,1.219,.931,1.989ZM12,21.02l-9-2.572V3.501c0-.792,.363-1.519,.995-1.996,.633-.477,1.432-.624,2.192-.408l4.189,1.197c.679,.194,1.247,.624,1.624,1.185,.377-.561,.945-.991,1.624-1.185l4.189-1.197c.76-.217,1.56-.069,2.192,.408,.632,.477,.995,1.205,.995,1.996v14.947l-9,2.572Zm.5-1.183l7.5-2.143V3.501c0-.475-.218-.912-.597-1.198-.265-.199-.579-.303-.899-.303-.139,0-.278,.02-.416,.059l-4.19,1.197c-.823,.235-1.398,.998-1.398,1.854v14.727Zm-1-14.727c0-.857-.575-1.62-1.398-1.854l-4.189-1.197c-.457-.131-.935-.042-1.315,.244-.379,.286-.597,.723-.597,1.198v14.193l7.5,2.143V5.11Z'/%3e%3c/g%3e%3c/svg%3e",YP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20height='72'%20viewBox='0%200%2072%2072'%20width='72'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M8,72%20L64,72%20C68.418278,72%2072,68.418278%2072,64%20L72,8%20C72,3.581722%2068.418278,0%2064,0%20L8,0%20C3.581722,0%200,3.581722%200,8%20L0,64%20C0,68.418278%203.581722,72%208,72%20Z'%20fill='none'/%3e%3cpath%20d='M62,62%20L51.315625,62%20L51.315625,43.8021149%20C51.315625,38.8127542%2049.4197917,36.0245323%2045.4707031,36.0245323%20C41.1746094,36.0245323%2038.9300781,38.9261103%2038.9300781,43.8021149%20L38.9300781,62%20L28.6333333,62%20L28.6333333,27.3333333%20L38.9300781,27.3333333%20L38.9300781,32.0029283%20C38.9300781,32.0029283%2042.0260417,26.2742151%2049.3825521,26.2742151%20C56.7356771,26.2742151%2062,30.7644705%2062,40.051212%20L62,62%20Z%20M16.349349,22.7940133%20C12.8420573,22.7940133%2010,19.9296567%2010,16.3970067%20C10,12.8643566%2012.8420573,10%2016.349349,10%20C19.8566406,10%2022.6970052,12.8643566%2022.6970052,16.3970067%20C22.6970052,19.9296567%2019.8566406,22.7940133%2016.349349,22.7940133%20Z%20M11.0325521,62%20L21.769401,62%20L21.769401,27.3333333%20L11.0325521,27.3333333%20L11.0325521,62%20Z'%20fill='%2333A0FF'/%3e%3c/g%3e%3c/svg%3e",XP="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='100px'%20height='100px'%3e%3cpath%20d='M%205.9199219%206%20L%2020.582031%2027.375%20L%206.2304688%2044%20L%209.4101562%2044%20L%2021.986328%2029.421875%20L%2031.986328%2044%20L%2044%2044%20L%2028.681641%2021.669922%20L%2042.199219%206%20L%2039.029297%206%20L%2027.275391%2019.617188%20L%2017.933594%206%20L%205.9199219%206%20z%20M%209.7167969%208%20L%2016.880859%208%20L%2040.203125%2042%20L%2033.039062%2042%20L%209.7167969%208%20z'%20fill='%2333A0FF'/%3e%3c/svg%3e",QP="data:image/svg+xml,%3csvg%20width='1024'%20height='1024'%20viewBox='0%200%201024%201024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8%200C3.58%200%200%203.58%200%208C0%2011.54%202.29%2014.53%205.47%2015.59C5.87%2015.66%206.02%2015.42%206.02%2015.21C6.02%2015.02%206.01%2014.39%206.01%2013.72C4%2014.09%203.48%2013.23%203.32%2012.78C3.23%2012.55%202.84%2011.84%202.5%2011.65C2.22%2011.5%201.82%2011.13%202.49%2011.12C3.12%2011.11%203.57%2011.7%203.72%2011.94C4.44%2013.15%205.59%2012.81%206.05%2012.6C6.12%2012.08%206.33%2011.73%206.56%2011.53C4.78%2011.33%202.92%2010.64%202.92%207.58C2.92%206.71%203.23%205.99%203.74%205.43C3.66%205.23%203.38%204.41%203.82%203.31C3.82%203.31%204.49%203.1%206.02%204.13C6.66%203.95%207.34%203.86%208.02%203.86C8.7%203.86%209.38%203.95%2010.02%204.13C11.55%203.09%2012.22%203.31%2012.22%203.31C12.66%204.41%2012.38%205.23%2012.3%205.43C12.81%205.99%2013.12%206.7%2013.12%207.58C13.12%2010.65%2011.25%2011.33%209.47%2011.53C9.76%2011.78%2010.01%2012.26%2010.01%2013.01C10.01%2014.08%2010%2014.94%2010%2015.21C10%2015.42%2010.15%2015.67%2010.55%2015.59C13.71%2014.53%2016%2011.53%2016%208C16%203.58%2012.42%200%208%200Z'%20transform='scale(64)'%20fill='%2333A0FF'/%3e%3c/svg%3e",ZP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='630px'%20height='630px'%20viewBox='0%200%20630%20630'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3ePBI%20Logo%3c/title%3e%3cdesc%3eConverted%20to%20a%20blue%20monochrome%20gradient%20based%20on%20%2333A0FF.%3c/desc%3e%3cdefs%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-1'%3e%3cstop%20stop-color='%2366B3FF'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%233388FF'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-2'%3e%3cstop%20stop-color='%2366B3FF'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%233399FF'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3cpath%20d='M346,604%20L346,630%20L320,630%20L153,630%20C138.640597,630%20127,618.359403%20127,604%20L127,183%20C127,168.640597%20138.640597,157%20153,157%20L320,157%20C334.359403,157%20346,168.640597%20346,183%20L346,604%20Z'%20id='path-3'%3e%3c/path%3e%3cfilter%20x='-9.1%25'%20y='-6.3%25'%20width='136.5%25'%20height='116.9%25'%20filterUnits='objectBoundingBox'%20id='filter-4'%3e%3cfeOffset%20dx='20'%20dy='10'%20in='SourceAlpha'%20result='shadowOffsetOuter1'%3e%3c/feOffset%3e%3cfeGaussianBlur%20stdDeviation='10'%20in='shadowOffsetOuter1'%20result='shadowBlurOuter1'%3e%3c/feGaussianBlur%3e%3cfeColorMatrix%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.15%200'%20type='matrix'%20in='shadowBlurOuter1'%3e%3c/feColorMatrix%3e%3c/filter%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-5'%3e%3cstop%20stop-color='%2366B3FF'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%2333A0FF'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20id='PBI-Logo'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Group'%20transform='translate(77.500000,%200.000000)'%3e%3crect%20id='Rectangle'%20fill='url(%23linearGradient-1)'%20x='256'%20y='0'%20width='219'%20height='630'%20rx='26'%3e%3c/rect%3e%3cg%20id='Combined-Shape'%3e%3cuse%20fill='black'%20fill-opacity='1'%20filter='url(%23filter-4)'%20xlink:href='%23path-3'%3e%3c/use%3e%3cuse%20fill='url(%23linearGradient-2)'%20fill-rule='evenodd'%20xlink:href='%23path-3'%3e%3c/use%3e%3c/g%3e%3cpath%20d='M219,604%20L219,630%20L193,630%20L26,630%20C11.6405965,630%201.75851975e-15,618.359403%200,604%20L0,341%20C-1.75851975e-15,326.640597%2011.6405965,315%2026,315%20L193,315%20C207.359403,315%20219,326.640597%20219,341%20L219,604%20Z'%20id='Combined-Shape'%20fill='url(%23linearGradient-5)'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",KP="data:image/svg+xml,%3csvg%20height='2467'%20width='2500'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2060.3%2059.5'%3e%3cpath%20d='M28.5%2040.2h3.3v-9h8.3V28h-8.3v-9h-3.3v9h-8.2v3.2h8.2z'%20fill='%2333A0FF'/%3e%3cpath%20d='M13.2%2053.2H16v-8h7.4v-2.5H16v-8.1h-2.8v8.1H5.8v2.5h7.4z'%20fill='%233FA6FF'/%3e%3cpath%20d='M44.3%2024.3h2.8v-8h7.5v-2.4h-7.5V5.8h-2.8v8.1h-7.4v2.4h7.4z'%20fill='%234CACFF'/%3e%3cpath%20d='M29%2059.5h2.4v-5.7h5.1v-2.1h-5.1V46H29v5.7h-5v2.1h5z'%20fill='%2355B2FF'/%3e%3cpath%20d='M13.3%2024.3h2.6v-8.1h7.5v-2.3h-7.5V5.8h-2.6v8.1H5.8v2.3h7.5z'%20fill='%2366B3FF'/%3e%3cpath%20d='M52.8%2036.3h2.4v-5.6h5.1v-2.2h-5.1v-5.6h-2.4v5.6h-5v2.2h5z'%20fill='%234CACFF'/%3e%3cpath%20clip-rule='evenodd'%20d='M44.3%2053.2h2.8v-8h7.5v-2.5h-7.5v-8.1h-2.8v8.1h-7.4v2.5h7.4z'%20fill='%2333A0FF'%20fill-rule='evenodd'/%3e%3cpath%20d='M36.1%207.2V5.5h-5V0h-1.8v5.5h-5v1.7h5v5.5h1.8V7.2zM5%2035.9h1.8v-5.5h5v-1.7h-5v-5.4H5v5.4H0v1.8l5-.1z'%20fill='%2355B2FF'/%3e%3c/svg%3e",JP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20height='72'%20viewBox='0%200%2072%2072'%20width='72'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M8,72%20L64,72%20C68.418278,72%2072,68.418278%2072,64%20L72,8%20C72,3.581722%2068.418278,0%2064,0%20L8,0%20C3.581722,0%200,3.581722%200,8%20L0,64%20C0,68.418278%203.581722,72%208,72%20Z'%20fill='none'/%3e%3cpath%20d='M62,62%20L51.315625,62%20L51.315625,43.8021149%20C51.315625,38.8127542%2049.4197917,36.0245323%2045.4707031,36.0245323%20C41.1746094,36.0245323%2038.9300781,38.9261103%2038.9300781,43.8021149%20L38.9300781,62%20L28.6333333,62%20L28.6333333,27.3333333%20L38.9300781,27.3333333%20L38.9300781,32.0029283%20C38.9300781,32.0029283%2042.0260417,26.2742151%2049.3825521,26.2742151%20C56.7356771,26.2742151%2062,30.7644705%2062,40.051212%20L62,62%20Z%20M16.349349,22.7940133%20C12.8420573,22.7940133%2010,19.9296567%2010,16.3970067%20C10,12.8643566%2012.8420573,10%2016.349349,10%20C19.8566406,10%2022.6970052,12.8643566%2022.6970052,16.3970067%20C22.6970052,19.9296567%2019.8566406,22.7940133%2016.349349,22.7940133%20Z%20M11.0325521,62%20L21.769401,62%20L21.769401,27.3333333%20L11.0325521,27.3333333%20L11.0325521,62%20Z'%20fill='white'/%3e%3c/g%3e%3c/svg%3e",$P="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='100px'%20height='100px'%3e%3cpath%20d='M%205.9199219%206%20L%2020.582031%2027.375%20L%206.2304688%2044%20L%209.4101562%2044%20L%2021.986328%2029.421875%20L%2031.986328%2044%20L%2044%2044%20L%2028.681641%2021.669922%20L%2042.199219%206%20L%2039.029297%206%20L%2027.275391%2019.617188%20L%2017.933594%206%20L%205.9199219%206%20z%20M%209.7167969%208%20L%2016.880859%208%20L%2040.203125%2042%20L%2033.039062%2042%20L%209.7167969%208%20z'%20fill='white'/%3e%3c/svg%3e",eL="data:image/svg+xml,%3csvg%20width='1024'%20height='1024'%20viewBox='0%200%201024%201024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8%200C3.58%200%200%203.58%200%208C0%2011.54%202.29%2014.53%205.47%2015.59C5.87%2015.66%206.02%2015.42%206.02%2015.21C6.02%2015.02%206.01%2014.39%206.01%2013.72C4%2014.09%203.48%2013.23%203.32%2012.78C3.23%2012.55%202.84%2011.84%202.5%2011.65C2.22%2011.5%201.82%2011.13%202.49%2011.12C3.12%2011.11%203.57%2011.7%203.72%2011.94C4.44%2013.15%205.59%2012.81%206.05%2012.6C6.12%2012.08%206.33%2011.73%206.56%2011.53C4.78%2011.33%202.92%2010.64%202.92%207.58C2.92%206.71%203.23%205.99%203.74%205.43C3.66%205.23%203.38%204.41%203.82%203.31C3.82%203.31%204.49%203.1%206.02%204.13C6.66%203.95%207.34%203.86%208.02%203.86C8.7%203.86%209.38%203.95%2010.02%204.13C11.55%203.09%2012.22%203.31%2012.22%203.31C12.66%204.41%2012.38%205.23%2012.3%205.43C12.81%205.99%2013.12%206.7%2013.12%207.58C13.12%2010.65%2011.25%2011.33%209.47%2011.53C9.76%2011.78%2010.01%2012.26%2010.01%2013.01C10.01%2014.08%2010%2014.94%2010%2015.21C10%2015.42%2010.15%2015.67%2010.55%2015.59C13.71%2014.53%2016%2011.53%2016%208C16%203.58%2012.42%200%208%200Z'%20transform='scale(64)'%20fill='white'/%3e%3c/svg%3e",tL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='630px'%20height='630px'%20viewBox='0%200%20630%20630'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3ePBI%20Logo%3c/title%3e%3cdesc%3eBrighter%20monochrome%20gradient.%3c/desc%3e%3cdefs%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-1'%3e%3cstop%20stop-color='%23FFFFFF'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23DDDDDD'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-2'%3e%3cstop%20stop-color='%23FFFFFF'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23EEEEEE'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3cpath%20d='M346,604%20L346,630%20L320,630%20L153,630%20C138.640597,630%20127,618.359403%20127,604%20L127,183%20C127,168.640597%20138.640597,157%20153,157%20L320,157%20C334.359403,157%20346,168.640597%20346,183%20L346,604%20Z'%20id='path-3'%3e%3c/path%3e%3cfilter%20x='-9.1%25'%20y='-6.3%25'%20width='136.5%25'%20height='116.9%25'%20filterUnits='objectBoundingBox'%20id='filter-4'%3e%3cfeOffset%20dx='20'%20dy='10'%20in='SourceAlpha'%20result='shadowOffsetOuter1'%3e%3c/feOffset%3e%3cfeGaussianBlur%20stdDeviation='10'%20in='shadowOffsetOuter1'%20result='shadowBlurOuter1'%3e%3c/feGaussianBlur%3e%3cfeColorMatrix%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.15%200'%20type='matrix'%20in='shadowBlurOuter1'%3e%3c/feColorMatrix%3e%3c/filter%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-5'%3e%3cstop%20stop-color='%23FFFFFF'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23F0F0F0'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20id='PBI-Logo'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Group'%20transform='translate(77.500000,%200.000000)'%3e%3crect%20id='Rectangle'%20fill='url(%23linearGradient-1)'%20x='256'%20y='0'%20width='219'%20height='630'%20rx='26'%3e%3c/rect%3e%3cg%20id='Combined-Shape'%3e%3cuse%20fill='black'%20fill-opacity='1'%20filter='url(%23filter-4)'%20xlink:href='%23path-3'%3e%3c/use%3e%3cuse%20fill='url(%23linearGradient-2)'%20fill-rule='evenodd'%20xlink:href='%23path-3'%3e%3c/use%3e%3c/g%3e%3cpath%20d='M219,604%20L219,630%20L193,630%20L26,630%20C11.6405965,630%201.75851975e-15,618.359403%200,604%20L0,341%20C-1.75851975e-15,326.640597%2011.6405965,315%2026,315%20L193,315%20C207.359403,315%20219,326.640597%20219,341%20L219,604%20Z'%20id='Combined-Shape'%20fill='url(%23linearGradient-5)'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",nL="data:image/svg+xml,%3csvg%20height='2467'%20width='2500'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2060.3%2059.5'%3e%3cpath%20d='M28.5%2040.2h3.3v-9h8.3V28h-8.3v-9h-3.3v9h-8.2v3.2h8.2z'%20fill='%23DDDDDD'/%3e%3cpath%20d='M13.2%2053.2H16v-8h7.4v-2.5H16v-8.1h-2.8v8.1H5.8v2.5h7.4z'%20fill='%23EEEEEE'/%3e%3cpath%20d='M44.3%2024.3h2.8v-8h7.5v-2.4h-7.5V5.8h-2.8v8.1h-7.4v2.4h7.4z'%20fill='%23FFFFFF'/%3e%3cpath%20d='M29%2059.5h2.4v-5.7h5.1v-2.1h-5.1V46H29v5.7h-5v2.1h5z'%20fill='%23FFFFFF'/%3e%3cpath%20d='M13.3%2024.3h2.6v-8.1h7.5v-2.3h-7.5V5.8h-2.6v8.1H5.8v2.3h7.5z'%20fill='%23FFFFFF'/%3e%3cpath%20d='M52.8%2036.3h2.4v-5.6h5.1v-2.2h-5.1v-5.6h-2.4v5.6h-5v2.2h5z'%20fill='%23FFFFFF'/%3e%3cpath%20clip-rule='evenodd'%20d='M44.3%2053.2h2.8v-8h7.5v-2.5h-7.5v-8.1h-2.8v8.1h-7.4v2.5h7.4z'%20fill='%23DDDDDD'%20fill-rule='evenodd'/%3e%3cpath%20d='M36.1%207.2V5.5h-5V0h-1.8v5.5h-5v1.7h5v5.5h1.8V7.2zM5%2035.9h1.8v-5.5h5v-1.7h-5v-5.4H5v5.4H0v1.8l5-.1z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",Ev="/assets/neo4j-DAEp3yR2.svg",rL="/assets/planetary-mosaic-mars-1-BJ5MaV6c.jpg",iL="/assets/planetary-mosaic-earth-1-_u7nelH2.jpg",aL="/assets/planetary-mosaic-earth-2-specular-BrwPnJHL.jpg",sL="/assets/planetary-mosaic-earth-3-bump-B6TehQDS.jpg",oL="/assets/planetary-mosaic-earth-4-lights-CpDOb4xs.jpg",lL="/assets/planetary-mosaic-earth-5-clouds-dVdUTghY.jpg",cL="/assets/planetary-mosaic-earth-6-cloudstransparent-gIwjUcvY.jpg",uL="/assets/star-CvDPdGmF.png";function hL(){const e=Ai().pathname,[t,i]=ge.useState(null),s=[{to:"/",label:"ABOUT",defaultIcon:qP,activeIcon:Sv,hoverIcon:Sv,isActive:e==="/"},{to:"/portfolio",label:"PORTFOLIO",defaultIcon:GP,activeIcon:wv,hoverIcon:wv,isActive:e.includes("/portfolio")},{to:"/blog",label:"BLOG",defaultIcon:jP,activeIcon:xv,hoverIcon:xv,isActive:e.includes("/blog")},{to:"/readings",label:"READINGS",defaultIcon:WP,activeIcon:Tv,hoverIcon:Tv,isActive:e.includes("/readings")},{to:"/",label:"- - - - -",defaultIcon:null,activeIcon:null,hoverIcon:null,isActive:!1},{to:"/",label:"- - - - -",defaultIcon:null,activeIcon:null,hoverIcon:null,isActive:!1}];return ae.jsx("nav",{id:"menu-footer",children:s.map((l,c)=>ae.jsxs($l,{to:l.to,onMouseEnter:()=>i(c),onMouseLeave:()=>i(null),children:[ae.jsx("div",{className:`menu-footer-button-border ${l.isActive?"menu-footer-button-border-highlight":"menu-footer-button-border"}`,children:l.defaultIcon&&ae.jsx("img",{src:t===c?l.hoverIcon:l.isActive?l.activeIcon:l.defaultIcon,alt:l.label})}),ae.jsx("div",{className:`menu-footer-button-light ${l.isActive?"menu-footer-button-light-highlight":"menu-footer-button-light-white"}`}),ae.jsx("h6",{className:l.isActive?"menu-footer":"",children:l.label})]},c))})}const dL=()=>{const{pathname:n}=Ai();ge.useEffect(()=>{const e=setTimeout(()=>{window.scrollTo(0,0)},500);return()=>clearTimeout(e)},[n])};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pg="173",Ao={ROTATE:0,DOLLY:1,PAN:2},So={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},fL=0,Mv=1,pL=2,K_=1,mL=2,Xi=3,Ua=0,hr=1,Qi=2,La=0,Co=1,Lo=2,Av=3,Cv=4,gL=5,fs=100,yL=101,bL=102,vL=103,_L=104,wL=200,xL=201,SL=202,TL=203,em=204,tm=205,EL=206,ML=207,AL=208,CL=209,DL=210,RL=211,kL=212,PL=213,LL=214,nm=0,rm=1,im=2,Io=3,am=4,sm=5,om=6,lm=7,mg=0,IL=1,OL=2,Ia=0,UL=1,NL=2,FL=3,J_=4,zL=5,BL=6,HL=7,$_=300,Oo=301,Uo=302,cm=303,um=304,Lh=306,hm=1e3,gs=1001,dm=1002,ci=1003,VL=1004,Du=1005,wi=1006,rp=1007,ys=1008,$i=1009,ew=1010,tw=1011,uc=1012,gg=1013,vs=1014,Zi=1015,gc=1016,yg=1017,bg=1018,No=1020,nw=35902,rw=1021,iw=1022,li=1023,aw=1024,sw=1025,Do=1026,Fo=1027,ow=1028,vg=1029,lw=1030,_g=1031,wg=1033,ch=33776,uh=33777,hh=33778,dh=33779,fm=35840,pm=35841,mm=35842,gm=35843,ym=36196,bm=37492,vm=37496,_m=37808,wm=37809,xm=37810,Sm=37811,Tm=37812,Em=37813,Mm=37814,Am=37815,Cm=37816,Dm=37817,Rm=37818,km=37819,Pm=37820,Lm=37821,fh=36492,Im=36494,Om=36495,cw=36283,Um=36284,Nm=36285,Fm=36286,GL=3200,jL=3201,xg=0,qL=1,Pa="",Pr="srgb",_s="srgb-linear",wh="linear",an="srgb",io=7680,Dv=519,WL=512,YL=513,XL=514,uw=515,QL=516,ZL=517,KL=518,JL=519,Rv=35044,kv="300 es",Ki=2e3,xh=2001;class Es{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const s=i[e];if(s!==void 0){const l=s.indexOf(t);l!==-1&&s.splice(l,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let l=0,c=s.length;l<c;l++)s[l].call(this,e);e.target=null}}}const er=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ph=Math.PI/180,zm=180/Math.PI;function yc(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(er[n&255]+er[n>>8&255]+er[n>>16&255]+er[n>>24&255]+"-"+er[e&255]+er[e>>8&255]+"-"+er[e>>16&15|64]+er[e>>24&255]+"-"+er[t&63|128]+er[t>>8&255]+"-"+er[t>>16&255]+er[t>>24&255]+er[i&255]+er[i>>8&255]+er[i>>16&255]+er[i>>24&255]).toLowerCase()}function Bt(n,e,t){return Math.max(e,Math.min(t,n))}function $L(n,e){return(n%e+e)%e}function ip(n,e,t){return(1-t)*n+t*e}function Bl(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function yr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const e4={DEG2RAD:ph};class Et{constructor(e=0,t=0){Et.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Bt(this.x,e.x,t.x),this.y=Bt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Bt(this.x,e,t),this.y=Bt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Bt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Bt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),l=this.x-e.x,c=this.y-e.y;return this.x=l*i-c*s+e.x,this.y=l*s+c*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pt{constructor(e,t,i,s,l,c,h,f,d){Pt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,l,c,h,f,d)}set(e,t,i,s,l,c,h,f,d){const p=this.elements;return p[0]=e,p[1]=s,p[2]=h,p[3]=t,p[4]=l,p[5]=f,p[6]=i,p[7]=c,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,l=this.elements,c=i[0],h=i[3],f=i[6],d=i[1],p=i[4],g=i[7],y=i[2],b=i[5],x=i[8],S=s[0],w=s[3],_=s[6],R=s[1],A=s[4],k=s[7],U=s[2],E=s[5],N=s[8];return l[0]=c*S+h*R+f*U,l[3]=c*w+h*A+f*E,l[6]=c*_+h*k+f*N,l[1]=d*S+p*R+g*U,l[4]=d*w+p*A+g*E,l[7]=d*_+p*k+g*N,l[2]=y*S+b*R+x*U,l[5]=y*w+b*A+x*E,l[8]=y*_+b*k+x*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],l=e[3],c=e[4],h=e[5],f=e[6],d=e[7],p=e[8];return t*c*p-t*h*d-i*l*p+i*h*f+s*l*d-s*c*f}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],l=e[3],c=e[4],h=e[5],f=e[6],d=e[7],p=e[8],g=p*c-h*d,y=h*f-p*l,b=d*l-c*f,x=t*g+i*y+s*b;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=g*S,e[1]=(s*d-p*i)*S,e[2]=(h*i-s*c)*S,e[3]=y*S,e[4]=(p*t-s*f)*S,e[5]=(s*l-h*t)*S,e[6]=b*S,e[7]=(i*f-d*t)*S,e[8]=(c*t-i*l)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,l,c,h){const f=Math.cos(l),d=Math.sin(l);return this.set(i*f,i*d,-i*(f*c+d*h)+c+e,-s*d,s*f,-s*(-d*c+f*h)+h+t,0,0,1),this}scale(e,t){return this.premultiply(ap.makeScale(e,t)),this}rotate(e){return this.premultiply(ap.makeRotation(-e)),this}translate(e,t){return this.premultiply(ap.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ap=new Pt;function hw(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function hc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function t4(){const n=hc("canvas");return n.style.display="block",n}const Pv={};function xo(n){n in Pv||(Pv[n]=!0,console.warn(n))}function n4(n,e,t){return new Promise(function(i,s){function l(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(l,t);break;default:i()}}setTimeout(l,t)})}function r4(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function i4(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Lv=new Pt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Iv=new Pt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function a4(){const n={enabled:!0,workingColorSpace:_s,spaces:{},convert:function(s,l,c){return this.enabled===!1||l===c||!l||!c||(this.spaces[l].transfer===an&&(s.r=Ji(s.r),s.g=Ji(s.g),s.b=Ji(s.b)),this.spaces[l].primaries!==this.spaces[c].primaries&&(s.applyMatrix3(this.spaces[l].toXYZ),s.applyMatrix3(this.spaces[c].fromXYZ)),this.spaces[c].transfer===an&&(s.r=Ro(s.r),s.g=Ro(s.g),s.b=Ro(s.b))),s},fromWorkingColorSpace:function(s,l){return this.convert(s,this.workingColorSpace,l)},toWorkingColorSpace:function(s,l){return this.convert(s,l,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Pa?wh:this.spaces[s].transfer},getLuminanceCoefficients:function(s,l=this.workingColorSpace){return s.fromArray(this.spaces[l].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,l,c){return s.copy(this.spaces[l].toXYZ).multiply(this.spaces[c].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[_s]:{primaries:e,whitePoint:i,transfer:wh,toXYZ:Lv,fromXYZ:Iv,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Pr},outputColorSpaceConfig:{drawingBufferColorSpace:Pr}},[Pr]:{primaries:e,whitePoint:i,transfer:an,toXYZ:Lv,fromXYZ:Iv,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Pr}}}),n}const Zt=a4();function Ji(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ro(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ao;class s4{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ao===void 0&&(ao=hc("canvas")),ao.width=e.width,ao.height=e.height;const i=ao.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=ao}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hc("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),l=s.data;for(let c=0;c<l.length;c++)l[c]=Ji(l[c]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ji(t[i]/255)*255):t[i]=Ji(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let o4=0;class dw{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:o4++}),this.uuid=yc(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let l;if(Array.isArray(s)){l=[];for(let c=0,h=s.length;c<h;c++)s[c].isDataTexture?l.push(sp(s[c].image)):l.push(sp(s[c]))}else l=sp(s);i.url=l}return t||(e.images[this.uuid]=i),i}}function sp(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?s4.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let l4=0;class dr extends Es{constructor(e=dr.DEFAULT_IMAGE,t=dr.DEFAULT_MAPPING,i=gs,s=gs,l=wi,c=ys,h=li,f=$i,d=dr.DEFAULT_ANISOTROPY,p=Pa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:l4++}),this.uuid=yc(),this.name="",this.source=new dw(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=l,this.minFilter=c,this.anisotropy=d,this.format=h,this.internalFormat=null,this.type=f,this.offset=new Et(0,0),this.repeat=new Et(1,1),this.center=new Et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hm:e.x=e.x-Math.floor(e.x);break;case gs:e.x=e.x<0?0:1;break;case dm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hm:e.y=e.y-Math.floor(e.y);break;case gs:e.y=e.y<0?0:1;break;case dm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}dr.DEFAULT_IMAGE=null;dr.DEFAULT_MAPPING=$_;dr.DEFAULT_ANISOTROPY=1;class on{constructor(e=0,t=0,i=0,s=1){on.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,l=this.w,c=e.elements;return this.x=c[0]*t+c[4]*i+c[8]*s+c[12]*l,this.y=c[1]*t+c[5]*i+c[9]*s+c[13]*l,this.z=c[2]*t+c[6]*i+c[10]*s+c[14]*l,this.w=c[3]*t+c[7]*i+c[11]*s+c[15]*l,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,l;const f=e.elements,d=f[0],p=f[4],g=f[8],y=f[1],b=f[5],x=f[9],S=f[2],w=f[6],_=f[10];if(Math.abs(p-y)<.01&&Math.abs(g-S)<.01&&Math.abs(x-w)<.01){if(Math.abs(p+y)<.1&&Math.abs(g+S)<.1&&Math.abs(x+w)<.1&&Math.abs(d+b+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(d+1)/2,k=(b+1)/2,U=(_+1)/2,E=(p+y)/4,N=(g+S)/4,H=(x+w)/4;return A>k&&A>U?A<.01?(i=0,s=.707106781,l=.707106781):(i=Math.sqrt(A),s=E/i,l=N/i):k>U?k<.01?(i=.707106781,s=0,l=.707106781):(s=Math.sqrt(k),i=E/s,l=H/s):U<.01?(i=.707106781,s=.707106781,l=0):(l=Math.sqrt(U),i=N/l,s=H/l),this.set(i,s,l,t),this}let R=Math.sqrt((w-x)*(w-x)+(g-S)*(g-S)+(y-p)*(y-p));return Math.abs(R)<.001&&(R=1),this.x=(w-x)/R,this.y=(g-S)/R,this.z=(y-p)/R,this.w=Math.acos((d+b+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Bt(this.x,e.x,t.x),this.y=Bt(this.y,e.y,t.y),this.z=Bt(this.z,e.z,t.z),this.w=Bt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Bt(this.x,e,t),this.y=Bt(this.y,e,t),this.z=Bt(this.z,e,t),this.w=Bt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Bt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class c4 extends Es{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new on(0,0,e,t),this.scissorTest=!1,this.viewport=new on(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const l=new dr(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);l.flipY=!1,l.generateMipmaps=i.generateMipmaps,l.internalFormat=i.internalFormat,this.textures=[];const c=i.count;for(let h=0;h<c;h++)this.textures[h]=l.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,l=this.textures.length;s<l;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new dw(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ws extends c4{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class fw extends dr{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ci,this.minFilter=ci,this.wrapR=gs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class u4 extends dr{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ci,this.minFilter=ci,this.wrapR=gs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xs{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,l,c,h){let f=i[s+0],d=i[s+1],p=i[s+2],g=i[s+3];const y=l[c+0],b=l[c+1],x=l[c+2],S=l[c+3];if(h===0){e[t+0]=f,e[t+1]=d,e[t+2]=p,e[t+3]=g;return}if(h===1){e[t+0]=y,e[t+1]=b,e[t+2]=x,e[t+3]=S;return}if(g!==S||f!==y||d!==b||p!==x){let w=1-h;const _=f*y+d*b+p*x+g*S,R=_>=0?1:-1,A=1-_*_;if(A>Number.EPSILON){const U=Math.sqrt(A),E=Math.atan2(U,_*R);w=Math.sin(w*E)/U,h=Math.sin(h*E)/U}const k=h*R;if(f=f*w+y*k,d=d*w+b*k,p=p*w+x*k,g=g*w+S*k,w===1-h){const U=1/Math.sqrt(f*f+d*d+p*p+g*g);f*=U,d*=U,p*=U,g*=U}}e[t]=f,e[t+1]=d,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,s,l,c){const h=i[s],f=i[s+1],d=i[s+2],p=i[s+3],g=l[c],y=l[c+1],b=l[c+2],x=l[c+3];return e[t]=h*x+p*g+f*b-d*y,e[t+1]=f*x+p*y+d*g-h*b,e[t+2]=d*x+p*b+h*y-f*g,e[t+3]=p*x-h*g-f*y-d*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,l=e._z,c=e._order,h=Math.cos,f=Math.sin,d=h(i/2),p=h(s/2),g=h(l/2),y=f(i/2),b=f(s/2),x=f(l/2);switch(c){case"XYZ":this._x=y*p*g+d*b*x,this._y=d*b*g-y*p*x,this._z=d*p*x+y*b*g,this._w=d*p*g-y*b*x;break;case"YXZ":this._x=y*p*g+d*b*x,this._y=d*b*g-y*p*x,this._z=d*p*x-y*b*g,this._w=d*p*g+y*b*x;break;case"ZXY":this._x=y*p*g-d*b*x,this._y=d*b*g+y*p*x,this._z=d*p*x+y*b*g,this._w=d*p*g-y*b*x;break;case"ZYX":this._x=y*p*g-d*b*x,this._y=d*b*g+y*p*x,this._z=d*p*x-y*b*g,this._w=d*p*g+y*b*x;break;case"YZX":this._x=y*p*g+d*b*x,this._y=d*b*g+y*p*x,this._z=d*p*x-y*b*g,this._w=d*p*g-y*b*x;break;case"XZY":this._x=y*p*g-d*b*x,this._y=d*b*g-y*p*x,this._z=d*p*x+y*b*g,this._w=d*p*g+y*b*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],l=t[8],c=t[1],h=t[5],f=t[9],d=t[2],p=t[6],g=t[10],y=i+h+g;if(y>0){const b=.5/Math.sqrt(y+1);this._w=.25/b,this._x=(p-f)*b,this._y=(l-d)*b,this._z=(c-s)*b}else if(i>h&&i>g){const b=2*Math.sqrt(1+i-h-g);this._w=(p-f)/b,this._x=.25*b,this._y=(s+c)/b,this._z=(l+d)/b}else if(h>g){const b=2*Math.sqrt(1+h-i-g);this._w=(l-d)/b,this._x=(s+c)/b,this._y=.25*b,this._z=(f+p)/b}else{const b=2*Math.sqrt(1+g-i-h);this._w=(c-s)/b,this._x=(l+d)/b,this._y=(f+p)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Bt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,l=e._z,c=e._w,h=t._x,f=t._y,d=t._z,p=t._w;return this._x=i*p+c*h+s*d-l*f,this._y=s*p+c*f+l*h-i*d,this._z=l*p+c*d+i*f-s*h,this._w=c*p-i*h-s*f-l*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,l=this._z,c=this._w;let h=c*e._w+i*e._x+s*e._y+l*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=c,this._x=i,this._y=s,this._z=l,this;const f=1-h*h;if(f<=Number.EPSILON){const b=1-t;return this._w=b*c+t*this._w,this._x=b*i+t*this._x,this._y=b*s+t*this._y,this._z=b*l+t*this._z,this.normalize(),this}const d=Math.sqrt(f),p=Math.atan2(d,h),g=Math.sin((1-t)*p)/d,y=Math.sin(t*p)/d;return this._w=c*g+this._w*y,this._x=i*g+this._x*y,this._y=s*g+this._y*y,this._z=l*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),l=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),l*Math.sin(t),l*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,t=0,i=0){te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Ov.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ov.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,l=e.elements;return this.x=l[0]*t+l[3]*i+l[6]*s,this.y=l[1]*t+l[4]*i+l[7]*s,this.z=l[2]*t+l[5]*i+l[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,l=e.elements,c=1/(l[3]*t+l[7]*i+l[11]*s+l[15]);return this.x=(l[0]*t+l[4]*i+l[8]*s+l[12])*c,this.y=(l[1]*t+l[5]*i+l[9]*s+l[13])*c,this.z=(l[2]*t+l[6]*i+l[10]*s+l[14])*c,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,l=e.x,c=e.y,h=e.z,f=e.w,d=2*(c*s-h*i),p=2*(h*t-l*s),g=2*(l*i-c*t);return this.x=t+f*d+c*g-h*p,this.y=i+f*p+h*d-l*g,this.z=s+f*g+l*p-c*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s,this.y=l[1]*t+l[5]*i+l[9]*s,this.z=l[2]*t+l[6]*i+l[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Bt(this.x,e.x,t.x),this.y=Bt(this.y,e.y,t.y),this.z=Bt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Bt(this.x,e,t),this.y=Bt(this.y,e,t),this.z=Bt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Bt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,l=e.z,c=t.x,h=t.y,f=t.z;return this.x=s*f-l*h,this.y=l*c-i*f,this.z=i*h-s*c,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return op.copy(this).projectOnVector(e),this.sub(op)}reflect(e){return this.sub(op.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Bt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const op=new te,Ov=new xs;class bc{constructor(e=new te(1/0,1/0,1/0),t=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ii.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ii.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ii.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const l=i.getAttribute("position");if(t===!0&&l!==void 0&&e.isInstancedMesh!==!0)for(let c=0,h=l.count;c<h;c++)e.isMesh===!0?e.getVertexPosition(c,ii):ii.fromBufferAttribute(l,c),ii.applyMatrix4(e.matrixWorld),this.expandByPoint(ii);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ru.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Ru.copy(i.boundingBox)),Ru.applyMatrix4(e.matrixWorld),this.union(Ru)}const s=e.children;for(let l=0,c=s.length;l<c;l++)this.expandByObject(s[l],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ii),ii.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hl),ku.subVectors(this.max,Hl),so.subVectors(e.a,Hl),oo.subVectors(e.b,Hl),lo.subVectors(e.c,Hl),xa.subVectors(oo,so),Sa.subVectors(lo,oo),as.subVectors(so,lo);let t=[0,-xa.z,xa.y,0,-Sa.z,Sa.y,0,-as.z,as.y,xa.z,0,-xa.x,Sa.z,0,-Sa.x,as.z,0,-as.x,-xa.y,xa.x,0,-Sa.y,Sa.x,0,-as.y,as.x,0];return!lp(t,so,oo,lo,ku)||(t=[1,0,0,0,1,0,0,0,1],!lp(t,so,oo,lo,ku))?!1:(Pu.crossVectors(xa,Sa),t=[Pu.x,Pu.y,Pu.z],lp(t,so,oo,lo,ku))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ii).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ii).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Gi=[new te,new te,new te,new te,new te,new te,new te,new te],ii=new te,Ru=new bc,so=new te,oo=new te,lo=new te,xa=new te,Sa=new te,as=new te,Hl=new te,ku=new te,Pu=new te,ss=new te;function lp(n,e,t,i,s){for(let l=0,c=n.length-3;l<=c;l+=3){ss.fromArray(n,l);const h=s.x*Math.abs(ss.x)+s.y*Math.abs(ss.y)+s.z*Math.abs(ss.z),f=e.dot(ss),d=t.dot(ss),p=i.dot(ss);if(Math.max(-Math.max(f,d,p),Math.min(f,d,p))>h)return!1}return!0}const h4=new bc,Vl=new te,cp=new te;class vc{constructor(e=new te,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):h4.setFromPoints(e).getCenter(i);let s=0;for(let l=0,c=e.length;l<c;l++)s=Math.max(s,i.distanceToSquared(e[l]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Vl.subVectors(e,this.center);const t=Vl.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Vl,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(cp.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Vl.copy(e.center).add(cp)),this.expandByPoint(Vl.copy(e.center).sub(cp))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ji=new te,up=new te,Lu=new te,Ta=new te,hp=new te,Iu=new te,dp=new te;class Ih{constructor(e=new te,t=new te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ji)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ji.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ji.copy(this.origin).addScaledVector(this.direction,t),ji.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){up.copy(e).add(t).multiplyScalar(.5),Lu.copy(t).sub(e).normalize(),Ta.copy(this.origin).sub(up);const l=e.distanceTo(t)*.5,c=-this.direction.dot(Lu),h=Ta.dot(this.direction),f=-Ta.dot(Lu),d=Ta.lengthSq(),p=Math.abs(1-c*c);let g,y,b,x;if(p>0)if(g=c*f-h,y=c*h-f,x=l*p,g>=0)if(y>=-x)if(y<=x){const S=1/p;g*=S,y*=S,b=g*(g+c*y+2*h)+y*(c*g+y+2*f)+d}else y=l,g=Math.max(0,-(c*y+h)),b=-g*g+y*(y+2*f)+d;else y=-l,g=Math.max(0,-(c*y+h)),b=-g*g+y*(y+2*f)+d;else y<=-x?(g=Math.max(0,-(-c*l+h)),y=g>0?-l:Math.min(Math.max(-l,-f),l),b=-g*g+y*(y+2*f)+d):y<=x?(g=0,y=Math.min(Math.max(-l,-f),l),b=y*(y+2*f)+d):(g=Math.max(0,-(c*l+h)),y=g>0?l:Math.min(Math.max(-l,-f),l),b=-g*g+y*(y+2*f)+d);else y=c>0?-l:l,g=Math.max(0,-(c*y+h)),b=-g*g+y*(y+2*f)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(up).addScaledVector(Lu,y),b}intersectSphere(e,t){ji.subVectors(e.center,this.origin);const i=ji.dot(this.direction),s=ji.dot(ji)-i*i,l=e.radius*e.radius;if(s>l)return null;const c=Math.sqrt(l-s),h=i-c,f=i+c;return f<0?null:h<0?this.at(f,t):this.at(h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,l,c,h,f;const d=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,y=this.origin;return d>=0?(i=(e.min.x-y.x)*d,s=(e.max.x-y.x)*d):(i=(e.max.x-y.x)*d,s=(e.min.x-y.x)*d),p>=0?(l=(e.min.y-y.y)*p,c=(e.max.y-y.y)*p):(l=(e.max.y-y.y)*p,c=(e.min.y-y.y)*p),i>c||l>s||((l>i||isNaN(i))&&(i=l),(c<s||isNaN(s))&&(s=c),g>=0?(h=(e.min.z-y.z)*g,f=(e.max.z-y.z)*g):(h=(e.max.z-y.z)*g,f=(e.min.z-y.z)*g),i>f||h>s)||((h>i||i!==i)&&(i=h),(f<s||s!==s)&&(s=f),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,ji)!==null}intersectTriangle(e,t,i,s,l){hp.subVectors(t,e),Iu.subVectors(i,e),dp.crossVectors(hp,Iu);let c=this.direction.dot(dp),h;if(c>0){if(s)return null;h=1}else if(c<0)h=-1,c=-c;else return null;Ta.subVectors(this.origin,e);const f=h*this.direction.dot(Iu.crossVectors(Ta,Iu));if(f<0)return null;const d=h*this.direction.dot(hp.cross(Ta));if(d<0||f+d>c)return null;const p=-h*Ta.dot(dp);return p<0?null:this.at(p/c,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gn{constructor(e,t,i,s,l,c,h,f,d,p,g,y,b,x,S,w){gn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,l,c,h,f,d,p,g,y,b,x,S,w)}set(e,t,i,s,l,c,h,f,d,p,g,y,b,x,S,w){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=s,_[1]=l,_[5]=c,_[9]=h,_[13]=f,_[2]=d,_[6]=p,_[10]=g,_[14]=y,_[3]=b,_[7]=x,_[11]=S,_[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/co.setFromMatrixColumn(e,0).length(),l=1/co.setFromMatrixColumn(e,1).length(),c=1/co.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*l,t[5]=i[5]*l,t[6]=i[6]*l,t[7]=0,t[8]=i[8]*c,t[9]=i[9]*c,t[10]=i[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,l=e.z,c=Math.cos(i),h=Math.sin(i),f=Math.cos(s),d=Math.sin(s),p=Math.cos(l),g=Math.sin(l);if(e.order==="XYZ"){const y=c*p,b=c*g,x=h*p,S=h*g;t[0]=f*p,t[4]=-f*g,t[8]=d,t[1]=b+x*d,t[5]=y-S*d,t[9]=-h*f,t[2]=S-y*d,t[6]=x+b*d,t[10]=c*f}else if(e.order==="YXZ"){const y=f*p,b=f*g,x=d*p,S=d*g;t[0]=y+S*h,t[4]=x*h-b,t[8]=c*d,t[1]=c*g,t[5]=c*p,t[9]=-h,t[2]=b*h-x,t[6]=S+y*h,t[10]=c*f}else if(e.order==="ZXY"){const y=f*p,b=f*g,x=d*p,S=d*g;t[0]=y-S*h,t[4]=-c*g,t[8]=x+b*h,t[1]=b+x*h,t[5]=c*p,t[9]=S-y*h,t[2]=-c*d,t[6]=h,t[10]=c*f}else if(e.order==="ZYX"){const y=c*p,b=c*g,x=h*p,S=h*g;t[0]=f*p,t[4]=x*d-b,t[8]=y*d+S,t[1]=f*g,t[5]=S*d+y,t[9]=b*d-x,t[2]=-d,t[6]=h*f,t[10]=c*f}else if(e.order==="YZX"){const y=c*f,b=c*d,x=h*f,S=h*d;t[0]=f*p,t[4]=S-y*g,t[8]=x*g+b,t[1]=g,t[5]=c*p,t[9]=-h*p,t[2]=-d*p,t[6]=b*g+x,t[10]=y-S*g}else if(e.order==="XZY"){const y=c*f,b=c*d,x=h*f,S=h*d;t[0]=f*p,t[4]=-g,t[8]=d*p,t[1]=y*g+S,t[5]=c*p,t[9]=b*g-x,t[2]=x*g-b,t[6]=h*p,t[10]=S*g+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(d4,e,f4)}lookAt(e,t,i){const s=this.elements;return Ar.subVectors(e,t),Ar.lengthSq()===0&&(Ar.z=1),Ar.normalize(),Ea.crossVectors(i,Ar),Ea.lengthSq()===0&&(Math.abs(i.z)===1?Ar.x+=1e-4:Ar.z+=1e-4,Ar.normalize(),Ea.crossVectors(i,Ar)),Ea.normalize(),Ou.crossVectors(Ar,Ea),s[0]=Ea.x,s[4]=Ou.x,s[8]=Ar.x,s[1]=Ea.y,s[5]=Ou.y,s[9]=Ar.y,s[2]=Ea.z,s[6]=Ou.z,s[10]=Ar.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,l=this.elements,c=i[0],h=i[4],f=i[8],d=i[12],p=i[1],g=i[5],y=i[9],b=i[13],x=i[2],S=i[6],w=i[10],_=i[14],R=i[3],A=i[7],k=i[11],U=i[15],E=s[0],N=s[4],H=s[8],C=s[12],D=s[1],F=s[5],J=s[9],Y=s[13],W=s[2],re=s[6],j=s[10],ce=s[14],X=s[3],_e=s[7],T=s[11],se=s[15];return l[0]=c*E+h*D+f*W+d*X,l[4]=c*N+h*F+f*re+d*_e,l[8]=c*H+h*J+f*j+d*T,l[12]=c*C+h*Y+f*ce+d*se,l[1]=p*E+g*D+y*W+b*X,l[5]=p*N+g*F+y*re+b*_e,l[9]=p*H+g*J+y*j+b*T,l[13]=p*C+g*Y+y*ce+b*se,l[2]=x*E+S*D+w*W+_*X,l[6]=x*N+S*F+w*re+_*_e,l[10]=x*H+S*J+w*j+_*T,l[14]=x*C+S*Y+w*ce+_*se,l[3]=R*E+A*D+k*W+U*X,l[7]=R*N+A*F+k*re+U*_e,l[11]=R*H+A*J+k*j+U*T,l[15]=R*C+A*Y+k*ce+U*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],l=e[12],c=e[1],h=e[5],f=e[9],d=e[13],p=e[2],g=e[6],y=e[10],b=e[14],x=e[3],S=e[7],w=e[11],_=e[15];return x*(+l*f*g-s*d*g-l*h*y+i*d*y+s*h*b-i*f*b)+S*(+t*f*b-t*d*y+l*c*y-s*c*b+s*d*p-l*f*p)+w*(+t*d*g-t*h*b-l*c*g+i*c*b+l*h*p-i*d*p)+_*(-s*h*p-t*f*g+t*h*y+s*c*g-i*c*y+i*f*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],l=e[3],c=e[4],h=e[5],f=e[6],d=e[7],p=e[8],g=e[9],y=e[10],b=e[11],x=e[12],S=e[13],w=e[14],_=e[15],R=g*w*d-S*y*d+S*f*b-h*w*b-g*f*_+h*y*_,A=x*y*d-p*w*d-x*f*b+c*w*b+p*f*_-c*y*_,k=p*S*d-x*g*d+x*h*b-c*S*b-p*h*_+c*g*_,U=x*g*f-p*S*f-x*h*y+c*S*y+p*h*w-c*g*w,E=t*R+i*A+s*k+l*U;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/E;return e[0]=R*N,e[1]=(S*y*l-g*w*l-S*s*b+i*w*b+g*s*_-i*y*_)*N,e[2]=(h*w*l-S*f*l+S*s*d-i*w*d-h*s*_+i*f*_)*N,e[3]=(g*f*l-h*y*l-g*s*d+i*y*d+h*s*b-i*f*b)*N,e[4]=A*N,e[5]=(p*w*l-x*y*l+x*s*b-t*w*b-p*s*_+t*y*_)*N,e[6]=(x*f*l-c*w*l-x*s*d+t*w*d+c*s*_-t*f*_)*N,e[7]=(c*y*l-p*f*l+p*s*d-t*y*d-c*s*b+t*f*b)*N,e[8]=k*N,e[9]=(x*g*l-p*S*l-x*i*b+t*S*b+p*i*_-t*g*_)*N,e[10]=(c*S*l-x*h*l+x*i*d-t*S*d-c*i*_+t*h*_)*N,e[11]=(p*h*l-c*g*l-p*i*d+t*g*d+c*i*b-t*h*b)*N,e[12]=U*N,e[13]=(p*S*s-x*g*s+x*i*y-t*S*y-p*i*w+t*g*w)*N,e[14]=(x*h*s-c*S*s-x*i*f+t*S*f+c*i*w-t*h*w)*N,e[15]=(c*g*s-p*h*s+p*i*f-t*g*f-c*i*y+t*h*y)*N,this}scale(e){const t=this.elements,i=e.x,s=e.y,l=e.z;return t[0]*=i,t[4]*=s,t[8]*=l,t[1]*=i,t[5]*=s,t[9]*=l,t[2]*=i,t[6]*=s,t[10]*=l,t[3]*=i,t[7]*=s,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),l=1-i,c=e.x,h=e.y,f=e.z,d=l*c,p=l*h;return this.set(d*c+i,d*h-s*f,d*f+s*h,0,d*h+s*f,p*h+i,p*f-s*c,0,d*f-s*h,p*f+s*c,l*f*f+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,l,c){return this.set(1,i,l,0,e,1,c,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,l=t._x,c=t._y,h=t._z,f=t._w,d=l+l,p=c+c,g=h+h,y=l*d,b=l*p,x=l*g,S=c*p,w=c*g,_=h*g,R=f*d,A=f*p,k=f*g,U=i.x,E=i.y,N=i.z;return s[0]=(1-(S+_))*U,s[1]=(b+k)*U,s[2]=(x-A)*U,s[3]=0,s[4]=(b-k)*E,s[5]=(1-(y+_))*E,s[6]=(w+R)*E,s[7]=0,s[8]=(x+A)*N,s[9]=(w-R)*N,s[10]=(1-(y+S))*N,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let l=co.set(s[0],s[1],s[2]).length();const c=co.set(s[4],s[5],s[6]).length(),h=co.set(s[8],s[9],s[10]).length();this.determinant()<0&&(l=-l),e.x=s[12],e.y=s[13],e.z=s[14],ai.copy(this);const d=1/l,p=1/c,g=1/h;return ai.elements[0]*=d,ai.elements[1]*=d,ai.elements[2]*=d,ai.elements[4]*=p,ai.elements[5]*=p,ai.elements[6]*=p,ai.elements[8]*=g,ai.elements[9]*=g,ai.elements[10]*=g,t.setFromRotationMatrix(ai),i.x=l,i.y=c,i.z=h,this}makePerspective(e,t,i,s,l,c,h=Ki){const f=this.elements,d=2*l/(t-e),p=2*l/(i-s),g=(t+e)/(t-e),y=(i+s)/(i-s);let b,x;if(h===Ki)b=-(c+l)/(c-l),x=-2*c*l/(c-l);else if(h===xh)b=-c/(c-l),x=-c*l/(c-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return f[0]=d,f[4]=0,f[8]=g,f[12]=0,f[1]=0,f[5]=p,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=b,f[14]=x,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,s,l,c,h=Ki){const f=this.elements,d=1/(t-e),p=1/(i-s),g=1/(c-l),y=(t+e)*d,b=(i+s)*p;let x,S;if(h===Ki)x=(c+l)*g,S=-2*g;else if(h===xh)x=l*g,S=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return f[0]=2*d,f[4]=0,f[8]=0,f[12]=-y,f[1]=0,f[5]=2*p,f[9]=0,f[13]=-b,f[2]=0,f[6]=0,f[10]=S,f[14]=-x,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const co=new te,ai=new gn,d4=new te(0,0,0),f4=new te(1,1,1),Ea=new te,Ou=new te,Ar=new te,Uv=new gn,Nv=new xs;class ui{constructor(e=0,t=0,i=0,s=ui.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,l=s[0],c=s[4],h=s[8],f=s[1],d=s[5],p=s[9],g=s[2],y=s[6],b=s[10];switch(t){case"XYZ":this._y=Math.asin(Bt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,b),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(y,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Bt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(h,b),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-g,l),this._z=0);break;case"ZXY":this._x=Math.asin(Bt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,b),this._z=Math.atan2(-c,d)):(this._y=0,this._z=Math.atan2(f,l));break;case"ZYX":this._y=Math.asin(-Bt(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,b),this._z=Math.atan2(f,l)):(this._x=0,this._z=Math.atan2(-c,d));break;case"YZX":this._z=Math.asin(Bt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-g,l)):(this._x=0,this._y=Math.atan2(h,b));break;case"XZY":this._z=Math.asin(-Bt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(y,d),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-p,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Uv.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Uv,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Nv.setFromEuler(this),this.setFromQuaternion(Nv,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ui.DEFAULT_ORDER="XYZ";class pw{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let p4=0;const Fv=new te,uo=new xs,qi=new gn,Uu=new te,Gl=new te,m4=new te,g4=new xs,zv=new te(1,0,0),Bv=new te(0,1,0),Hv=new te(0,0,1),Vv={type:"added"},y4={type:"removed"},ho={type:"childadded",child:null},fp={type:"childremoved",child:null};class nr extends Es{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:p4++}),this.uuid=yc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=nr.DEFAULT_UP.clone();const e=new te,t=new ui,i=new xs,s=new te(1,1,1);function l(){i.setFromEuler(t,!1)}function c(){t.setFromQuaternion(i,void 0,!1)}t._onChange(l),i._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new gn},normalMatrix:{value:new Pt}}),this.matrix=new gn,this.matrixWorld=new gn,this.matrixAutoUpdate=nr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=nr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pw,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return uo.setFromAxisAngle(e,t),this.quaternion.multiply(uo),this}rotateOnWorldAxis(e,t){return uo.setFromAxisAngle(e,t),this.quaternion.premultiply(uo),this}rotateX(e){return this.rotateOnAxis(zv,e)}rotateY(e){return this.rotateOnAxis(Bv,e)}rotateZ(e){return this.rotateOnAxis(Hv,e)}translateOnAxis(e,t){return Fv.copy(e).applyQuaternion(this.quaternion),this.position.add(Fv.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(zv,e)}translateY(e){return this.translateOnAxis(Bv,e)}translateZ(e){return this.translateOnAxis(Hv,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(qi.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Uu.copy(e):Uu.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Gl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qi.lookAt(Gl,Uu,this.up):qi.lookAt(Uu,Gl,this.up),this.quaternion.setFromRotationMatrix(qi),s&&(qi.extractRotation(s.matrixWorld),uo.setFromRotationMatrix(qi),this.quaternion.premultiply(uo.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Vv),ho.child=e,this.dispatchEvent(ho),ho.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(y4),fp.child=e,this.dispatchEvent(fp),fp.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),qi.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),qi.multiply(e.parent.matrixWorld)),e.applyMatrix4(qi),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Vv),ho.child=e,this.dispatchEvent(ho),ho.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const c=this.children[i].getObjectByProperty(e,t);if(c!==void 0)return c}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let l=0,c=s.length;l<c;l++)s[l].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gl,e,m4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gl,g4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let l=0,c=s.length;l<c;l++)s[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(h=>({boxInitialized:h.boxInitialized,boxMin:h.box.min.toArray(),boxMax:h.box.max.toArray(),sphereInitialized:h.sphereInitialized,sphereRadius:h.sphere.radius,sphereCenter:h.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function l(h,f){return h[f.uuid]===void 0&&(h[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=l(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const f=h.shapes;if(Array.isArray(f))for(let d=0,p=f.length;d<p;d++){const g=f[d];l(e.shapes,g)}else l(e.shapes,f)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let f=0,d=this.material.length;f<d;f++)h.push(l(e.materials,this.material[f]));s.material=h}else s.material=l(e.materials,this.material);if(this.children.length>0){s.children=[];for(let h=0;h<this.children.length;h++)s.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let h=0;h<this.animations.length;h++){const f=this.animations[h];s.animations.push(l(e.animations,f))}}if(t){const h=c(e.geometries),f=c(e.materials),d=c(e.textures),p=c(e.images),g=c(e.shapes),y=c(e.skeletons),b=c(e.animations),x=c(e.nodes);h.length>0&&(i.geometries=h),f.length>0&&(i.materials=f),d.length>0&&(i.textures=d),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),y.length>0&&(i.skeletons=y),b.length>0&&(i.animations=b),x.length>0&&(i.nodes=x)}return i.object=s,i;function c(h){const f=[];for(const d in h){const p=h[d];delete p.metadata,f.push(p)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}nr.DEFAULT_UP=new te(0,1,0);nr.DEFAULT_MATRIX_AUTO_UPDATE=!0;nr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const si=new te,Wi=new te,pp=new te,Yi=new te,fo=new te,po=new te,Gv=new te,mp=new te,gp=new te,yp=new te,bp=new on,vp=new on,_p=new on;class oi{constructor(e=new te,t=new te,i=new te){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),si.subVectors(e,t),s.cross(si);const l=s.lengthSq();return l>0?s.multiplyScalar(1/Math.sqrt(l)):s.set(0,0,0)}static getBarycoord(e,t,i,s,l){si.subVectors(s,t),Wi.subVectors(i,t),pp.subVectors(e,t);const c=si.dot(si),h=si.dot(Wi),f=si.dot(pp),d=Wi.dot(Wi),p=Wi.dot(pp),g=c*d-h*h;if(g===0)return l.set(0,0,0),null;const y=1/g,b=(d*f-h*p)*y,x=(c*p-h*f)*y;return l.set(1-b-x,x,b)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,Yi)===null?!1:Yi.x>=0&&Yi.y>=0&&Yi.x+Yi.y<=1}static getInterpolation(e,t,i,s,l,c,h,f){return this.getBarycoord(e,t,i,s,Yi)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(l,Yi.x),f.addScaledVector(c,Yi.y),f.addScaledVector(h,Yi.z),f)}static getInterpolatedAttribute(e,t,i,s,l,c){return bp.setScalar(0),vp.setScalar(0),_p.setScalar(0),bp.fromBufferAttribute(e,t),vp.fromBufferAttribute(e,i),_p.fromBufferAttribute(e,s),c.setScalar(0),c.addScaledVector(bp,l.x),c.addScaledVector(vp,l.y),c.addScaledVector(_p,l.z),c}static isFrontFacing(e,t,i,s){return si.subVectors(i,t),Wi.subVectors(e,t),si.cross(Wi).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return si.subVectors(this.c,this.b),Wi.subVectors(this.a,this.b),si.cross(Wi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return oi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return oi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,l){return oi.getInterpolation(e,this.a,this.b,this.c,t,i,s,l)}containsPoint(e){return oi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return oi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,l=this.c;let c,h;fo.subVectors(s,i),po.subVectors(l,i),mp.subVectors(e,i);const f=fo.dot(mp),d=po.dot(mp);if(f<=0&&d<=0)return t.copy(i);gp.subVectors(e,s);const p=fo.dot(gp),g=po.dot(gp);if(p>=0&&g<=p)return t.copy(s);const y=f*g-p*d;if(y<=0&&f>=0&&p<=0)return c=f/(f-p),t.copy(i).addScaledVector(fo,c);yp.subVectors(e,l);const b=fo.dot(yp),x=po.dot(yp);if(x>=0&&b<=x)return t.copy(l);const S=b*d-f*x;if(S<=0&&d>=0&&x<=0)return h=d/(d-x),t.copy(i).addScaledVector(po,h);const w=p*x-b*g;if(w<=0&&g-p>=0&&b-x>=0)return Gv.subVectors(l,s),h=(g-p)/(g-p+(b-x)),t.copy(s).addScaledVector(Gv,h);const _=1/(w+S+y);return c=S*_,h=y*_,t.copy(i).addScaledVector(fo,c).addScaledVector(po,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const mw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ma={h:0,s:0,l:0},Nu={h:0,s:0,l:0};function wp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ut{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Pr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Zt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Zt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Zt.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Zt.workingColorSpace){if(e=$L(e,1),t=Bt(t,0,1),i=Bt(i,0,1),t===0)this.r=this.g=this.b=i;else{const l=i<=.5?i*(1+t):i+t-i*t,c=2*i-l;this.r=wp(c,l,e+1/3),this.g=wp(c,l,e),this.b=wp(c,l,e-1/3)}return Zt.toWorkingColorSpace(this,s),this}setStyle(e,t=Pr){function i(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let l;const c=s[1],h=s[2];switch(c){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,t);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,t);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=s[1],c=l.length;if(c===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,t);if(c===6)return this.setHex(parseInt(l,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Pr){const i=mw[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ji(e.r),this.g=Ji(e.g),this.b=Ji(e.b),this}copyLinearToSRGB(e){return this.r=Ro(e.r),this.g=Ro(e.g),this.b=Ro(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pr){return Zt.fromWorkingColorSpace(tr.copy(this),e),Math.round(Bt(tr.r*255,0,255))*65536+Math.round(Bt(tr.g*255,0,255))*256+Math.round(Bt(tr.b*255,0,255))}getHexString(e=Pr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Zt.workingColorSpace){Zt.fromWorkingColorSpace(tr.copy(this),t);const i=tr.r,s=tr.g,l=tr.b,c=Math.max(i,s,l),h=Math.min(i,s,l);let f,d;const p=(h+c)/2;if(h===c)f=0,d=0;else{const g=c-h;switch(d=p<=.5?g/(c+h):g/(2-c-h),c){case i:f=(s-l)/g+(s<l?6:0);break;case s:f=(l-i)/g+2;break;case l:f=(i-s)/g+4;break}f/=6}return e.h=f,e.s=d,e.l=p,e}getRGB(e,t=Zt.workingColorSpace){return Zt.fromWorkingColorSpace(tr.copy(this),t),e.r=tr.r,e.g=tr.g,e.b=tr.b,e}getStyle(e=Pr){Zt.fromWorkingColorSpace(tr.copy(this),e);const t=tr.r,i=tr.g,s=tr.b;return e!==Pr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Ma),this.setHSL(Ma.h+e,Ma.s+t,Ma.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ma),e.getHSL(Nu);const i=ip(Ma.h,Nu.h,t),s=ip(Ma.s,Nu.s,t),l=ip(Ma.l,Nu.l,t);return this.setHSL(i,s,l),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,l=e.elements;return this.r=l[0]*t+l[3]*i+l[6]*s,this.g=l[1]*t+l[4]*i+l[7]*s,this.b=l[2]*t+l[5]*i+l[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const tr=new Ut;Ut.NAMES=mw;let b4=0;class Fa extends Es{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:b4++}),this.uuid=yc(),this.name="",this.type="Material",this.blending=Co,this.side=Ua,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=em,this.blendDst=tm,this.blendEquation=fs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ut(0,0,0),this.blendAlpha=0,this.depthFunc=Io,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Dv,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=io,this.stencilZFail=io,this.stencilZPass=io,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Co&&(i.blending=this.blending),this.side!==Ua&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==em&&(i.blendSrc=this.blendSrc),this.blendDst!==tm&&(i.blendDst=this.blendDst),this.blendEquation!==fs&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Io&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Dv&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==io&&(i.stencilFail=this.stencilFail),this.stencilZFail!==io&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==io&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(l){const c=[];for(const h in l){const f=l[h];delete f.metadata,c.push(f)}return c}if(t){const l=s(e.textures),c=s(e.images);l.length>0&&(i.textures=l),c.length>0&&(i.images=c)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let l=0;l!==s;++l)i[l]=t[l].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Sh extends Fa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ui,this.combine=mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kn=new te,Fu=new Et;let v4=0;class Si{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:v4++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Rv,this.updateRanges=[],this.gpuType=Zi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,l=this.itemSize;s<l;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Fu.fromBufferAttribute(this,t),Fu.applyMatrix3(e),this.setXY(t,Fu.x,Fu.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix3(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix4(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyNormalMatrix(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.transformDirection(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Bl(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=yr(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Bl(t,this.array)),t}setX(e,t){return this.normalized&&(t=yr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Bl(t,this.array)),t}setY(e,t){return this.normalized&&(t=yr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Bl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=yr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Bl(t,this.array)),t}setW(e,t){return this.normalized&&(t=yr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=yr(t,this.array),i=yr(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=yr(t,this.array),i=yr(i,this.array),s=yr(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,l){return e*=this.itemSize,this.normalized&&(t=yr(t,this.array),i=yr(i,this.array),s=yr(s,this.array),l=yr(l,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Rv&&(e.usage=this.usage),e}}class gw extends Si{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class yw extends Si{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class rr extends Si{constructor(e,t,i){super(new Float32Array(e),t,i)}}let _4=0;const qr=new gn,xp=new nr,mo=new te,Cr=new bc,jl=new bc,jn=new te;class wr extends Es{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_4++}),this.uuid=yc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(hw(e)?yw:gw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const l=new Pt().getNormalMatrix(e);i.applyNormalMatrix(l),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return qr.makeRotationFromQuaternion(e),this.applyMatrix4(qr),this}rotateX(e){return qr.makeRotationX(e),this.applyMatrix4(qr),this}rotateY(e){return qr.makeRotationY(e),this.applyMatrix4(qr),this}rotateZ(e){return qr.makeRotationZ(e),this.applyMatrix4(qr),this}translate(e,t,i){return qr.makeTranslation(e,t,i),this.applyMatrix4(qr),this}scale(e,t,i){return qr.makeScale(e,t,i),this.applyMatrix4(qr),this}lookAt(e){return xp.lookAt(e),xp.updateMatrix(),this.applyMatrix4(xp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mo).negate(),this.translate(mo.x,mo.y,mo.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,l=e.length;s<l;s++){const c=e[s];i.push(c.x,c.y,c.z||0)}this.setAttribute("position",new rr(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const l=e[s];t.setXYZ(s,l.x,l.y,l.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const l=t[i];Cr.setFromBufferAttribute(l),this.morphTargetsRelative?(jn.addVectors(this.boundingBox.min,Cr.min),this.boundingBox.expandByPoint(jn),jn.addVectors(this.boundingBox.max,Cr.max),this.boundingBox.expandByPoint(jn)):(this.boundingBox.expandByPoint(Cr.min),this.boundingBox.expandByPoint(Cr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new te,1/0);return}if(e){const i=this.boundingSphere.center;if(Cr.setFromBufferAttribute(e),t)for(let l=0,c=t.length;l<c;l++){const h=t[l];jl.setFromBufferAttribute(h),this.morphTargetsRelative?(jn.addVectors(Cr.min,jl.min),Cr.expandByPoint(jn),jn.addVectors(Cr.max,jl.max),Cr.expandByPoint(jn)):(Cr.expandByPoint(jl.min),Cr.expandByPoint(jl.max))}Cr.getCenter(i);let s=0;for(let l=0,c=e.count;l<c;l++)jn.fromBufferAttribute(e,l),s=Math.max(s,i.distanceToSquared(jn));if(t)for(let l=0,c=t.length;l<c;l++){const h=t[l],f=this.morphTargetsRelative;for(let d=0,p=h.count;d<p;d++)jn.fromBufferAttribute(h,d),f&&(mo.fromBufferAttribute(e,d),jn.add(mo)),s=Math.max(s,i.distanceToSquared(jn))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,l=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Si(new Float32Array(4*i.count),4));const c=this.getAttribute("tangent"),h=[],f=[];for(let H=0;H<i.count;H++)h[H]=new te,f[H]=new te;const d=new te,p=new te,g=new te,y=new Et,b=new Et,x=new Et,S=new te,w=new te;function _(H,C,D){d.fromBufferAttribute(i,H),p.fromBufferAttribute(i,C),g.fromBufferAttribute(i,D),y.fromBufferAttribute(l,H),b.fromBufferAttribute(l,C),x.fromBufferAttribute(l,D),p.sub(d),g.sub(d),b.sub(y),x.sub(y);const F=1/(b.x*x.y-x.x*b.y);isFinite(F)&&(S.copy(p).multiplyScalar(x.y).addScaledVector(g,-b.y).multiplyScalar(F),w.copy(g).multiplyScalar(b.x).addScaledVector(p,-x.x).multiplyScalar(F),h[H].add(S),h[C].add(S),h[D].add(S),f[H].add(w),f[C].add(w),f[D].add(w))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let H=0,C=R.length;H<C;++H){const D=R[H],F=D.start,J=D.count;for(let Y=F,W=F+J;Y<W;Y+=3)_(e.getX(Y+0),e.getX(Y+1),e.getX(Y+2))}const A=new te,k=new te,U=new te,E=new te;function N(H){U.fromBufferAttribute(s,H),E.copy(U);const C=h[H];A.copy(C),A.sub(U.multiplyScalar(U.dot(C))).normalize(),k.crossVectors(E,C);const F=k.dot(f[H])<0?-1:1;c.setXYZW(H,A.x,A.y,A.z,F)}for(let H=0,C=R.length;H<C;++H){const D=R[H],F=D.start,J=D.count;for(let Y=F,W=F+J;Y<W;Y+=3)N(e.getX(Y+0)),N(e.getX(Y+1)),N(e.getX(Y+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Si(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let y=0,b=i.count;y<b;y++)i.setXYZ(y,0,0,0);const s=new te,l=new te,c=new te,h=new te,f=new te,d=new te,p=new te,g=new te;if(e)for(let y=0,b=e.count;y<b;y+=3){const x=e.getX(y+0),S=e.getX(y+1),w=e.getX(y+2);s.fromBufferAttribute(t,x),l.fromBufferAttribute(t,S),c.fromBufferAttribute(t,w),p.subVectors(c,l),g.subVectors(s,l),p.cross(g),h.fromBufferAttribute(i,x),f.fromBufferAttribute(i,S),d.fromBufferAttribute(i,w),h.add(p),f.add(p),d.add(p),i.setXYZ(x,h.x,h.y,h.z),i.setXYZ(S,f.x,f.y,f.z),i.setXYZ(w,d.x,d.y,d.z)}else for(let y=0,b=t.count;y<b;y+=3)s.fromBufferAttribute(t,y+0),l.fromBufferAttribute(t,y+1),c.fromBufferAttribute(t,y+2),p.subVectors(c,l),g.subVectors(s,l),p.cross(g),i.setXYZ(y+0,p.x,p.y,p.z),i.setXYZ(y+1,p.x,p.y,p.z),i.setXYZ(y+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)jn.fromBufferAttribute(e,t),jn.normalize(),e.setXYZ(t,jn.x,jn.y,jn.z)}toNonIndexed(){function e(h,f){const d=h.array,p=h.itemSize,g=h.normalized,y=new d.constructor(f.length*p);let b=0,x=0;for(let S=0,w=f.length;S<w;S++){h.isInterleavedBufferAttribute?b=f[S]*h.data.stride+h.offset:b=f[S]*p;for(let _=0;_<p;_++)y[x++]=d[b++]}return new Si(y,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wr,i=this.index.array,s=this.attributes;for(const h in s){const f=s[h],d=e(f,i);t.setAttribute(h,d)}const l=this.morphAttributes;for(const h in l){const f=[],d=l[h];for(let p=0,g=d.length;p<g;p++){const y=d[p],b=e(y,i);f.push(b)}t.morphAttributes[h]=f}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let h=0,f=c.length;h<f;h++){const d=c[h];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(e[d]=f[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const f in i){const d=i[f];e.data.attributes[f]=d.toJSON(e.data)}const s={};let l=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],p=[];for(let g=0,y=d.length;g<y;g++){const b=d[g];p.push(b.toJSON(e.data))}p.length>0&&(s[f]=p,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const d in s){const p=s[d];this.setAttribute(d,p.clone(t))}const l=e.morphAttributes;for(const d in l){const p=[],g=l[d];for(let y=0,b=g.length;y<b;y++)p.push(g[y].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let d=0,p=c.length;d<p;d++){const g=c[d];this.addGroup(g.start,g.count,g.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jv=new gn,os=new Ih,zu=new vc,qv=new te,Bu=new te,Hu=new te,Vu=new te,Sp=new te,Gu=new te,Wv=new te,ju=new te;class Zn extends nr{constructor(e=new wr,t=new Sh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=s.length;l<c;l++){const h=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,l=i.morphAttributes.position,c=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const h=this.morphTargetInfluences;if(l&&h){Gu.set(0,0,0);for(let f=0,d=l.length;f<d;f++){const p=h[f],g=l[f];p!==0&&(Sp.fromBufferAttribute(g,e),c?Gu.addScaledVector(Sp,p):Gu.addScaledVector(Sp.sub(t),p))}t.add(Gu)}return t}raycast(e,t){const i=this.geometry,s=this.material,l=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),zu.copy(i.boundingSphere),zu.applyMatrix4(l),os.copy(e.ray).recast(e.near),!(zu.containsPoint(os.origin)===!1&&(os.intersectSphere(zu,qv)===null||os.origin.distanceToSquared(qv)>(e.far-e.near)**2))&&(jv.copy(l).invert(),os.copy(e.ray).applyMatrix4(jv),!(i.boundingBox!==null&&os.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,os)))}_computeIntersections(e,t,i){let s;const l=this.geometry,c=this.material,h=l.index,f=l.attributes.position,d=l.attributes.uv,p=l.attributes.uv1,g=l.attributes.normal,y=l.groups,b=l.drawRange;if(h!==null)if(Array.isArray(c))for(let x=0,S=y.length;x<S;x++){const w=y[x],_=c[w.materialIndex],R=Math.max(w.start,b.start),A=Math.min(h.count,Math.min(w.start+w.count,b.start+b.count));for(let k=R,U=A;k<U;k+=3){const E=h.getX(k),N=h.getX(k+1),H=h.getX(k+2);s=qu(this,_,e,i,d,p,g,E,N,H),s&&(s.faceIndex=Math.floor(k/3),s.face.materialIndex=w.materialIndex,t.push(s))}}else{const x=Math.max(0,b.start),S=Math.min(h.count,b.start+b.count);for(let w=x,_=S;w<_;w+=3){const R=h.getX(w),A=h.getX(w+1),k=h.getX(w+2);s=qu(this,c,e,i,d,p,g,R,A,k),s&&(s.faceIndex=Math.floor(w/3),t.push(s))}}else if(f!==void 0)if(Array.isArray(c))for(let x=0,S=y.length;x<S;x++){const w=y[x],_=c[w.materialIndex],R=Math.max(w.start,b.start),A=Math.min(f.count,Math.min(w.start+w.count,b.start+b.count));for(let k=R,U=A;k<U;k+=3){const E=k,N=k+1,H=k+2;s=qu(this,_,e,i,d,p,g,E,N,H),s&&(s.faceIndex=Math.floor(k/3),s.face.materialIndex=w.materialIndex,t.push(s))}}else{const x=Math.max(0,b.start),S=Math.min(f.count,b.start+b.count);for(let w=x,_=S;w<_;w+=3){const R=w,A=w+1,k=w+2;s=qu(this,c,e,i,d,p,g,R,A,k),s&&(s.faceIndex=Math.floor(w/3),t.push(s))}}}}function w4(n,e,t,i,s,l,c,h){let f;if(e.side===hr?f=i.intersectTriangle(c,l,s,!0,h):f=i.intersectTriangle(s,l,c,e.side===Ua,h),f===null)return null;ju.copy(h),ju.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(ju);return d<t.near||d>t.far?null:{distance:d,point:ju.clone(),object:n}}function qu(n,e,t,i,s,l,c,h,f,d){n.getVertexPosition(h,Bu),n.getVertexPosition(f,Hu),n.getVertexPosition(d,Vu);const p=w4(n,e,t,i,Bu,Hu,Vu,Wv);if(p){const g=new te;oi.getBarycoord(Wv,Bu,Hu,Vu,g),s&&(p.uv=oi.getInterpolatedAttribute(s,h,f,d,g,new Et)),l&&(p.uv1=oi.getInterpolatedAttribute(l,h,f,d,g,new Et)),c&&(p.normal=oi.getInterpolatedAttribute(c,h,f,d,g,new te),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const y={a:h,b:f,c:d,normal:new te,materialIndex:0};oi.getNormal(Bu,Hu,Vu,y.normal),p.face=y,p.barycoord=g}return p}class _c extends wr{constructor(e=1,t=1,i=1,s=1,l=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:l,depthSegments:c};const h=this;s=Math.floor(s),l=Math.floor(l),c=Math.floor(c);const f=[],d=[],p=[],g=[];let y=0,b=0;x("z","y","x",-1,-1,i,t,e,c,l,0),x("z","y","x",1,-1,i,t,-e,c,l,1),x("x","z","y",1,1,e,i,t,s,c,2),x("x","z","y",1,-1,e,i,-t,s,c,3),x("x","y","z",1,-1,e,t,i,s,l,4),x("x","y","z",-1,-1,e,t,-i,s,l,5),this.setIndex(f),this.setAttribute("position",new rr(d,3)),this.setAttribute("normal",new rr(p,3)),this.setAttribute("uv",new rr(g,2));function x(S,w,_,R,A,k,U,E,N,H,C){const D=k/N,F=U/H,J=k/2,Y=U/2,W=E/2,re=N+1,j=H+1;let ce=0,X=0;const _e=new te;for(let T=0;T<j;T++){const se=T*F-Y;for(let Ee=0;Ee<re;Ee++){const O=Ee*D-J;_e[S]=O*R,_e[w]=se*A,_e[_]=W,d.push(_e.x,_e.y,_e.z),_e[S]=0,_e[w]=0,_e[_]=E>0?1:-1,p.push(_e.x,_e.y,_e.z),g.push(Ee/N),g.push(1-T/H),ce+=1}}for(let T=0;T<H;T++)for(let se=0;se<N;se++){const Ee=y+se+re*T,O=y+se+re*(T+1),Q=y+(se+1)+re*(T+1),be=y+(se+1)+re*T;f.push(Ee,O,be),f.push(O,Q,be),X+=6}h.addGroup(b,X,C),b+=X,y+=ce}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _c(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zo(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function cr(n){const e={};for(let t=0;t<n.length;t++){const i=zo(n[t]);for(const s in i)e[s]=i[s]}return e}function x4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function bw(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Zt.workingColorSpace}const S4={clone:zo,merge:cr};var T4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,E4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ti extends Fa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=T4,this.fragmentShader=E4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zo(e.uniforms),this.uniformsGroups=x4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const c=this.uniforms[s].value;c&&c.isTexture?t.uniforms[s]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?t.uniforms[s]={type:"c",value:c.getHex()}:c&&c.isVector2?t.uniforms[s]={type:"v2",value:c.toArray()}:c&&c.isVector3?t.uniforms[s]={type:"v3",value:c.toArray()}:c&&c.isVector4?t.uniforms[s]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?t.uniforms[s]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?t.uniforms[s]={type:"m4",value:c.toArray()}:t.uniforms[s]={value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class vw extends nr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gn,this.projectionMatrix=new gn,this.projectionMatrixInverse=new gn,this.coordinateSystem=Ki}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Aa=new te,Yv=new Et,Xv=new Et;class Lr extends vw{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=zm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ph*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zm*2*Math.atan(Math.tan(ph*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Aa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Aa.x,Aa.y).multiplyScalar(-e/Aa.z),Aa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Aa.x,Aa.y).multiplyScalar(-e/Aa.z)}getViewSize(e,t){return this.getViewBounds(e,Yv,Xv),t.subVectors(Xv,Yv)}setViewOffset(e,t,i,s,l,c){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ph*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,l=-.5*s;const c=this.view;if(this.view!==null&&this.view.enabled){const f=c.fullWidth,d=c.fullHeight;l+=c.offsetX*s/f,t-=c.offsetY*i/d,s*=c.width/f,i*=c.height/d}const h=this.filmOffset;h!==0&&(l+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const go=-90,yo=1;class M4 extends nr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Lr(go,yo,e,t);s.layers=this.layers,this.add(s);const l=new Lr(go,yo,e,t);l.layers=this.layers,this.add(l);const c=new Lr(go,yo,e,t);c.layers=this.layers,this.add(c);const h=new Lr(go,yo,e,t);h.layers=this.layers,this.add(h);const f=new Lr(go,yo,e,t);f.layers=this.layers,this.add(f);const d=new Lr(go,yo,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,l,c,h,f]=t;for(const d of t)this.remove(d);if(e===Ki)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===xh)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[l,c,h,f,d,p]=this.children,g=e.getRenderTarget(),y=e.getActiveCubeFace(),b=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,l),e.setRenderTarget(i,1,s),e.render(t,c),e.setRenderTarget(i,2,s),e.render(t,h),e.setRenderTarget(i,3,s),e.render(t,f),e.setRenderTarget(i,4,s),e.render(t,d),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,s),e.render(t,p),e.setRenderTarget(g,y,b),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class _w extends dr{constructor(e,t,i,s,l,c,h,f,d,p){e=e!==void 0?e:[],t=t!==void 0?t:Oo,super(e,t,i,s,l,c,h,f,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class A4 extends ws{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new _w(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:wi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new _c(5,5,5),l=new Ti({name:"CubemapFromEquirect",uniforms:zo(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:hr,blending:La});l.uniforms.tEquirect.value=t;const c=new Zn(s,l),h=t.minFilter;return t.minFilter===ys&&(t.minFilter=wi),new M4(1,10,this).update(e,c),t.minFilter=h,c.geometry.dispose(),c.material.dispose(),this}clear(e,t,i,s){const l=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,i,s);e.setRenderTarget(l)}}class bs extends nr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const C4={type:"move"};class Tp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new bs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new bs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new bs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,l=null,c=null;const h=this._targetRay,f=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){c=!0;for(const S of e.hand.values()){const w=t.getJointPose(S,i),_=this._getHandJoint(d,S);w!==null&&(_.matrix.fromArray(w.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=w.radius),_.visible=w!==null}const p=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],y=p.position.distanceTo(g.position),b=.02,x=.005;d.inputState.pinching&&y>b+x?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&y<=b-x&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(l=t.getPose(e.gripSpace,i),l!==null&&(f.matrix.fromArray(l.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,l.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(l.linearVelocity)):f.hasLinearVelocity=!1,l.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(l.angularVelocity)):f.hasAngularVelocity=!1));h!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&l!==null&&(s=l),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(C4)))}return h!==null&&(h.visible=s!==null),f!==null&&(f.visible=l!==null),d!==null&&(d.visible=c!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new bs;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class D4 extends nr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ui,this.environmentIntensity=1,this.environmentRotation=new ui,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const Ep=new te,R4=new te,k4=new Pt;class Ra{constructor(e=new te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=Ep.subVectors(i,t).cross(R4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ep),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/s;return l<0||l>1?null:t.copy(e.start).addScaledVector(i,l)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||k4.getNormalMatrix(e),s=this.coplanarPoint(Ep).applyMatrix4(e),l=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ls=new vc,Wu=new te;class Sg{constructor(e=new Ra,t=new Ra,i=new Ra,s=new Ra,l=new Ra,c=new Ra){this.planes=[e,t,i,s,l,c]}set(e,t,i,s,l,c){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(i),h[3].copy(s),h[4].copy(l),h[5].copy(c),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ki){const i=this.planes,s=e.elements,l=s[0],c=s[1],h=s[2],f=s[3],d=s[4],p=s[5],g=s[6],y=s[7],b=s[8],x=s[9],S=s[10],w=s[11],_=s[12],R=s[13],A=s[14],k=s[15];if(i[0].setComponents(f-l,y-d,w-b,k-_).normalize(),i[1].setComponents(f+l,y+d,w+b,k+_).normalize(),i[2].setComponents(f+c,y+p,w+x,k+R).normalize(),i[3].setComponents(f-c,y-p,w-x,k-R).normalize(),i[4].setComponents(f-h,y-g,w-S,k-A).normalize(),t===Ki)i[5].setComponents(f+h,y+g,w+S,k+A).normalize();else if(t===xh)i[5].setComponents(h,g,S,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ls.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ls.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ls)}intersectsSprite(e){return ls.center.set(0,0,0),ls.radius=.7071067811865476,ls.applyMatrix4(e.matrixWorld),this.intersectsSphere(ls)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Wu.x=s.normal.x>0?e.max.x:e.min.x,Wu.y=s.normal.y>0?e.max.y:e.min.y,Wu.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Wu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class ww extends Fa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Th=new te,Eh=new te,Qv=new gn,ql=new Ih,Yu=new vc,Mp=new te,Zv=new te;class Kv extends nr{constructor(e=new wr,t=new ww){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,l=t.count;s<l;s++)Th.fromBufferAttribute(t,s-1),Eh.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=Th.distanceTo(Eh);e.setAttribute("lineDistance",new rr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,l=e.params.Line.threshold,c=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Yu.copy(i.boundingSphere),Yu.applyMatrix4(s),Yu.radius+=l,e.ray.intersectsSphere(Yu)===!1)return;Qv.copy(s).invert(),ql.copy(e.ray).applyMatrix4(Qv);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=this.isLineSegments?2:1,p=i.index,y=i.attributes.position;if(p!==null){const b=Math.max(0,c.start),x=Math.min(p.count,c.start+c.count);for(let S=b,w=x-1;S<w;S+=d){const _=p.getX(S),R=p.getX(S+1),A=Xu(this,e,ql,f,_,R,S);A&&t.push(A)}if(this.isLineLoop){const S=p.getX(x-1),w=p.getX(b),_=Xu(this,e,ql,f,S,w,x-1);_&&t.push(_)}}else{const b=Math.max(0,c.start),x=Math.min(y.count,c.start+c.count);for(let S=b,w=x-1;S<w;S+=d){const _=Xu(this,e,ql,f,S,S+1,S);_&&t.push(_)}if(this.isLineLoop){const S=Xu(this,e,ql,f,x-1,b,x-1);S&&t.push(S)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=s.length;l<c;l++){const h=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}}function Xu(n,e,t,i,s,l,c){const h=n.geometry.attributes.position;if(Th.fromBufferAttribute(h,s),Eh.fromBufferAttribute(h,l),t.distanceSqToSegment(Th,Eh,Mp,Zv)>i)return;Mp.applyMatrix4(n.matrixWorld);const d=e.ray.origin.distanceTo(Mp);if(!(d<e.near||d>e.far))return{distance:d,point:Zv.clone().applyMatrix4(n.matrixWorld),index:c,face:null,faceIndex:null,barycoord:null,object:n}}class xw extends Fa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Jv=new gn,Bm=new Ih,Qu=new vc,Zu=new te;class P4 extends nr{constructor(e=new wr,t=new xw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,l=e.params.Points.threshold,c=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Qu.copy(i.boundingSphere),Qu.applyMatrix4(s),Qu.radius+=l,e.ray.intersectsSphere(Qu)===!1)return;Jv.copy(s).invert(),Bm.copy(e.ray).applyMatrix4(Jv);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=i.index,g=i.attributes.position;if(d!==null){const y=Math.max(0,c.start),b=Math.min(d.count,c.start+c.count);for(let x=y,S=b;x<S;x++){const w=d.getX(x);Zu.fromBufferAttribute(g,w),$v(Zu,w,f,s,e,t,this)}}else{const y=Math.max(0,c.start),b=Math.min(g.count,c.start+c.count);for(let x=y,S=b;x<S;x++)Zu.fromBufferAttribute(g,x),$v(Zu,x,f,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=s.length;l<c;l++){const h=s[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}}function $v(n,e,t,i,s,l,c){const h=Bm.distanceSqToPoint(n);if(h<t){const f=new te;Bm.closestPointToPoint(n,f),f.applyMatrix4(i);const d=s.ray.origin.distanceTo(f);if(d<s.near||d>s.far)return;l.push({distance:d,distanceToRay:Math.sqrt(h),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:c})}}class Sw extends dr{constructor(e,t,i,s,l,c,h,f,d,p=Do){if(p!==Do&&p!==Fo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===Do&&(i=vs),i===void 0&&p===Fo&&(i=No),super(null,s,l,c,h,f,p,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=h!==void 0?h:ci,this.minFilter=f!==void 0?f:ci,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Tg extends wr{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const l=[],c=[];h(s),d(i),p(),this.setAttribute("position",new rr(l,3)),this.setAttribute("normal",new rr(l.slice(),3)),this.setAttribute("uv",new rr(c,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function h(R){const A=new te,k=new te,U=new te;for(let E=0;E<t.length;E+=3)b(t[E+0],A),b(t[E+1],k),b(t[E+2],U),f(A,k,U,R)}function f(R,A,k,U){const E=U+1,N=[];for(let H=0;H<=E;H++){N[H]=[];const C=R.clone().lerp(k,H/E),D=A.clone().lerp(k,H/E),F=E-H;for(let J=0;J<=F;J++)J===0&&H===E?N[H][J]=C:N[H][J]=C.clone().lerp(D,J/F)}for(let H=0;H<E;H++)for(let C=0;C<2*(E-H)-1;C++){const D=Math.floor(C/2);C%2===0?(y(N[H][D+1]),y(N[H+1][D]),y(N[H][D])):(y(N[H][D+1]),y(N[H+1][D+1]),y(N[H+1][D]))}}function d(R){const A=new te;for(let k=0;k<l.length;k+=3)A.x=l[k+0],A.y=l[k+1],A.z=l[k+2],A.normalize().multiplyScalar(R),l[k+0]=A.x,l[k+1]=A.y,l[k+2]=A.z}function p(){const R=new te;for(let A=0;A<l.length;A+=3){R.x=l[A+0],R.y=l[A+1],R.z=l[A+2];const k=w(R)/2/Math.PI+.5,U=_(R)/Math.PI+.5;c.push(k,1-U)}x(),g()}function g(){for(let R=0;R<c.length;R+=6){const A=c[R+0],k=c[R+2],U=c[R+4],E=Math.max(A,k,U),N=Math.min(A,k,U);E>.9&&N<.1&&(A<.2&&(c[R+0]+=1),k<.2&&(c[R+2]+=1),U<.2&&(c[R+4]+=1))}}function y(R){l.push(R.x,R.y,R.z)}function b(R,A){const k=R*3;A.x=e[k+0],A.y=e[k+1],A.z=e[k+2]}function x(){const R=new te,A=new te,k=new te,U=new te,E=new Et,N=new Et,H=new Et;for(let C=0,D=0;C<l.length;C+=9,D+=6){R.set(l[C+0],l[C+1],l[C+2]),A.set(l[C+3],l[C+4],l[C+5]),k.set(l[C+6],l[C+7],l[C+8]),E.set(c[D+0],c[D+1]),N.set(c[D+2],c[D+3]),H.set(c[D+4],c[D+5]),U.copy(R).add(A).add(k).divideScalar(3);const F=w(U);S(E,D+0,R,F),S(N,D+2,A,F),S(H,D+4,k,F)}}function S(R,A,k,U){U<0&&R.x===1&&(c[A]=R.x-1),k.x===0&&k.z===0&&(c[A]=U/2/Math.PI+.5)}function w(R){return Math.atan2(R.z,-R.x)}function _(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tg(e.vertices,e.indices,e.radius,e.details)}}class nc extends Tg{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,l,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nc(e.radius,e.detail)}}class Oh extends wr{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const l=e/2,c=t/2,h=Math.floor(i),f=Math.floor(s),d=h+1,p=f+1,g=e/h,y=t/f,b=[],x=[],S=[],w=[];for(let _=0;_<p;_++){const R=_*y-c;for(let A=0;A<d;A++){const k=A*g-l;x.push(k,-R,0),S.push(0,0,1),w.push(A/h),w.push(1-_/f)}}for(let _=0;_<f;_++)for(let R=0;R<h;R++){const A=R+d*_,k=R+d*(_+1),U=R+1+d*(_+1),E=R+1+d*_;b.push(A,k,E),b.push(k,U,E)}this.setIndex(b),this.setAttribute("position",new rr(x,3)),this.setAttribute("normal",new rr(S,3)),this.setAttribute("uv",new rr(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.width,e.height,e.widthSegments,e.heightSegments)}}class Eg extends wr{constructor(e=1,t=32,i=16,s=0,l=Math.PI*2,c=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:l,thetaStart:c,thetaLength:h},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const f=Math.min(c+h,Math.PI);let d=0;const p=[],g=new te,y=new te,b=[],x=[],S=[],w=[];for(let _=0;_<=i;_++){const R=[],A=_/i;let k=0;_===0&&c===0?k=.5/t:_===i&&f===Math.PI&&(k=-.5/t);for(let U=0;U<=t;U++){const E=U/t;g.x=-e*Math.cos(s+E*l)*Math.sin(c+A*h),g.y=e*Math.cos(c+A*h),g.z=e*Math.sin(s+E*l)*Math.sin(c+A*h),x.push(g.x,g.y,g.z),y.copy(g).normalize(),S.push(y.x,y.y,y.z),w.push(E+k,1-A),R.push(d++)}p.push(R)}for(let _=0;_<i;_++)for(let R=0;R<t;R++){const A=p[_][R+1],k=p[_][R],U=p[_+1][R],E=p[_+1][R+1];(_!==0||c>0)&&b.push(A,k,E),(_!==i-1||f<Math.PI)&&b.push(k,U,E)}this.setIndex(b),this.setAttribute("position",new rr(x,3)),this.setAttribute("normal",new rr(S,3)),this.setAttribute("uv",new rr(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class L4 extends Fa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xg,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ui,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class e1 extends Fa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ut(16777215),this.specular=new Ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xg,this.normalScale=new Et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ui,this.combine=mg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class I4 extends Fa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class O4 extends Fa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class t1 extends ww{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const n1={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class U4{constructor(e,t,i){const s=this;let l=!1,c=0,h=0,f;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){h++,l===!1&&s.onStart!==void 0&&s.onStart(p,c,h),l=!0},this.itemEnd=function(p){c++,s.onProgress!==void 0&&s.onProgress(p,c,h),c===h&&(l=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(p){s.onError!==void 0&&s.onError(p)},this.resolveURL=function(p){return f?f(p):p},this.setURLModifier=function(p){return f=p,this},this.addHandler=function(p,g){return d.push(p,g),this},this.removeHandler=function(p){const g=d.indexOf(p);return g!==-1&&d.splice(g,2),this},this.getHandler=function(p){for(let g=0,y=d.length;g<y;g+=2){const b=d[g],x=d[g+1];if(b.global&&(b.lastIndex=0),b.test(p))return x}return null}}}const N4=new U4;class Mg{constructor(e){this.manager=e!==void 0?e:N4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,l){i.load(e,s,t,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Mg.DEFAULT_MATERIAL_NAME="__DEFAULT";class F4 extends Mg{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,c=n1.get(e);if(c!==void 0)return l.manager.itemStart(e),setTimeout(function(){t&&t(c),l.manager.itemEnd(e)},0),c;const h=hc("img");function f(){p(),n1.add(e,this),t&&t(this),l.manager.itemEnd(e)}function d(g){p(),s&&s(g),l.manager.itemError(e),l.manager.itemEnd(e)}function p(){h.removeEventListener("load",f,!1),h.removeEventListener("error",d,!1)}return h.addEventListener("load",f,!1),h.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),l.manager.itemStart(e),h.src=e,h}}class Hm extends Mg{constructor(e){super(e)}load(e,t,i,s){const l=new dr,c=new F4(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(h){l.image=h,l.needsUpdate=!0,t!==void 0&&t(l)},i,s),l}}class z4 extends nr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ut(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}const Ap=new gn,r1=new te,i1=new te;class B4{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Et(512,512),this.map=null,this.mapPass=null,this.matrix=new gn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sg,this._frameExtents=new Et(1,1),this._viewportCount=1,this._viewports=[new on(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;r1.setFromMatrixPosition(e.matrixWorld),t.position.copy(r1),i1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i1),t.updateMatrixWorld(),Ap.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ap),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Ap)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const a1=new gn,Wl=new te,Cp=new te;class H4 extends B4{constructor(){super(new Lr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Et(4,2),this._viewportCount=6,this._viewports=[new on(2,1,1,1),new on(0,1,1,1),new on(3,1,1,1),new on(1,1,1,1),new on(3,0,1,1),new on(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,l=e.distance||i.far;l!==i.far&&(i.far=l,i.updateProjectionMatrix()),Wl.setFromMatrixPosition(e.matrixWorld),i.position.copy(Wl),Cp.copy(i.position),Cp.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Cp),i.updateMatrixWorld(),s.makeTranslation(-Wl.x,-Wl.y,-Wl.z),a1.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a1)}}class V4 extends z4{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new H4}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class G4 extends vw{constructor(e=-1,t=1,i=1,s=-1,l=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=l,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,l,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let l=i-e,c=i+e,h=s+t,f=s-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=d*this.view.offsetX,c=l+d*this.view.width,h-=p*this.view.offsetY,f=h-p*this.view.height}this.projectionMatrix.makeOrthographic(l,c,h,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class j4 extends Lr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class q4{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=s1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=s1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function s1(){return performance.now()}class o1{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Bt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Bt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class W4 extends Es{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function l1(n,e,t,i){const s=Y4(i);switch(t){case rw:return n*e;case aw:return n*e;case sw:return n*e*2;case ow:return n*e/s.components*s.byteLength;case vg:return n*e/s.components*s.byteLength;case lw:return n*e*2/s.components*s.byteLength;case _g:return n*e*2/s.components*s.byteLength;case iw:return n*e*3/s.components*s.byteLength;case li:return n*e*4/s.components*s.byteLength;case wg:return n*e*4/s.components*s.byteLength;case ch:case uh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case hh:case dh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case pm:case gm:return Math.max(n,16)*Math.max(e,8)/4;case fm:case mm:return Math.max(n,8)*Math.max(e,8)/2;case ym:case bm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case vm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case _m:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wm:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case xm:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Sm:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Tm:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Em:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Mm:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Am:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Cm:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Dm:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Rm:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case km:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Pm:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Lm:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case fh:case Im:case Om:return Math.ceil(n/4)*Math.ceil(e/4)*16;case cw:case Um:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Nm:case Fm:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Y4(n){switch(n){case $i:case ew:return{byteLength:1,components:1};case uc:case tw:case gc:return{byteLength:2,components:1};case yg:case bg:return{byteLength:2,components:4};case vs:case gg:case Zi:return{byteLength:4,components:1};case nw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pg);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Tw(){let n=null,e=!1,t=null,i=null;function s(l,c){t(l,c),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){n=l}}}function X4(n){const e=new WeakMap;function t(h,f){const d=h.array,p=h.usage,g=d.byteLength,y=n.createBuffer();n.bindBuffer(f,y),n.bufferData(f,d,p),h.onUploadCallback();let b;if(d instanceof Float32Array)b=n.FLOAT;else if(d instanceof Uint16Array)h.isFloat16BufferAttribute?b=n.HALF_FLOAT:b=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)b=n.SHORT;else if(d instanceof Uint32Array)b=n.UNSIGNED_INT;else if(d instanceof Int32Array)b=n.INT;else if(d instanceof Int8Array)b=n.BYTE;else if(d instanceof Uint8Array)b=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)b=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:y,type:b,bytesPerElement:d.BYTES_PER_ELEMENT,version:h.version,size:g}}function i(h,f,d){const p=f.array,g=f.updateRanges;if(n.bindBuffer(d,h),g.length===0)n.bufferSubData(d,0,p);else{g.sort((b,x)=>b.start-x.start);let y=0;for(let b=1;b<g.length;b++){const x=g[y],S=g[b];S.start<=x.start+x.count+1?x.count=Math.max(x.count,S.start+S.count-x.start):(++y,g[y]=S)}g.length=y+1;for(let b=0,x=g.length;b<x;b++){const S=g[b];n.bufferSubData(d,S.start*p.BYTES_PER_ELEMENT,p,S.start,S.count)}f.clearUpdateRanges()}f.onUploadCallback()}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),e.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=e.get(h);f&&(n.deleteBuffer(f.buffer),e.delete(h))}function c(h,f){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const p=e.get(h);(!p||p.version<h.version)&&e.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const d=e.get(h);if(d===void 0)e.set(h,t(h,f));else if(d.version<h.version){if(d.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(d.buffer,h,f),d.version=h.version}}return{get:s,remove:l,update:c}}var Q4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Z4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,K4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,J4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$4=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,eI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,tI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,nI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,rI=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,iI=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,aI=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,sI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,oI=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,lI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,uI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,hI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,dI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fI=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,pI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,mI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,gI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,yI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,bI=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,vI=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,_I=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,wI=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,SI=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,TI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,EI="gl_FragColor = linearToOutputTexel( gl_FragColor );",MI=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,AI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,CI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,DI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,RI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,kI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,LI=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,II=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,OI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,UI=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,NI=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,FI=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,zI=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,BI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,HI=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,VI=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,GI=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jI=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,qI=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,WI=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,YI=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XI=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,QI=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ZI=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,KI=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,JI=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$I=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,eO=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,tO=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,nO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,rO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,iO=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,sO=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,oO=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,lO=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,cO=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,uO=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,hO=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,dO=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,fO=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,pO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mO=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gO=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,yO=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,bO=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,vO=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,_O=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,wO=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xO=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,SO=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,TO=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,EO=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MO=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,AO=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,CO=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,DO=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,RO=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,kO=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,PO=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,LO=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,IO=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,OO=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,UO=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,NO=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,FO=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zO=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,BO=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,HO=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,VO=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,GO=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,jO=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,qO=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,WO=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,YO=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const XO=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,QO=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KO=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,JO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$O=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,tU=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,nU=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,rU=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,iU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aU=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sU=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oU=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cU=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uU=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hU=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dU=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fU=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pU=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,mU=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,gU=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yU=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bU=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vU=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_U=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,SU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TU=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EU=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,MU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,AU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,It={alphahash_fragment:Q4,alphahash_pars_fragment:Z4,alphamap_fragment:K4,alphamap_pars_fragment:J4,alphatest_fragment:$4,alphatest_pars_fragment:eI,aomap_fragment:tI,aomap_pars_fragment:nI,batching_pars_vertex:rI,batching_vertex:iI,begin_vertex:aI,beginnormal_vertex:sI,bsdfs:oI,iridescence_fragment:lI,bumpmap_pars_fragment:cI,clipping_planes_fragment:uI,clipping_planes_pars_fragment:hI,clipping_planes_pars_vertex:dI,clipping_planes_vertex:fI,color_fragment:pI,color_pars_fragment:mI,color_pars_vertex:gI,color_vertex:yI,common:bI,cube_uv_reflection_fragment:vI,defaultnormal_vertex:_I,displacementmap_pars_vertex:wI,displacementmap_vertex:xI,emissivemap_fragment:SI,emissivemap_pars_fragment:TI,colorspace_fragment:EI,colorspace_pars_fragment:MI,envmap_fragment:AI,envmap_common_pars_fragment:CI,envmap_pars_fragment:DI,envmap_pars_vertex:RI,envmap_physical_pars_fragment:HI,envmap_vertex:kI,fog_vertex:PI,fog_pars_vertex:LI,fog_fragment:II,fog_pars_fragment:OI,gradientmap_pars_fragment:UI,lightmap_pars_fragment:NI,lights_lambert_fragment:FI,lights_lambert_pars_fragment:zI,lights_pars_begin:BI,lights_toon_fragment:VI,lights_toon_pars_fragment:GI,lights_phong_fragment:jI,lights_phong_pars_fragment:qI,lights_physical_fragment:WI,lights_physical_pars_fragment:YI,lights_fragment_begin:XI,lights_fragment_maps:QI,lights_fragment_end:ZI,logdepthbuf_fragment:KI,logdepthbuf_pars_fragment:JI,logdepthbuf_pars_vertex:$I,logdepthbuf_vertex:eO,map_fragment:tO,map_pars_fragment:nO,map_particle_fragment:rO,map_particle_pars_fragment:iO,metalnessmap_fragment:aO,metalnessmap_pars_fragment:sO,morphinstance_vertex:oO,morphcolor_vertex:lO,morphnormal_vertex:cO,morphtarget_pars_vertex:uO,morphtarget_vertex:hO,normal_fragment_begin:dO,normal_fragment_maps:fO,normal_pars_fragment:pO,normal_pars_vertex:mO,normal_vertex:gO,normalmap_pars_fragment:yO,clearcoat_normal_fragment_begin:bO,clearcoat_normal_fragment_maps:vO,clearcoat_pars_fragment:_O,iridescence_pars_fragment:wO,opaque_fragment:xO,packing:SO,premultiplied_alpha_fragment:TO,project_vertex:EO,dithering_fragment:MO,dithering_pars_fragment:AO,roughnessmap_fragment:CO,roughnessmap_pars_fragment:DO,shadowmap_pars_fragment:RO,shadowmap_pars_vertex:kO,shadowmap_vertex:PO,shadowmask_pars_fragment:LO,skinbase_vertex:IO,skinning_pars_vertex:OO,skinning_vertex:UO,skinnormal_vertex:NO,specularmap_fragment:FO,specularmap_pars_fragment:zO,tonemapping_fragment:BO,tonemapping_pars_fragment:HO,transmission_fragment:VO,transmission_pars_fragment:GO,uv_pars_fragment:jO,uv_pars_vertex:qO,uv_vertex:WO,worldpos_vertex:YO,background_vert:XO,background_frag:QO,backgroundCube_vert:ZO,backgroundCube_frag:KO,cube_vert:JO,cube_frag:$O,depth_vert:eU,depth_frag:tU,distanceRGBA_vert:nU,distanceRGBA_frag:rU,equirect_vert:iU,equirect_frag:aU,linedashed_vert:sU,linedashed_frag:oU,meshbasic_vert:lU,meshbasic_frag:cU,meshlambert_vert:uU,meshlambert_frag:hU,meshmatcap_vert:dU,meshmatcap_frag:fU,meshnormal_vert:pU,meshnormal_frag:mU,meshphong_vert:gU,meshphong_frag:yU,meshphysical_vert:bU,meshphysical_frag:vU,meshtoon_vert:_U,meshtoon_frag:wU,points_vert:xU,points_frag:SU,shadow_vert:TU,shadow_frag:EU,sprite_vert:MU,sprite_frag:AU},We={common:{diffuse:{value:new Ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Pt}},envmap:{envMap:{value:null},envMapRotation:{value:new Pt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Pt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Pt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Pt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Pt},normalScale:{value:new Et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Pt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Pt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Pt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Pt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0},uvTransform:{value:new Pt}},sprite:{diffuse:{value:new Ut(16777215)},opacity:{value:1},center:{value:new Et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}}},vi={basic:{uniforms:cr([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.fog]),vertexShader:It.meshbasic_vert,fragmentShader:It.meshbasic_frag},lambert:{uniforms:cr([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Ut(0)}}]),vertexShader:It.meshlambert_vert,fragmentShader:It.meshlambert_frag},phong:{uniforms:cr([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Ut(0)},specular:{value:new Ut(1118481)},shininess:{value:30}}]),vertexShader:It.meshphong_vert,fragmentShader:It.meshphong_frag},standard:{uniforms:cr([We.common,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.roughnessmap,We.metalnessmap,We.fog,We.lights,{emissive:{value:new Ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag},toon:{uniforms:cr([We.common,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.gradientmap,We.fog,We.lights,{emissive:{value:new Ut(0)}}]),vertexShader:It.meshtoon_vert,fragmentShader:It.meshtoon_frag},matcap:{uniforms:cr([We.common,We.bumpmap,We.normalmap,We.displacementmap,We.fog,{matcap:{value:null}}]),vertexShader:It.meshmatcap_vert,fragmentShader:It.meshmatcap_frag},points:{uniforms:cr([We.points,We.fog]),vertexShader:It.points_vert,fragmentShader:It.points_frag},dashed:{uniforms:cr([We.common,We.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:It.linedashed_vert,fragmentShader:It.linedashed_frag},depth:{uniforms:cr([We.common,We.displacementmap]),vertexShader:It.depth_vert,fragmentShader:It.depth_frag},normal:{uniforms:cr([We.common,We.bumpmap,We.normalmap,We.displacementmap,{opacity:{value:1}}]),vertexShader:It.meshnormal_vert,fragmentShader:It.meshnormal_frag},sprite:{uniforms:cr([We.sprite,We.fog]),vertexShader:It.sprite_vert,fragmentShader:It.sprite_frag},background:{uniforms:{uvTransform:{value:new Pt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:It.background_vert,fragmentShader:It.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Pt}},vertexShader:It.backgroundCube_vert,fragmentShader:It.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:It.cube_vert,fragmentShader:It.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:It.equirect_vert,fragmentShader:It.equirect_frag},distanceRGBA:{uniforms:cr([We.common,We.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:It.distanceRGBA_vert,fragmentShader:It.distanceRGBA_frag},shadow:{uniforms:cr([We.lights,We.fog,{color:{value:new Ut(0)},opacity:{value:1}}]),vertexShader:It.shadow_vert,fragmentShader:It.shadow_frag}};vi.physical={uniforms:cr([vi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Pt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Pt},clearcoatNormalScale:{value:new Et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Pt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Pt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Pt},sheen:{value:0},sheenColor:{value:new Ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Pt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Pt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Pt},transmissionSamplerSize:{value:new Et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Pt},attenuationDistance:{value:0},attenuationColor:{value:new Ut(0)},specularColor:{value:new Ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Pt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Pt},anisotropyVector:{value:new Et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Pt}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag};const Ku={r:0,b:0,g:0},cs=new ui,CU=new gn;function DU(n,e,t,i,s,l,c){const h=new Ut(0);let f=l===!0?0:1,d,p,g=null,y=0,b=null;function x(A){let k=A.isScene===!0?A.background:null;return k&&k.isTexture&&(k=(A.backgroundBlurriness>0?t:e).get(k)),k}function S(A){let k=!1;const U=x(A);U===null?_(h,f):U&&U.isColor&&(_(U,1),k=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,c):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,c),(n.autoClear||k)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(A,k){const U=x(k);U&&(U.isCubeTexture||U.mapping===Lh)?(p===void 0&&(p=new Zn(new _c(1,1,1),new Ti({name:"BackgroundCubeMaterial",uniforms:zo(vi.backgroundCube.uniforms),vertexShader:vi.backgroundCube.vertexShader,fragmentShader:vi.backgroundCube.fragmentShader,side:hr,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(E,N,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(p)),cs.copy(k.backgroundRotation),cs.x*=-1,cs.y*=-1,cs.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(cs.y*=-1,cs.z*=-1),p.material.uniforms.envMap.value=U,p.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(CU.makeRotationFromEuler(cs)),p.material.toneMapped=Zt.getTransfer(U.colorSpace)!==an,(g!==U||y!==U.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,g=U,y=U.version,b=n.toneMapping),p.layers.enableAll(),A.unshift(p,p.geometry,p.material,0,0,null)):U&&U.isTexture&&(d===void 0&&(d=new Zn(new Oh(2,2),new Ti({name:"BackgroundMaterial",uniforms:zo(vi.background.uniforms),vertexShader:vi.background.vertexShader,fragmentShader:vi.background.fragmentShader,side:Ua,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(d)),d.material.uniforms.t2D.value=U,d.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,d.material.toneMapped=Zt.getTransfer(U.colorSpace)!==an,U.matrixAutoUpdate===!0&&U.updateMatrix(),d.material.uniforms.uvTransform.value.copy(U.matrix),(g!==U||y!==U.version||b!==n.toneMapping)&&(d.material.needsUpdate=!0,g=U,y=U.version,b=n.toneMapping),d.layers.enableAll(),A.unshift(d,d.geometry,d.material,0,0,null))}function _(A,k){A.getRGB(Ku,bw(n)),i.buffers.color.setClear(Ku.r,Ku.g,Ku.b,k,c)}function R(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return h},setClearColor:function(A,k=1){h.set(A),f=k,_(h,f)},getClearAlpha:function(){return f},setClearAlpha:function(A){f=A,_(h,f)},render:S,addToRenderList:w,dispose:R}}function RU(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=y(null);let l=s,c=!1;function h(D,F,J,Y,W){let re=!1;const j=g(Y,J,F);l!==j&&(l=j,d(l.object)),re=b(D,Y,J,W),re&&x(D,Y,J,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(re||c)&&(c=!1,k(D,F,J,Y),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function f(){return n.createVertexArray()}function d(D){return n.bindVertexArray(D)}function p(D){return n.deleteVertexArray(D)}function g(D,F,J){const Y=J.wireframe===!0;let W=i[D.id];W===void 0&&(W={},i[D.id]=W);let re=W[F.id];re===void 0&&(re={},W[F.id]=re);let j=re[Y];return j===void 0&&(j=y(f()),re[Y]=j),j}function y(D){const F=[],J=[],Y=[];for(let W=0;W<t;W++)F[W]=0,J[W]=0,Y[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:J,attributeDivisors:Y,object:D,attributes:{},index:null}}function b(D,F,J,Y){const W=l.attributes,re=F.attributes;let j=0;const ce=J.getAttributes();for(const X in ce)if(ce[X].location>=0){const T=W[X];let se=re[X];if(se===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&(se=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&(se=D.instanceColor)),T===void 0||T.attribute!==se||se&&T.data!==se.data)return!0;j++}return l.attributesNum!==j||l.index!==Y}function x(D,F,J,Y){const W={},re=F.attributes;let j=0;const ce=J.getAttributes();for(const X in ce)if(ce[X].location>=0){let T=re[X];T===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&(T=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&(T=D.instanceColor));const se={};se.attribute=T,T&&T.data&&(se.data=T.data),W[X]=se,j++}l.attributes=W,l.attributesNum=j,l.index=Y}function S(){const D=l.newAttributes;for(let F=0,J=D.length;F<J;F++)D[F]=0}function w(D){_(D,0)}function _(D,F){const J=l.newAttributes,Y=l.enabledAttributes,W=l.attributeDivisors;J[D]=1,Y[D]===0&&(n.enableVertexAttribArray(D),Y[D]=1),W[D]!==F&&(n.vertexAttribDivisor(D,F),W[D]=F)}function R(){const D=l.newAttributes,F=l.enabledAttributes;for(let J=0,Y=F.length;J<Y;J++)F[J]!==D[J]&&(n.disableVertexAttribArray(J),F[J]=0)}function A(D,F,J,Y,W,re,j){j===!0?n.vertexAttribIPointer(D,F,J,W,re):n.vertexAttribPointer(D,F,J,Y,W,re)}function k(D,F,J,Y){S();const W=Y.attributes,re=J.getAttributes(),j=F.defaultAttributeValues;for(const ce in re){const X=re[ce];if(X.location>=0){let _e=W[ce];if(_e===void 0&&(ce==="instanceMatrix"&&D.instanceMatrix&&(_e=D.instanceMatrix),ce==="instanceColor"&&D.instanceColor&&(_e=D.instanceColor)),_e!==void 0){const T=_e.normalized,se=_e.itemSize,Ee=e.get(_e);if(Ee===void 0)continue;const O=Ee.buffer,Q=Ee.type,be=Ee.bytesPerElement,ve=Q===n.INT||Q===n.UNSIGNED_INT||_e.gpuType===gg;if(_e.isInterleavedBufferAttribute){const Ie=_e.data,Ne=Ie.stride,rt=_e.offset;if(Ie.isInstancedInterleavedBuffer){for(let Ue=0;Ue<X.locationSize;Ue++)_(X.location+Ue,Ie.meshPerAttribute);D.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let Ue=0;Ue<X.locationSize;Ue++)w(X.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,O);for(let Ue=0;Ue<X.locationSize;Ue++)A(X.location+Ue,se/X.locationSize,Q,T,Ne*be,(rt+se/X.locationSize*Ue)*be,ve)}else{if(_e.isInstancedBufferAttribute){for(let Ie=0;Ie<X.locationSize;Ie++)_(X.location+Ie,_e.meshPerAttribute);D.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let Ie=0;Ie<X.locationSize;Ie++)w(X.location+Ie);n.bindBuffer(n.ARRAY_BUFFER,O);for(let Ie=0;Ie<X.locationSize;Ie++)A(X.location+Ie,se/X.locationSize,Q,T,se*be,se/X.locationSize*Ie*be,ve)}}else if(j!==void 0){const T=j[ce];if(T!==void 0)switch(T.length){case 2:n.vertexAttrib2fv(X.location,T);break;case 3:n.vertexAttrib3fv(X.location,T);break;case 4:n.vertexAttrib4fv(X.location,T);break;default:n.vertexAttrib1fv(X.location,T)}}}}R()}function U(){H();for(const D in i){const F=i[D];for(const J in F){const Y=F[J];for(const W in Y)p(Y[W].object),delete Y[W];delete F[J]}delete i[D]}}function E(D){if(i[D.id]===void 0)return;const F=i[D.id];for(const J in F){const Y=F[J];for(const W in Y)p(Y[W].object),delete Y[W];delete F[J]}delete i[D.id]}function N(D){for(const F in i){const J=i[F];if(J[D.id]===void 0)continue;const Y=J[D.id];for(const W in Y)p(Y[W].object),delete Y[W];delete J[D.id]}}function H(){C(),c=!0,l!==s&&(l=s,d(l.object))}function C(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:h,reset:H,resetDefaultState:C,dispose:U,releaseStatesOfGeometry:E,releaseStatesOfProgram:N,initAttributes:S,enableAttribute:w,disableUnusedAttributes:R}}function kU(n,e,t){let i;function s(d){i=d}function l(d,p){n.drawArrays(i,d,p),t.update(p,i,1)}function c(d,p,g){g!==0&&(n.drawArraysInstanced(i,d,p,g),t.update(p,i,g))}function h(d,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,d,0,p,0,g);let b=0;for(let x=0;x<g;x++)b+=p[x];t.update(b,i,1)}function f(d,p,g,y){if(g===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let x=0;x<d.length;x++)c(d[x],p[x],y[x]);else{b.multiDrawArraysInstancedWEBGL(i,d,0,p,0,y,0,g);let x=0;for(let S=0;S<g;S++)x+=p[S]*y[S];t.update(x,i,1)}}this.setMode=s,this.render=l,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function PU(n,e,t,i){let s;function l(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function c(N){return!(N!==li&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(N){const H=N===gc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==$i&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==Zi&&!H)}function f(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const p=f(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const g=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),b=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),R=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),A=n.getParameter(n.MAX_VARYING_VECTORS),k=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=x>0,E=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:l,getMaxPrecision:f,textureFormatReadable:c,textureTypeReadable:h,precision:d,logarithmicDepthBuffer:g,reverseDepthBuffer:y,maxTextures:b,maxVertexTextures:x,maxTextureSize:S,maxCubemapSize:w,maxAttributes:_,maxVertexUniforms:R,maxVaryings:A,maxFragmentUniforms:k,vertexTextures:U,maxSamples:E}}function LU(n){const e=this;let t=null,i=0,s=!1,l=!1;const c=new Ra,h=new Pt,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const b=g.length!==0||y||i!==0||s;return s=y,i=g.length,b},this.beginShadows=function(){l=!0,p(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(g,y){t=p(g,y,0)},this.setState=function(g,y,b){const x=g.clippingPlanes,S=g.clipIntersection,w=g.clipShadows,_=n.get(g);if(!s||x===null||x.length===0||l&&!w)l?p(null):d();else{const R=l?0:i,A=R*4;let k=_.clippingState||null;f.value=k,k=p(x,y,A,b);for(let U=0;U!==A;++U)k[U]=t[U];_.clippingState=k,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=R}};function d(){f.value!==t&&(f.value=t,f.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,y,b,x){const S=g!==null?g.length:0;let w=null;if(S!==0){if(w=f.value,x!==!0||w===null){const _=b+S*4,R=y.matrixWorldInverse;h.getNormalMatrix(R),(w===null||w.length<_)&&(w=new Float32Array(_));for(let A=0,k=b;A!==S;++A,k+=4)c.copy(g[A]).applyMatrix4(R,h),c.normal.toArray(w,k),w[k+3]=c.constant}f.value=w,f.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,w}}function IU(n){let e=new WeakMap;function t(c,h){return h===cm?c.mapping=Oo:h===um&&(c.mapping=Uo),c}function i(c){if(c&&c.isTexture){const h=c.mapping;if(h===cm||h===um)if(e.has(c)){const f=e.get(c).texture;return t(f,c.mapping)}else{const f=c.image;if(f&&f.height>0){const d=new A4(f.height);return d.fromEquirectangularTexture(n,c),e.set(c,d),c.addEventListener("dispose",s),t(d.texture,c.mapping)}else return null}}return c}function s(c){const h=c.target;h.removeEventListener("dispose",s);const f=e.get(h);f!==void 0&&(e.delete(h),f.dispose())}function l(){e=new WeakMap}return{get:i,dispose:l}}const To=4,c1=[.125,.215,.35,.446,.526,.582],ps=20,Dp=new G4,u1=new Ut;let Rp=null,kp=0,Pp=0,Lp=!1;const hs=(1+Math.sqrt(5))/2,bo=1/hs,h1=[new te(-hs,bo,0),new te(hs,bo,0),new te(-bo,0,hs),new te(bo,0,hs),new te(0,hs,-bo),new te(0,hs,bo),new te(-1,1,-1),new te(1,1,-1),new te(-1,1,1),new te(1,1,1)];class d1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){Rp=this._renderer.getRenderTarget(),kp=this._renderer.getActiveCubeFace(),Pp=this._renderer.getActiveMipmapLevel(),Lp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,s,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=m1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=p1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Rp,kp,Pp),this._renderer.xr.enabled=Lp,e.scissorTest=!1,Ju(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oo||e.mapping===Uo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Rp=this._renderer.getRenderTarget(),kp=this._renderer.getActiveCubeFace(),Pp=this._renderer.getActiveMipmapLevel(),Lp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:wi,minFilter:wi,generateMipmaps:!1,type:gc,format:li,colorSpace:_s,depthBuffer:!1},s=f1(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=f1(e,t,i);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=OU(l)),this._blurMaterial=UU(l,e,t)}return s}_compileMaterial(e){const t=new Zn(this._lodPlanes[0],e);this._renderer.compile(t,Dp)}_sceneToCubeUV(e,t,i,s){const h=new Lr(90,1,t,i),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,y=p.toneMapping;p.getClearColor(u1),p.toneMapping=Ia,p.autoClear=!1;const b=new Sh({name:"PMREM.Background",side:hr,depthWrite:!1,depthTest:!1}),x=new Zn(new _c,b);let S=!1;const w=e.background;w?w.isColor&&(b.color.copy(w),e.background=null,S=!0):(b.color.copy(u1),S=!0);for(let _=0;_<6;_++){const R=_%3;R===0?(h.up.set(0,f[_],0),h.lookAt(d[_],0,0)):R===1?(h.up.set(0,0,f[_]),h.lookAt(0,d[_],0)):(h.up.set(0,f[_],0),h.lookAt(0,0,d[_]));const A=this._cubeSize;Ju(s,R*A,_>2?A:0,A,A),p.setRenderTarget(s),S&&p.render(x,h),p.render(e,h)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=y,p.autoClear=g,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===Oo||e.mapping===Uo;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=m1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=p1());const l=s?this._cubemapMaterial:this._equirectMaterial,c=new Zn(this._lodPlanes[0],l),h=l.uniforms;h.envMap.value=e;const f=this._cubeSize;Ju(t,0,0,3*f,2*f),i.setRenderTarget(t),i.render(c,Dp)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let l=1;l<s;l++){const c=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),h=h1[(s-l-1)%h1.length];this._blur(e,l-1,l,c,h)}t.autoClear=i}_blur(e,t,i,s,l){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,i,s,"latitudinal",l),this._halfBlur(c,e,i,i,s,"longitudinal",l)}_halfBlur(e,t,i,s,l,c,h){const f=this._renderer,d=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new Zn(this._lodPlanes[s],d),y=d.uniforms,b=this._sizeLods[i]-1,x=isFinite(l)?Math.PI/(2*b):2*Math.PI/(2*ps-1),S=l/x,w=isFinite(l)?1+Math.floor(p*S):ps;w>ps&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${ps}`);const _=[];let R=0;for(let N=0;N<ps;++N){const H=N/S,C=Math.exp(-H*H/2);_.push(C),N===0?R+=C:N<w&&(R+=2*C)}for(let N=0;N<_.length;N++)_[N]=_[N]/R;y.envMap.value=e.texture,y.samples.value=w,y.weights.value=_,y.latitudinal.value=c==="latitudinal",h&&(y.poleAxis.value=h);const{_lodMax:A}=this;y.dTheta.value=x,y.mipInt.value=A-i;const k=this._sizeLods[s],U=3*k*(s>A-To?s-A+To:0),E=4*(this._cubeSize-k);Ju(t,U,E,3*k,2*k),f.setRenderTarget(t),f.render(g,Dp)}}function OU(n){const e=[],t=[],i=[];let s=n;const l=n-To+1+c1.length;for(let c=0;c<l;c++){const h=Math.pow(2,s);t.push(h);let f=1/h;c>n-To?f=c1[c-n+To-1]:c===0&&(f=0),i.push(f);const d=1/(h-2),p=-d,g=1+d,y=[p,p,g,p,g,g,p,p,g,g,p,g],b=6,x=6,S=3,w=2,_=1,R=new Float32Array(S*x*b),A=new Float32Array(w*x*b),k=new Float32Array(_*x*b);for(let E=0;E<b;E++){const N=E%3*2/3-1,H=E>2?0:-1,C=[N,H,0,N+2/3,H,0,N+2/3,H+1,0,N,H,0,N+2/3,H+1,0,N,H+1,0];R.set(C,S*x*E),A.set(y,w*x*E);const D=[E,E,E,E,E,E];k.set(D,_*x*E)}const U=new wr;U.setAttribute("position",new Si(R,S)),U.setAttribute("uv",new Si(A,w)),U.setAttribute("faceIndex",new Si(k,_)),e.push(U),s>To&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function f1(n,e,t){const i=new ws(n,e,t);return i.texture.mapping=Lh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ju(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function UU(n,e,t){const i=new Float32Array(ps),s=new te(0,1,0);return new Ti({name:"SphericalGaussianBlur",defines:{n:ps,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Ag(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:La,depthTest:!1,depthWrite:!1})}function p1(){return new Ti({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ag(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:La,depthTest:!1,depthWrite:!1})}function m1(){return new Ti({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ag(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:La,depthTest:!1,depthWrite:!1})}function Ag(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function NU(n){let e=new WeakMap,t=null;function i(h){if(h&&h.isTexture){const f=h.mapping,d=f===cm||f===um,p=f===Oo||f===Uo;if(d||p){let g=e.get(h);const y=g!==void 0?g.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==y)return t===null&&(t=new d1(n)),g=d?t.fromEquirectangular(h,g):t.fromCubemap(h,g),g.texture.pmremVersion=h.pmremVersion,e.set(h,g),g.texture;if(g!==void 0)return g.texture;{const b=h.image;return d&&b&&b.height>0||p&&b&&s(b)?(t===null&&(t=new d1(n)),g=d?t.fromEquirectangular(h):t.fromCubemap(h),g.texture.pmremVersion=h.pmremVersion,e.set(h,g),h.addEventListener("dispose",l),g.texture):null}}}return h}function s(h){let f=0;const d=6;for(let p=0;p<d;p++)h[p]!==void 0&&f++;return f===d}function l(h){const f=h.target;f.removeEventListener("dispose",l);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function c(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:c}}function FU(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&xo("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function zU(n,e,t,i){const s={},l=new WeakMap;function c(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const x in y.attributes)e.remove(y.attributes[x]);y.removeEventListener("dispose",c),delete s[y.id];const b=l.get(y);b&&(e.remove(b),l.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function h(g,y){return s[y.id]===!0||(y.addEventListener("dispose",c),s[y.id]=!0,t.memory.geometries++),y}function f(g){const y=g.attributes;for(const b in y)e.update(y[b],n.ARRAY_BUFFER)}function d(g){const y=[],b=g.index,x=g.attributes.position;let S=0;if(b!==null){const R=b.array;S=b.version;for(let A=0,k=R.length;A<k;A+=3){const U=R[A+0],E=R[A+1],N=R[A+2];y.push(U,E,E,N,N,U)}}else if(x!==void 0){const R=x.array;S=x.version;for(let A=0,k=R.length/3-1;A<k;A+=3){const U=A+0,E=A+1,N=A+2;y.push(U,E,E,N,N,U)}}else return;const w=new(hw(y)?yw:gw)(y,1);w.version=S;const _=l.get(g);_&&e.remove(_),l.set(g,w)}function p(g){const y=l.get(g);if(y){const b=g.index;b!==null&&y.version<b.version&&d(g)}else d(g);return l.get(g)}return{get:h,update:f,getWireframeAttribute:p}}function BU(n,e,t){let i;function s(y){i=y}let l,c;function h(y){l=y.type,c=y.bytesPerElement}function f(y,b){n.drawElements(i,b,l,y*c),t.update(b,i,1)}function d(y,b,x){x!==0&&(n.drawElementsInstanced(i,b,l,y*c,x),t.update(b,i,x))}function p(y,b,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,b,0,l,y,0,x);let w=0;for(let _=0;_<x;_++)w+=b[_];t.update(w,i,1)}function g(y,b,x,S){if(x===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let _=0;_<y.length;_++)d(y[_]/c,b[_],S[_]);else{w.multiDrawElementsInstancedWEBGL(i,b,0,l,y,0,S,0,x);let _=0;for(let R=0;R<x;R++)_+=b[R]*S[R];t.update(_,i,1)}}this.setMode=s,this.setIndex=h,this.render=f,this.renderInstances=d,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function HU(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(l,c,h){switch(t.calls++,c){case n.TRIANGLES:t.triangles+=h*(l/3);break;case n.LINES:t.lines+=h*(l/2);break;case n.LINE_STRIP:t.lines+=h*(l-1);break;case n.LINE_LOOP:t.lines+=h*l;break;case n.POINTS:t.points+=h*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function VU(n,e,t){const i=new WeakMap,s=new on;function l(c,h,f){const d=c.morphTargetInfluences,p=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,g=p!==void 0?p.length:0;let y=i.get(h);if(y===void 0||y.count!==g){let C=function(){N.dispose(),i.delete(h),h.removeEventListener("dispose",C)};y!==void 0&&y.texture.dispose();const b=h.morphAttributes.position!==void 0,x=h.morphAttributes.normal!==void 0,S=h.morphAttributes.color!==void 0,w=h.morphAttributes.position||[],_=h.morphAttributes.normal||[],R=h.morphAttributes.color||[];let A=0;b===!0&&(A=1),x===!0&&(A=2),S===!0&&(A=3);let k=h.attributes.position.count*A,U=1;k>e.maxTextureSize&&(U=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const E=new Float32Array(k*U*4*g),N=new fw(E,k,U,g);N.type=Zi,N.needsUpdate=!0;const H=A*4;for(let D=0;D<g;D++){const F=w[D],J=_[D],Y=R[D],W=k*U*4*D;for(let re=0;re<F.count;re++){const j=re*H;b===!0&&(s.fromBufferAttribute(F,re),E[W+j+0]=s.x,E[W+j+1]=s.y,E[W+j+2]=s.z,E[W+j+3]=0),x===!0&&(s.fromBufferAttribute(J,re),E[W+j+4]=s.x,E[W+j+5]=s.y,E[W+j+6]=s.z,E[W+j+7]=0),S===!0&&(s.fromBufferAttribute(Y,re),E[W+j+8]=s.x,E[W+j+9]=s.y,E[W+j+10]=s.z,E[W+j+11]=Y.itemSize===4?s.w:1)}}y={count:g,texture:N,size:new Et(k,U)},i.set(h,y),h.addEventListener("dispose",C)}if(c.isInstancedMesh===!0&&c.morphTexture!==null)f.getUniforms().setValue(n,"morphTexture",c.morphTexture,t);else{let b=0;for(let S=0;S<d.length;S++)b+=d[S];const x=h.morphTargetsRelative?1:1-b;f.getUniforms().setValue(n,"morphTargetBaseInfluence",x),f.getUniforms().setValue(n,"morphTargetInfluences",d)}f.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:l}}function GU(n,e,t,i){let s=new WeakMap;function l(f){const d=i.render.frame,p=f.geometry,g=e.get(f,p);if(s.get(g)!==d&&(e.update(g),s.set(g,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",h)===!1&&f.addEventListener("dispose",h),s.get(f)!==d&&(t.update(f.instanceMatrix,n.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,n.ARRAY_BUFFER),s.set(f,d))),f.isSkinnedMesh){const y=f.skeleton;s.get(y)!==d&&(y.update(),s.set(y,d))}return g}function c(){s=new WeakMap}function h(f){const d=f.target;d.removeEventListener("dispose",h),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:l,dispose:c}}const Ew=new dr,g1=new Sw(1,1),Mw=new fw,Aw=new u4,Cw=new _w,y1=[],b1=[],v1=new Float32Array(16),_1=new Float32Array(9),w1=new Float32Array(4);function Bo(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let l=y1[s];if(l===void 0&&(l=new Float32Array(s),y1[s]=l),e!==0){i.toArray(l,0);for(let c=1,h=0;c!==e;++c)h+=t,n[c].toArray(l,h)}return l}function Nn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Fn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Uh(n,e){let t=b1[e];t===void 0&&(t=new Int32Array(e),b1[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function jU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function qU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Nn(t,e))return;n.uniform2fv(this.addr,e),Fn(t,e)}}function WU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Nn(t,e))return;n.uniform3fv(this.addr,e),Fn(t,e)}}function YU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Nn(t,e))return;n.uniform4fv(this.addr,e),Fn(t,e)}}function XU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fn(t,e)}else{if(Nn(t,i))return;w1.set(i),n.uniformMatrix2fv(this.addr,!1,w1),Fn(t,i)}}function QU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fn(t,e)}else{if(Nn(t,i))return;_1.set(i),n.uniformMatrix3fv(this.addr,!1,_1),Fn(t,i)}}function ZU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Nn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fn(t,e)}else{if(Nn(t,i))return;v1.set(i),n.uniformMatrix4fv(this.addr,!1,v1),Fn(t,i)}}function KU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function JU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Nn(t,e))return;n.uniform2iv(this.addr,e),Fn(t,e)}}function $U(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Nn(t,e))return;n.uniform3iv(this.addr,e),Fn(t,e)}}function eN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Nn(t,e))return;n.uniform4iv(this.addr,e),Fn(t,e)}}function tN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function nN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Nn(t,e))return;n.uniform2uiv(this.addr,e),Fn(t,e)}}function rN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Nn(t,e))return;n.uniform3uiv(this.addr,e),Fn(t,e)}}function iN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Nn(t,e))return;n.uniform4uiv(this.addr,e),Fn(t,e)}}function aN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let l;this.type===n.SAMPLER_2D_SHADOW?(g1.compareFunction=uw,l=g1):l=Ew,t.setTexture2D(e||l,s)}function sN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||Aw,s)}function oN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||Cw,s)}function lN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||Mw,s)}function cN(n){switch(n){case 5126:return jU;case 35664:return qU;case 35665:return WU;case 35666:return YU;case 35674:return XU;case 35675:return QU;case 35676:return ZU;case 5124:case 35670:return KU;case 35667:case 35671:return JU;case 35668:case 35672:return $U;case 35669:case 35673:return eN;case 5125:return tN;case 36294:return nN;case 36295:return rN;case 36296:return iN;case 35678:case 36198:case 36298:case 36306:case 35682:return aN;case 35679:case 36299:case 36307:return sN;case 35680:case 36300:case 36308:case 36293:return oN;case 36289:case 36303:case 36311:case 36292:return lN}}function uN(n,e){n.uniform1fv(this.addr,e)}function hN(n,e){const t=Bo(e,this.size,2);n.uniform2fv(this.addr,t)}function dN(n,e){const t=Bo(e,this.size,3);n.uniform3fv(this.addr,t)}function fN(n,e){const t=Bo(e,this.size,4);n.uniform4fv(this.addr,t)}function pN(n,e){const t=Bo(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function mN(n,e){const t=Bo(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function gN(n,e){const t=Bo(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function yN(n,e){n.uniform1iv(this.addr,e)}function bN(n,e){n.uniform2iv(this.addr,e)}function vN(n,e){n.uniform3iv(this.addr,e)}function _N(n,e){n.uniform4iv(this.addr,e)}function wN(n,e){n.uniform1uiv(this.addr,e)}function xN(n,e){n.uniform2uiv(this.addr,e)}function SN(n,e){n.uniform3uiv(this.addr,e)}function TN(n,e){n.uniform4uiv(this.addr,e)}function EN(n,e,t){const i=this.cache,s=e.length,l=Uh(t,s);Nn(i,l)||(n.uniform1iv(this.addr,l),Fn(i,l));for(let c=0;c!==s;++c)t.setTexture2D(e[c]||Ew,l[c])}function MN(n,e,t){const i=this.cache,s=e.length,l=Uh(t,s);Nn(i,l)||(n.uniform1iv(this.addr,l),Fn(i,l));for(let c=0;c!==s;++c)t.setTexture3D(e[c]||Aw,l[c])}function AN(n,e,t){const i=this.cache,s=e.length,l=Uh(t,s);Nn(i,l)||(n.uniform1iv(this.addr,l),Fn(i,l));for(let c=0;c!==s;++c)t.setTextureCube(e[c]||Cw,l[c])}function CN(n,e,t){const i=this.cache,s=e.length,l=Uh(t,s);Nn(i,l)||(n.uniform1iv(this.addr,l),Fn(i,l));for(let c=0;c!==s;++c)t.setTexture2DArray(e[c]||Mw,l[c])}function DN(n){switch(n){case 5126:return uN;case 35664:return hN;case 35665:return dN;case 35666:return fN;case 35674:return pN;case 35675:return mN;case 35676:return gN;case 5124:case 35670:return yN;case 35667:case 35671:return bN;case 35668:case 35672:return vN;case 35669:case 35673:return _N;case 5125:return wN;case 36294:return xN;case 36295:return SN;case 36296:return TN;case 35678:case 36198:case 36298:case 36306:case 35682:return EN;case 35679:case 36299:case 36307:return MN;case 35680:case 36300:case 36308:case 36293:return AN;case 36289:case 36303:case 36311:case 36292:return CN}}class RN{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=cN(t.type)}}class kN{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=DN(t.type)}}class PN{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let l=0,c=s.length;l!==c;++l){const h=s[l];h.setValue(e,t[h.id],i)}}}const Ip=/(\w+)(\])?(\[|\.)?/g;function x1(n,e){n.seq.push(e),n.map[e.id]=e}function LN(n,e,t){const i=n.name,s=i.length;for(Ip.lastIndex=0;;){const l=Ip.exec(i),c=Ip.lastIndex;let h=l[1];const f=l[2]==="]",d=l[3];if(f&&(h=h|0),d===void 0||d==="["&&c+2===s){x1(t,d===void 0?new RN(h,n,e):new kN(h,n,e));break}else{let g=t.map[h];g===void 0&&(g=new PN(h),x1(t,g)),t=g}}}class mh{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const l=e.getActiveUniform(t,s),c=e.getUniformLocation(t,l.name);LN(l,c,this)}}setValue(e,t,i,s){const l=this.map[t];l!==void 0&&l.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let l=0,c=t.length;l!==c;++l){const h=t[l],f=i[h.id];f.needsUpdate!==!1&&h.setValue(e,f.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,l=e.length;s!==l;++s){const c=e[s];c.id in t&&i.push(c)}return i}}function S1(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const IN=37297;let ON=0;function UN(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),l=Math.min(e+6,t.length);for(let c=s;c<l;c++){const h=c+1;i.push(`${h===e?">":" "} ${h}: ${t[c]}`)}return i.join(`
`)}const T1=new Pt;function NN(n){Zt._getMatrix(T1,Zt.workingColorSpace,n);const e=`mat3( ${T1.elements.map(t=>t.toFixed(4))} )`;switch(Zt.getTransfer(n)){case wh:return[e,"LinearTransferOETF"];case an:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function E1(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const l=/ERROR: 0:(\d+)/.exec(s);if(l){const c=parseInt(l[1]);return t.toUpperCase()+`

`+s+`

`+UN(n.getShaderSource(e),c)}else return s}function FN(n,e){const t=NN(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function zN(n,e){let t;switch(e){case UL:t="Linear";break;case NL:t="Reinhard";break;case FL:t="Cineon";break;case J_:t="ACESFilmic";break;case BL:t="AgX";break;case HL:t="Neutral";break;case zL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const $u=new te;function BN(){Zt.getLuminanceCoefficients($u);const n=$u.x.toFixed(4),e=$u.y.toFixed(4),t=$u.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function HN(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ec).join(`
`)}function VN(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function GN(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const l=n.getActiveAttrib(e,s),c=l.name;let h=1;l.type===n.FLOAT_MAT2&&(h=2),l.type===n.FLOAT_MAT3&&(h=3),l.type===n.FLOAT_MAT4&&(h=4),t[c]={type:l.type,location:n.getAttribLocation(e,c),locationSize:h}}return t}function ec(n){return n!==""}function M1(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function A1(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jN=/^[ \t]*#include +<([\w\d./]+)>/gm;function Vm(n){return n.replace(jN,WN)}const qN=new Map;function WN(n,e){let t=It[e];if(t===void 0){const i=qN.get(e);if(i!==void 0)t=It[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Vm(t)}const YN=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function C1(n){return n.replace(YN,XN)}function XN(n,e,t,i){let s="";for(let l=parseInt(e);l<parseInt(t);l++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return s}function D1(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function QN(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===K_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===mL?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Xi&&(e="SHADOWMAP_TYPE_VSM"),e}function ZN(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Oo:case Uo:e="ENVMAP_TYPE_CUBE";break;case Lh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function KN(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Uo:e="ENVMAP_MODE_REFRACTION";break}return e}function JN(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case mg:e="ENVMAP_BLENDING_MULTIPLY";break;case IL:e="ENVMAP_BLENDING_MIX";break;case OL:e="ENVMAP_BLENDING_ADD";break}return e}function $N(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function e5(n,e,t,i){const s=n.getContext(),l=t.defines;let c=t.vertexShader,h=t.fragmentShader;const f=QN(t),d=ZN(t),p=KN(t),g=JN(t),y=$N(t),b=HN(t),x=VN(l),S=s.createProgram();let w,_,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(ec).join(`
`),w.length>0&&(w+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(ec).join(`
`),_.length>0&&(_+=`
`)):(w=[D1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ec).join(`
`),_=[D1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ia?"#define TONE_MAPPING":"",t.toneMapping!==Ia?It.tonemapping_pars_fragment:"",t.toneMapping!==Ia?zN("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",It.colorspace_pars_fragment,FN("linearToOutputTexel",t.outputColorSpace),BN(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ec).join(`
`)),c=Vm(c),c=M1(c,t),c=A1(c,t),h=Vm(h),h=M1(h,t),h=A1(h,t),c=C1(c),h=C1(h),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,w=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,_=["#define varying in",t.glslVersion===kv?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===kv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const A=R+w+c,k=R+_+h,U=S1(s,s.VERTEX_SHADER,A),E=S1(s,s.FRAGMENT_SHADER,k);s.attachShader(S,U),s.attachShader(S,E),t.index0AttributeName!==void 0?s.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(S,0,"position"),s.linkProgram(S);function N(F){if(n.debug.checkShaderErrors){const J=s.getProgramInfoLog(S).trim(),Y=s.getShaderInfoLog(U).trim(),W=s.getShaderInfoLog(E).trim();let re=!0,j=!0;if(s.getProgramParameter(S,s.LINK_STATUS)===!1)if(re=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,S,U,E);else{const ce=E1(s,U,"vertex"),X=E1(s,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(S,s.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+J+`
`+ce+`
`+X)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(Y===""||W==="")&&(j=!1);j&&(F.diagnostics={runnable:re,programLog:J,vertexShader:{log:Y,prefix:w},fragmentShader:{log:W,prefix:_}})}s.deleteShader(U),s.deleteShader(E),H=new mh(s,S),C=GN(s,S)}let H;this.getUniforms=function(){return H===void 0&&N(this),H};let C;this.getAttributes=function(){return C===void 0&&N(this),C};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=s.getProgramParameter(S,IN)),D},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ON++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=U,this.fragmentShader=E,this}let t5=0;class n5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),l=this._getShaderStage(i),c=this._getShaderCacheForMaterial(e);return c.has(s)===!1&&(c.add(s),s.usedTimes++),c.has(l)===!1&&(c.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new r5(e),t.set(e,i)),i}}class r5{constructor(e){this.id=t5++,this.code=e,this.usedTimes=0}}function i5(n,e,t,i,s,l,c){const h=new pw,f=new n5,d=new Set,p=[],g=s.logarithmicDepthBuffer,y=s.vertexTextures;let b=s.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(C){return d.add(C),C===0?"uv":`uv${C}`}function w(C,D,F,J,Y){const W=J.fog,re=Y.geometry,j=C.isMeshStandardMaterial?J.environment:null,ce=(C.isMeshStandardMaterial?t:e).get(C.envMap||j),X=ce&&ce.mapping===Lh?ce.image.height:null,_e=x[C.type];C.precision!==null&&(b=s.getMaxPrecision(C.precision),b!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",b,"instead."));const T=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,se=T!==void 0?T.length:0;let Ee=0;re.morphAttributes.position!==void 0&&(Ee=1),re.morphAttributes.normal!==void 0&&(Ee=2),re.morphAttributes.color!==void 0&&(Ee=3);let O,Q,be,ve;if(_e){const G=vi[_e];O=G.vertexShader,Q=G.fragmentShader}else O=C.vertexShader,Q=C.fragmentShader,f.update(C),be=f.getVertexShaderID(C),ve=f.getFragmentShaderID(C);const Ie=n.getRenderTarget(),Ne=n.state.buffers.depth.getReversed(),rt=Y.isInstancedMesh===!0,Ue=Y.isBatchedMesh===!0,Tt=!!C.map,Ft=!!C.matcap,xt=!!ce,q=!!C.aoMap,mn=!!C.lightMap,ht=!!C.bumpMap,yt=!!C.normalMap,st=!!C.displacementMap,jt=!!C.emissiveMap,it=!!C.metalnessMap,z=!!C.roughnessMap,P=C.anisotropy>0,ue=C.clearcoat>0,Se=C.dispersion>0,De=C.iridescence>0,V=C.sheen>0,pe=C.transmission>0,xe=P&&!!C.anisotropyMap,Re=ue&&!!C.clearcoatMap,Je=ue&&!!C.clearcoatNormalMap,Ce=ue&&!!C.clearcoatRoughnessMap,je=De&&!!C.iridescenceMap,Ze=De&&!!C.iridescenceThicknessMap,Ke=V&&!!C.sheenColorMap,Ye=V&&!!C.sheenRoughnessMap,ot=!!C.specularMap,$e=!!C.specularColorMap,Rt=!!C.specularIntensityMap,$=pe&&!!C.transmissionMap,qe=pe&&!!C.thicknessMap,ye=!!C.gradientMap,Me=!!C.alphaMap,He=C.alphaTest>0,Ve=!!C.alphaHash,bt=!!C.extensions;let un=Ia;C.toneMapped&&(Ie===null||Ie.isXRRenderTarget===!0)&&(un=n.toneMapping);const Tn={shaderID:_e,shaderType:C.type,shaderName:C.name,vertexShader:O,fragmentShader:Q,defines:C.defines,customVertexShaderID:be,customFragmentShaderID:ve,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:b,batching:Ue,batchingColor:Ue&&Y._colorsTexture!==null,instancing:rt,instancingColor:rt&&Y.instanceColor!==null,instancingMorph:rt&&Y.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:Ie===null?n.outputColorSpace:Ie.isXRRenderTarget===!0?Ie.texture.colorSpace:_s,alphaToCoverage:!!C.alphaToCoverage,map:Tt,matcap:Ft,envMap:xt,envMapMode:xt&&ce.mapping,envMapCubeUVHeight:X,aoMap:q,lightMap:mn,bumpMap:ht,normalMap:yt,displacementMap:y&&st,emissiveMap:jt,normalMapObjectSpace:yt&&C.normalMapType===qL,normalMapTangentSpace:yt&&C.normalMapType===xg,metalnessMap:it,roughnessMap:z,anisotropy:P,anisotropyMap:xe,clearcoat:ue,clearcoatMap:Re,clearcoatNormalMap:Je,clearcoatRoughnessMap:Ce,dispersion:Se,iridescence:De,iridescenceMap:je,iridescenceThicknessMap:Ze,sheen:V,sheenColorMap:Ke,sheenRoughnessMap:Ye,specularMap:ot,specularColorMap:$e,specularIntensityMap:Rt,transmission:pe,transmissionMap:$,thicknessMap:qe,gradientMap:ye,opaque:C.transparent===!1&&C.blending===Co&&C.alphaToCoverage===!1,alphaMap:Me,alphaTest:He,alphaHash:Ve,combine:C.combine,mapUv:Tt&&S(C.map.channel),aoMapUv:q&&S(C.aoMap.channel),lightMapUv:mn&&S(C.lightMap.channel),bumpMapUv:ht&&S(C.bumpMap.channel),normalMapUv:yt&&S(C.normalMap.channel),displacementMapUv:st&&S(C.displacementMap.channel),emissiveMapUv:jt&&S(C.emissiveMap.channel),metalnessMapUv:it&&S(C.metalnessMap.channel),roughnessMapUv:z&&S(C.roughnessMap.channel),anisotropyMapUv:xe&&S(C.anisotropyMap.channel),clearcoatMapUv:Re&&S(C.clearcoatMap.channel),clearcoatNormalMapUv:Je&&S(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ce&&S(C.clearcoatRoughnessMap.channel),iridescenceMapUv:je&&S(C.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&S(C.iridescenceThicknessMap.channel),sheenColorMapUv:Ke&&S(C.sheenColorMap.channel),sheenRoughnessMapUv:Ye&&S(C.sheenRoughnessMap.channel),specularMapUv:ot&&S(C.specularMap.channel),specularColorMapUv:$e&&S(C.specularColorMap.channel),specularIntensityMapUv:Rt&&S(C.specularIntensityMap.channel),transmissionMapUv:$&&S(C.transmissionMap.channel),thicknessMapUv:qe&&S(C.thicknessMap.channel),alphaMapUv:Me&&S(C.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(yt||P),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,pointsUvs:Y.isPoints===!0&&!!re.attributes.uv&&(Tt||Me),fog:!!W,useFog:C.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Ne,skinning:Y.isSkinnedMesh===!0,morphTargets:re.morphAttributes.position!==void 0,morphNormals:re.morphAttributes.normal!==void 0,morphColors:re.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:Ee,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:un,decodeVideoTexture:Tt&&C.map.isVideoTexture===!0&&Zt.getTransfer(C.map.colorSpace)===an,decodeVideoTextureEmissive:jt&&C.emissiveMap.isVideoTexture===!0&&Zt.getTransfer(C.emissiveMap.colorSpace)===an,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Qi,flipSided:C.side===hr,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:bt&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(bt&&C.extensions.multiDraw===!0||Ue)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Tn.vertexUv1s=d.has(1),Tn.vertexUv2s=d.has(2),Tn.vertexUv3s=d.has(3),d.clear(),Tn}function _(C){const D=[];if(C.shaderID?D.push(C.shaderID):(D.push(C.customVertexShaderID),D.push(C.customFragmentShaderID)),C.defines!==void 0)for(const F in C.defines)D.push(F),D.push(C.defines[F]);return C.isRawShaderMaterial===!1&&(R(D,C),A(D,C),D.push(n.outputColorSpace)),D.push(C.customProgramCacheKey),D.join()}function R(C,D){C.push(D.precision),C.push(D.outputColorSpace),C.push(D.envMapMode),C.push(D.envMapCubeUVHeight),C.push(D.mapUv),C.push(D.alphaMapUv),C.push(D.lightMapUv),C.push(D.aoMapUv),C.push(D.bumpMapUv),C.push(D.normalMapUv),C.push(D.displacementMapUv),C.push(D.emissiveMapUv),C.push(D.metalnessMapUv),C.push(D.roughnessMapUv),C.push(D.anisotropyMapUv),C.push(D.clearcoatMapUv),C.push(D.clearcoatNormalMapUv),C.push(D.clearcoatRoughnessMapUv),C.push(D.iridescenceMapUv),C.push(D.iridescenceThicknessMapUv),C.push(D.sheenColorMapUv),C.push(D.sheenRoughnessMapUv),C.push(D.specularMapUv),C.push(D.specularColorMapUv),C.push(D.specularIntensityMapUv),C.push(D.transmissionMapUv),C.push(D.thicknessMapUv),C.push(D.combine),C.push(D.fogExp2),C.push(D.sizeAttenuation),C.push(D.morphTargetsCount),C.push(D.morphAttributeCount),C.push(D.numDirLights),C.push(D.numPointLights),C.push(D.numSpotLights),C.push(D.numSpotLightMaps),C.push(D.numHemiLights),C.push(D.numRectAreaLights),C.push(D.numDirLightShadows),C.push(D.numPointLightShadows),C.push(D.numSpotLightShadows),C.push(D.numSpotLightShadowsWithMaps),C.push(D.numLightProbes),C.push(D.shadowMapType),C.push(D.toneMapping),C.push(D.numClippingPlanes),C.push(D.numClipIntersection),C.push(D.depthPacking)}function A(C,D){h.disableAll(),D.supportsVertexTextures&&h.enable(0),D.instancing&&h.enable(1),D.instancingColor&&h.enable(2),D.instancingMorph&&h.enable(3),D.matcap&&h.enable(4),D.envMap&&h.enable(5),D.normalMapObjectSpace&&h.enable(6),D.normalMapTangentSpace&&h.enable(7),D.clearcoat&&h.enable(8),D.iridescence&&h.enable(9),D.alphaTest&&h.enable(10),D.vertexColors&&h.enable(11),D.vertexAlphas&&h.enable(12),D.vertexUv1s&&h.enable(13),D.vertexUv2s&&h.enable(14),D.vertexUv3s&&h.enable(15),D.vertexTangents&&h.enable(16),D.anisotropy&&h.enable(17),D.alphaHash&&h.enable(18),D.batching&&h.enable(19),D.dispersion&&h.enable(20),D.batchingColor&&h.enable(21),C.push(h.mask),h.disableAll(),D.fog&&h.enable(0),D.useFog&&h.enable(1),D.flatShading&&h.enable(2),D.logarithmicDepthBuffer&&h.enable(3),D.reverseDepthBuffer&&h.enable(4),D.skinning&&h.enable(5),D.morphTargets&&h.enable(6),D.morphNormals&&h.enable(7),D.morphColors&&h.enable(8),D.premultipliedAlpha&&h.enable(9),D.shadowMapEnabled&&h.enable(10),D.doubleSided&&h.enable(11),D.flipSided&&h.enable(12),D.useDepthPacking&&h.enable(13),D.dithering&&h.enable(14),D.transmission&&h.enable(15),D.sheen&&h.enable(16),D.opaque&&h.enable(17),D.pointsUvs&&h.enable(18),D.decodeVideoTexture&&h.enable(19),D.decodeVideoTextureEmissive&&h.enable(20),D.alphaToCoverage&&h.enable(21),C.push(h.mask)}function k(C){const D=x[C.type];let F;if(D){const J=vi[D];F=S4.clone(J.uniforms)}else F=C.uniforms;return F}function U(C,D){let F;for(let J=0,Y=p.length;J<Y;J++){const W=p[J];if(W.cacheKey===D){F=W,++F.usedTimes;break}}return F===void 0&&(F=new e5(n,D,C,l),p.push(F)),F}function E(C){if(--C.usedTimes===0){const D=p.indexOf(C);p[D]=p[p.length-1],p.pop(),C.destroy()}}function N(C){f.remove(C)}function H(){f.dispose()}return{getParameters:w,getProgramCacheKey:_,getUniforms:k,acquireProgram:U,releaseProgram:E,releaseShaderCache:N,programs:p,dispose:H}}function a5(){let n=new WeakMap;function e(c){return n.has(c)}function t(c){let h=n.get(c);return h===void 0&&(h={},n.set(c,h)),h}function i(c){n.delete(c)}function s(c,h,f){n.get(c)[h]=f}function l(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:l}}function s5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function R1(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function k1(){const n=[];let e=0;const t=[],i=[],s=[];function l(){e=0,t.length=0,i.length=0,s.length=0}function c(g,y,b,x,S,w){let _=n[e];return _===void 0?(_={id:g.id,object:g,geometry:y,material:b,groupOrder:x,renderOrder:g.renderOrder,z:S,group:w},n[e]=_):(_.id=g.id,_.object=g,_.geometry=y,_.material=b,_.groupOrder=x,_.renderOrder=g.renderOrder,_.z=S,_.group=w),e++,_}function h(g,y,b,x,S,w){const _=c(g,y,b,x,S,w);b.transmission>0?i.push(_):b.transparent===!0?s.push(_):t.push(_)}function f(g,y,b,x,S,w){const _=c(g,y,b,x,S,w);b.transmission>0?i.unshift(_):b.transparent===!0?s.unshift(_):t.unshift(_)}function d(g,y){t.length>1&&t.sort(g||s5),i.length>1&&i.sort(y||R1),s.length>1&&s.sort(y||R1)}function p(){for(let g=e,y=n.length;g<y;g++){const b=n[g];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:i,transparent:s,init:l,push:h,unshift:f,finish:p,sort:d}}function o5(){let n=new WeakMap;function e(i,s){const l=n.get(i);let c;return l===void 0?(c=new k1,n.set(i,[c])):s>=l.length?(c=new k1,l.push(c)):c=l[s],c}function t(){n=new WeakMap}return{get:e,dispose:t}}function l5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new te,color:new Ut};break;case"SpotLight":t={position:new te,direction:new te,color:new Ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new te,color:new Ut,distance:0,decay:0};break;case"HemisphereLight":t={direction:new te,skyColor:new Ut,groundColor:new Ut};break;case"RectAreaLight":t={color:new Ut,position:new te,halfWidth:new te,halfHeight:new te};break}return n[e.id]=t,t}}}function c5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let u5=0;function h5(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function d5(n){const e=new l5,t=c5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new te);const s=new te,l=new gn,c=new gn;function h(d){let p=0,g=0,y=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let b=0,x=0,S=0,w=0,_=0,R=0,A=0,k=0,U=0,E=0,N=0;d.sort(h5);for(let C=0,D=d.length;C<D;C++){const F=d[C],J=F.color,Y=F.intensity,W=F.distance,re=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)p+=J.r*Y,g+=J.g*Y,y+=J.b*Y;else if(F.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(F.sh.coefficients[j],Y);N++}else if(F.isDirectionalLight){const j=e.get(F);if(j.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const ce=F.shadow,X=t.get(F);X.shadowIntensity=ce.intensity,X.shadowBias=ce.bias,X.shadowNormalBias=ce.normalBias,X.shadowRadius=ce.radius,X.shadowMapSize=ce.mapSize,i.directionalShadow[b]=X,i.directionalShadowMap[b]=re,i.directionalShadowMatrix[b]=F.shadow.matrix,R++}i.directional[b]=j,b++}else if(F.isSpotLight){const j=e.get(F);j.position.setFromMatrixPosition(F.matrixWorld),j.color.copy(J).multiplyScalar(Y),j.distance=W,j.coneCos=Math.cos(F.angle),j.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),j.decay=F.decay,i.spot[S]=j;const ce=F.shadow;if(F.map&&(i.spotLightMap[U]=F.map,U++,ce.updateMatrices(F),F.castShadow&&E++),i.spotLightMatrix[S]=ce.matrix,F.castShadow){const X=t.get(F);X.shadowIntensity=ce.intensity,X.shadowBias=ce.bias,X.shadowNormalBias=ce.normalBias,X.shadowRadius=ce.radius,X.shadowMapSize=ce.mapSize,i.spotShadow[S]=X,i.spotShadowMap[S]=re,k++}S++}else if(F.isRectAreaLight){const j=e.get(F);j.color.copy(J).multiplyScalar(Y),j.halfWidth.set(F.width*.5,0,0),j.halfHeight.set(0,F.height*.5,0),i.rectArea[w]=j,w++}else if(F.isPointLight){const j=e.get(F);if(j.color.copy(F.color).multiplyScalar(F.intensity),j.distance=F.distance,j.decay=F.decay,F.castShadow){const ce=F.shadow,X=t.get(F);X.shadowIntensity=ce.intensity,X.shadowBias=ce.bias,X.shadowNormalBias=ce.normalBias,X.shadowRadius=ce.radius,X.shadowMapSize=ce.mapSize,X.shadowCameraNear=ce.camera.near,X.shadowCameraFar=ce.camera.far,i.pointShadow[x]=X,i.pointShadowMap[x]=re,i.pointShadowMatrix[x]=F.shadow.matrix,A++}i.point[x]=j,x++}else if(F.isHemisphereLight){const j=e.get(F);j.skyColor.copy(F.color).multiplyScalar(Y),j.groundColor.copy(F.groundColor).multiplyScalar(Y),i.hemi[_]=j,_++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=We.LTC_FLOAT_1,i.rectAreaLTC2=We.LTC_FLOAT_2):(i.rectAreaLTC1=We.LTC_HALF_1,i.rectAreaLTC2=We.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=y;const H=i.hash;(H.directionalLength!==b||H.pointLength!==x||H.spotLength!==S||H.rectAreaLength!==w||H.hemiLength!==_||H.numDirectionalShadows!==R||H.numPointShadows!==A||H.numSpotShadows!==k||H.numSpotMaps!==U||H.numLightProbes!==N)&&(i.directional.length=b,i.spot.length=S,i.rectArea.length=w,i.point.length=x,i.hemi.length=_,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=k,i.spotShadowMap.length=k,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=k+U-E,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=E,i.numLightProbes=N,H.directionalLength=b,H.pointLength=x,H.spotLength=S,H.rectAreaLength=w,H.hemiLength=_,H.numDirectionalShadows=R,H.numPointShadows=A,H.numSpotShadows=k,H.numSpotMaps=U,H.numLightProbes=N,i.version=u5++)}function f(d,p){let g=0,y=0,b=0,x=0,S=0;const w=p.matrixWorldInverse;for(let _=0,R=d.length;_<R;_++){const A=d[_];if(A.isDirectionalLight){const k=i.directional[g];k.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(w),g++}else if(A.isSpotLight){const k=i.spot[b];k.position.setFromMatrixPosition(A.matrixWorld),k.position.applyMatrix4(w),k.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(w),b++}else if(A.isRectAreaLight){const k=i.rectArea[x];k.position.setFromMatrixPosition(A.matrixWorld),k.position.applyMatrix4(w),c.identity(),l.copy(A.matrixWorld),l.premultiply(w),c.extractRotation(l),k.halfWidth.set(A.width*.5,0,0),k.halfHeight.set(0,A.height*.5,0),k.halfWidth.applyMatrix4(c),k.halfHeight.applyMatrix4(c),x++}else if(A.isPointLight){const k=i.point[y];k.position.setFromMatrixPosition(A.matrixWorld),k.position.applyMatrix4(w),y++}else if(A.isHemisphereLight){const k=i.hemi[S];k.direction.setFromMatrixPosition(A.matrixWorld),k.direction.transformDirection(w),S++}}}return{setup:h,setupView:f,state:i}}function P1(n){const e=new d5(n),t=[],i=[];function s(p){d.camera=p,t.length=0,i.length=0}function l(p){t.push(p)}function c(p){i.push(p)}function h(){e.setup(t)}function f(p){e.setupView(t,p)}const d={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:d,setupLights:h,setupLightsView:f,pushLight:l,pushShadow:c}}function f5(n){let e=new WeakMap;function t(s,l=0){const c=e.get(s);let h;return c===void 0?(h=new P1(n),e.set(s,[h])):l>=c.length?(h=new P1(n),c.push(h)):h=c[l],h}function i(){e=new WeakMap}return{get:t,dispose:i}}const p5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,m5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function g5(n,e,t){let i=new Sg;const s=new Et,l=new Et,c=new on,h=new I4({depthPacking:jL}),f=new O4,d={},p=t.maxTextureSize,g={[Ua]:hr,[hr]:Ua,[Qi]:Qi},y=new Ti({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Et},radius:{value:4}},vertexShader:p5,fragmentShader:m5}),b=y.clone();b.defines.HORIZONTAL_PASS=1;const x=new wr;x.setAttribute("position",new Si(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Zn(x,y),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=K_;let _=this.type;this.render=function(E,N,H){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||E.length===0)return;const C=n.getRenderTarget(),D=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),J=n.state;J.setBlending(La),J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const Y=_!==Xi&&this.type===Xi,W=_===Xi&&this.type!==Xi;for(let re=0,j=E.length;re<j;re++){const ce=E[re],X=ce.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",ce,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;s.copy(X.mapSize);const _e=X.getFrameExtents();if(s.multiply(_e),l.copy(X.mapSize),(s.x>p||s.y>p)&&(s.x>p&&(l.x=Math.floor(p/_e.x),s.x=l.x*_e.x,X.mapSize.x=l.x),s.y>p&&(l.y=Math.floor(p/_e.y),s.y=l.y*_e.y,X.mapSize.y=l.y)),X.map===null||Y===!0||W===!0){const se=this.type!==Xi?{minFilter:ci,magFilter:ci}:{};X.map!==null&&X.map.dispose(),X.map=new ws(s.x,s.y,se),X.map.texture.name=ce.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const T=X.getViewportCount();for(let se=0;se<T;se++){const Ee=X.getViewport(se);c.set(l.x*Ee.x,l.y*Ee.y,l.x*Ee.z,l.y*Ee.w),J.viewport(c),X.updateMatrices(ce,se),i=X.getFrustum(),k(N,H,X.camera,ce,this.type)}X.isPointLightShadow!==!0&&this.type===Xi&&R(X,H),X.needsUpdate=!1}_=this.type,w.needsUpdate=!1,n.setRenderTarget(C,D,F)};function R(E,N){const H=e.update(S);y.defines.VSM_SAMPLES!==E.blurSamples&&(y.defines.VSM_SAMPLES=E.blurSamples,b.defines.VSM_SAMPLES=E.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new ws(s.x,s.y)),y.uniforms.shadow_pass.value=E.map.texture,y.uniforms.resolution.value=E.mapSize,y.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(N,null,H,y,S,null),b.uniforms.shadow_pass.value=E.mapPass.texture,b.uniforms.resolution.value=E.mapSize,b.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(N,null,H,b,S,null)}function A(E,N,H,C){let D=null;const F=H.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(F!==void 0)D=F;else if(D=H.isPointLight===!0?f:h,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const J=D.uuid,Y=N.uuid;let W=d[J];W===void 0&&(W={},d[J]=W);let re=W[Y];re===void 0&&(re=D.clone(),W[Y]=re,N.addEventListener("dispose",U)),D=re}if(D.visible=N.visible,D.wireframe=N.wireframe,C===Xi?D.side=N.shadowSide!==null?N.shadowSide:N.side:D.side=N.shadowSide!==null?N.shadowSide:g[N.side],D.alphaMap=N.alphaMap,D.alphaTest=N.alphaTest,D.map=N.map,D.clipShadows=N.clipShadows,D.clippingPlanes=N.clippingPlanes,D.clipIntersection=N.clipIntersection,D.displacementMap=N.displacementMap,D.displacementScale=N.displacementScale,D.displacementBias=N.displacementBias,D.wireframeLinewidth=N.wireframeLinewidth,D.linewidth=N.linewidth,H.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const J=n.properties.get(D);J.light=H}return D}function k(E,N,H,C,D){if(E.visible===!1)return;if(E.layers.test(N.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&D===Xi)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,E.matrixWorld);const Y=e.update(E),W=E.material;if(Array.isArray(W)){const re=Y.groups;for(let j=0,ce=re.length;j<ce;j++){const X=re[j],_e=W[X.materialIndex];if(_e&&_e.visible){const T=A(E,_e,C,D);E.onBeforeShadow(n,E,N,H,Y,T,X),n.renderBufferDirect(H,null,Y,T,E,X),E.onAfterShadow(n,E,N,H,Y,T,X)}}}else if(W.visible){const re=A(E,W,C,D);E.onBeforeShadow(n,E,N,H,Y,re,null),n.renderBufferDirect(H,null,Y,re,E,null),E.onAfterShadow(n,E,N,H,Y,re,null)}}const J=E.children;for(let Y=0,W=J.length;Y<W;Y++)k(J[Y],N,H,C,D)}function U(E){E.target.removeEventListener("dispose",U);for(const H in d){const C=d[H],D=E.target.uuid;D in C&&(C[D].dispose(),delete C[D])}}}const y5={[nm]:rm,[im]:om,[am]:lm,[Io]:sm,[rm]:nm,[om]:im,[lm]:am,[sm]:Io};function b5(n,e){function t(){let $=!1;const qe=new on;let ye=null;const Me=new on(0,0,0,0);return{setMask:function(He){ye!==He&&!$&&(n.colorMask(He,He,He,He),ye=He)},setLocked:function(He){$=He},setClear:function(He,Ve,bt,un,Tn){Tn===!0&&(He*=un,Ve*=un,bt*=un),qe.set(He,Ve,bt,un),Me.equals(qe)===!1&&(n.clearColor(He,Ve,bt,un),Me.copy(qe))},reset:function(){$=!1,ye=null,Me.set(-1,0,0,0)}}}function i(){let $=!1,qe=!1,ye=null,Me=null,He=null;return{setReversed:function(Ve){if(qe!==Ve){const bt=e.get("EXT_clip_control");qe?bt.clipControlEXT(bt.LOWER_LEFT_EXT,bt.ZERO_TO_ONE_EXT):bt.clipControlEXT(bt.LOWER_LEFT_EXT,bt.NEGATIVE_ONE_TO_ONE_EXT);const un=He;He=null,this.setClear(un)}qe=Ve},getReversed:function(){return qe},setTest:function(Ve){Ve?Ie(n.DEPTH_TEST):Ne(n.DEPTH_TEST)},setMask:function(Ve){ye!==Ve&&!$&&(n.depthMask(Ve),ye=Ve)},setFunc:function(Ve){if(qe&&(Ve=y5[Ve]),Me!==Ve){switch(Ve){case nm:n.depthFunc(n.NEVER);break;case rm:n.depthFunc(n.ALWAYS);break;case im:n.depthFunc(n.LESS);break;case Io:n.depthFunc(n.LEQUAL);break;case am:n.depthFunc(n.EQUAL);break;case sm:n.depthFunc(n.GEQUAL);break;case om:n.depthFunc(n.GREATER);break;case lm:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Me=Ve}},setLocked:function(Ve){$=Ve},setClear:function(Ve){He!==Ve&&(qe&&(Ve=1-Ve),n.clearDepth(Ve),He=Ve)},reset:function(){$=!1,ye=null,Me=null,He=null,qe=!1}}}function s(){let $=!1,qe=null,ye=null,Me=null,He=null,Ve=null,bt=null,un=null,Tn=null;return{setTest:function(G){$||(G?Ie(n.STENCIL_TEST):Ne(n.STENCIL_TEST))},setMask:function(G){qe!==G&&!$&&(n.stencilMask(G),qe=G)},setFunc:function(G,ne,fe){(ye!==G||Me!==ne||He!==fe)&&(n.stencilFunc(G,ne,fe),ye=G,Me=ne,He=fe)},setOp:function(G,ne,fe){(Ve!==G||bt!==ne||un!==fe)&&(n.stencilOp(G,ne,fe),Ve=G,bt=ne,un=fe)},setLocked:function(G){$=G},setClear:function(G){Tn!==G&&(n.clearStencil(G),Tn=G)},reset:function(){$=!1,qe=null,ye=null,Me=null,He=null,Ve=null,bt=null,un=null,Tn=null}}}const l=new t,c=new i,h=new s,f=new WeakMap,d=new WeakMap;let p={},g={},y=new WeakMap,b=[],x=null,S=!1,w=null,_=null,R=null,A=null,k=null,U=null,E=null,N=new Ut(0,0,0),H=0,C=!1,D=null,F=null,J=null,Y=null,W=null;const re=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,ce=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(ce=parseFloat(/^WebGL (\d)/.exec(X)[1]),j=ce>=1):X.indexOf("OpenGL ES")!==-1&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),j=ce>=2);let _e=null,T={};const se=n.getParameter(n.SCISSOR_BOX),Ee=n.getParameter(n.VIEWPORT),O=new on().fromArray(se),Q=new on().fromArray(Ee);function be($,qe,ye,Me){const He=new Uint8Array(4),Ve=n.createTexture();n.bindTexture($,Ve),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let bt=0;bt<ye;bt++)$===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY?n.texImage3D(qe,0,n.RGBA,1,1,Me,0,n.RGBA,n.UNSIGNED_BYTE,He):n.texImage2D(qe+bt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,He);return Ve}const ve={};ve[n.TEXTURE_2D]=be(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=be(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[n.TEXTURE_2D_ARRAY]=be(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=be(n.TEXTURE_3D,n.TEXTURE_3D,1,1),l.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Ie(n.DEPTH_TEST),c.setFunc(Io),ht(!1),yt(Mv),Ie(n.CULL_FACE),q(La);function Ie($){p[$]!==!0&&(n.enable($),p[$]=!0)}function Ne($){p[$]!==!1&&(n.disable($),p[$]=!1)}function rt($,qe){return g[$]!==qe?(n.bindFramebuffer($,qe),g[$]=qe,$===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=qe),$===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=qe),!0):!1}function Ue($,qe){let ye=b,Me=!1;if($){ye=y.get(qe),ye===void 0&&(ye=[],y.set(qe,ye));const He=$.textures;if(ye.length!==He.length||ye[0]!==n.COLOR_ATTACHMENT0){for(let Ve=0,bt=He.length;Ve<bt;Ve++)ye[Ve]=n.COLOR_ATTACHMENT0+Ve;ye.length=He.length,Me=!0}}else ye[0]!==n.BACK&&(ye[0]=n.BACK,Me=!0);Me&&n.drawBuffers(ye)}function Tt($){return x!==$?(n.useProgram($),x=$,!0):!1}const Ft={[fs]:n.FUNC_ADD,[yL]:n.FUNC_SUBTRACT,[bL]:n.FUNC_REVERSE_SUBTRACT};Ft[vL]=n.MIN,Ft[_L]=n.MAX;const xt={[wL]:n.ZERO,[xL]:n.ONE,[SL]:n.SRC_COLOR,[em]:n.SRC_ALPHA,[DL]:n.SRC_ALPHA_SATURATE,[AL]:n.DST_COLOR,[EL]:n.DST_ALPHA,[TL]:n.ONE_MINUS_SRC_COLOR,[tm]:n.ONE_MINUS_SRC_ALPHA,[CL]:n.ONE_MINUS_DST_COLOR,[ML]:n.ONE_MINUS_DST_ALPHA,[RL]:n.CONSTANT_COLOR,[kL]:n.ONE_MINUS_CONSTANT_COLOR,[PL]:n.CONSTANT_ALPHA,[LL]:n.ONE_MINUS_CONSTANT_ALPHA};function q($,qe,ye,Me,He,Ve,bt,un,Tn,G){if($===La){S===!0&&(Ne(n.BLEND),S=!1);return}if(S===!1&&(Ie(n.BLEND),S=!0),$!==gL){if($!==w||G!==C){if((_!==fs||k!==fs)&&(n.blendEquation(n.FUNC_ADD),_=fs,k=fs),G)switch($){case Co:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Lo:n.blendFunc(n.ONE,n.ONE);break;case Av:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cv:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Co:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Lo:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Av:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cv:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}R=null,A=null,U=null,E=null,N.set(0,0,0),H=0,w=$,C=G}return}He=He||qe,Ve=Ve||ye,bt=bt||Me,(qe!==_||He!==k)&&(n.blendEquationSeparate(Ft[qe],Ft[He]),_=qe,k=He),(ye!==R||Me!==A||Ve!==U||bt!==E)&&(n.blendFuncSeparate(xt[ye],xt[Me],xt[Ve],xt[bt]),R=ye,A=Me,U=Ve,E=bt),(un.equals(N)===!1||Tn!==H)&&(n.blendColor(un.r,un.g,un.b,Tn),N.copy(un),H=Tn),w=$,C=!1}function mn($,qe){$.side===Qi?Ne(n.CULL_FACE):Ie(n.CULL_FACE);let ye=$.side===hr;qe&&(ye=!ye),ht(ye),$.blending===Co&&$.transparent===!1?q(La):q($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),c.setFunc($.depthFunc),c.setTest($.depthTest),c.setMask($.depthWrite),l.setMask($.colorWrite);const Me=$.stencilWrite;h.setTest(Me),Me&&(h.setMask($.stencilWriteMask),h.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),h.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),jt($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?Ie(n.SAMPLE_ALPHA_TO_COVERAGE):Ne(n.SAMPLE_ALPHA_TO_COVERAGE)}function ht($){D!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),D=$)}function yt($){$!==fL?(Ie(n.CULL_FACE),$!==F&&($===Mv?n.cullFace(n.BACK):$===pL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ne(n.CULL_FACE),F=$}function st($){$!==J&&(j&&n.lineWidth($),J=$)}function jt($,qe,ye){$?(Ie(n.POLYGON_OFFSET_FILL),(Y!==qe||W!==ye)&&(n.polygonOffset(qe,ye),Y=qe,W=ye)):Ne(n.POLYGON_OFFSET_FILL)}function it($){$?Ie(n.SCISSOR_TEST):Ne(n.SCISSOR_TEST)}function z($){$===void 0&&($=n.TEXTURE0+re-1),_e!==$&&(n.activeTexture($),_e=$)}function P($,qe,ye){ye===void 0&&(_e===null?ye=n.TEXTURE0+re-1:ye=_e);let Me=T[ye];Me===void 0&&(Me={type:void 0,texture:void 0},T[ye]=Me),(Me.type!==$||Me.texture!==qe)&&(_e!==ye&&(n.activeTexture(ye),_e=ye),n.bindTexture($,qe||ve[$]),Me.type=$,Me.texture=qe)}function ue(){const $=T[_e];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function Se(){try{n.compressedTexImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function De(){try{n.compressedTexImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function V(){try{n.texSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function pe(){try{n.texSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function xe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Re(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Je(){try{n.texStorage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ce(){try{n.texStorage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function je(){try{n.texImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ze(){try{n.texImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ke($){O.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),O.copy($))}function Ye($){Q.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),Q.copy($))}function ot($,qe){let ye=d.get(qe);ye===void 0&&(ye=new WeakMap,d.set(qe,ye));let Me=ye.get($);Me===void 0&&(Me=n.getUniformBlockIndex(qe,$.name),ye.set($,Me))}function $e($,qe){const Me=d.get(qe).get($);f.get(qe)!==Me&&(n.uniformBlockBinding(qe,Me,$.__bindingPointIndex),f.set(qe,Me))}function Rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),c.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},_e=null,T={},g={},y=new WeakMap,b=[],x=null,S=!1,w=null,_=null,R=null,A=null,k=null,U=null,E=null,N=new Ut(0,0,0),H=0,C=!1,D=null,F=null,J=null,Y=null,W=null,O.set(0,0,n.canvas.width,n.canvas.height),Q.set(0,0,n.canvas.width,n.canvas.height),l.reset(),c.reset(),h.reset()}return{buffers:{color:l,depth:c,stencil:h},enable:Ie,disable:Ne,bindFramebuffer:rt,drawBuffers:Ue,useProgram:Tt,setBlending:q,setMaterial:mn,setFlipSided:ht,setCullFace:yt,setLineWidth:st,setPolygonOffset:jt,setScissorTest:it,activeTexture:z,bindTexture:P,unbindTexture:ue,compressedTexImage2D:Se,compressedTexImage3D:De,texImage2D:je,texImage3D:Ze,updateUBOMapping:ot,uniformBlockBinding:$e,texStorage2D:Je,texStorage3D:Ce,texSubImage2D:V,texSubImage3D:pe,compressedTexSubImage2D:xe,compressedTexSubImage3D:Re,scissor:Ke,viewport:Ye,reset:Rt}}function v5(n,e,t,i,s,l,c){const h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Et,p=new WeakMap;let g;const y=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(z,P){return b?new OffscreenCanvas(z,P):hc("canvas")}function S(z,P,ue){let Se=1;const De=it(z);if((De.width>ue||De.height>ue)&&(Se=ue/Math.max(De.width,De.height)),Se<1)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap||typeof VideoFrame<"u"&&z instanceof VideoFrame){const V=Math.floor(Se*De.width),pe=Math.floor(Se*De.height);g===void 0&&(g=x(V,pe));const xe=P?x(V,pe):g;return xe.width=V,xe.height=pe,xe.getContext("2d").drawImage(z,0,0,V,pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+V+"x"+pe+")."),xe}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),z;return z}function w(z){return z.generateMipmaps}function _(z){n.generateMipmap(z)}function R(z){return z.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:z.isWebGL3DRenderTarget?n.TEXTURE_3D:z.isWebGLArrayRenderTarget||z.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function A(z,P,ue,Se,De=!1){if(z!==null){if(n[z]!==void 0)return n[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let V=P;if(P===n.RED&&(ue===n.FLOAT&&(V=n.R32F),ue===n.HALF_FLOAT&&(V=n.R16F),ue===n.UNSIGNED_BYTE&&(V=n.R8)),P===n.RED_INTEGER&&(ue===n.UNSIGNED_BYTE&&(V=n.R8UI),ue===n.UNSIGNED_SHORT&&(V=n.R16UI),ue===n.UNSIGNED_INT&&(V=n.R32UI),ue===n.BYTE&&(V=n.R8I),ue===n.SHORT&&(V=n.R16I),ue===n.INT&&(V=n.R32I)),P===n.RG&&(ue===n.FLOAT&&(V=n.RG32F),ue===n.HALF_FLOAT&&(V=n.RG16F),ue===n.UNSIGNED_BYTE&&(V=n.RG8)),P===n.RG_INTEGER&&(ue===n.UNSIGNED_BYTE&&(V=n.RG8UI),ue===n.UNSIGNED_SHORT&&(V=n.RG16UI),ue===n.UNSIGNED_INT&&(V=n.RG32UI),ue===n.BYTE&&(V=n.RG8I),ue===n.SHORT&&(V=n.RG16I),ue===n.INT&&(V=n.RG32I)),P===n.RGB_INTEGER&&(ue===n.UNSIGNED_BYTE&&(V=n.RGB8UI),ue===n.UNSIGNED_SHORT&&(V=n.RGB16UI),ue===n.UNSIGNED_INT&&(V=n.RGB32UI),ue===n.BYTE&&(V=n.RGB8I),ue===n.SHORT&&(V=n.RGB16I),ue===n.INT&&(V=n.RGB32I)),P===n.RGBA_INTEGER&&(ue===n.UNSIGNED_BYTE&&(V=n.RGBA8UI),ue===n.UNSIGNED_SHORT&&(V=n.RGBA16UI),ue===n.UNSIGNED_INT&&(V=n.RGBA32UI),ue===n.BYTE&&(V=n.RGBA8I),ue===n.SHORT&&(V=n.RGBA16I),ue===n.INT&&(V=n.RGBA32I)),P===n.RGB&&ue===n.UNSIGNED_INT_5_9_9_9_REV&&(V=n.RGB9_E5),P===n.RGBA){const pe=De?wh:Zt.getTransfer(Se);ue===n.FLOAT&&(V=n.RGBA32F),ue===n.HALF_FLOAT&&(V=n.RGBA16F),ue===n.UNSIGNED_BYTE&&(V=pe===an?n.SRGB8_ALPHA8:n.RGBA8),ue===n.UNSIGNED_SHORT_4_4_4_4&&(V=n.RGBA4),ue===n.UNSIGNED_SHORT_5_5_5_1&&(V=n.RGB5_A1)}return(V===n.R16F||V===n.R32F||V===n.RG16F||V===n.RG32F||V===n.RGBA16F||V===n.RGBA32F)&&e.get("EXT_color_buffer_float"),V}function k(z,P){let ue;return z?P===null||P===vs||P===No?ue=n.DEPTH24_STENCIL8:P===Zi?ue=n.DEPTH32F_STENCIL8:P===uc&&(ue=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):P===null||P===vs||P===No?ue=n.DEPTH_COMPONENT24:P===Zi?ue=n.DEPTH_COMPONENT32F:P===uc&&(ue=n.DEPTH_COMPONENT16),ue}function U(z,P){return w(z)===!0||z.isFramebufferTexture&&z.minFilter!==ci&&z.minFilter!==wi?Math.log2(Math.max(P.width,P.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?P.mipmaps.length:1}function E(z){const P=z.target;P.removeEventListener("dispose",E),H(P),P.isVideoTexture&&p.delete(P)}function N(z){const P=z.target;P.removeEventListener("dispose",N),D(P)}function H(z){const P=i.get(z);if(P.__webglInit===void 0)return;const ue=z.source,Se=y.get(ue);if(Se){const De=Se[P.__cacheKey];De.usedTimes--,De.usedTimes===0&&C(z),Object.keys(Se).length===0&&y.delete(ue)}i.remove(z)}function C(z){const P=i.get(z);n.deleteTexture(P.__webglTexture);const ue=z.source,Se=y.get(ue);delete Se[P.__cacheKey],c.memory.textures--}function D(z){const P=i.get(z);if(z.depthTexture&&(z.depthTexture.dispose(),i.remove(z.depthTexture)),z.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(P.__webglFramebuffer[Se]))for(let De=0;De<P.__webglFramebuffer[Se].length;De++)n.deleteFramebuffer(P.__webglFramebuffer[Se][De]);else n.deleteFramebuffer(P.__webglFramebuffer[Se]);P.__webglDepthbuffer&&n.deleteRenderbuffer(P.__webglDepthbuffer[Se])}else{if(Array.isArray(P.__webglFramebuffer))for(let Se=0;Se<P.__webglFramebuffer.length;Se++)n.deleteFramebuffer(P.__webglFramebuffer[Se]);else n.deleteFramebuffer(P.__webglFramebuffer);if(P.__webglDepthbuffer&&n.deleteRenderbuffer(P.__webglDepthbuffer),P.__webglMultisampledFramebuffer&&n.deleteFramebuffer(P.__webglMultisampledFramebuffer),P.__webglColorRenderbuffer)for(let Se=0;Se<P.__webglColorRenderbuffer.length;Se++)P.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(P.__webglColorRenderbuffer[Se]);P.__webglDepthRenderbuffer&&n.deleteRenderbuffer(P.__webglDepthRenderbuffer)}const ue=z.textures;for(let Se=0,De=ue.length;Se<De;Se++){const V=i.get(ue[Se]);V.__webglTexture&&(n.deleteTexture(V.__webglTexture),c.memory.textures--),i.remove(ue[Se])}i.remove(z)}let F=0;function J(){F=0}function Y(){const z=F;return z>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+s.maxTextures),F+=1,z}function W(z){const P=[];return P.push(z.wrapS),P.push(z.wrapT),P.push(z.wrapR||0),P.push(z.magFilter),P.push(z.minFilter),P.push(z.anisotropy),P.push(z.internalFormat),P.push(z.format),P.push(z.type),P.push(z.generateMipmaps),P.push(z.premultiplyAlpha),P.push(z.flipY),P.push(z.unpackAlignment),P.push(z.colorSpace),P.join()}function re(z,P){const ue=i.get(z);if(z.isVideoTexture&&st(z),z.isRenderTargetTexture===!1&&z.version>0&&ue.__version!==z.version){const Se=z.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Q(ue,z,P);return}}t.bindTexture(n.TEXTURE_2D,ue.__webglTexture,n.TEXTURE0+P)}function j(z,P){const ue=i.get(z);if(z.version>0&&ue.__version!==z.version){Q(ue,z,P);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ue.__webglTexture,n.TEXTURE0+P)}function ce(z,P){const ue=i.get(z);if(z.version>0&&ue.__version!==z.version){Q(ue,z,P);return}t.bindTexture(n.TEXTURE_3D,ue.__webglTexture,n.TEXTURE0+P)}function X(z,P){const ue=i.get(z);if(z.version>0&&ue.__version!==z.version){be(ue,z,P);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture,n.TEXTURE0+P)}const _e={[hm]:n.REPEAT,[gs]:n.CLAMP_TO_EDGE,[dm]:n.MIRRORED_REPEAT},T={[ci]:n.NEAREST,[VL]:n.NEAREST_MIPMAP_NEAREST,[Du]:n.NEAREST_MIPMAP_LINEAR,[wi]:n.LINEAR,[rp]:n.LINEAR_MIPMAP_NEAREST,[ys]:n.LINEAR_MIPMAP_LINEAR},se={[WL]:n.NEVER,[JL]:n.ALWAYS,[YL]:n.LESS,[uw]:n.LEQUAL,[XL]:n.EQUAL,[KL]:n.GEQUAL,[QL]:n.GREATER,[ZL]:n.NOTEQUAL};function Ee(z,P){if(P.type===Zi&&e.has("OES_texture_float_linear")===!1&&(P.magFilter===wi||P.magFilter===rp||P.magFilter===Du||P.magFilter===ys||P.minFilter===wi||P.minFilter===rp||P.minFilter===Du||P.minFilter===ys)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(z,n.TEXTURE_WRAP_S,_e[P.wrapS]),n.texParameteri(z,n.TEXTURE_WRAP_T,_e[P.wrapT]),(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)&&n.texParameteri(z,n.TEXTURE_WRAP_R,_e[P.wrapR]),n.texParameteri(z,n.TEXTURE_MAG_FILTER,T[P.magFilter]),n.texParameteri(z,n.TEXTURE_MIN_FILTER,T[P.minFilter]),P.compareFunction&&(n.texParameteri(z,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(z,n.TEXTURE_COMPARE_FUNC,se[P.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(P.magFilter===ci||P.minFilter!==Du&&P.minFilter!==ys||P.type===Zi&&e.has("OES_texture_float_linear")===!1)return;if(P.anisotropy>1||i.get(P).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");n.texParameterf(z,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,s.getMaxAnisotropy())),i.get(P).__currentAnisotropy=P.anisotropy}}}function O(z,P){let ue=!1;z.__webglInit===void 0&&(z.__webglInit=!0,P.addEventListener("dispose",E));const Se=P.source;let De=y.get(Se);De===void 0&&(De={},y.set(Se,De));const V=W(P);if(V!==z.__cacheKey){De[V]===void 0&&(De[V]={texture:n.createTexture(),usedTimes:0},c.memory.textures++,ue=!0),De[V].usedTimes++;const pe=De[z.__cacheKey];pe!==void 0&&(De[z.__cacheKey].usedTimes--,pe.usedTimes===0&&C(P)),z.__cacheKey=V,z.__webglTexture=De[V].texture}return ue}function Q(z,P,ue){let Se=n.TEXTURE_2D;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),P.isData3DTexture&&(Se=n.TEXTURE_3D);const De=O(z,P),V=P.source;t.bindTexture(Se,z.__webglTexture,n.TEXTURE0+ue);const pe=i.get(V);if(V.version!==pe.__version||De===!0){t.activeTexture(n.TEXTURE0+ue);const xe=Zt.getPrimaries(Zt.workingColorSpace),Re=P.colorSpace===Pa?null:Zt.getPrimaries(P.colorSpace),Je=P.colorSpace===Pa||xe===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let Ce=S(P.image,!1,s.maxTextureSize);Ce=jt(P,Ce);const je=l.convert(P.format,P.colorSpace),Ze=l.convert(P.type);let Ke=A(P.internalFormat,je,Ze,P.colorSpace,P.isVideoTexture);Ee(Se,P);let Ye;const ot=P.mipmaps,$e=P.isVideoTexture!==!0,Rt=pe.__version===void 0||De===!0,$=V.dataReady,qe=U(P,Ce);if(P.isDepthTexture)Ke=k(P.format===Fo,P.type),Rt&&($e?t.texStorage2D(n.TEXTURE_2D,1,Ke,Ce.width,Ce.height):t.texImage2D(n.TEXTURE_2D,0,Ke,Ce.width,Ce.height,0,je,Ze,null));else if(P.isDataTexture)if(ot.length>0){$e&&Rt&&t.texStorage2D(n.TEXTURE_2D,qe,Ke,ot[0].width,ot[0].height);for(let ye=0,Me=ot.length;ye<Me;ye++)Ye=ot[ye],$e?$&&t.texSubImage2D(n.TEXTURE_2D,ye,0,0,Ye.width,Ye.height,je,Ze,Ye.data):t.texImage2D(n.TEXTURE_2D,ye,Ke,Ye.width,Ye.height,0,je,Ze,Ye.data);P.generateMipmaps=!1}else $e?(Rt&&t.texStorage2D(n.TEXTURE_2D,qe,Ke,Ce.width,Ce.height),$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ce.width,Ce.height,je,Ze,Ce.data)):t.texImage2D(n.TEXTURE_2D,0,Ke,Ce.width,Ce.height,0,je,Ze,Ce.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){$e&&Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,qe,Ke,ot[0].width,ot[0].height,Ce.depth);for(let ye=0,Me=ot.length;ye<Me;ye++)if(Ye=ot[ye],P.format!==li)if(je!==null)if($e){if($)if(P.layerUpdates.size>0){const He=l1(Ye.width,Ye.height,P.format,P.type);for(const Ve of P.layerUpdates){const bt=Ye.data.subarray(Ve*He/Ye.data.BYTES_PER_ELEMENT,(Ve+1)*He/Ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ye,0,0,Ve,Ye.width,Ye.height,1,je,bt)}P.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ye,0,0,0,Ye.width,Ye.height,Ce.depth,je,Ye.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ye,Ke,Ye.width,Ye.height,Ce.depth,0,Ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $e?$&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ye,0,0,0,Ye.width,Ye.height,Ce.depth,je,Ze,Ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ye,Ke,Ye.width,Ye.height,Ce.depth,0,je,Ze,Ye.data)}else{$e&&Rt&&t.texStorage2D(n.TEXTURE_2D,qe,Ke,ot[0].width,ot[0].height);for(let ye=0,Me=ot.length;ye<Me;ye++)Ye=ot[ye],P.format!==li?je!==null?$e?$&&t.compressedTexSubImage2D(n.TEXTURE_2D,ye,0,0,Ye.width,Ye.height,je,Ye.data):t.compressedTexImage2D(n.TEXTURE_2D,ye,Ke,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?$&&t.texSubImage2D(n.TEXTURE_2D,ye,0,0,Ye.width,Ye.height,je,Ze,Ye.data):t.texImage2D(n.TEXTURE_2D,ye,Ke,Ye.width,Ye.height,0,je,Ze,Ye.data)}else if(P.isDataArrayTexture)if($e){if(Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,qe,Ke,Ce.width,Ce.height,Ce.depth),$)if(P.layerUpdates.size>0){const ye=l1(Ce.width,Ce.height,P.format,P.type);for(const Me of P.layerUpdates){const He=Ce.data.subarray(Me*ye/Ce.data.BYTES_PER_ELEMENT,(Me+1)*ye/Ce.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Me,Ce.width,Ce.height,1,je,Ze,He)}P.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,je,Ze,Ce.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ke,Ce.width,Ce.height,Ce.depth,0,je,Ze,Ce.data);else if(P.isData3DTexture)$e?(Rt&&t.texStorage3D(n.TEXTURE_3D,qe,Ke,Ce.width,Ce.height,Ce.depth),$&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,je,Ze,Ce.data)):t.texImage3D(n.TEXTURE_3D,0,Ke,Ce.width,Ce.height,Ce.depth,0,je,Ze,Ce.data);else if(P.isFramebufferTexture){if(Rt)if($e)t.texStorage2D(n.TEXTURE_2D,qe,Ke,Ce.width,Ce.height);else{let ye=Ce.width,Me=Ce.height;for(let He=0;He<qe;He++)t.texImage2D(n.TEXTURE_2D,He,Ke,ye,Me,0,je,Ze,null),ye>>=1,Me>>=1}}else if(ot.length>0){if($e&&Rt){const ye=it(ot[0]);t.texStorage2D(n.TEXTURE_2D,qe,Ke,ye.width,ye.height)}for(let ye=0,Me=ot.length;ye<Me;ye++)Ye=ot[ye],$e?$&&t.texSubImage2D(n.TEXTURE_2D,ye,0,0,je,Ze,Ye):t.texImage2D(n.TEXTURE_2D,ye,Ke,je,Ze,Ye);P.generateMipmaps=!1}else if($e){if(Rt){const ye=it(Ce);t.texStorage2D(n.TEXTURE_2D,qe,Ke,ye.width,ye.height)}$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,je,Ze,Ce)}else t.texImage2D(n.TEXTURE_2D,0,Ke,je,Ze,Ce);w(P)&&_(Se),pe.__version=V.version,P.onUpdate&&P.onUpdate(P)}z.__version=P.version}function be(z,P,ue){if(P.image.length!==6)return;const Se=O(z,P),De=P.source;t.bindTexture(n.TEXTURE_CUBE_MAP,z.__webglTexture,n.TEXTURE0+ue);const V=i.get(De);if(De.version!==V.__version||Se===!0){t.activeTexture(n.TEXTURE0+ue);const pe=Zt.getPrimaries(Zt.workingColorSpace),xe=P.colorSpace===Pa?null:Zt.getPrimaries(P.colorSpace),Re=P.colorSpace===Pa||pe===xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Re);const Je=P.isCompressedTexture||P.image[0].isCompressedTexture,Ce=P.image[0]&&P.image[0].isDataTexture,je=[];for(let Me=0;Me<6;Me++)!Je&&!Ce?je[Me]=S(P.image[Me],!0,s.maxCubemapSize):je[Me]=Ce?P.image[Me].image:P.image[Me],je[Me]=jt(P,je[Me]);const Ze=je[0],Ke=l.convert(P.format,P.colorSpace),Ye=l.convert(P.type),ot=A(P.internalFormat,Ke,Ye,P.colorSpace),$e=P.isVideoTexture!==!0,Rt=V.__version===void 0||Se===!0,$=De.dataReady;let qe=U(P,Ze);Ee(n.TEXTURE_CUBE_MAP,P);let ye;if(Je){$e&&Rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,qe,ot,Ze.width,Ze.height);for(let Me=0;Me<6;Me++){ye=je[Me].mipmaps;for(let He=0;He<ye.length;He++){const Ve=ye[He];P.format!==li?Ke!==null?$e?$&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He,0,0,Ve.width,Ve.height,Ke,Ve.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He,ot,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He,0,0,Ve.width,Ve.height,Ke,Ye,Ve.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He,ot,Ve.width,Ve.height,0,Ke,Ye,Ve.data)}}}else{if(ye=P.mipmaps,$e&&Rt){ye.length>0&&qe++;const Me=it(je[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,qe,ot,Me.width,Me.height)}for(let Me=0;Me<6;Me++)if(Ce){$e?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,je[Me].width,je[Me].height,Ke,Ye,je[Me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,ot,je[Me].width,je[Me].height,0,Ke,Ye,je[Me].data);for(let He=0;He<ye.length;He++){const bt=ye[He].image[Me].image;$e?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He+1,0,0,bt.width,bt.height,Ke,Ye,bt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He+1,ot,bt.width,bt.height,0,Ke,Ye,bt.data)}}else{$e?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Ke,Ye,je[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,ot,Ke,Ye,je[Me]);for(let He=0;He<ye.length;He++){const Ve=ye[He];$e?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He+1,0,0,Ke,Ye,Ve.image[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,He+1,ot,Ke,Ye,Ve.image[Me])}}}w(P)&&_(n.TEXTURE_CUBE_MAP),V.__version=De.version,P.onUpdate&&P.onUpdate(P)}z.__version=P.version}function ve(z,P,ue,Se,De,V){const pe=l.convert(ue.format,ue.colorSpace),xe=l.convert(ue.type),Re=A(ue.internalFormat,pe,xe,ue.colorSpace),Je=i.get(P),Ce=i.get(ue);if(Ce.__renderTarget=P,!Je.__hasExternalTextures){const je=Math.max(1,P.width>>V),Ze=Math.max(1,P.height>>V);De===n.TEXTURE_3D||De===n.TEXTURE_2D_ARRAY?t.texImage3D(De,V,Re,je,Ze,P.depth,0,pe,xe,null):t.texImage2D(De,V,Re,je,Ze,0,pe,xe,null)}t.bindFramebuffer(n.FRAMEBUFFER,z),yt(P)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,De,Ce.__webglTexture,0,ht(P)):(De===n.TEXTURE_2D||De>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,De,Ce.__webglTexture,V),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ie(z,P,ue){if(n.bindRenderbuffer(n.RENDERBUFFER,z),P.depthBuffer){const Se=P.depthTexture,De=Se&&Se.isDepthTexture?Se.type:null,V=k(P.stencilBuffer,De),pe=P.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=ht(P);yt(P)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,xe,V,P.width,P.height):ue?n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,V,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,V,P.width,P.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,z)}else{const Se=P.textures;for(let De=0;De<Se.length;De++){const V=Se[De],pe=l.convert(V.format,V.colorSpace),xe=l.convert(V.type),Re=A(V.internalFormat,pe,xe,V.colorSpace),Je=ht(P);ue&&yt(P)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,Re,P.width,P.height):yt(P)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,Re,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,Re,P.width,P.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ne(z,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,z),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Se=i.get(P.depthTexture);Se.__renderTarget=P,(!Se.__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),re(P.depthTexture,0);const De=Se.__webglTexture,V=ht(P);if(P.depthTexture.format===Do)yt(P)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,De,0,V):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,De,0);else if(P.depthTexture.format===Fo)yt(P)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,De,0,V):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function rt(z){const P=i.get(z),ue=z.isWebGLCubeRenderTarget===!0;if(P.__boundDepthTexture!==z.depthTexture){const Se=z.depthTexture;if(P.__depthDisposeCallback&&P.__depthDisposeCallback(),Se){const De=()=>{delete P.__boundDepthTexture,delete P.__depthDisposeCallback,Se.removeEventListener("dispose",De)};Se.addEventListener("dispose",De),P.__depthDisposeCallback=De}P.__boundDepthTexture=Se}if(z.depthTexture&&!P.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");Ne(P.__webglFramebuffer,z)}else if(ue){P.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)if(t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer[Se]),P.__webglDepthbuffer[Se]===void 0)P.__webglDepthbuffer[Se]=n.createRenderbuffer(),Ie(P.__webglDepthbuffer[Se],z,!1);else{const De=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,V=P.__webglDepthbuffer[Se];n.bindRenderbuffer(n.RENDERBUFFER,V),n.framebufferRenderbuffer(n.FRAMEBUFFER,De,n.RENDERBUFFER,V)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer),P.__webglDepthbuffer===void 0)P.__webglDepthbuffer=n.createRenderbuffer(),Ie(P.__webglDepthbuffer,z,!1);else{const Se=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,De=P.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,De),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,De)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(z,P,ue){const Se=i.get(z);P!==void 0&&ve(Se.__webglFramebuffer,z,z.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ue!==void 0&&rt(z)}function Tt(z){const P=z.texture,ue=i.get(z),Se=i.get(P);z.addEventListener("dispose",N);const De=z.textures,V=z.isWebGLCubeRenderTarget===!0,pe=De.length>1;if(pe||(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=P.version,c.memory.textures++),V){ue.__webglFramebuffer=[];for(let xe=0;xe<6;xe++)if(P.mipmaps&&P.mipmaps.length>0){ue.__webglFramebuffer[xe]=[];for(let Re=0;Re<P.mipmaps.length;Re++)ue.__webglFramebuffer[xe][Re]=n.createFramebuffer()}else ue.__webglFramebuffer[xe]=n.createFramebuffer()}else{if(P.mipmaps&&P.mipmaps.length>0){ue.__webglFramebuffer=[];for(let xe=0;xe<P.mipmaps.length;xe++)ue.__webglFramebuffer[xe]=n.createFramebuffer()}else ue.__webglFramebuffer=n.createFramebuffer();if(pe)for(let xe=0,Re=De.length;xe<Re;xe++){const Je=i.get(De[xe]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),c.memory.textures++)}if(z.samples>0&&yt(z)===!1){ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let xe=0;xe<De.length;xe++){const Re=De[xe];ue.__webglColorRenderbuffer[xe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ue.__webglColorRenderbuffer[xe]);const Je=l.convert(Re.format,Re.colorSpace),Ce=l.convert(Re.type),je=A(Re.internalFormat,Je,Ce,Re.colorSpace,z.isXRRenderTarget===!0),Ze=ht(z);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,je,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.RENDERBUFFER,ue.__webglColorRenderbuffer[xe])}n.bindRenderbuffer(n.RENDERBUFFER,null),z.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),Ie(ue.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(V){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),Ee(n.TEXTURE_CUBE_MAP,P);for(let xe=0;xe<6;xe++)if(P.mipmaps&&P.mipmaps.length>0)for(let Re=0;Re<P.mipmaps.length;Re++)ve(ue.__webglFramebuffer[xe][Re],z,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Re);else ve(ue.__webglFramebuffer[xe],z,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0);w(P)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pe){for(let xe=0,Re=De.length;xe<Re;xe++){const Je=De[xe],Ce=i.get(Je);t.bindTexture(n.TEXTURE_2D,Ce.__webglTexture),Ee(n.TEXTURE_2D,Je),ve(ue.__webglFramebuffer,z,Je,n.COLOR_ATTACHMENT0+xe,n.TEXTURE_2D,0),w(Je)&&_(n.TEXTURE_2D)}t.unbindTexture()}else{let xe=n.TEXTURE_2D;if((z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(xe=z.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(xe,Se.__webglTexture),Ee(xe,P),P.mipmaps&&P.mipmaps.length>0)for(let Re=0;Re<P.mipmaps.length;Re++)ve(ue.__webglFramebuffer[Re],z,P,n.COLOR_ATTACHMENT0,xe,Re);else ve(ue.__webglFramebuffer,z,P,n.COLOR_ATTACHMENT0,xe,0);w(P)&&_(xe),t.unbindTexture()}z.depthBuffer&&rt(z)}function Ft(z){const P=z.textures;for(let ue=0,Se=P.length;ue<Se;ue++){const De=P[ue];if(w(De)){const V=R(z),pe=i.get(De).__webglTexture;t.bindTexture(V,pe),_(V),t.unbindTexture()}}}const xt=[],q=[];function mn(z){if(z.samples>0){if(yt(z)===!1){const P=z.textures,ue=z.width,Se=z.height;let De=n.COLOR_BUFFER_BIT;const V=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=i.get(z),xe=P.length>1;if(xe)for(let Re=0;Re<P.length;Re++)t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,pe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pe.__webglFramebuffer);for(let Re=0;Re<P.length;Re++){if(z.resolveDepthBuffer&&(z.depthBuffer&&(De|=n.DEPTH_BUFFER_BIT),z.stencilBuffer&&z.resolveStencilBuffer&&(De|=n.STENCIL_BUFFER_BIT)),xe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,pe.__webglColorRenderbuffer[Re]);const Je=i.get(P[Re]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Je,0)}n.blitFramebuffer(0,0,ue,Se,0,0,ue,Se,De,n.NEAREST),f===!0&&(xt.length=0,q.length=0,xt.push(n.COLOR_ATTACHMENT0+Re),z.depthBuffer&&z.resolveDepthBuffer===!1&&(xt.push(V),q.push(V),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),xe)for(let Re=0;Re<P.length;Re++){t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,pe.__webglColorRenderbuffer[Re]);const Je=i.get(P[Re]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,Je,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pe.__webglMultisampledFramebuffer)}else if(z.depthBuffer&&z.resolveDepthBuffer===!1&&f){const P=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[P])}}}function ht(z){return Math.min(s.maxSamples,z.samples)}function yt(z){const P=i.get(z);return z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&P.__useRenderToTexture!==!1}function st(z){const P=c.render.frame;p.get(z)!==P&&(p.set(z,P),z.update())}function jt(z,P){const ue=z.colorSpace,Se=z.format,De=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||ue!==_s&&ue!==Pa&&(Zt.getTransfer(ue)===an?(Se!==li||De!==$i)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),P}function it(z){return typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement?(d.width=z.naturalWidth||z.width,d.height=z.naturalHeight||z.height):typeof VideoFrame<"u"&&z instanceof VideoFrame?(d.width=z.displayWidth,d.height=z.displayHeight):(d.width=z.width,d.height=z.height),d}this.allocateTextureUnit=Y,this.resetTextureUnits=J,this.setTexture2D=re,this.setTexture2DArray=j,this.setTexture3D=ce,this.setTextureCube=X,this.rebindTextures=Ue,this.setupRenderTarget=Tt,this.updateRenderTargetMipmap=Ft,this.updateMultisampleRenderTarget=mn,this.setupDepthRenderbuffer=rt,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=yt}function _5(n,e){function t(i,s=Pa){let l;const c=Zt.getTransfer(s);if(i===$i)return n.UNSIGNED_BYTE;if(i===yg)return n.UNSIGNED_SHORT_4_4_4_4;if(i===bg)return n.UNSIGNED_SHORT_5_5_5_1;if(i===nw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===ew)return n.BYTE;if(i===tw)return n.SHORT;if(i===uc)return n.UNSIGNED_SHORT;if(i===gg)return n.INT;if(i===vs)return n.UNSIGNED_INT;if(i===Zi)return n.FLOAT;if(i===gc)return n.HALF_FLOAT;if(i===rw)return n.ALPHA;if(i===iw)return n.RGB;if(i===li)return n.RGBA;if(i===aw)return n.LUMINANCE;if(i===sw)return n.LUMINANCE_ALPHA;if(i===Do)return n.DEPTH_COMPONENT;if(i===Fo)return n.DEPTH_STENCIL;if(i===ow)return n.RED;if(i===vg)return n.RED_INTEGER;if(i===lw)return n.RG;if(i===_g)return n.RG_INTEGER;if(i===wg)return n.RGBA_INTEGER;if(i===ch||i===uh||i===hh||i===dh)if(c===an)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(i===ch)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===uh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===hh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===dh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(i===ch)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===uh)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===hh)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===dh)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===fm||i===pm||i===mm||i===gm)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(i===fm)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===pm)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===mm)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===gm)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===ym||i===bm||i===vm)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(i===ym||i===bm)return c===an?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(i===vm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===_m||i===wm||i===xm||i===Sm||i===Tm||i===Em||i===Mm||i===Am||i===Cm||i===Dm||i===Rm||i===km||i===Pm||i===Lm)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(i===_m)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===wm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===xm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Sm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Tm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Em)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Mm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Am)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Cm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Dm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Rm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===km)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Pm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Lm)return c===an?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===fh||i===Im||i===Om)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(i===fh)return c===an?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Im)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Om)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===cw||i===Um||i===Nm||i===Fm)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(i===fh)return l.COMPRESSED_RED_RGTC1_EXT;if(i===Um)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Nm)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Fm)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===No?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const w5=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,x5=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class S5{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new dr,l=e.properties.get(s);l.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Ti({vertexShader:w5,fragmentShader:x5,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Zn(new Oh(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class T5 extends Es{constructor(e,t){super();const i=this;let s=null,l=1,c=null,h="local-floor",f=1,d=null,p=null,g=null,y=null,b=null,x=null;const S=new S5,w=t.getContextAttributes();let _=null,R=null;const A=[],k=[],U=new Et;let E=null;const N=new Lr;N.viewport=new on;const H=new Lr;H.viewport=new on;const C=[N,H],D=new j4;let F=null,J=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let be=A[Q];return be===void 0&&(be=new Tp,A[Q]=be),be.getTargetRaySpace()},this.getControllerGrip=function(Q){let be=A[Q];return be===void 0&&(be=new Tp,A[Q]=be),be.getGripSpace()},this.getHand=function(Q){let be=A[Q];return be===void 0&&(be=new Tp,A[Q]=be),be.getHandSpace()};function Y(Q){const be=k.indexOf(Q.inputSource);if(be===-1)return;const ve=A[be];ve!==void 0&&(ve.update(Q.inputSource,Q.frame,d||c),ve.dispatchEvent({type:Q.type,data:Q.inputSource}))}function W(){s.removeEventListener("select",Y),s.removeEventListener("selectstart",Y),s.removeEventListener("selectend",Y),s.removeEventListener("squeeze",Y),s.removeEventListener("squeezestart",Y),s.removeEventListener("squeezeend",Y),s.removeEventListener("end",W),s.removeEventListener("inputsourceschange",re);for(let Q=0;Q<A.length;Q++){const be=k[Q];be!==null&&(k[Q]=null,A[Q].disconnect(be))}F=null,J=null,S.reset(),e.setRenderTarget(_),b=null,y=null,g=null,s=null,R=null,O.stop(),i.isPresenting=!1,e.setPixelRatio(E),e.setSize(U.width,U.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){l=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){h=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||c},this.setReferenceSpace=function(Q){d=Q},this.getBaseLayer=function(){return y!==null?y:b},this.getBinding=function(){return g},this.getFrame=function(){return x},this.getSession=function(){return s},this.setSession=async function(Q){if(s=Q,s!==null){if(_=e.getRenderTarget(),s.addEventListener("select",Y),s.addEventListener("selectstart",Y),s.addEventListener("selectend",Y),s.addEventListener("squeeze",Y),s.addEventListener("squeezestart",Y),s.addEventListener("squeezeend",Y),s.addEventListener("end",W),s.addEventListener("inputsourceschange",re),w.xrCompatible!==!0&&await t.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(U),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ve=null,Ie=null,Ne=null;w.depth&&(Ne=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ve=w.stencil?Fo:Do,Ie=w.stencil?No:vs);const rt={colorFormat:t.RGBA8,depthFormat:Ne,scaleFactor:l};g=new XRWebGLBinding(s,t),y=g.createProjectionLayer(rt),s.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),R=new ws(y.textureWidth,y.textureHeight,{format:li,type:$i,depthTexture:new Sw(y.textureWidth,y.textureHeight,Ie,void 0,void 0,void 0,void 0,void 0,void 0,ve),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1})}else{const ve={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:l};b=new XRWebGLLayer(s,t,ve),s.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),R=new ws(b.framebufferWidth,b.framebufferHeight,{format:li,type:$i,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}R.isXRRenderTarget=!0,this.setFoveation(f),d=null,c=await s.requestReferenceSpace(h),O.setContext(s),O.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function re(Q){for(let be=0;be<Q.removed.length;be++){const ve=Q.removed[be],Ie=k.indexOf(ve);Ie>=0&&(k[Ie]=null,A[Ie].disconnect(ve))}for(let be=0;be<Q.added.length;be++){const ve=Q.added[be];let Ie=k.indexOf(ve);if(Ie===-1){for(let rt=0;rt<A.length;rt++)if(rt>=k.length){k.push(ve),Ie=rt;break}else if(k[rt]===null){k[rt]=ve,Ie=rt;break}if(Ie===-1)break}const Ne=A[Ie];Ne&&Ne.connect(ve)}}const j=new te,ce=new te;function X(Q,be,ve){j.setFromMatrixPosition(be.matrixWorld),ce.setFromMatrixPosition(ve.matrixWorld);const Ie=j.distanceTo(ce),Ne=be.projectionMatrix.elements,rt=ve.projectionMatrix.elements,Ue=Ne[14]/(Ne[10]-1),Tt=Ne[14]/(Ne[10]+1),Ft=(Ne[9]+1)/Ne[5],xt=(Ne[9]-1)/Ne[5],q=(Ne[8]-1)/Ne[0],mn=(rt[8]+1)/rt[0],ht=Ue*q,yt=Ue*mn,st=Ie/(-q+mn),jt=st*-q;if(be.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(jt),Q.translateZ(st),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert(),Ne[10]===-1)Q.projectionMatrix.copy(be.projectionMatrix),Q.projectionMatrixInverse.copy(be.projectionMatrixInverse);else{const it=Ue+st,z=Tt+st,P=ht-jt,ue=yt+(Ie-jt),Se=Ft*Tt/z*it,De=xt*Tt/z*it;Q.projectionMatrix.makePerspective(P,ue,Se,De,it,z),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}}function _e(Q,be){be===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(be.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(s===null)return;let be=Q.near,ve=Q.far;S.texture!==null&&(S.depthNear>0&&(be=S.depthNear),S.depthFar>0&&(ve=S.depthFar)),D.near=H.near=N.near=be,D.far=H.far=N.far=ve,(F!==D.near||J!==D.far)&&(s.updateRenderState({depthNear:D.near,depthFar:D.far}),F=D.near,J=D.far),N.layers.mask=Q.layers.mask|2,H.layers.mask=Q.layers.mask|4,D.layers.mask=N.layers.mask|H.layers.mask;const Ie=Q.parent,Ne=D.cameras;_e(D,Ie);for(let rt=0;rt<Ne.length;rt++)_e(Ne[rt],Ie);Ne.length===2?X(D,N,H):D.projectionMatrix.copy(N.projectionMatrix),T(Q,D,Ie)};function T(Q,be,ve){ve===null?Q.matrix.copy(be.matrixWorld):(Q.matrix.copy(ve.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(be.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(be.projectionMatrix),Q.projectionMatrixInverse.copy(be.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=zm*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(y===null&&b===null))return f},this.setFoveation=function(Q){f=Q,y!==null&&(y.fixedFoveation=Q),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=Q)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(D)};let se=null;function Ee(Q,be){if(p=be.getViewerPose(d||c),x=be,p!==null){const ve=p.views;b!==null&&(e.setRenderTargetFramebuffer(R,b.framebuffer),e.setRenderTarget(R));let Ie=!1;ve.length!==D.cameras.length&&(D.cameras.length=0,Ie=!0);for(let Ue=0;Ue<ve.length;Ue++){const Tt=ve[Ue];let Ft=null;if(b!==null)Ft=b.getViewport(Tt);else{const q=g.getViewSubImage(y,Tt);Ft=q.viewport,Ue===0&&(e.setRenderTargetTextures(R,q.colorTexture,y.ignoreDepthValues?void 0:q.depthStencilTexture),e.setRenderTarget(R))}let xt=C[Ue];xt===void 0&&(xt=new Lr,xt.layers.enable(Ue),xt.viewport=new on,C[Ue]=xt),xt.matrix.fromArray(Tt.transform.matrix),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt.projectionMatrix.fromArray(Tt.projectionMatrix),xt.projectionMatrixInverse.copy(xt.projectionMatrix).invert(),xt.viewport.set(Ft.x,Ft.y,Ft.width,Ft.height),Ue===0&&(D.matrix.copy(xt.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),Ie===!0&&D.cameras.push(xt)}const Ne=s.enabledFeatures;if(Ne&&Ne.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const Ue=g.getDepthInformation(ve[0]);Ue&&Ue.isValid&&Ue.texture&&S.init(e,Ue,s.renderState)}}for(let ve=0;ve<A.length;ve++){const Ie=k[ve],Ne=A[ve];Ie!==null&&Ne!==void 0&&Ne.update(Ie,be,d||c)}se&&se(Q,be),be.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:be}),x=null}const O=new Tw;O.setAnimationLoop(Ee),this.setAnimationLoop=function(Q){se=Q},this.dispose=function(){}}}const us=new ui,E5=new gn;function M5(n,e){function t(w,_){w.matrixAutoUpdate===!0&&w.updateMatrix(),_.value.copy(w.matrix)}function i(w,_){_.color.getRGB(w.fogColor.value,bw(n)),_.isFog?(w.fogNear.value=_.near,w.fogFar.value=_.far):_.isFogExp2&&(w.fogDensity.value=_.density)}function s(w,_,R,A,k){_.isMeshBasicMaterial||_.isMeshLambertMaterial?l(w,_):_.isMeshToonMaterial?(l(w,_),g(w,_)):_.isMeshPhongMaterial?(l(w,_),p(w,_)):_.isMeshStandardMaterial?(l(w,_),y(w,_),_.isMeshPhysicalMaterial&&b(w,_,k)):_.isMeshMatcapMaterial?(l(w,_),x(w,_)):_.isMeshDepthMaterial?l(w,_):_.isMeshDistanceMaterial?(l(w,_),S(w,_)):_.isMeshNormalMaterial?l(w,_):_.isLineBasicMaterial?(c(w,_),_.isLineDashedMaterial&&h(w,_)):_.isPointsMaterial?f(w,_,R,A):_.isSpriteMaterial?d(w,_):_.isShadowMaterial?(w.color.value.copy(_.color),w.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function l(w,_){w.opacity.value=_.opacity,_.color&&w.diffuse.value.copy(_.color),_.emissive&&w.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.bumpMap&&(w.bumpMap.value=_.bumpMap,t(_.bumpMap,w.bumpMapTransform),w.bumpScale.value=_.bumpScale,_.side===hr&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,t(_.normalMap,w.normalMapTransform),w.normalScale.value.copy(_.normalScale),_.side===hr&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,t(_.displacementMap,w.displacementMapTransform),w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,w.emissiveMapTransform)),_.specularMap&&(w.specularMap.value=_.specularMap,t(_.specularMap,w.specularMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest);const R=e.get(_),A=R.envMap,k=R.envMapRotation;A&&(w.envMap.value=A,us.copy(k),us.x*=-1,us.y*=-1,us.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(us.y*=-1,us.z*=-1),w.envMapRotation.value.setFromMatrix4(E5.makeRotationFromEuler(us)),w.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=_.reflectivity,w.ior.value=_.ior,w.refractionRatio.value=_.refractionRatio),_.lightMap&&(w.lightMap.value=_.lightMap,w.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,w.lightMapTransform)),_.aoMap&&(w.aoMap.value=_.aoMap,w.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,w.aoMapTransform))}function c(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform))}function h(w,_){w.dashSize.value=_.dashSize,w.totalSize.value=_.dashSize+_.gapSize,w.scale.value=_.scale}function f(w,_,R,A){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.size.value=_.size*R,w.scale.value=A*.5,_.map&&(w.map.value=_.map,t(_.map,w.uvTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function d(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.rotation.value=_.rotation,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function p(w,_){w.specular.value.copy(_.specular),w.shininess.value=Math.max(_.shininess,1e-4)}function g(w,_){_.gradientMap&&(w.gradientMap.value=_.gradientMap)}function y(w,_){w.metalness.value=_.metalness,_.metalnessMap&&(w.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,w.metalnessMapTransform)),w.roughness.value=_.roughness,_.roughnessMap&&(w.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,w.roughnessMapTransform)),_.envMap&&(w.envMapIntensity.value=_.envMapIntensity)}function b(w,_,R){w.ior.value=_.ior,_.sheen>0&&(w.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),w.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(w.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,w.sheenColorMapTransform)),_.sheenRoughnessMap&&(w.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,w.sheenRoughnessMapTransform))),_.clearcoat>0&&(w.clearcoat.value=_.clearcoat,w.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(w.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,w.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(w.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===hr&&w.clearcoatNormalScale.value.negate())),_.dispersion>0&&(w.dispersion.value=_.dispersion),_.iridescence>0&&(w.iridescence.value=_.iridescence,w.iridescenceIOR.value=_.iridescenceIOR,w.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(w.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,w.iridescenceMapTransform)),_.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),_.transmission>0&&(w.transmission.value=_.transmission,w.transmissionSamplerMap.value=R.texture,w.transmissionSamplerSize.value.set(R.width,R.height),_.transmissionMap&&(w.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,w.transmissionMapTransform)),w.thickness.value=_.thickness,_.thicknessMap&&(w.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=_.attenuationDistance,w.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(w.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(w.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=_.specularIntensity,w.specularColor.value.copy(_.specularColor),_.specularColorMap&&(w.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,w.specularColorMapTransform)),_.specularIntensityMap&&(w.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,w.specularIntensityMapTransform))}function x(w,_){_.matcap&&(w.matcap.value=_.matcap)}function S(w,_){const R=e.get(_).light;w.referencePosition.value.setFromMatrixPosition(R.matrixWorld),w.nearDistance.value=R.shadow.camera.near,w.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function A5(n,e,t,i){let s={},l={},c=[];const h=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(R,A){const k=A.program;i.uniformBlockBinding(R,k)}function d(R,A){let k=s[R.id];k===void 0&&(x(R),k=p(R),s[R.id]=k,R.addEventListener("dispose",w));const U=A.program;i.updateUBOMapping(R,U);const E=e.render.frame;l[R.id]!==E&&(y(R),l[R.id]=E)}function p(R){const A=g();R.__bindingPointIndex=A;const k=n.createBuffer(),U=R.__size,E=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,k),n.bufferData(n.UNIFORM_BUFFER,U,E),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,k),k}function g(){for(let R=0;R<h;R++)if(c.indexOf(R)===-1)return c.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(R){const A=s[R.id],k=R.uniforms,U=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let E=0,N=k.length;E<N;E++){const H=Array.isArray(k[E])?k[E]:[k[E]];for(let C=0,D=H.length;C<D;C++){const F=H[C];if(b(F,E,C,U)===!0){const J=F.__offset,Y=Array.isArray(F.value)?F.value:[F.value];let W=0;for(let re=0;re<Y.length;re++){const j=Y[re],ce=S(j);typeof j=="number"||typeof j=="boolean"?(F.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,J+W,F.__data)):j.isMatrix3?(F.__data[0]=j.elements[0],F.__data[1]=j.elements[1],F.__data[2]=j.elements[2],F.__data[3]=0,F.__data[4]=j.elements[3],F.__data[5]=j.elements[4],F.__data[6]=j.elements[5],F.__data[7]=0,F.__data[8]=j.elements[6],F.__data[9]=j.elements[7],F.__data[10]=j.elements[8],F.__data[11]=0):(j.toArray(F.__data,W),W+=ce.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,J,F.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function b(R,A,k,U){const E=R.value,N=A+"_"+k;if(U[N]===void 0)return typeof E=="number"||typeof E=="boolean"?U[N]=E:U[N]=E.clone(),!0;{const H=U[N];if(typeof E=="number"||typeof E=="boolean"){if(H!==E)return U[N]=E,!0}else if(H.equals(E)===!1)return H.copy(E),!0}return!1}function x(R){const A=R.uniforms;let k=0;const U=16;for(let N=0,H=A.length;N<H;N++){const C=Array.isArray(A[N])?A[N]:[A[N]];for(let D=0,F=C.length;D<F;D++){const J=C[D],Y=Array.isArray(J.value)?J.value:[J.value];for(let W=0,re=Y.length;W<re;W++){const j=Y[W],ce=S(j),X=k%U,_e=X%ce.boundary,T=X+_e;k+=_e,T!==0&&U-T<ce.storage&&(k+=U-T),J.__data=new Float32Array(ce.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=k,k+=ce.storage}}}const E=k%U;return E>0&&(k+=U-E),R.__size=k,R.__cache={},this}function S(R){const A={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(A.boundary=4,A.storage=4):R.isVector2?(A.boundary=8,A.storage=8):R.isVector3||R.isColor?(A.boundary=16,A.storage=12):R.isVector4?(A.boundary=16,A.storage=16):R.isMatrix3?(A.boundary=48,A.storage=48):R.isMatrix4?(A.boundary=64,A.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),A}function w(R){const A=R.target;A.removeEventListener("dispose",w);const k=c.indexOf(A.__bindingPointIndex);c.splice(k,1),n.deleteBuffer(s[A.id]),delete s[A.id],delete l[A.id]}function _(){for(const R in s)n.deleteBuffer(s[R]);c=[],s={},l={}}return{bind:f,update:d,dispose:_}}class C5{constructor(e={}){const{canvas:t=t4(),context:i=null,depth:s=!0,stencil:l=!1,alpha:c=!1,antialias:h=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let b;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=i.getContextAttributes().alpha}else b=c;const x=new Uint32Array(4),S=new Int32Array(4);let w=null,_=null;const R=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pr,this.toneMapping=Ia,this.toneMappingExposure=1;const k=this;let U=!1,E=0,N=0,H=null,C=-1,D=null;const F=new on,J=new on;let Y=null;const W=new Ut(0);let re=0,j=t.width,ce=t.height,X=1,_e=null,T=null;const se=new on(0,0,j,ce),Ee=new on(0,0,j,ce);let O=!1;const Q=new Sg;let be=!1,ve=!1;this.transmissionResolutionScale=1;const Ie=new gn,Ne=new gn,rt=new te,Ue=new on,Tt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ft=!1;function xt(){return H===null?X:1}let q=i;function mn(L,Z){return t.getContext(L,Z)}try{const L={alpha:!0,depth:s,stencil:l,antialias:h,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${pg}`),t.addEventListener("webglcontextlost",Me,!1),t.addEventListener("webglcontextrestored",He,!1),t.addEventListener("webglcontextcreationerror",Ve,!1),q===null){const Z="webgl2";if(q=mn(Z,L),q===null)throw mn(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let ht,yt,st,jt,it,z,P,ue,Se,De,V,pe,xe,Re,Je,Ce,je,Ze,Ke,Ye,ot,$e,Rt,$;function qe(){ht=new FU(q),ht.init(),$e=new _5(q,ht),yt=new PU(q,ht,e,$e),st=new b5(q,ht),yt.reverseDepthBuffer&&y&&st.buffers.depth.setReversed(!0),jt=new HU(q),it=new a5,z=new v5(q,ht,st,it,yt,$e,jt),P=new IU(k),ue=new NU(k),Se=new X4(q),Rt=new RU(q,Se),De=new zU(q,Se,jt,Rt),V=new GU(q,De,Se,jt),Ke=new VU(q,yt,z),Ce=new LU(it),pe=new i5(k,P,ue,ht,yt,Rt,Ce),xe=new M5(k,it),Re=new o5,Je=new f5(ht),Ze=new DU(k,P,ue,st,V,b,f),je=new g5(k,V,yt),$=new A5(q,jt,yt,st),Ye=new kU(q,ht,jt),ot=new BU(q,ht,jt),jt.programs=pe.programs,k.capabilities=yt,k.extensions=ht,k.properties=it,k.renderLists=Re,k.shadowMap=je,k.state=st,k.info=jt}qe();const ye=new T5(k,q);this.xr=ye,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const L=ht.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=ht.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(L){L!==void 0&&(X=L,this.setSize(j,ce,!1))},this.getSize=function(L){return L.set(j,ce)},this.setSize=function(L,Z,de=!0){if(ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=L,ce=Z,t.width=Math.floor(L*X),t.height=Math.floor(Z*X),de===!0&&(t.style.width=L+"px",t.style.height=Z+"px"),this.setViewport(0,0,L,Z)},this.getDrawingBufferSize=function(L){return L.set(j*X,ce*X).floor()},this.setDrawingBufferSize=function(L,Z,de){j=L,ce=Z,X=de,t.width=Math.floor(L*de),t.height=Math.floor(Z*de),this.setViewport(0,0,L,Z)},this.getCurrentViewport=function(L){return L.copy(F)},this.getViewport=function(L){return L.copy(se)},this.setViewport=function(L,Z,de,le){L.isVector4?se.set(L.x,L.y,L.z,L.w):se.set(L,Z,de,le),st.viewport(F.copy(se).multiplyScalar(X).round())},this.getScissor=function(L){return L.copy(Ee)},this.setScissor=function(L,Z,de,le){L.isVector4?Ee.set(L.x,L.y,L.z,L.w):Ee.set(L,Z,de,le),st.scissor(J.copy(Ee).multiplyScalar(X).round())},this.getScissorTest=function(){return O},this.setScissorTest=function(L){st.setScissorTest(O=L)},this.setOpaqueSort=function(L){_e=L},this.setTransparentSort=function(L){T=L},this.getClearColor=function(L){return L.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(L=!0,Z=!0,de=!0){let le=0;if(L){let ie=!1;if(H!==null){const Pe=H.texture.format;ie=Pe===wg||Pe===_g||Pe===vg}if(ie){const Pe=H.texture.type,Be=Pe===$i||Pe===vs||Pe===uc||Pe===No||Pe===yg||Pe===bg,Le=Ze.getClearColor(),ze=Ze.getClearAlpha(),dt=Le.r,vt=Le.g,lt=Le.b;Be?(x[0]=dt,x[1]=vt,x[2]=lt,x[3]=ze,q.clearBufferuiv(q.COLOR,0,x)):(S[0]=dt,S[1]=vt,S[2]=lt,S[3]=ze,q.clearBufferiv(q.COLOR,0,S))}else le|=q.COLOR_BUFFER_BIT}Z&&(le|=q.DEPTH_BUFFER_BIT),de&&(le|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Me,!1),t.removeEventListener("webglcontextrestored",He,!1),t.removeEventListener("webglcontextcreationerror",Ve,!1),Ze.dispose(),Re.dispose(),Je.dispose(),it.dispose(),P.dispose(),ue.dispose(),V.dispose(),Rt.dispose(),$.dispose(),pe.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",Oe),ye.removeEventListener("sessionend",Ge),et.stop()};function Me(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function He(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const L=jt.autoReset,Z=je.enabled,de=je.autoUpdate,le=je.needsUpdate,ie=je.type;qe(),jt.autoReset=L,je.enabled=Z,je.autoUpdate=de,je.needsUpdate=le,je.type=ie}function Ve(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function bt(L){const Z=L.target;Z.removeEventListener("dispose",bt),un(Z)}function un(L){Tn(L),it.remove(L)}function Tn(L){const Z=it.get(L).programs;Z!==void 0&&(Z.forEach(function(de){pe.releaseProgram(de)}),L.isShaderMaterial&&pe.releaseShaderCache(L))}this.renderBufferDirect=function(L,Z,de,le,ie,Pe){Z===null&&(Z=Tt);const Be=ie.isMesh&&ie.matrixWorld.determinant()<0,Le=yn(L,Z,de,le,ie);st.setMaterial(le,Be);let ze=de.index,dt=1;if(le.wireframe===!0){if(ze=De.getWireframeAttribute(de),ze===void 0)return;dt=2}const vt=de.drawRange,lt=de.attributes.position;let ft=vt.start*dt,Ct=(vt.start+vt.count)*dt;Pe!==null&&(ft=Math.max(ft,Pe.start*dt),Ct=Math.min(Ct,(Pe.start+Pe.count)*dt)),ze!==null?(ft=Math.max(ft,0),Ct=Math.min(Ct,ze.count)):lt!=null&&(ft=Math.max(ft,0),Ct=Math.min(Ct,lt.count));const en=Ct-ft;if(en<0||en===1/0)return;Rt.setup(ie,le,Le,de,ze);let qt,Mt=Ye;if(ze!==null&&(qt=Se.get(ze),Mt=ot,Mt.setIndex(qt)),ie.isMesh)le.wireframe===!0?(st.setLineWidth(le.wireframeLinewidth*xt()),Mt.setMode(q.LINES)):Mt.setMode(q.TRIANGLES);else if(ie.isLine){let gt=le.linewidth;gt===void 0&&(gt=1),st.setLineWidth(gt*xt()),ie.isLineSegments?Mt.setMode(q.LINES):ie.isLineLoop?Mt.setMode(q.LINE_LOOP):Mt.setMode(q.LINE_STRIP)}else ie.isPoints?Mt.setMode(q.POINTS):ie.isSprite&&Mt.setMode(q.TRIANGLES);if(ie.isBatchedMesh)if(ie._multiDrawInstances!==null)Mt.renderMultiDrawInstances(ie._multiDrawStarts,ie._multiDrawCounts,ie._multiDrawCount,ie._multiDrawInstances);else if(ht.get("WEBGL_multi_draw"))Mt.renderMultiDraw(ie._multiDrawStarts,ie._multiDrawCounts,ie._multiDrawCount);else{const gt=ie._multiDrawStarts,Ln=ie._multiDrawCounts,Vt=ie._multiDrawCount,fr=ze?Se.get(ze).bytesPerElement:1,$r=it.get(le).currentProgram.getUniforms();for(let ar=0;ar<Vt;ar++)$r.setValue(q,"_gl_DrawID",ar),Mt.render(gt[ar]/fr,Ln[ar])}else if(ie.isInstancedMesh)Mt.renderInstances(ft,en,ie.count);else if(de.isInstancedBufferGeometry){const gt=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,Ln=Math.min(de.instanceCount,gt);Mt.renderInstances(ft,en,Ln)}else Mt.render(ft,en)};function G(L,Z,de){L.transparent===!0&&L.side===Qi&&L.forceSinglePass===!1?(L.side=hr,L.needsUpdate=!0,Xe(L,Z,de),L.side=Ua,L.needsUpdate=!0,Xe(L,Z,de),L.side=Qi):Xe(L,Z,de)}this.compile=function(L,Z,de=null){de===null&&(de=L),_=Je.get(de),_.init(Z),A.push(_),de.traverseVisible(function(ie){ie.isLight&&ie.layers.test(Z.layers)&&(_.pushLight(ie),ie.castShadow&&_.pushShadow(ie))}),L!==de&&L.traverseVisible(function(ie){ie.isLight&&ie.layers.test(Z.layers)&&(_.pushLight(ie),ie.castShadow&&_.pushShadow(ie))}),_.setupLights();const le=new Set;return L.traverse(function(ie){if(!(ie.isMesh||ie.isPoints||ie.isLine||ie.isSprite))return;const Pe=ie.material;if(Pe)if(Array.isArray(Pe))for(let Be=0;Be<Pe.length;Be++){const Le=Pe[Be];G(Le,de,ie),le.add(Le)}else G(Pe,de,ie),le.add(Pe)}),A.pop(),_=null,le},this.compileAsync=function(L,Z,de=null){const le=this.compile(L,Z,de);return new Promise(ie=>{function Pe(){if(le.forEach(function(Be){it.get(Be).currentProgram.isReady()&&le.delete(Be)}),le.size===0){ie(L);return}setTimeout(Pe,10)}ht.get("KHR_parallel_shader_compile")!==null?Pe():setTimeout(Pe,10)})};let ne=null;function fe(L){ne&&ne(L)}function Oe(){et.stop()}function Ge(){et.start()}const et=new Tw;et.setAnimationLoop(fe),typeof self<"u"&&et.setContext(self),this.setAnimationLoop=function(L){ne=L,ye.setAnimationLoop(L),L===null?et.stop():et.start()},ye.addEventListener("sessionstart",Oe),ye.addEventListener("sessionend",Ge),this.render=function(L,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),ye.enabled===!0&&ye.isPresenting===!0&&(ye.cameraAutoUpdate===!0&&ye.updateCamera(Z),Z=ye.getCamera()),L.isScene===!0&&L.onBeforeRender(k,L,Z,H),_=Je.get(L,A.length),_.init(Z),A.push(_),Ne.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),Q.setFromProjectionMatrix(Ne),ve=this.localClippingEnabled,be=Ce.init(this.clippingPlanes,ve),w=Re.get(L,R.length),w.init(),R.push(w),ye.enabled===!0&&ye.isPresenting===!0){const Pe=k.xr.getDepthSensingMesh();Pe!==null&&mt(Pe,Z,-1/0,k.sortObjects)}mt(L,Z,0,k.sortObjects),w.finish(),k.sortObjects===!0&&w.sort(_e,T),Ft=ye.enabled===!1||ye.isPresenting===!1||ye.hasDepthSensing()===!1,Ft&&Ze.addToRenderList(w,L),this.info.render.frame++,be===!0&&Ce.beginShadows();const de=_.state.shadowsArray;je.render(de,L,Z),be===!0&&Ce.endShadows(),this.info.autoReset===!0&&this.info.reset();const le=w.opaque,ie=w.transmissive;if(_.setupLights(),Z.isArrayCamera){const Pe=Z.cameras;if(ie.length>0)for(let Be=0,Le=Pe.length;Be<Le;Be++){const ze=Pe[Be];ut(le,ie,L,ze)}Ft&&Ze.render(L);for(let Be=0,Le=Pe.length;Be<Le;Be++){const ze=Pe[Be];Qe(w,L,ze,ze.viewport)}}else ie.length>0&&ut(le,ie,L,Z),Ft&&Ze.render(L),Qe(w,L,Z);H!==null&&N===0&&(z.updateMultisampleRenderTarget(H),z.updateRenderTargetMipmap(H)),L.isScene===!0&&L.onAfterRender(k,L,Z),Rt.resetDefaultState(),C=-1,D=null,A.pop(),A.length>0?(_=A[A.length-1],be===!0&&Ce.setGlobalState(k.clippingPlanes,_.state.camera)):_=null,R.pop(),R.length>0?w=R[R.length-1]:w=null};function mt(L,Z,de,le){if(L.visible===!1)return;if(L.layers.test(Z.layers)){if(L.isGroup)de=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update(Z);else if(L.isLight)_.pushLight(L),L.castShadow&&_.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||Q.intersectsSprite(L)){le&&Ue.setFromMatrixPosition(L.matrixWorld).applyMatrix4(Ne);const Be=V.update(L),Le=L.material;Le.visible&&w.push(L,Be,Le,de,Ue.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||Q.intersectsObject(L))){const Be=V.update(L),Le=L.material;if(le&&(L.boundingSphere!==void 0?(L.boundingSphere===null&&L.computeBoundingSphere(),Ue.copy(L.boundingSphere.center)):(Be.boundingSphere===null&&Be.computeBoundingSphere(),Ue.copy(Be.boundingSphere.center)),Ue.applyMatrix4(L.matrixWorld).applyMatrix4(Ne)),Array.isArray(Le)){const ze=Be.groups;for(let dt=0,vt=ze.length;dt<vt;dt++){const lt=ze[dt],ft=Le[lt.materialIndex];ft&&ft.visible&&w.push(L,Be,ft,de,Ue.z,lt)}}else Le.visible&&w.push(L,Be,Le,de,Ue.z,null)}}const Pe=L.children;for(let Be=0,Le=Pe.length;Be<Le;Be++)mt(Pe[Be],Z,de,le)}function Qe(L,Z,de,le){const ie=L.opaque,Pe=L.transmissive,Be=L.transparent;_.setupLightsView(de),be===!0&&Ce.setGlobalState(k.clippingPlanes,de),le&&st.viewport(F.copy(le)),ie.length>0&&tt(ie,Z,de),Pe.length>0&&tt(Pe,Z,de),Be.length>0&&tt(Be,Z,de),st.buffers.depth.setTest(!0),st.buffers.depth.setMask(!0),st.buffers.color.setMask(!0),st.setPolygonOffset(!1)}function ut(L,Z,de,le){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[le.id]===void 0&&(_.state.transmissionRenderTarget[le.id]=new ws(1,1,{generateMipmaps:!0,type:ht.has("EXT_color_buffer_half_float")||ht.has("EXT_color_buffer_float")?gc:$i,minFilter:ys,samples:4,stencilBuffer:l,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zt.workingColorSpace}));const Pe=_.state.transmissionRenderTarget[le.id],Be=le.viewport||F;Pe.setSize(Be.z*k.transmissionResolutionScale,Be.w*k.transmissionResolutionScale);const Le=k.getRenderTarget();k.setRenderTarget(Pe),k.getClearColor(W),re=k.getClearAlpha(),re<1&&k.setClearColor(16777215,.5),k.clear(),Ft&&Ze.render(de);const ze=k.toneMapping;k.toneMapping=Ia;const dt=le.viewport;if(le.viewport!==void 0&&(le.viewport=void 0),_.setupLightsView(le),be===!0&&Ce.setGlobalState(k.clippingPlanes,le),tt(L,de,le),z.updateMultisampleRenderTarget(Pe),z.updateRenderTargetMipmap(Pe),ht.has("WEBGL_multisampled_render_to_texture")===!1){let vt=!1;for(let lt=0,ft=Z.length;lt<ft;lt++){const Ct=Z[lt],en=Ct.object,qt=Ct.geometry,Mt=Ct.material,gt=Ct.group;if(Mt.side===Qi&&en.layers.test(le.layers)){const Ln=Mt.side;Mt.side=hr,Mt.needsUpdate=!0,at(en,de,le,qt,Mt,gt),Mt.side=Ln,Mt.needsUpdate=!0,vt=!0}}vt===!0&&(z.updateMultisampleRenderTarget(Pe),z.updateRenderTargetMipmap(Pe))}k.setRenderTarget(Le),k.setClearColor(W,re),dt!==void 0&&(le.viewport=dt),k.toneMapping=ze}function tt(L,Z,de){const le=Z.isScene===!0?Z.overrideMaterial:null;for(let ie=0,Pe=L.length;ie<Pe;ie++){const Be=L[ie],Le=Be.object,ze=Be.geometry,dt=le===null?Be.material:le,vt=Be.group;Le.layers.test(de.layers)&&at(Le,Z,de,ze,dt,vt)}}function at(L,Z,de,le,ie,Pe){L.onBeforeRender(k,Z,de,le,ie,Pe),L.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),ie.onBeforeRender(k,Z,de,le,L,Pe),ie.transparent===!0&&ie.side===Qi&&ie.forceSinglePass===!1?(ie.side=hr,ie.needsUpdate=!0,k.renderBufferDirect(de,Z,le,ie,L,Pe),ie.side=Ua,ie.needsUpdate=!0,k.renderBufferDirect(de,Z,le,ie,L,Pe),ie.side=Qi):k.renderBufferDirect(de,Z,le,ie,L,Pe),L.onAfterRender(k,Z,de,le,ie,Pe)}function Xe(L,Z,de){Z.isScene!==!0&&(Z=Tt);const le=it.get(L),ie=_.state.lights,Pe=_.state.shadowsArray,Be=ie.state.version,Le=pe.getParameters(L,ie.state,Pe,Z,de),ze=pe.getProgramCacheKey(Le);let dt=le.programs;le.environment=L.isMeshStandardMaterial?Z.environment:null,le.fog=Z.fog,le.envMap=(L.isMeshStandardMaterial?ue:P).get(L.envMap||le.environment),le.envMapRotation=le.environment!==null&&L.envMap===null?Z.environmentRotation:L.envMapRotation,dt===void 0&&(L.addEventListener("dispose",bt),dt=new Map,le.programs=dt);let vt=dt.get(ze);if(vt!==void 0){if(le.currentProgram===vt&&le.lightsStateVersion===Be)return Yt(L,Le),vt}else Le.uniforms=pe.getUniforms(L),L.onBeforeCompile(Le,k),vt=pe.acquireProgram(Le,ze),dt.set(ze,vt),le.uniforms=Le.uniforms;const lt=le.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(lt.clippingPlanes=Ce.uniform),Yt(L,Le),le.needsLights=zn(L),le.lightsStateVersion=Be,le.needsLights&&(lt.ambientLightColor.value=ie.state.ambient,lt.lightProbe.value=ie.state.probe,lt.directionalLights.value=ie.state.directional,lt.directionalLightShadows.value=ie.state.directionalShadow,lt.spotLights.value=ie.state.spot,lt.spotLightShadows.value=ie.state.spotShadow,lt.rectAreaLights.value=ie.state.rectArea,lt.ltc_1.value=ie.state.rectAreaLTC1,lt.ltc_2.value=ie.state.rectAreaLTC2,lt.pointLights.value=ie.state.point,lt.pointLightShadows.value=ie.state.pointShadow,lt.hemisphereLights.value=ie.state.hemi,lt.directionalShadowMap.value=ie.state.directionalShadowMap,lt.directionalShadowMatrix.value=ie.state.directionalShadowMatrix,lt.spotShadowMap.value=ie.state.spotShadowMap,lt.spotLightMatrix.value=ie.state.spotLightMatrix,lt.spotLightMap.value=ie.state.spotLightMap,lt.pointShadowMap.value=ie.state.pointShadowMap,lt.pointShadowMatrix.value=ie.state.pointShadowMatrix),le.currentProgram=vt,le.uniformsList=null,vt}function _t(L){if(L.uniformsList===null){const Z=L.currentProgram.getUniforms();L.uniformsList=mh.seqWithValue(Z.seq,L.uniforms)}return L.uniformsList}function Yt(L,Z){const de=it.get(L);de.outputColorSpace=Z.outputColorSpace,de.batching=Z.batching,de.batchingColor=Z.batchingColor,de.instancing=Z.instancing,de.instancingColor=Z.instancingColor,de.instancingMorph=Z.instancingMorph,de.skinning=Z.skinning,de.morphTargets=Z.morphTargets,de.morphNormals=Z.morphNormals,de.morphColors=Z.morphColors,de.morphTargetsCount=Z.morphTargetsCount,de.numClippingPlanes=Z.numClippingPlanes,de.numIntersection=Z.numClipIntersection,de.vertexAlphas=Z.vertexAlphas,de.vertexTangents=Z.vertexTangents,de.toneMapping=Z.toneMapping}function yn(L,Z,de,le,ie){Z.isScene!==!0&&(Z=Tt),z.resetTextureUnits();const Pe=Z.fog,Be=le.isMeshStandardMaterial?Z.environment:null,Le=H===null?k.outputColorSpace:H.isXRRenderTarget===!0?H.texture.colorSpace:_s,ze=(le.isMeshStandardMaterial?ue:P).get(le.envMap||Be),dt=le.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,vt=!!de.attributes.tangent&&(!!le.normalMap||le.anisotropy>0),lt=!!de.morphAttributes.position,ft=!!de.morphAttributes.normal,Ct=!!de.morphAttributes.color;let en=Ia;le.toneMapped&&(H===null||H.isXRRenderTarget===!0)&&(en=k.toneMapping);const qt=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Mt=qt!==void 0?qt.length:0,gt=it.get(le),Ln=_.state.lights;if(be===!0&&(ve===!0||L!==D)){const _n=L===D&&le.id===C;Ce.setState(le,L,_n)}let Vt=!1;le.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==Ln.state.version||gt.outputColorSpace!==Le||ie.isBatchedMesh&&gt.batching===!1||!ie.isBatchedMesh&&gt.batching===!0||ie.isBatchedMesh&&gt.batchingColor===!0&&ie.colorTexture===null||ie.isBatchedMesh&&gt.batchingColor===!1&&ie.colorTexture!==null||ie.isInstancedMesh&&gt.instancing===!1||!ie.isInstancedMesh&&gt.instancing===!0||ie.isSkinnedMesh&&gt.skinning===!1||!ie.isSkinnedMesh&&gt.skinning===!0||ie.isInstancedMesh&&gt.instancingColor===!0&&ie.instanceColor===null||ie.isInstancedMesh&&gt.instancingColor===!1&&ie.instanceColor!==null||ie.isInstancedMesh&&gt.instancingMorph===!0&&ie.morphTexture===null||ie.isInstancedMesh&&gt.instancingMorph===!1&&ie.morphTexture!==null||gt.envMap!==ze||le.fog===!0&&gt.fog!==Pe||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==Ce.numPlanes||gt.numIntersection!==Ce.numIntersection)||gt.vertexAlphas!==dt||gt.vertexTangents!==vt||gt.morphTargets!==lt||gt.morphNormals!==ft||gt.morphColors!==Ct||gt.toneMapping!==en||gt.morphTargetsCount!==Mt)&&(Vt=!0):(Vt=!0,gt.__version=le.version);let fr=gt.currentProgram;Vt===!0&&(fr=Xe(le,Z,ie));let $r=!1,ar=!1,Bn=!1;const tn=fr.getUniforms(),sr=gt.uniforms;if(st.useProgram(fr.program)&&($r=!0,ar=!0,Bn=!0),le.id!==C&&(C=le.id,ar=!0),$r||D!==L){st.buffers.depth.getReversed()?(Ie.copy(L.projectionMatrix),r4(Ie),i4(Ie),tn.setValue(q,"projectionMatrix",Ie)):tn.setValue(q,"projectionMatrix",L.projectionMatrix),tn.setValue(q,"viewMatrix",L.matrixWorldInverse);const Wn=tn.map.cameraPosition;Wn!==void 0&&Wn.setValue(q,rt.setFromMatrixPosition(L.matrixWorld)),yt.logarithmicDepthBuffer&&tn.setValue(q,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&tn.setValue(q,"isOrthographic",L.isOrthographicCamera===!0),D!==L&&(D=L,ar=!0,Bn=!0)}if(ie.isSkinnedMesh){tn.setOptional(q,ie,"bindMatrix"),tn.setOptional(q,ie,"bindMatrixInverse");const _n=ie.skeleton;_n&&(_n.boneTexture===null&&_n.computeBoneTexture(),tn.setValue(q,"boneTexture",_n.boneTexture,z))}ie.isBatchedMesh&&(tn.setOptional(q,ie,"batchingTexture"),tn.setValue(q,"batchingTexture",ie._matricesTexture,z),tn.setOptional(q,ie,"batchingIdTexture"),tn.setValue(q,"batchingIdTexture",ie._indirectTexture,z),tn.setOptional(q,ie,"batchingColorTexture"),ie._colorsTexture!==null&&tn.setValue(q,"batchingColorTexture",ie._colorsTexture,z));const Kn=de.morphAttributes;if((Kn.position!==void 0||Kn.normal!==void 0||Kn.color!==void 0)&&Ke.update(ie,de,fr),(ar||gt.receiveShadow!==ie.receiveShadow)&&(gt.receiveShadow=ie.receiveShadow,tn.setValue(q,"receiveShadow",ie.receiveShadow)),le.isMeshGouraudMaterial&&le.envMap!==null&&(sr.envMap.value=ze,sr.flipEnvMap.value=ze.isCubeTexture&&ze.isRenderTargetTexture===!1?-1:1),le.isMeshStandardMaterial&&le.envMap===null&&Z.environment!==null&&(sr.envMapIntensity.value=Z.environmentIntensity),ar&&(tn.setValue(q,"toneMappingExposure",k.toneMappingExposure),gt.needsLights&&An(sr,Bn),Pe&&le.fog===!0&&xe.refreshFogUniforms(sr,Pe),xe.refreshMaterialUniforms(sr,le,X,ce,_.state.transmissionRenderTarget[L.id]),mh.upload(q,_t(gt),sr,z)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(mh.upload(q,_t(gt),sr,z),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&tn.setValue(q,"center",ie.center),tn.setValue(q,"modelViewMatrix",ie.modelViewMatrix),tn.setValue(q,"normalMatrix",ie.normalMatrix),tn.setValue(q,"modelMatrix",ie.matrixWorld),le.isShaderMaterial||le.isRawShaderMaterial){const _n=le.uniformsGroups;for(let Wn=0,Cs=_n.length;Wn<Cs;Wn++){const pr=_n[Wn];$.update(pr,fr),$.bind(pr,fr)}}return fr}function An(L,Z){L.ambientLightColor.needsUpdate=Z,L.lightProbe.needsUpdate=Z,L.directionalLights.needsUpdate=Z,L.directionalLightShadows.needsUpdate=Z,L.pointLights.needsUpdate=Z,L.pointLightShadows.needsUpdate=Z,L.spotLights.needsUpdate=Z,L.spotLightShadows.needsUpdate=Z,L.rectAreaLights.needsUpdate=Z,L.hemisphereLights.needsUpdate=Z}function zn(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(L,Z,de){it.get(L.texture).__webglTexture=Z,it.get(L.depthTexture).__webglTexture=de;const le=it.get(L);le.__hasExternalTextures=!0,le.__autoAllocateDepthBuffer=de===void 0,le.__autoAllocateDepthBuffer||ht.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),le.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(L,Z){const de=it.get(L);de.__webglFramebuffer=Z,de.__useDefaultFramebuffer=Z===void 0};const Lt=q.createFramebuffer();this.setRenderTarget=function(L,Z=0,de=0){H=L,E=Z,N=de;let le=!0,ie=null,Pe=!1,Be=!1;if(L){const ze=it.get(L);if(ze.__useDefaultFramebuffer!==void 0)st.bindFramebuffer(q.FRAMEBUFFER,null),le=!1;else if(ze.__webglFramebuffer===void 0)z.setupRenderTarget(L);else if(ze.__hasExternalTextures)z.rebindTextures(L,it.get(L.texture).__webglTexture,it.get(L.depthTexture).__webglTexture);else if(L.depthBuffer){const lt=L.depthTexture;if(ze.__boundDepthTexture!==lt){if(lt!==null&&it.has(lt)&&(L.width!==lt.image.width||L.height!==lt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");z.setupDepthRenderbuffer(L)}}const dt=L.texture;(dt.isData3DTexture||dt.isDataArrayTexture||dt.isCompressedArrayTexture)&&(Be=!0);const vt=it.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Array.isArray(vt[Z])?ie=vt[Z][de]:ie=vt[Z],Pe=!0):L.samples>0&&z.useMultisampledRTT(L)===!1?ie=it.get(L).__webglMultisampledFramebuffer:Array.isArray(vt)?ie=vt[de]:ie=vt,F.copy(L.viewport),J.copy(L.scissor),Y=L.scissorTest}else F.copy(se).multiplyScalar(X).floor(),J.copy(Ee).multiplyScalar(X).floor(),Y=O;if(de!==0&&(ie=Lt),st.bindFramebuffer(q.FRAMEBUFFER,ie)&&le&&st.drawBuffers(L,ie),st.viewport(F),st.scissor(J),st.setScissorTest(Y),Pe){const ze=it.get(L.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+Z,ze.__webglTexture,de)}else if(Be){const ze=it.get(L.texture),dt=Z;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,ze.__webglTexture,de,dt)}else if(L!==null&&de!==0){const ze=it.get(L.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,ze.__webglTexture,de)}C=-1},this.readRenderTargetPixels=function(L,Z,de,le,ie,Pe,Be){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Le=it.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&Be!==void 0&&(Le=Le[Be]),Le){st.bindFramebuffer(q.FRAMEBUFFER,Le);try{const ze=L.texture,dt=ze.format,vt=ze.type;if(!yt.textureFormatReadable(dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!yt.textureTypeReadable(vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=L.width-le&&de>=0&&de<=L.height-ie&&q.readPixels(Z,de,le,ie,$e.convert(dt),$e.convert(vt),Pe)}finally{const ze=H!==null?it.get(H).__webglFramebuffer:null;st.bindFramebuffer(q.FRAMEBUFFER,ze)}}},this.readRenderTargetPixelsAsync=async function(L,Z,de,le,ie,Pe,Be){if(!(L&&L.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Le=it.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&Be!==void 0&&(Le=Le[Be]),Le){const ze=L.texture,dt=ze.format,vt=ze.type;if(!yt.textureFormatReadable(dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!yt.textureTypeReadable(vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Z>=0&&Z<=L.width-le&&de>=0&&de<=L.height-ie){st.bindFramebuffer(q.FRAMEBUFFER,Le);const lt=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,lt),q.bufferData(q.PIXEL_PACK_BUFFER,Pe.byteLength,q.STREAM_READ),q.readPixels(Z,de,le,ie,$e.convert(dt),$e.convert(vt),0);const ft=H!==null?it.get(H).__webglFramebuffer:null;st.bindFramebuffer(q.FRAMEBUFFER,ft);const Ct=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await n4(q,Ct,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,lt),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Pe),q.deleteBuffer(lt),q.deleteSync(Ct),Pe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(L,Z=null,de=0){L.isTexture!==!0&&(xo("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Z=arguments[0]||null,L=arguments[1]);const le=Math.pow(2,-de),ie=Math.floor(L.image.width*le),Pe=Math.floor(L.image.height*le),Be=Z!==null?Z.x:0,Le=Z!==null?Z.y:0;z.setTexture2D(L,0),q.copyTexSubImage2D(q.TEXTURE_2D,de,0,0,Be,Le,ie,Pe),st.unbindTexture()};const Jr=q.createFramebuffer(),qn=q.createFramebuffer();this.copyTextureToTexture=function(L,Z,de=null,le=null,ie=0,Pe=null){L.isTexture!==!0&&(xo("WebGLRenderer: copyTextureToTexture function signature has changed."),le=arguments[0]||null,L=arguments[1],Z=arguments[2],Pe=arguments[3]||0,de=null),Pe===null&&(ie!==0?(xo("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Pe=ie,ie=0):Pe=0);let Be,Le,ze,dt,vt,lt,ft,Ct,en;const qt=L.isCompressedTexture?L.mipmaps[Pe]:L.image;if(de!==null)Be=de.max.x-de.min.x,Le=de.max.y-de.min.y,ze=de.isBox3?de.max.z-de.min.z:1,dt=de.min.x,vt=de.min.y,lt=de.isBox3?de.min.z:0;else{const Kn=Math.pow(2,-ie);Be=Math.floor(qt.width*Kn),Le=Math.floor(qt.height*Kn),L.isDataArrayTexture?ze=qt.depth:L.isData3DTexture?ze=Math.floor(qt.depth*Kn):ze=1,dt=0,vt=0,lt=0}le!==null?(ft=le.x,Ct=le.y,en=le.z):(ft=0,Ct=0,en=0);const Mt=$e.convert(Z.format),gt=$e.convert(Z.type);let Ln;Z.isData3DTexture?(z.setTexture3D(Z,0),Ln=q.TEXTURE_3D):Z.isDataArrayTexture||Z.isCompressedArrayTexture?(z.setTexture2DArray(Z,0),Ln=q.TEXTURE_2D_ARRAY):(z.setTexture2D(Z,0),Ln=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,Z.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,Z.unpackAlignment);const Vt=q.getParameter(q.UNPACK_ROW_LENGTH),fr=q.getParameter(q.UNPACK_IMAGE_HEIGHT),$r=q.getParameter(q.UNPACK_SKIP_PIXELS),ar=q.getParameter(q.UNPACK_SKIP_ROWS),Bn=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,qt.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,qt.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,dt),q.pixelStorei(q.UNPACK_SKIP_ROWS,vt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,lt);const tn=L.isDataArrayTexture||L.isData3DTexture,sr=Z.isDataArrayTexture||Z.isData3DTexture;if(L.isDepthTexture){const Kn=it.get(L),_n=it.get(Z),Wn=it.get(Kn.__renderTarget),Cs=it.get(_n.__renderTarget);st.bindFramebuffer(q.READ_FRAMEBUFFER,Wn.__webglFramebuffer),st.bindFramebuffer(q.DRAW_FRAMEBUFFER,Cs.__webglFramebuffer);for(let pr=0;pr<ze;pr++)tn&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,it.get(L).__webglTexture,ie,lt+pr),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,it.get(Z).__webglTexture,Pe,en+pr)),q.blitFramebuffer(dt,vt,Be,Le,ft,Ct,Be,Le,q.DEPTH_BUFFER_BIT,q.NEAREST);st.bindFramebuffer(q.READ_FRAMEBUFFER,null),st.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(ie!==0||L.isRenderTargetTexture||it.has(L)){const Kn=it.get(L),_n=it.get(Z);st.bindFramebuffer(q.READ_FRAMEBUFFER,Jr),st.bindFramebuffer(q.DRAW_FRAMEBUFFER,qn);for(let Wn=0;Wn<ze;Wn++)tn?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Kn.__webglTexture,ie,lt+Wn):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Kn.__webglTexture,ie),sr?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,_n.__webglTexture,Pe,en+Wn):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,_n.__webglTexture,Pe),ie!==0?q.blitFramebuffer(dt,vt,Be,Le,ft,Ct,Be,Le,q.COLOR_BUFFER_BIT,q.NEAREST):sr?q.copyTexSubImage3D(Ln,Pe,ft,Ct,en+Wn,dt,vt,Be,Le):q.copyTexSubImage2D(Ln,Pe,ft,Ct,dt,vt,Be,Le);st.bindFramebuffer(q.READ_FRAMEBUFFER,null),st.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else sr?L.isDataTexture||L.isData3DTexture?q.texSubImage3D(Ln,Pe,ft,Ct,en,Be,Le,ze,Mt,gt,qt.data):Z.isCompressedArrayTexture?q.compressedTexSubImage3D(Ln,Pe,ft,Ct,en,Be,Le,ze,Mt,qt.data):q.texSubImage3D(Ln,Pe,ft,Ct,en,Be,Le,ze,Mt,gt,qt):L.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Pe,ft,Ct,Be,Le,Mt,gt,qt.data):L.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Pe,ft,Ct,qt.width,qt.height,Mt,qt.data):q.texSubImage2D(q.TEXTURE_2D,Pe,ft,Ct,Be,Le,Mt,gt,qt);q.pixelStorei(q.UNPACK_ROW_LENGTH,Vt),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,fr),q.pixelStorei(q.UNPACK_SKIP_PIXELS,$r),q.pixelStorei(q.UNPACK_SKIP_ROWS,ar),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Bn),Pe===0&&Z.generateMipmaps&&q.generateMipmap(Ln),st.unbindTexture()},this.copyTextureToTexture3D=function(L,Z,de=null,le=null,ie=0){return L.isTexture!==!0&&(xo("WebGLRenderer: copyTextureToTexture3D function signature has changed."),de=arguments[0]||null,le=arguments[1]||null,L=arguments[2],Z=arguments[3],ie=arguments[4]||0),xo('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(L,Z,de,le,ie)},this.initRenderTarget=function(L){it.get(L).__webglFramebuffer===void 0&&z.setupRenderTarget(L)},this.initTexture=function(L){L.isCubeTexture?z.setTextureCube(L,0):L.isData3DTexture?z.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?z.setTexture2DArray(L,0):z.setTexture2D(L,0),st.unbindTexture()},this.resetState=function(){E=0,N=0,H=null,st.reset(),Rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ki}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Zt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Zt._getUnpackColorSpace()}}const L1={type:"change"},Cg={type:"start"},Dw={type:"end"},eh=new Ih,I1=new Ra,D5=Math.cos(70*e4.DEG2RAD),Un=new te,br=2*Math.PI,sn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Op=1e-6;class R5 extends W4{constructor(e,t=null){super(e,t),this.state=sn.NONE,this.enabled=!0,this.target=new te,this.cursor=new te,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ao.ROTATE,MIDDLE:Ao.DOLLY,RIGHT:Ao.PAN},this.touches={ONE:So.ROTATE,TWO:So.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new te,this._lastQuaternion=new xs,this._lastTargetPosition=new te,this._quat=new xs().setFromUnitVectors(e.up,new te(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new o1,this._sphericalDelta=new o1,this._scale=1,this._panOffset=new te,this._rotateStart=new Et,this._rotateEnd=new Et,this._rotateDelta=new Et,this._panStart=new Et,this._panEnd=new Et,this._panDelta=new Et,this._dollyStart=new Et,this._dollyEnd=new Et,this._dollyDelta=new Et,this._dollyDirection=new te,this._mouse=new Et,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=P5.bind(this),this._onPointerDown=k5.bind(this),this._onPointerUp=L5.bind(this),this._onContextMenu=B5.bind(this),this._onMouseWheel=U5.bind(this),this._onKeyDown=N5.bind(this),this._onTouchStart=F5.bind(this),this._onTouchMove=z5.bind(this),this._onMouseDown=I5.bind(this),this._onMouseMove=O5.bind(this),this._interceptControlDown=H5.bind(this),this._interceptControlUp=V5.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(L1),this.update(),this.state=sn.NONE}update(e=null){const t=this.object.position;Un.copy(t).sub(this.target),Un.applyQuaternion(this._quat),this._spherical.setFromVector3(Un),this.autoRotate&&this.state===sn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(i)&&isFinite(s)&&(i<-Math.PI?i+=br:i>Math.PI&&(i-=br),s<-Math.PI?s+=br:s>Math.PI&&(s-=br),i<=s?this._spherical.theta=Math.max(i,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+s)/2?Math.max(i,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let l=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const c=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),l=c!=this._spherical.radius}if(Un.setFromSpherical(this._spherical),Un.applyQuaternion(this._quatInverse),t.copy(this.target).add(Un),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let c=null;if(this.object.isPerspectiveCamera){const h=Un.length();c=this._clampDistance(h*this._scale);const f=h-c;this.object.position.addScaledVector(this._dollyDirection,f),this.object.updateMatrixWorld(),l=!!f}else if(this.object.isOrthographicCamera){const h=new te(this._mouse.x,this._mouse.y,0);h.unproject(this.object);const f=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),l=f!==this.object.zoom;const d=new te(this._mouse.x,this._mouse.y,0);d.unproject(this.object),this.object.position.sub(d).add(h),this.object.updateMatrixWorld(),c=Un.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;c!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(c).add(this.object.position):(eh.origin.copy(this.object.position),eh.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(eh.direction))<D5?this.object.lookAt(this.target):(I1.setFromNormalAndCoplanarPoint(this.object.up,this.target),eh.intersectPlane(I1,this.target))))}else if(this.object.isOrthographicCamera){const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),c!==this.object.zoom&&(this.object.updateProjectionMatrix(),l=!0)}return this._scale=1,this._performCursorZoom=!1,l||this._lastPosition.distanceToSquared(this.object.position)>Op||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Op||this._lastTargetPosition.distanceToSquared(this.target)>Op?(this.dispatchEvent(L1),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?br/60*this.autoRotateSpeed*e:br/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Un.setFromMatrixColumn(t,0),Un.multiplyScalar(-e),this._panOffset.add(Un)}_panUp(e,t){this.screenSpacePanning===!0?Un.setFromMatrixColumn(t,1):(Un.setFromMatrixColumn(t,0),Un.crossVectors(this.object.up,Un)),Un.multiplyScalar(e),this._panOffset.add(Un)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const s=this.object.position;Un.copy(s).sub(this.target);let l=Un.length();l*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*l/i.clientHeight,this.object.matrix),this._panUp(2*t*l/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),s=e-i.left,l=t-i.top,c=i.width,h=i.height;this._mouse.x=s/c*2-1,this._mouse.y=-(l/h)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(br*this._rotateDelta.x/t.clientHeight),this._rotateUp(br*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(br*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-br*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(br*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-br*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);this._rotateStart.set(i,s)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);this._panStart.set(i,s)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,s=e.pageY-t.y,l=Math.sqrt(i*i+s*s);this._dollyStart.set(0,l)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),s=.5*(e.pageX+i.x),l=.5*(e.pageY+i.y);this._rotateEnd.set(s,l)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(br*this._rotateDelta.x/t.clientHeight),this._rotateUp(br*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);this._panEnd.set(i,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,s=e.pageY-t.y,l=Math.sqrt(i*i+s*s);this._dollyEnd.set(0,l),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const c=(e.pageX+t.x)*.5,h=(e.pageY+t.y)*.5;this._updateZoomParameters(c,h)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Et,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function k5(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function P5(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function L5(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Dw),this.state=sn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function I5(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Ao.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=sn.DOLLY;break;case Ao.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=sn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=sn.ROTATE}break;case Ao.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=sn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=sn.PAN}break;default:this.state=sn.NONE}this.state!==sn.NONE&&this.dispatchEvent(Cg)}function O5(n){switch(this.state){case sn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case sn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case sn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function U5(n){this.enabled===!1||this.enableZoom===!1||this.state!==sn.NONE||(n.preventDefault(),this.dispatchEvent(Cg),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(Dw))}function N5(n){this.enabled!==!1&&this._handleKeyDown(n)}function F5(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case So.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=sn.TOUCH_ROTATE;break;case So.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=sn.TOUCH_PAN;break;default:this.state=sn.NONE}break;case 2:switch(this.touches.TWO){case So.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=sn.TOUCH_DOLLY_PAN;break;case So.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=sn.TOUCH_DOLLY_ROTATE;break;default:this.state=sn.NONE}break;default:this.state=sn.NONE}this.state!==sn.NONE&&this.dispatchEvent(Cg)}function z5(n){switch(this._trackPointer(n),this.state){case sn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case sn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case sn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case sn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=sn.NONE}}function B5(n){this.enabled!==!1&&n.preventDefault()}function H5(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function V5(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function G5({numStars:n=500,radius:e=250,exclusionRadius:t=30}={}){function i(){let g;do g=Math.random()*e*1.5;while(g<t*1.25);const y=Math.random(),b=Math.random(),x=2*Math.PI*y,S=Math.acos(2*b-1);let w=g*Math.sin(S)*Math.cos(x),_=g*Math.sin(S)*Math.sin(x),R=g*Math.cos(S);return{pos:new te(w,_,R),hue:.6,minDist:g}}const s=[],l=[];let c;for(let g=0;g<n;g+=1){let y=i();const{pos:b,hue:x}=y;c=new Ut().setHSL(x,.2,Math.random()),s.push(b.x,b.y,b.z),l.push(c.r,c.g,c.b)}const h=new wr;h.setAttribute("position",new rr(s,3)),h.setAttribute("color",new rr(l,3));const f=new Hm().load(uL);f.colorSpace=Pr;const d=new xw({size:.2,vertexColors:!0,map:f,transparent:!0,alphaTest:.1,blending:Lo});return new P4(h,d)}const j5=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,q5=`
  varying vec2 vUv;
  uniform float time;

  // Simple 2D noise function
  float random(vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);
  }

  float noise(vec2 st) {
    vec2 i = floor(st);
    vec2 f = fract(st);

    float a = random(i);
    float b = random(i + vec2(1.0, 0.0));
    float c = random(i + vec2(0.0, 1.0));
    float d = random(i + vec2(1.0, 1.0));

    vec2 u = f * f * (3.0 - 2.0 * f);

    return mix(a, b, u.x) +
           (c - a) * u.y * (1.0 - u.x) +
           (d - b) * u.x * u.y;
  }

  void main() {
    vec2 scaledUv = vUv * 30.0;
    float n1 = noise(scaledUv + vec2(time * 0.1, 0.0));
    float n2 = noise(scaledUv + vec2(0.0, time * 0.1));
    float n = noise(scaledUv + vec2(n1, n2));

    vec3 color1 = vec3(0.0, 0.1, 0.2); 
    vec3 color2 = vec3(0.01, 0.03, 0.04);
    vec3 color3 = vec3(0.025, 0.025, 0.025); 

    vec3 color = mix(color1, color2, n);
    color = mix(color, color3, n * 0.5);

    gl_FragColor = vec4(color, 1.0);
  }
`;function W5(){const n=new Eg(500,32,32),e=new Ti({vertexShader:j5,fragmentShader:q5,uniforms:{time:{value:0}},side:hr,depthWrite:!1}),t=new Zn(n,e);return t.position.set(0,0,0),{mesh:t,update:i=>{e.uniforms.time.value=i}}}function O1({rimHex:n=35071,facingHex:e=0}={}){const t={color1:{value:new Ut(n)},color2:{value:new Ut(e)},fresnelBias:{value:.1},fresnelScale:{value:1},fresnelPower:{value:4}},i=`
  uniform float fresnelBias;
  uniform float fresnelScale;
  uniform float fresnelPower;
  
  varying float vReflectionFactor;
  
  void main() {
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
  
    vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
  
    vec3 I = worldPosition.xyz - cameraPosition;
  
    vReflectionFactor = fresnelBias + fresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), fresnelPower );
  
    gl_Position = projectionMatrix * mvPosition;
  }
  `,s=`
  uniform vec3 color1;
  uniform vec3 color2;
  
  varying float vReflectionFactor;
  
  void main() {
    float f = clamp( vReflectionFactor, 0.0, 1.0 );
    gl_FragColor = vec4(mix(color2, color1, vec3(f)), f);
  }
  `;return new Ti({uniforms:t,vertexShader:i,fragmentShader:s,transparent:!0,blending:Lo})}function Rw(n){const e=new D4;e.background=null;const t=new Lr(75,window.innerWidth/window.innerHeight,.1,1e3);t.position.set(-1,-5.5,1.25),t.up.set(0,0,1),t.far=1e3,t.updateProjectionMatrix();const i=new C5({antialias:!0});i.setSize(window.innerWidth,window.innerHeight),n.appendChild(i.domElement),i.toneMapping=J_,i.outputColorSpace=_s;const s=new R5(t,i.domElement);s.enabled=!1;const l=W5();e.add(l.mesh),console.log("Background sphere added to scene:",l.mesh);const c=new bs;c.rotation.z=-3.4*Math.PI/180,c.rotation.x=90*Math.PI/180,c.position.set(0,0,0),e.add(c);const h=new nc(3,5),f=new Sh({color:16775344,wireframe:!0}),d=new Zn(h,f);c.add(d);const p=new V4(16777198,1350,1e22);p.position.set(0,0,0),p.castShadow=!0,e.add(p);const g=new bs;e.add(g);const y=60,b=new Hm,x=new nc(1,y),S=new e1({map:b.load(iL),specularMap:b.load(aL),bumpMap:b.load(sL),bumpScale:.04}),w=new Zn(x,S);g.add(w),w.rotation.x=Math.PI/2;const _=new Sh({map:b.load(oL),blending:Lo}),R=new Zn(x,_);g.add(R),R.rotation.x=Math.PI/2;const A=new L4({map:b.load(lL),transparent:!0,opacity:.8,blending:Lo,alphaMap:b.load(cL)}),k=new Zn(x,A);k.scale.setScalar(.5015),g.add(k),k.rotation.x=Math.PI/2;const U=O1({rimHex:255}),E=new Zn(x,U);E.scale.setScalar(1.01),g.add(E),E.rotation.x=Math.PI/2,g.scale.set(.5,.5,.5);let N=75e-5,H=0;const C=15.2,D=16,F=[];for(let ht=0;ht<=360;ht++){const yt=ht*Math.PI/180;F.push(new te(C*Math.cos(yt),D*Math.sin(yt),0))}const J=new wr().setFromPoints(F),Y=new t1({color:16777215,dashSize:1,gapSize:0,transparent:!0,opacity:0}),W=new Kv(J,Y);W.computeLineDistances(),e.add(W);const re=new bs;e.add(re);const j=60,ce=new Hm,X=new nc(1,j),_e=new e1({map:ce.load(rL)}),T=new Zn(X,_e);re.add(T),T.rotation.x=Math.PI/2;const se=O1({rimHex:16711680}),Ee=new Zn(X,se);Ee.scale.setScalar(1.01),re.add(Ee),Ee.rotation.x=Math.PI/2,re.scale.set(1,1,1);let O=25e-5,Q=0;const be=30.4,ve=32,Ie=[];for(let ht=0;ht<=360;ht++){const yt=ht*Math.PI/180;Ie.push(new te(be*Math.cos(yt),ve*Math.sin(yt),0))}const Ne=new wr().setFromPoints(Ie),rt=new t1({color:16777215,dashSize:1,gapSize:0,transparent:!0,opacity:0}),Ue=new Kv(Ne,rt);Ue.computeLineDistances(),e.add(Ue);const Tt=Math.max(be,ve),Ft=G5({numStars:7500,radius:50,exclusionRadius:Tt});e.add(Ft);let xt=new q4;function q(){requestAnimationFrame(q);const ht=xt.getElapsedTime();l.update(ht),d.rotation.y+=.002,w.rotation.y+=.007,R.rotation.y+=.007,k.rotation.y+=.0073,E.rotation.y+=.007,T.rotation.y+=.007,Ee.rotation.y+=.007,H+=N,g.position.set(c.position.x+C*Math.cos(H),c.position.y+D*Math.sin(H),0),Q+=O,re.position.set(c.position.x+be*Math.cos(Q),c.position.y+ve*Math.sin(Q),0);const yt=new te(-7,1,2);t.position.copy(g.position).add(yt),t.lookAt(g.position),s.target.copy(g.position),Ft.rotation.y-=2e-4,s.update(),i.render(e,t)}q();function mn(){t.aspect=n.offsetWidth/n.offsetHeight,t.updateProjectionMatrix(),i.setSize(n.offsetWidth,n.offsetHeight)}return window.addEventListener("resize",mn),()=>{window.removeEventListener("resize",mn),n.removeChild(i.domElement)}}function Y5(){dL();const n=ge.useRef();return ge.useEffect(()=>{let e;return n.current&&(e=Rw(n.current)),()=>{e&&e()}},[]),ae.jsxs(ae.Fragment,{children:[ae.jsx(FP,{}),ae.jsx("div",{id:"outlet",children:ae.jsx(Jk,{})}),ae.jsx(hL,{}),ae.jsx("div",{id:"bg-space",ref:n})]})}function X5(){return ae.jsxs(ae.Fragment,{children:[ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsxs("center",{children:[ae.jsx("h2",{children:"Page not found"}),ae.jsxs("h4",{children:["Please double-check the URL or return to the ",ae.jsx("u",{children:ae.jsx("a",{href:"/",children:"main page"})}),"."]})]})]})}const Q5=[{name:"Neo4j Graph Data Science",date:"7 November 2023",tech:"Neo4j",logo:Ev,id:"C70E7300-B94F-4E92-9AE1-989E41CB42A8",url:"https://graphacademy.neo4j.com/c/c70e7300-b94f-4e92-9ae1-989e41cb42a8"},{name:"Neo4j Certified Professional",date:"21 October 2023",tech:"Neo4j",logo:Ev,id:"CEA1E9CF-A45D-42AC-A1DB-2EFFE5890AE5",url:"https://graphacademy.neo4j.com/c/cea1e9cf-a45d-42ac-a1db-2effe5890ae5"}];function Z5(){const n=Q5;return ae.jsxs(ae.Fragment,{children:[ae.jsx("center",{children:ae.jsx("h2",{children:"CERTIFICATIONS"})}),ae.jsx("div",{id:"certification-list",children:n.map(e=>ae.jsxs(Na,{to:e.url,target:"_blank",alt:e.name,children:[ae.jsx("h5",{children:e.date}),ae.jsx("h3",{children:e.name}),ae.jsx("h4",{children:e.id}),ae.jsx("p",{children:e.url})]},e.id))})]})}const K5="https://github.com/makuharistudio",J5="https://community.powerbi.com/t5/forums/recentpostspage/post-type/message/category-id/PBI_Comm_Galleries/user-id/331466",$5="https://x.com/makuhari_studio",eF="https://public.tableau.com/app/profile/makuharistudio/vizzes",tF="https://www.linkedin.com/in/",nF="MAKU",rF="HARI",iF=[{name:"LINKEDIN",icon:YP,hover:JP,link:tF+nF+rF},{name:"",icon:XP,hover:$P,link:$5},{name:"GITHUB",icon:QP,hover:eL,link:K5},{name:"POWER BI",icon:ZP,hover:tL,link:J5},{name:"TABLEAU",icon:KP,hover:nL,link:eF}];function aF(){const[n,e]=ge.useState(null);return ae.jsxs(ae.Fragment,{children:[ae.jsx("center",{children:ae.jsx("h2",{children:"LINKS"})}),ae.jsx("nav",{id:"link-list",children:iF.map((t,i)=>ae.jsxs(Na,{to:t.link,target:"_blank",onMouseEnter:()=>e(i),onMouseLeave:()=>e(null),children:[ae.jsx("img",{src:n===i?t.hover:t.icon,className:"link-icon",loading:"lazy",alt:t.name}),ae.jsx("h6",{children:t.name})]},t.name))})]})}const Dg=JSON.parse(`[{"id":1669294800,"title":"AppSource Deneb maps\\r","name":"appsource-deneb-maps","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Deneb\\", \\"Vega-Lite\\", \\"Vega\\"]\\r","date":"25 November 2022\\r","content":"You can view (but not download) my report from the official Power BI Data Stories Gallery:\\r\\n**[https://community.powerbi.com/t5/Data-Stories-Gallery/AppSource-Deneb-Maps/m-p/2930366](https://community.powerbi.com/t5/Data-Stories-Gallery/AppSource-Deneb-Maps/m-p/2930366)**\\r\\n\\r\\n![Animated preview of project](/src/assets/portfolio/img-2022-11-power-bi-appsource-deneb-maps.gif)\\r\\n\\r\\nThis Power BI report demonstrates custom AppSource Deneb maps using embedded geometry JSON data.\\r\\n\\r\\nThis is by no means an efficient way to create geographic maps with AppSource Deneb, but it does prove that it can be done, if for whatever reason you are not allowed to use the standalone Deneb version.\\r\\n \\r\\nAs this is a personal portfolio project, the pbix file won't be provided.\\r\\n \\r\\nAlternatively, if you would like a tutorial outline to learn how to get this geographic map data or how to embed it into AppSource Deneb, please see my blog post: **[https://makuharistudio.github.io/#/blog/how-to-use-geographic-maps-in-power-bi-with-appsource-deneb](https://makuharistudio.github.io/#/blog/how-to-use-geographic-maps-in-power-bi-with-appsource-deneb)**.\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* Microsoft Power BI Community Forum Question **[Deneb Vega Lite Map not displaying](https://community.powerbi.com/t5/Desktop/Deneb-Vega-Lite-Map-not-displaying/m-p/2487853)**\\r\\n\\r\\n* Stack Overflow Question **[Loading feature data into Vega-Lite](https://stackoverflow.com/questions/71254436/loading-feature-data-into-vega-lite)**\\r\\n\\r\\n* Website **[GeoJSON Maps of the globe](https://geojson-maps.ash.ms)**\\r\\n\\r\\n* Website **[Vega-Lite Example Gallery](https://vega.github.io/vega-lite/examples)**\\r\\n\\r\\n* Website **[Vega Example Gallery](https://vega.github.io/vega/examples)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2022-11-25.md)** for this project page's markdown file in GitHub.","desc":"Power BI report that demonstrates custom AppSource Deneb mapping using embedded geometry JSON data.\\r","photo":"../assets/portfolio/img-2022-11-power-bi-appsource-deneb-maps.gif\\r","siteURL":"https://community.powerbi.com/t5/Data-Stories-Gallery/AppSource-Deneb-Maps/m-p/2930366\\r","codeURL":"https://makuharistudio.github.io/#/blog/how-to-use-geographic-maps-in-power-bi-with-appsource-deneb\\r"},{"id":1666702800,"title":"International marketplace profit forecast\\r","name":"international-marketplace-profit-forecast","tech":"logo-excel\\r","tags":"[\\"Excel\\", \\"Power Pivot\\", \\"DAX\\", \\"Machine Learning\\"]\\r","date":"26 October 2022\\r","content":"You can download this Excel report from here:\\r\\n**[https://github.com/makuharistudio/data-visualisation-datasets/raw/main/International%20Marketplace%20sales/International%20Marketplace%20Profit%20Dashboard.xlsx](https://github.com/makuharistudio/data-visualisation-datasets/raw/main/International%20Marketplace%20sales/International%20Marketplace%20Profit%20Dashboard.xlsx?raw=true)**\\r\\n\\r\\n![Animated preview of project](/src/assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast.gif)\\r\\n\\r\\nThis Excel report is a redux of my \\"International marketplace profit\\" Power BI report, the latter you can find here:\\r\\n\\r\\n**[https://community.powerbi.com/t5/Data-Stories-Gallery/International-Marketplace-profit-report-using-Python-and-Deneb/m-p/2480550](https://community.powerbi.com/t5/Data-Stories-Gallery/International-Marketplace-profit-report-using-Python-and-Deneb/m-p/2480550)**\\r\\n\\r\\n![Animated preview of Power BI version](/src/assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.gif)\\r\\n\\r\\nMost of the DAX code used is similar to my Power BI report. You can find some of that code in my Github here:\\r\\n\\r\\n**[https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/Power%20Query%20and%20Deneb%20code.md#excel-report-model](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/Power%20Query%20and%20Deneb%20code.md#excel-report-model)**\\r\\n\\r\\nI also used Excel's out-of-the-box FORECAST.ETS function to create the monthly profit forecasting. You can find more information on my exploration of this feature in this blog post:\\r\\n\\r\\n**[https://makuharistudio.github.io/#/blog/comparing-manual-forecasting-with-excels-built-in-forecastets-function](https://makuharistudio.github.io/#/blog/comparing-manual-forecasting-with-excels-built-in-forecastets-function)**\\r\\n\\r\\nThe Excel report is also embedded below using the OneDrive free version.\\r\\n\\r\\nIt is recommended you download the file and open it from a desktop version of Excel. It connects to my GitHub repository data, so please click \\"Enable content\\" to access that External Data Connection.\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* Youtube video **[How to map an Excel cell value as an input parameter for Power Query by ExcelIsFun](https://www.youtube.com/watch?v=gK2yBpiITv)**\\r\\n\\r\\n* Youtube video **[Call Center Performance Dashboard | Microsoft Excel by Other Level's](https://www.youtube.com/watch?v=6qOL69bIQz8)**\\r\\n\\r\\n* Youtube video **[Excel Dashboard for Schools with changing students images dynamically by Other Level's](https://www.youtube.com/watch?v=T4sZSXdQ4Vg&t=1395s)**\\r\\n\\r\\n* Youtube video **[How to embed Excel workbook to web via OneDrive Personal free version by MyOnlineTrainingHub](https://www.youtube.com/watch?v=uvA-U9FKgPw&t=385s)**\\r\\n\\r\\n* Stack Overflow Question **[How to run HTML script tag equivalents inside a React component](https://stackoverflow.com/questions/34424845/adding-script-tag-to-react-jsx)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2022-10-26.md)** for this project page's markdown file in GitHub.","desc":"Excel dashboard that uses an OOTB exponential smoothing algorithm to forecast profit.\\r","photo":"../assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast.gif\\r","siteURL":"https://makuharistudio.github.io/#/project/ExcelInternationalMarketplaceProfitForecast\\r","codeURL":"https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/Power%20Query%20and%20Deneb%20code.md\\r"},{"id":1661436000,"title":"Satellite launch overview\\r","name":"satellite-launch-overview","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Deneb\\", \\"Vega-Lite\\", \\"Power Query\\", \\"DAX\\"]\\r","date":"26 August 2022\\r","content":"You can view (but not download) my report from the official Power BI Data Stories Gallery:\\r\\n**[https://community.powerbi.com/t5/Data-Stories-Gallery/Satellite-launch-overview/m-p/2730077](https://community.powerbi.com/t5/Data-Stories-Gallery/Satellite-launch-overview/m-p/2730077)**\\r\\n\\r\\n![Animated preview of project](/src/assets/portfolio/img-2022-08-satellite-launch-overview.gif)\\r\\n\\r\\nThis Power BI report compares the number of actively monitored satellites versus the number launched historically over time.\\r\\n\\r\\nThe main screen showing satellites around Earth is a zoomable scatterplot that was built using the Deneb custom visual by Daniel Marsh-Patrick **[https://deneb-viz.github.io](https://deneb-viz.github.io)**.\\r\\n\\r\\nAfter seeing Vega-Lite's ability to zoom with the mouse scrollwheel, I felt I had to create this. It currently doesn't support touch screen pinching to zoom, but hopefully one day.\\r\\n \\r\\nAs this is a personal portfolio project, the pbix file won't be provided.\\r\\n\\r\\nAlternatively, if you would like a tutorial outline so you can try to recreate this Deneb satellite scatterplot, please see my blog post: **[https://makuharistudio.github.io/#/blog/creating-a-decorated-scatterplot-visual-using-deneb-and-power-bi](https://makuharistudio.github.io/#/blog/creating-a-decorated-scatterplot-visual-using-deneb-and-power-bi)**.\\r\\n\\r\\nSome of the underlying Power Query code is available here: **[https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Satellite%20launch%20overview](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Satellite%20launch%20overview)**.\\r\\n\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\nThe main inspirations for this report are these Tableau Public community gallery visualisations:\\r\\n\\r\\n* [Yuli Wang's :](https://twitter.com/Yuli_Wg) **[50 years of Chinese Aerospace](https://public.tableau.com/app/profile/yuri.wg/viz/50_15655374759590/1)**\\r\\n\\r\\n![Tableau satellite report by Yuli Wang](/src/assets/blog/2022-08-27--01.png)\\r\\n\\r\\n* [Wendy Shijia's :](https://twitter.com/ShijiaWendy) **[50 Years of China's Space Journey](https://public.tableau.com/app/profile/wendy.shijia/viz/50YearsofChinasSpaceJourney/50yrsChinasSpaceJourney)**\\r\\n\\r\\n![Tableau satellite report by Wendy Shijia](/src/assets/blog/2022-08-27--01a.png)\\r\\n\\r\\n* [Jean-Paul Frenett's :](https://public.tableau.com/app/profile/jean.paul.frenett) **[Satellites of Earth](https://public.tableau.com/app/profile/jean.paul.frenett/viz/SatellitesofEarth/SatellitesinOrbit)**\\r\\n\\r\\n![Tableau satellite report by Jean-Paul Frenett](/src/assets/blog/2022-08-27--02.png)\\r\\n\\r\\n* [Lubos Pribula's :](https://twitter.com/LubosPribula) **[Traffic Overhead](https://public.tableau.com/app/profile/lubospribula/viz/TrafficOverhead/TrafficOverhead)**\\r\\n\\r\\n![Tableau satellite report by Lubos Pribula](/src/assets/blog/2022-08-27--03.png)\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2022-08-26.md)** for this project page's markdown file in GitHub.","desc":"Power BI report showing actively monitored satellites using a custom Deneb scatterplot visual.\\r","photo":"../assets/portfolio/img-2022-08-satellite-launch-overview.gif\\r","siteURL":"https://community.powerbi.com/t5/Data-Stories-Gallery/Satellite-launch-overview/m-p/2730077\\r","codeURL":"https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Satellite%20launch%20overview\\r"},{"id":1655647200,"title":"Customer support agent performance\\r","name":"customer-support-agent-performance","tech":"logo-excel\\r","tags":"[\\"Excel\\", \\"Power Query\\", \\"Power Pivot\\", \\"DAX\\"]\\r","date":"20 June 2022\\r","content":"You can download this Excel report from here:\\r\\n**[https://github.com/makuharistudio/data-visualisation-datasets/raw/main/Support%20ticket%20updates/Customer%20Support%20Agent%20Performance%20Dashboard.xlsx](https://github.com/makuharistudio/data-visualisation-datasets/raw/main/Support%20ticket%20updates/Customer%20Support%20Agent%20Performance%20Dashboard.xlsx?raw=true)**\\r\\n\\r\\n![Animated preview of project](/src/assets/portfolio/img-2022-06-excel-customer-support-agent-performance.gif)\\r\\n\\r\\nThis Excel report is a redux of my \\"Follow the sun customer support\\" Power BI report, the latter you can find here:\\r\\n\\r\\n**[https://community.powerbi.com/t5/Data-Stories-Gallery/Follow-the-sun-customer-service-support/m-p/2168279](https://community.powerbi.com/t5/Data-Stories-Gallery/Follow-the-sun-customer-service-support/m-p/2168279)**\\r\\n\\r\\n![Animated preview of Power BI version](/src/assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.gif)\\r\\n\\r\\nMost of the code used is similar to my Power BI report, except most of the DAX measures now include USERELATIONSHIP due to a data model improvement. You can find some of that code in my Github here:\\r\\n\\r\\n**[https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates#excel-report-model](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates#excel-report-model)**\\r\\n\\r\\nThe Excel report is also embedded below using the OneDrive free version.\\r\\n\\r\\nDue to OneDrive's restrictions with External Data Connections and Camera Tools, the report cannot dynamically display support agent images nor refresh its data connection.\\r\\n\\r\\nIt is recommended you download the file and open it from a desktop version of Excel. It connects to my GitHub repository data, so please click \\"Enable content\\" to access that External Data Connection.\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* Youtube video **[How to map an Excel cell value as an input parameter for Power Query by ExcelIsFun](https://www.youtube.com/watch?v=gK2yBpiITv)**\\r\\n\\r\\n* Youtube video **[Call Center Performance Dashboard | Microsoft Excel by Other Level's](https://www.youtube.com/watch?v=6qOL69bIQz8)**\\r\\n\\r\\n* Youtube video **[Excel Dashboard for Schools with changing students images dynamically by Other Level's](https://www.youtube.com/watch?v=T4sZSXdQ4Vg&t=1395s)**\\r\\n\\r\\n* Youtube video **[How to embed Excel workbook to web via OneDrive Personal free version by MyOnlineTrainingHub](https://www.youtube.com/watch?v=uvA-U9FKgPw&t=385s)**\\r\\n\\r\\n* Stack Overflow Question **[How to run HTML script tag equivalents inside a React component](https://stackoverflow.com/questions/34424845/adding-script-tag-to-react-jsx)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2022-06-20.md)** for this project page's markdown file in GitHub.","desc":"Excel dashboard comparing individual support staff KPIs with a cell filter into Power Query that dynamically displays photos.\\r","photo":"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance.gif\\r","siteURL":"https://makuharistudio.github.io/#/project/ExcelCustomerSupportAgentPerformance\\r","codeURL":"https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates\\r"},{"id":1650981600,"title":"International marketplace profit\\r","name":"international-marketplace-profit","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Python\\", \\"Deneb\\", \\"Vega-Lite\\", \\"Power Query\\", \\"Machine Learning\\"]\\r","date":"27 April 2022\\r","content":"You can view (but not download) my report from the official Power BI Data Stories Gallery:\\r\\n**[https://community.powerbi.com/t5/Data-Stories-Gallery/International-Marketplace-profit-report-using-Python-and-Deneb/m-p/2480550](https://community.powerbi.com/t5/Data-Stories-Gallery/International-Marketplace-profit-report-using-Python-and-Deneb/m-p/2480550)**\\r\\n\\r\\n![Animated preview of project](/src/assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.gif)\\r\\n\\r\\nThis Power BI report is my first attempt at incorporating the following into a fictional profit report:\\r\\n\\r\\n1. A Python predictive model based on a tutorial by Absent Data: [https://www.absentdata.com/power-bi/forecasting-with-python-and-power-bi](https://www.absentdata.com/power-bi/forecasting-with-python-and-power-bi).\\r\\n\\r\\nand\\r\\n\\r\\n2. Custom visuals using Deneb (a custom visual by Daniel Marsh-Patrick **[https://deneb-viz.github.io](https://deneb-viz.github.io)**) and style is based on Tableau visual designs by Pradeep Kumar G **[https://public.tableau.com/app/profile/pradeepkumar.g](https://public.tableau.com/app/profile/pradeepkumar.g)**.\\r\\n\\r\\nAs this is a personal portfolio project, the pbix file won't be provided.\\r\\n\\r\\nAlternatively, if you would like a tutorial outline to learn one way to create forecast data in Python and bring it into Power BI, please see my blog post: **[https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi](https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi)**\\r\\n\\r\\nSome of the underlying Power Query code is available here: **[https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/Power%20Query%20and%20Deneb%20code.md](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/Power%20Query%20and%20Deneb%20code.md)**.\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* Blog post **[Forecasting with Python and Power BI by Absent Data](https://www.absentdata.com/power-bi/forecasting-with-python-and-power-bi)**\\r\\n\\r\\n* YouTube video **[How do I find and remove duplicate rows in pandas?](https://www.youtube.com/watch?v=ht5buXUMqkQ)**\\r\\n\\r\\n* YouTube video **[How to install Python Libraries in Visual Studio Code by Aditya Thakur](https://www.youtube.com/watch?v=ThU13tikHQw)**\\r\\n\\r\\n* Stack Overflow question **[How to show Python plots in Visual Studio Code](https://stackoverflow.com/questions/49992300)**\\r\\n\\r\\n* Stack Overflow question **[How to clear Visual Studio Code terminal](https://stackoverflow.com/questions/49992300)**\\r\\n\\r\\n* Stack Overflow question **[Python script in Power BI returns date as Microsoft.OleDb.Date](https://stackoverflow.com/questions/51929420/python-script-in-power-bi-returns-date-as-microsoft-oledb-date)**\\r\\n\\r\\n* Stack Overflow question **[Setting the x axis as time (years, months) for a set of values](https://stackoverflow.com/questions/28948898/setting-the-x-axis-as-time-years-months-for-a-set-of-values)**\\r\\n\\r\\n* LinkedIn Learning course **[Python: Working with Predictive Analytics by Isil Berkun](https://www.linkedin.com/learning/python-working-with-predictive-analytics)**\\r\\n\\r\\n* LinkedIn Learning course **[Python for Data Visualization by Michael Galarnyk and Madecraft](https://www.linkedin.com/learning/python-for-data-visualization)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2022-04-27.md)** for this project page's markdown file in GitHub.","desc":"Power BI report that incorporates Python profit predictions and custom Deneb visualisations.\\r","photo":"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.gif\\r","siteURL":"https://community.powerbi.com/t5/Data-Stories-Gallery/International-Marketplace-profit-report-using-Python-and-Deneb/m-p/2480550\\r","codeURL":"https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/Power%20Query%20and%20Deneb%20code.md\\r"},{"id":1641906000,"title":"International marketplace dataset\\r","name":"international-marketplace-dataset","tech":"logo-sqlserver\\r","tags":"[\\"T-SQL\\", \\"ETL\\", \\"SQL Server Integration Services\\"]\\r","date":"12 January 2022\\r","content":"You can download the SQL Server and CSV variations of this dataset from here:\\r\\n\\r\\n![Preview of project](/src/assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace-trimmed.png)\\r\\n\\r\\nThis is my first use of SQL Server Integration Services to merge and transform 3 different fictional data sources into a single one.\\r\\n\\r\\nThe data sources used are:\\r\\n* Microsoft's Wide World Importers database\\r\\n* Microsoft's \\"Contoso\\" data warehouse\\r\\n* Tableau's Sample APAC Superstore dataset\\r\\n\\r\\nFor an overview of how this dataset was created, please refer to my blog post: [https://makuharistudio.github.io/#/blog/international-marketplace-dataset-created-with-integration-services](https://makuharistudio.github.io/#/blog/international-marketplace-dataset-created-with-integration-services).\\r\\n\\r\\nFor the SQL scripts I made for this SSIS project and other details, please refer to my GitHub: [https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales).\\r\\n\\r\\n\\r\\n### Reference\\r\\n\\r\\n* LinkedIn Learning course **[SQL Server Integration Services\\" by Adam Wilbert](https://www.linkedin.com/learning/sql-server-integration-services-2)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2022-01-12.md)** for this project page's markdown file in GitHub.","desc":"SQL Server Integration Services package that merges Microsoft and Tableau sample datasets into a single warehouse.\\r","photo":"../assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace-trimmed.png\\r","siteURL":"https://makuharistudio.github.io/#/blog/international-marketplace-dataset-created-with-integration-services\\r","codeURL":"https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales\\r"},{"id":1635771600,"title":"Follow the sun customer support\\r","name":"follow-the-sun-customer-support","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\", \\"DAX\\"]\\r","date":"2 November 2021\\r","content":"You can view (but not download) my report from the official Power BI Data Stories Gallery:\\r\\n**[https://community.powerbi.com/t5/Data-Stories-Gallery/Follow-the-sun-customer-service-support/m-p/2168279](https://community.powerbi.com/t5/Data-Stories-Gallery/Follow-the-sun-customer-service-support/m-p/2168279)**\\r\\n\\r\\n![Animated preview of project](/src/assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.gif)\\r\\n\\r\\nThis Power BI report is a support ticket dashboard that shows how global teams help customers on behalf of colleagues from different offices and time zones (a.k.a. follow-the-sun / FTS support), including individual staff metrics to compare performance, and highlights outliers that may need to be addressed by managers or leads, depending on contractual SLAs.\\r\\n\\r\\nThe dataset used is completely randomised and fictional, including the names of people representing agents and users. This report also doesn't use any calendar tables nor APIs, and instead uses Power Query functions and merges to apply offsets which respect daylight saving changes dynamically based on the source date time value to be converted.\\r\\n\\r\\nAs this is a personal portfolio project, the pbix file won't be provided.\\r\\n\\r\\nAlternatively, if you would like tutorial outlines on the approaches used to create this report, please see my blog posts: \\r\\n\\r\\n* [https://makuharistudio.github.io/#/blog/find-date-for-the-nth-day-of-a-month-in-power-bi](https://makuharistudio.github.io/#/blog/find-date-for-the-nth-day-of-a-month-in-power-bi)\\r\\n\\r\\n* [https://makuharistudio.github.io/#/blog/import-time-zone-offsets-and-observations-from-wikipedia-in-power-bi](https://makuharistudio.github.io/#/blog/import-time-zone-offsets-and-observations-from-wikipedia-in-power-bi)\\r\\n\\r\\n* [https://makuharistudio.github.io/#/blog/dynamically-apply-time-zone-and-daylight-savings-on-datetimes-in-power-bi](https://makuharistudio.github.io/#/blog/dynamically-apply-time-zone-and-daylight-savings-on-datetimes-in-power-bi)\\r\\n\\r\\nSome of the underlying Power Query code is available here: **[https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates)**.\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2021-11-02.md)** for this project page's markdown file in GitHub.","desc":"Power BI report that summarises global customer service teamwork and performance. Incorporates dynamic daylight saving offsets.\\r","photo":"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.gif\\r","siteURL":"https://community.powerbi.com/t5/Data-Stories-Gallery/Follow-the-sun-customer-service-support/m-p/2168279\\r","codeURL":"https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates\\r"},{"id":1633698000,"title":"Singapore rental prices\\r","name":"singapore-rental-prices","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\", \\"DAX\\"]\\r","date":"9 October 2021\\r","content":"You can view (but not download) my report from the official Power BI Data Stories Gallery:\\r\\n**[https://community.powerbi.com/t5/Data-Stories-Gallery/Quarterly-Singapore-median-rental-prices-by-currency/m-p/2125424](https://community.powerbi.com/t5/Data-Stories-Gallery/Quarterly-Singapore-median-rental-prices-by-currency/m-p/2125424)**\\r\\n\\r\\n![Animated preview of project](/src/assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.gif)\\r\\n\\r\\nThis Power BI report is my first published publically, showing median rental prices of key towns in Singapore across different major curriencies.\\r\\n\\r\\nAs this is a personal portfolio project, the pbix file won't be provided.\\r\\n\\r\\nSome of the underlying Power Query code is available here: **[https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Singapore%20rental%20prices](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Singapore%20rental%20prices)**.\\r\\n\\r\\n\\r\\n### Reference\\r\\n\\r\\n* Website **[Power BI Filled Map; the Good, the Bad, and the Ugly by Radacad](https://radacad.com/power-bi-filled-map-the-good-the-bad-and-the-ugly)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/tree/main/src/markdown/projects/2021-10-09.md)** for this project page's markdown file in GitHub.","desc":"Power BI report that shows trends of Singapore rent by quarter, flat type, and major currency conversions.\\r","photo":"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.gif\\r","siteURL":"https://community.powerbi.com/t5/Data-Stories-Gallery/Quarterly-Singapore-median-rental-prices-by-currency/m-p/2125424\\r","codeURL":"https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Singapore%20rental%20prices\\r"}]`),Rg=JSON.parse('[{"id":1728219600,"title":"Create a machine learning Windows server using AWS EC2, TensorFlow, and Python\\r","name":"create-a-machine-learning-windows-server-using-aws-ec2-tensorflow-and-python","tech":"logo-aws\\r","tags":"[\\"AWS\\", \\"Machine Learning\\", \\"Python\\", \\"TensorFlow\\"]\\r","date":"07 October 2024\\r","content":"This post is a guide on how to set up an AWS EC2 on-demand server with Windows OS, and an NVIDIA graphics card for machine learning via TensorFlow. \\r\\n\\r\\nRequirements (i.e. areas this post does not cover):\\r\\n- AWS account with payment method **[https://docs.aws.amazon.com/SetUp/latest/UserGuide/setup-AWSsignup.html](https://docs.aws.amazon.com/SetUp/latest/UserGuide/setup-AWSsignup.html)**\\r\\n- Understand how to create a security group and keypair\\r\\n- Understand how to RDP into an AWS instance using a keypair\\r\\n\\r\\n**Note:** This guide is by no means a must setup to study machine learning. It\'s more of a reminder to myself on how to do the setup using my preferred tools, Windows and Visual Studio Code. \\r\\n\\r\\nThere are free alternatives where you do not need to perform this kind of setup, for example: **[https://colab.research.google.com](https://colab.research.google.com)**.\\r\\n\\r\\n\\r\\n\\r\\n## Step 1. Create an EC2 g4dn instance type in AWS\\r\\n\\r\\nFrom the AWS EC2 dashboard, launch an instance. \\r\\n\\r\\nUnder the **Application and OS Images** section, select Windows, then a free tier eligible Amazon machine image. In this example we have selected _\\"Microsoft Windows Server 2022 Base\\"_.\\r\\n\\r\\nNow here is the first component of our setup that will incur the on-demand cost (based on your usage). Under the **Instance type** section, select g4dn.xlarge. \\r\\n\\r\\nThe g4dn instance is intended for high performance computing using GPU acceleration, which machine learning can require. Amongst the g4dn configurations we can choose from, xlarge has the lowest RAM (16GB) and therefore the lowest hourly cost (as at time of writing). There are other options which go into hundreds of GBs of RAM as well, but they are just a bit more expensive...\\r\\n\\r\\n![AWS EC2: Launch an instance](/src/assets/blog/2024-10-07--01.png)\\r\\n\\r\\nIf you recently created your personal AWS account, you likely cannot make the above selection, and receive this warning instead:\\r\\n\\r\\n_\\"You have requested more vCPU capacity than your current vCPU limit of 0 allows for the instance bucket that the specified instance type belongs to. Please visit http://aws.amazon.com/contact-us/ec2-request to request an adjustment to this limit.\\"_\\r\\n\\r\\n![AWS EC2: vCPU limit warning](/src/assets/blog/2024-10-07--02.png)\\r\\n\\r\\nIf this is the case for you, navigate to the Service Quotas dashboard, then search for _Running On-Demand G and VT instances_.\\r\\n\\r\\n![AWS Service Quotas: Request increase at account level ](/src/assets/blog/2024-10-07--03.png)\\r\\n\\r\\nSelect that Quota name, and click the _\\"Request increase at account level\\"_ button. You will be prompted to explain the reason for your quota\'s extension. In my case, I explained I was self-studying machine learning and the tutorial I was following recommended the g4dn instance type.\\r\\n\\r\\nYour request is be submitted to AWS staff who will revise it for security purposes, and it may take a couple of days to be fulfilled. Once your request is successful, then re-attempt the above EC2 instance creation.\\r\\n\\r\\nIf you are successful in selecting the g4dn.xlarge Instance type, proceed to add your security group in the **Network settings** section.\\r\\n\\r\\nThe amount of hard drive space you define under **Configure storage** will also incur ongoing cost. Free tier eligibility for storage caps out at 30GB (as at time of writing). However, the completed setup of the server needs at least 40GB of hard drive space. In this example, 50GB of storage is defined.\\r\\n\\r\\n![AWS EC2: Configure storage](/src/assets/blog/2024-10-07--04.png)\\r\\n\\r\\n\\r\\n\\r\\n## Step 2. Check TensorFlow\'s GPU compatibility list\\r\\n\\r\\nNext, we start planning the components to install on our Windows Server to allow for computation using its GPU. As we will be combining components from different platforms i.e. NVIDIA, TensorFlow, Python, and Microsoft, we will need to be mindful of compatibility.\\r\\n\\r\\nYou can find compatibility charts on TensorFlow\'s website that identifies platform combinations they have successfully tested, under the **GPU** section.\\r\\n\\r\\n**[https://www.tensorflow.org/install/source_windows](https://www.tensorflow.org/install/source_windows)**\\r\\n\\r\\n![TensorFlow: GPU compatibility](/src/assets/blog/2024-10-07--05.png)\\r\\n\\r\\nBased on this chart, we will try to install platforms as close to the versions listed below, as we can.\\r\\n - NVIDIA GPU driver that supports CUDA Toolkit version 11.2\\r\\n - a Python version between 3.7 and 3.10\\r\\n - CUDA Toolkit version 11.2\\r\\n - cuDNN version 8.1\\r\\n - Microsoft Visual C++ Compiler (MSVC) version 2019\\r\\n - create a virtual environment with tensorflow-gpu version 2.10.0 installed\\r\\n\\r\\nWe will also install:\\r\\n - DirectX End-User Runtimes: to help check that the GPU is recognised by Windows.\\r\\n\\r\\n\\r\\nOnce your Windows instance is running, remote into it.\\r\\n\\r\\n\\r\\n\\r\\n## Step 3. Install NVIDIA GPU driver\\r\\n\\r\\nFrom Device Manager, under _Other devices \\\\ 3D Video Controller_, the graphics card appears to be missing a driver.\\r\\n\\r\\n![Device Manager: 3D Video Controller](/src/assets/blog/2024-10-07--06.png)\\r\\n\\r\\n\\r\\nSo we will install one from NVIDIA\'s website.\\r\\n\\r\\nAWS\'s g4dn EC2 instances use T4 GPUs, so we\'ll attempt to install this.\\r\\n\\r\\n**[https://www.nvidia.com/en-us/drivers](https://www.nvidia.com/en-us/drivers)**\\r\\n\\r\\n![NVIDIA: Data Center Driver for Windows](/src/assets/blog/2024-10-07--07.png)\\r\\n\\r\\nIn this example, we will use the _Data Center Driver for Windows version 475.14_, as this is the closest to version 11.2 we can find.\\r\\n\\r\\n**[https://www.nvidia.com/en-us/drivers/details/228678](https://www.nvidia.com/en-us/drivers/details/228678)**\\r\\n\\r\\n![NVIDIA: Data Center Driver for Windows download](/src/assets/blog/2024-10-07--08.png)\\r\\n\\r\\n![NVIDIA: Graphics Driver installed](/src/assets/blog/2024-10-07--09.png)\\r\\n\\r\\nOnce the graphics driver is installed, you should be able to view it under Display adapters in Device Manager.\\r\\n\\r\\n![Device Manager: NVIDIA Tesla T4](/src/assets/blog/2024-10-07--10.png)\\r\\n\\r\\n - _NVIDIA GPU driver that supports CUDA Toolkit version 11.2_\\r\\n - **a Python version between 3.7 and 3.10**\\r\\n - **CUDA Toolkit version 11.2**\\r\\n - **cuDNN version 8.1**\\r\\n - **Microsoft Visual C++ Compiler (MSVC) version 2019**\\r\\n - **create a virtual environment with tensorflow-gpu version 2.10.0 installed**\\r\\n - **DirectX End-User Runtimes**\\r\\n\\r\\n\\r\\n\\r\\n## Step 4. Install Python\\r\\n\\r\\nNext we will install a Python version between 3.7 and 3.10.\\r\\n\\r\\n**[https://www.python.org/downloads/windows](https://www.python.org/downloads/windows)**\\r\\n\\r\\nIn this example, we will use Python version 3.9.12. No particular reason on this one.\\r\\n\\r\\n![Python: 3.9.12 installer](/src/assets/blog/2024-10-07--11.png)\\r\\n\\r\\nEnsure the option to add Python to the environmental PATH is ticked during the install.\\r\\n\\r\\n![Python: Setup was successful](/src/assets/blog/2024-10-07--12.png)\\r\\n\\r\\n - _NVIDIA GPU driver that supports CUDA Toolkit version 11.2_\\r\\n - _a Python version between 3.7 and 3.10_\\r\\n - **CUDA Toolkit version 11.2**\\r\\n - **cuDNN version 8.1**\\r\\n - **Microsoft Visual C++ Compiler (MSVC) version 2019**\\r\\n - **create a virtual environment with tensorflow-gpu version 2.10.0 installed**\\r\\n - **DirectX End-User Runtimes**\\r\\n\\r\\n\\r\\n\\r\\n## Step 5. Install DirectX End-User Runtimes\\r\\n\\r\\nFor this step, we will install the DirectX End-User Runtimes.\\r\\nThe reason for this is to help cover potentially missing components using this method of TensorFlow installation, versus TensorFlow\'s official guide which may target personal Windows machines for local development.\\r\\n\\r\\nThe link below is for the offline DirectX installer, as for whatever reason, the online installer didn\'t work for me.\\r\\n\\r\\n**[https://www.microsoft.com/en-us/download/details.aspx?id=8109](https://www.microsoft.com/en-us/download/details.aspx?id=8109)**\\r\\n\\r\\n![DirectX: End-User Runtimes download](/src/assets/blog/2024-10-07--13.png)\\r\\n\\r\\n![DirectX: Installation Complete](/src/assets/blog/2024-10-07--14.png)\\r\\n\\r\\n - _NVIDIA GPU driver that supports CUDA Toolkit version 11.2_\\r\\n - _a Python version between 3.7 and 3.10_\\r\\n - **CUDA Toolkit version 11.2**\\r\\n - **cuDNN version 8.1**\\r\\n - **Microsoft Visual C++ Compiler (MSVC) version 2019**\\r\\n - **create a virtual environment with tensorflow-gpu version 2.10.0 installed**\\r\\n - _DirectX End-User Runtimes_\\r\\n\\r\\nNow that the graphics card\'s registration on the server is done, we\'ll install the components needed to take advantage of it for computation.\\r\\n\\r\\n\\r\\n\\r\\n## Step 6. Install CUDA Toolkit\\r\\n\\r\\nThe CUDA Toolkit is what allows the GPU (graphics card) to handle processing that would typically be reserved for the CPU (processor). Namely, the AI tasks from the projects you will hopefully create.\\r\\n\\r\\nNVIDIA\'s GPU compatibility guide indicated CUDA version 11.2, but as that was no longer available in the CUDA Toolkit Archive, I went with version 11.4.0.\\r\\n\\r\\n**[https://developer.nvidia.com/cuda-toolkit-archive](https://developer.nvidia.com/cuda-toolkit-archive)**\\r\\n\\r\\n![NVIDIA: CUDA Toolkit 11.4.0](/src/assets/blog/2024-10-07--15.png)\\r\\n\\r\\nAlthough there is no Server 2022 option, Server 2019 should work or our purposes.\\r\\n\\r\\n![NVIDIA: CUDA Toolkit 11.4.0 Downloads](/src/assets/blog/2024-10-07--16.png)\\r\\n\\r\\n![NVIDIA: Nsight Visual Studio Edition Summary](/src/assets/blog/2024-10-07--17.png)\\r\\n\\r\\n - _NVIDIA GPU driver that supports CUDA Toolkit version 11.2_\\r\\n - _a Python version between 3.7 and 3.10_\\r\\n - _CUDA Toolkit version 11.2_\\r\\n - **cuDNN version 8.1**\\r\\n - **Microsoft Visual C++ Compiler (MSVC) version 2019**\\r\\n - **create a virtual environment with tensorflow-gpu version 2.10.0 installed**\\r\\n - _DirectX End-User Runtimes_\\r\\n\\r\\n\\r\\n\\r\\n## Step 7. Install cuDNN\\r\\n\\r\\nNext we install the cuDNN (cuda Deep Neural Network) library, which is used to optimise the deep learning computations.\\r\\n\\r\\nThe cuDNN Archive lists a ranged installer version (8.x - 1.x) that covers the cuDNN version we were aiming for, version 8.1.\\r\\n\\r\\n**[https://developer.nvidia.com/cudnn-archive](https://developer.nvidia.com/cudnn-archive)**\\r\\n\\r\\n![NVIDIA: cuDNN Archive 8.x - 1.x](/src/assets/blog/2024-10-07--18.png)\\r\\n\\r\\n![NVIDIA: cuDNN Library for Windows](/src/assets/blog/2024-10-07--19.png)\\r\\n\\r\\nThe contents of the cuDNN zip mirrors the file structure of the CUDA installation.\\r\\nSo all you should need to do is copy the bin, include, and lib folders from the cuDNN zip...\\r\\n\\r\\n![NVIDIA: Copy cudnn files](/src/assets/blog/2024-10-07--20.png)\\r\\n\\r\\n... then paste them into your CUDA installation, which should be at C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.4 assuming you accepted the defaults from Step 6.\\r\\n\\r\\n![NVIDIA: Paste cudnn files into GPU Computing Toolkit CUDA](/src/assets/blog/2024-10-07--21.png)\\r\\n\\r\\nGo into Windows\' Environmental Variables, and ensure that the System variable Path has the appropriate CUDA references.\\r\\n\\r\\nIn this example, the following were already added to Path via the earlier installation:\\r\\n* C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.4\\\\bin\\r\\n* C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.4\\\\libnvvp\\r\\n\\r\\nBut I needed to manually add this library version reference:\\r\\n* C:\\\\Program Files\\\\NVIDIA GPU Computing Toolkit\\\\CUDA\\\\v11.4\\\\bin\\r\\n\\r\\n![Environmental Variable: Add CUDA lib x64 folder](/src/assets/blog/2024-10-07--22.png)\\r\\n\\r\\n - _NVIDIA GPU driver that supports CUDA Toolkit version 11.2_\\r\\n - _a Python version between 3.7 and 3.10_\\r\\n - _CUDA Toolkit version 11.2_\\r\\n - _cuDNN version 8.1_\\r\\n - **Microsoft Visual C++ Compiler (MSVC) version 2019**\\r\\n - **create a virtual environment with tensorflow-gpu version 2.10.0 installed**\\r\\n - _DirectX End-User Runtimes_\\r\\n\\r\\n\\r\\n\\r\\n## Step 8. Test installations from Command Prompt\\r\\n\\r\\nTo test our installations, we can run the following via Command Prompt:\\r\\n\\r\\n* Verify the cuDNN installation by checking this command returns its version number.\\r\\n\\r\\n```\\r\\nnvcc --version\\r\\n```\\r\\n\\r\\n* Verify the NVIDIA installation by checking the GPU is identifiable. \\r\\n\\r\\nIn the screenshot below, you can see the 15205MiB Tesla T4 GPU has been assigned an identifier of 0. Note: This GPU:0 is just an index reference, and if there were more GPUs attached, they\'d be sequentially ordered, e.g. GPU:0, GPU:1, GPU:2, etc.\\r\\n\\r\\n```\\r\\nnvidia-sim\\r\\n```\\r\\n\\r\\n* Verify the Python installation by checking this command returns its version number.\\r\\n\\r\\n```\\r\\npython --version\\r\\n```\\r\\n\\r\\n![Command Prompt: Test nvcc, nvidia card, and Python version](/src/assets/blog/2024-10-07--23.png)\\r\\n\\r\\n\\r\\n\\r\\n## Step 9. Install Microsoft C++ Build Tools\\r\\n\\r\\nEven though this environment is intended for Python development, we may need to install the Microsoft Visual C++ Compiler in order to potentially work with certain custom TensorFlow extensions, given TensorFlow\'s backend is built on C++.\\r\\n\\r\\nYou can find the standalone installer here:\\r\\n* **[https://visualstudio.microsoft.com/visual-cpp-build-tools](https://visualstudio.microsoft.com/visual-cpp-build-tools)**\\r\\n\\r\\n![Microsoft C++ Build Tools download](/src/assets/blog/2024-10-07--24.png)\\r\\n\\r\\nFor the installation, from the Workloads tab tick _\\"Desktop development with C++\\"_, and in the Installation details pane, we\'re ticking:\\r\\n* MSVC 2019 as per the compatibility guide\\r\\n* MSVC 2022 because it is the latest and therefore a dependency of Desktop development with C++\\r\\n* C++ CMake tools for Windows - for custom TensorFlow or CUDA extensions\\r\\n\\r\\n![Installing Visual Studio Build Tools 2019](/src/assets/blog/2024-10-07--25.png)\\r\\n\\r\\n![Visual Studio Build Tools 2022](/src/assets/blog/2024-10-07--26.png)\\r\\n\\r\\n - _NVIDIA GPU driver that supports CUDA Toolkit version 11.2_\\r\\n - _a Python version between 3.7 and 3.10_\\r\\n - _CUDA Toolkit version 11.2_\\r\\n - _cuDNN version 8.1_\\r\\n - _Microsoft Visual C++ Compiler (MSVC) version 2019_\\r\\n - **create a virtual environment with tensorflow-gpu version 2.10.0 installed**\\r\\n - _DirectX End-User Runtimes_\\r\\n\\r\\n\\r\\n\\r\\n## Step 10. Install Visual Studio Code and extensions\\r\\n\\r\\nNow onto the all so familiar and easy task of installing Visual Studio Code...\\r\\n\\r\\n* **[https://code.visualstudio.com/Download](https://code.visualstudio.com/Download)**\\r\\n\\r\\n![Download Visual Studio Code](/src/assets/blog/2024-10-07--27.png)\\r\\n\\r\\n![Visual Studio Code Setup Wizard Completed](/src/assets/blog/2024-10-07--28.png)\\r\\n\\r\\n...and the Python Extension for Visual Studio Code.\\r\\n\\r\\n![Visual Studio Code: Python Extension](/src/assets/blog/2024-10-07--29.png)\\r\\n\\r\\n\\r\\n\\r\\n## Step 11. Create project and virtual Python environment with tensorflow\\r\\n\\r\\nNext we\'re going to create a Python project to test the GPU.\\r\\n\\r\\nIn this example, I\'ve created a folder C:\\\\Project\\\\TensorFlow-Python and opened it via Visual Studio Code.\\r\\n\\r\\n![Visual Studio Code: Create project folder](/src/assets/blog/2024-10-07--30.png)\\r\\n\\r\\nThen via a Command terminal within Visual Studio Code, we execute the following:\\r\\n\\r\\n* Creating a virtual environment to install our Python packages into.\\r\\n\\r\\n```\\r\\npython -m venv C:\\\\Projet\\\\TensorFlow-Python\\\\venv\\r\\n```\\r\\n\\r\\n* Activate said virtual environment into the terminal\\r\\n\\r\\n```\\r\\nvenv\\\\Scripts\\\\activate\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Create virtual Python environment](/src/assets/blog/2024-10-07--31.png)\\r\\n\\r\\nNext, we install the tensorflow-gpu Python package, specifically version 2.10.0 as per the compatibility guide.\\r\\n\\r\\n```\\r\\npip install tensorflow-gpu==2.10.0\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Install tensorflow_gpu into virtual environment](/src/assets/blog/2024-10-07--32.png)\\r\\n\\r\\n - _NVIDIA GPU driver that supports CUDA Toolkit version 11.2_\\r\\n - _a Python version between 3.7 and 3.10_\\r\\n - _CUDA Toolkit version 11.2_\\r\\n - _cuDNN version 8.1_\\r\\n - _Microsoft Visual C++ Compiler (MSVC) version 2019_\\r\\n - _create a virtual environment with tensorflow-gpu version 2.10.0 installed_\\r\\n - _DirectX End-User Runtimes_\\r\\n\\r\\nThat\'s all items ticked off now, but there\'s just a little more to do.\\r\\n\\r\\nEven though tensorflow-gpu is installed into my virtual environment, I was not able to import TensorFlow into my Python script, because my numpy version (2+) was incompatible.\\r\\n\\r\\nThus, I reinstalled numpy by targeting a lower version.\\r\\n\\r\\n```\\r\\npip install numpy==1.23.5\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Install lower numpy version](/src/assets/blog/2024-10-07--33.png)\\r\\n\\r\\nFrom that same cmd Terminal session, I ran the following script to check I could import tensorflow and detect the GPU.\\r\\n\\r\\n```\\r\\npython -c \\"import tensorflow as tf; print(tf.config.list_physical_devices(\'GPU\'))\\"\\r\\n```\\r\\n\\r\\nThe indication of GPU:0 in the screenshot below is my confirmation.\\r\\n\\r\\n![Visual Studio Code: Test recognition of GPU](/src/assets/blog/2024-10-07--34.png)\\r\\n\\r\\nLastly, I ran a Python script (courtesy of ChatGPT as most of this article was guided from), to see if the calculation against the GPU would occur, and it was successful.\\r\\n\\r\\n```\\r\\nimport tensorflow as tf\\r\\n\\r\\n# Create a simple tensor and perform a computation\\r\\nwith tf.device(\'/GPU:0\'):\\r\\n    a = tf.constant([[1.0, 2.0, 3.0], [4.0, 5.0, 6.0]])\\r\\n    b = tf.constant([[1.0], [2.0], [3.0]])\\r\\n    c = tf.matmul(a, b)\\r\\n\\r\\nprint(c)\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Test GPU calculation by creating tensor](/src/assets/blog/2024-10-07--35.png)\\r\\n\\r\\nNow we have a process and an instance of Windows running TensorFlow with Python using an NVIDIA graphics card.\\r\\n\\r\\nAs a side note, after completing all these installations, I have about 9.5GB remaining storage space.\\r\\n\\r\\n![Check hard drive space](/src/assets/blog/2024-10-07--36.png)\\r\\n\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* **[ChatGPT 3.5](https://chat.openai.com)**\\r\\n\\r\\n* YouTube video **[Deep Learning on Cloud using Amazon AWS | EC2 GPU Instance by Sagar G. Sangodkar](https://www.youtube.com/watch?v=B75B-JBmyDw&t=559s)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2024-10-07.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1711544400,"title":"Using ChatGPT to create a plain text Python encryption tool for password protection\\r","name":"using-chatgpt-to-create-a-plain-text-python-encryption-tool-for-password-protection","tech":"logo-python\\r","tags":"[\\"Python\\", \\"ChatGPT\\", \\"HTML\\", \\"JavaScript\\", \\"Encryption\\"]\\r","date":"28 March 2024\\r","content":"This post shows how to use ChatGPT (**[https://chat.openai.com](https://chat.openai.com)**) to create a basic Windows desktop application to encrypt plain text data with Python. Inspired by my knowing someone who still uses Notepad to store username and passwords even though they have a proper password management tool.\\r\\n\\r\\nThe reason we are encoding an entire file-like body of text is to appeal to the preferred ease of using something similar to Notepad, as opposed to a password management tool which typically separates out records per credential set.\\r\\n\\r\\n**Disclaimer**: I am far from any kind of security expert, though understand it is unsafe to leave passwords lying around in plain text files. So whilst any kind of safety measure is better than nothing, this blog post\'s example is rudimentary, and I would recommend using at least open source tools like KeePass which are actually robust security-wise.\\r\\n\\r\\n##  Overview of ChatGPT conversation\\r\\n\\r\\nI listed my requirements, keeping their number small because from experience, asking for too many at once resulted in ChatGPT simply not coding them and my having to explicitly remind it to code those features later.\\r\\n\\r\\n![ChatGPT: Request for Python code iteration 1](/src/assets/blog/2024-03-28--01.png)\\r\\n\\r\\nThe first result works fine, but the buttons are misaligned. We need them along the top of the application.\\r\\n\\r\\n![Visual Studio Code: Testing Python code iteration 1](/src/assets/blog/2024-03-28--02.png)\\r\\n\\r\\nWith a bit more fine-tuning asked of GPT for a colour change and for the textbox\'s horizontal and vertical scrollbars, we get the final result below.\\r\\n\\r\\n![Visual Studio Code: Testing Python code iteration 2](/src/assets/blog/2024-03-28--03.png)\\r\\n\\r\\nOne of my original requirements involved having the application self-terminate in the event of the password or encryption passphrase typed by the user not matching the file, but I realised;\\r\\n\\r\\n* That requirement needs Command Prompt to open to facilitate the auto-closure. This goes against the intended standalone executable requirement.\\r\\n\\r\\n* A malicious party could try to brute force decrypt the JSON file directly, rather than via the application.\\r\\n\\r\\nNext let\'s look at how to compile the executable.\\r\\n\\r\\n\\r\\n## Step 1. Install Python, create a virtual environment, and install libraries\\r\\n\\r\\nInstall Python and the Python Extension for Visual Studio Code.\\r\\n* **[https://www.python.org/downloads/windows](https://www.python.org/downloads/windows)**\\r\\n\\r\\nCreate a folder for your Python project and open it in Visual Studio Code. In this example, the folder name is *lock* is in a subfolder of C:\\\\Project.\\r\\n\\r\\nCreate your virtual environment as a subfolder of your project.\\r\\n\\r\\n```\\r\\npython -m venv C:\\\\Project\\\\lock\\\\venv\\r\\n```\\r\\n\\r\\nThen ensure it is activated.\\r\\n\\r\\n![Visual Studio Code: Create and activate virtual environment](/src/assets/blog/2024-03-28--04.png)\\r\\n\\r\\nYou can find more detailed screenshot steps of the above from a previous blog post:\\r\\n* **[Add forecasts from Python using Visual Studio Code to Power BI](https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi)**\\r\\n\\r\\nFrom within the Python virtual environment, install the required dependencies for the script via a Command Prompt terminal.\\r\\n\\r\\n```\\r\\npip install cryptography\\r\\npip install pyinstaller\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Install libraries](/src/assets/blog/2024-03-28--05.png)\\r\\n\\r\\n\\r\\n## Step 2. Create a new Python file and add the script\\r\\n\\r\\nCreate a new Python file in your project\'s directory and name it lock.py then populate it with the following code.\\r\\n\\r\\n```\\r\\nimport base64\\r\\nimport json\\r\\nimport tkinter as tk\\r\\nfrom tkinter import filedialog, messagebox, simpledialog\\r\\nfrom cryptography.fernet import Fernet\\r\\nfrom cryptography.hazmat.primitives import hashes\\r\\nfrom cryptography.hazmat.backends import default_backend\\r\\nfrom cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC\\r\\n\\r\\nclass Application(tk.Tk):\\r\\n    def __init__(self):\\r\\n        super().__init__()\\r\\n\\r\\n        self.title(\\"Text file encryption\\")\\r\\n\\r\\n        # Set background color with alpha (semi-transparent black)\\r\\n        self.config(bg=\\"#D3D3D3\\")\\r\\n\\r\\n        # Frame for buttons\\r\\n        button_frame = tk.Frame(self, bg=\\"#181818\\")\\r\\n        button_frame.grid(row=0, column=0, columnspan=2, sticky=\\"ew\\")\\r\\n\\r\\n        self.open_button = tk.Button(button_frame, text=\\"Open\\", command=self.open_file, bg=\\"#000000\\", fg=\\"#FFFFFF\\")\\r\\n        self.open_button.grid(row=0, column=0)\\r\\n\\r\\n        self.save_button = tk.Button(button_frame, text=\\"Save\\", command=self.save_file, bg=\\"#000000\\", fg=\\"#FFFFFF\\")\\r\\n        self.save_button.grid(row=0, column=1)\\r\\n\\r\\n        # Textbox without word wrapping\\r\\n        self.textbox = tk.Text(self, wrap=\\"none\\", bg=\\"#181818\\", fg=\\"#FFFFFF\\", insertbackground=\\"#FFFFFF\\")  # Set background to semi-transparent black and text color to white\\r\\n        self.textbox.grid(row=1, column=0, sticky=\\"nsew\\")\\r\\n\\r\\n        # Vertical scrollbar\\r\\n        scrollbar_y = tk.Scrollbar(self, orient=\\"vertical\\", command=self.textbox.yview)\\r\\n        scrollbar_y.grid(row=1, column=1, sticky=\\"ns\\")\\r\\n        self.textbox.config(yscrollcommand=scrollbar_y.set)\\r\\n\\r\\n        # Horizontal scrollbar\\r\\n        scrollbar_x = tk.Scrollbar(self, orient=\\"horizontal\\", command=self.textbox.xview)\\r\\n        scrollbar_x.grid(row=2, column=0, sticky=\\"ew\\")\\r\\n        self.textbox.config(xscrollcommand=scrollbar_x.set)\\r\\n\\r\\n        # Configure row and column weights\\r\\n        self.rowconfigure(1, weight=1)\\r\\n        self.columnconfigure(0, weight=1)\\r\\n\\r\\n    def save_file(self):\\r\\n        text_data = self.textbox.get(\\"1.0\\", \\"end-1c\\")\\r\\n        if not text_data:\\r\\n            messagebox.showwarning(\\"Warning\\", \\"No data to save.\\")\\r\\n            return\\r\\n\\r\\n        passphrase = self.prompt_passphrase(\\"Enter encryption passphrase\\")\\r\\n        if not passphrase:\\r\\n            return\\r\\n\\r\\n        password = self.prompt_password(\\"Enter password for file\\")\\r\\n        if not password:\\r\\n            return\\r\\n\\r\\n        iterations = self.prompt_iterations(\\"Enter number of iterations\\")\\r\\n        if not iterations:\\r\\n            return\\r\\n\\r\\n        key = self.derive_key(passphrase, iterations)\\r\\n        fernet = Fernet(key)\\r\\n        encrypted_password = fernet.encrypt(password.encode())\\r\\n        encrypted_text_data = fernet.encrypt(text_data.encode())\\r\\n\\r\\n        file_path = filedialog.asksaveasfilename(defaultextension=\\".json\\")\\r\\n        if file_path:\\r\\n            with open(file_path, \\"w\\") as file:\\r\\n                json.dump({\\"password\\": encrypted_password.decode(), \\"text_data\\": encrypted_text_data.decode()}, file)\\r\\n\\r\\n\\r\\n    def open_file(self):\\r\\n        file_path = filedialog.askopenfilename(filetypes=[(\\"JSON Files\\", \\"*.json\\")])\\r\\n        if not file_path:\\r\\n            return\\r\\n\\r\\n        passphrase = self.prompt_passphrase(\\"Enter decryption passphrase\\")\\r\\n        if not passphrase:\\r\\n            return\\r\\n\\r\\n        password = self.prompt_password(\\"Enter password for file\\")\\r\\n        if not password:\\r\\n            return\\r\\n\\r\\n        iterations = self.prompt_iterations(\\"Enter number of iterations\\")\\r\\n        if not iterations:\\r\\n            return\\r\\n\\r\\n        try:\\r\\n            with open(file_path, \\"r\\") as file:\\r\\n                data = json.load(file)\\r\\n\\r\\n            key = self.derive_key(passphrase, iterations)\\r\\n            fernet = Fernet(key)\\r\\n            decrypted_password = fernet.decrypt(data[\\"password\\"].encode()).decode()\\r\\n\\r\\n            if password != decrypted_password:\\r\\n                messagebox.showwarning(\\"Warning\\", \\"Incorrect password.\\")\\r\\n                return\\r\\n\\r\\n            decrypted_text_data = fernet.decrypt(data[\\"text_data\\"].encode()).decode()\\r\\n            self.textbox.delete(\\"1.0\\", \\"end\\")\\r\\n            self.textbox.insert(\\"1.0\\", decrypted_text_data)\\r\\n        except Exception as e:\\r\\n            messagebox.showerror(\\"Error\\", \\"Failed to open file.\\")\\r\\n\\r\\n    def prompt_passphrase(self, message):\\r\\n        self.withdraw()  # Hide the main window temporarily\\r\\n        passphrase = simpledialog.askstring(\\"Passphrase\\", message, show=\'*\')\\r\\n        self.deiconify()  # Restore the main window\\r\\n        return passphrase\\r\\n\\r\\n    def prompt_password(self, message):\\r\\n        self.withadraw()  # Hide the main window temporarily\\r\\n        password = simpledialog.askstring(\\"Password\\", message, show=\'*\')\\r\\n        self.deiconify()  # Restore the main window\\r\\n        return password\\r\\n\\r\\n    def prompt_iterations(self, message):\\r\\n        self.withdraw()  # Hide the main window temporarily\\r\\n        iterations = simpledialog.askstring(\\"Iterations\\", message, show=\'*\')\\r\\n        self.deiconify()  # Restore the main window\\r\\n        return iterations\\r\\n\\r\\n    def derive_key(self, passphrase, iterations):\\r\\n        backend = default_backend()\\r\\n        salt = b\'Random_string_for_encryption1\'\\r\\n        kdf = PBKDF2HMAC(\\r\\n            algorithm=hashes.SHA256(),\\r\\n            length=32,\\r\\n            salt=salt,\\r\\n            iterations=int(iterations),\\r\\n            backend=backend\\r\\n        )\\r\\n        key = kdf.derive(passphrase.encode())\\r\\n        return base64.urlsafe_b64encode(key)\\r\\n\\r\\nif __name__ == \\"__main__\\":\\r\\n    app = Application()\\r\\n    app.mainloop()\\r\\n\\r\\n```\\r\\n\\r\\n\\r\\n## Step 3. Compile the script as a standalone executable\\r\\n\\r\\nFrom the Command Prompt terminal, run the following command:\\r\\n\\r\\n```\\r\\npyinstaller --onefile --noconsole lock.py\\r\\n```\\r\\n\\r\\nThe --onefile parameter generates a single .exe executable, and --noconsole prevents a Command Prompt from opening when the application is executed assuming the code does not require it.\\r\\n\\r\\nThis creates a dist subfolder in the project directory where the executable is generated.\\r\\n\\r\\n![Visual Studio Code: Python code compilation](/src/assets/blog/2024-03-28--06.png)\\r\\n\\r\\n\\r\\n## Step 4. Testing the application\\r\\n\\r\\nFrom File Explorer double-click the lock.exe application.\\r\\n\\r\\nType or copy-and-paste the information you would like to encrypt, then click Save.\\r\\n\\r\\n![Lock: Type information then Save button](/src/assets/blog/2024-03-28--07.png)\\r\\n\\r\\nType the passphrase used to generate the encryption key for the algorithm.\\r\\n\\r\\n![Lock: Type Passphrase then OK](/src/assets/blog/2024-03-28--08.png)\\r\\n\\r\\nType the password to encrypt the file.\\r\\n\\r\\n![Lock: Type Password then OK](/src/assets/blog/2024-03-28--09.png)\\r\\n\\r\\nType the number of iterations for the algorithm to perform for the encryption.\\r\\n\\r\\n![Lock: Type Iterations then OK](/src/assets/blog/2024-03-28--10.png)\\r\\n\\r\\nProvide a name and location for the encrypted file.\\r\\n\\r\\n![Lock: Save](/src/assets/blog/2024-03-28--11.png)\\r\\n\\r\\nWhen you open the generated file in Notepad, you can see that it is encrypted.\\r\\n\\r\\n![Encrypted file contents](/src/assets/blog/2024-03-28--12.png)\\r\\n\\r\\nYou will need to memorise all 3 security components; passphrase, iterations, and password to decrypt the file using the Open button. Each file you save can have its own unique set.\\r\\n\\r\\n\\r\\n**Key note**\\r\\n\\r\\nWindows Defender and other antivirus software will delete this executable from your system. So far I\'ve found keeping it zipped helps prevent that deletion as one free means. Otherwise, you may need to look into paid methods of digitally signing the application.\\r\\n\\r\\n\\r\\n**Update**: 29th March 2024\\r\\n\\r\\nI noticed after the Python code\'s compiliation, the lock.exe generated is instantaneously deleted by antivirus.\\r\\n\\r\\nSo I requested ChatGPT to make a HTML version with embedded JavaScript to perform the same task.\\r\\n\\r\\nTo use the code below:\\r\\n\\r\\n* **Step 1**. Create a new empty file on your machine named e.g. lock.html.\\r\\n\\r\\n* **Step 2**. Copy-and-paste the following code into that file, then Save and close.\\r\\n\\r\\n```\\r\\n<!DOCTYPE html>\\r\\n<html lang=\\"en\\">\\r\\n<head>\\r\\n    <meta charset=\\"UTF-8\\">\\r\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\">\\r\\n    <title>Text Encryption</title>\\r\\n    <style>\\r\\n        body {\\r\\n            background-color: black;\\r\\n            color: white;\\r\\n        }\\r\\n        textarea, button, input[type=\\"file\\"] {\\r\\n            background-color: black;\\r\\n            color: white;\\r\\n            border: 1px solid white;\\r\\n        }\\r\\n        button {\\r\\n            background-color: black;\\r\\n        }\\r\\n    </style>\\r\\n</head>\\r\\n<body>\\r\\n    <textarea id=\\"inputText\\" rows=\\"10\\" cols=\\"50\\" placeholder=\\"Enter your text here...\\"></textarea><br>\\r\\n    <button onclick=\\"encryptText()\\">Encrypt Text</button>\\r\\n    <button onclick=\\"saveEncryptedText()\\">Save Encrypted Text</button><br><br>\\r\\n    <input type=\\"file\\" id=\\"fileInput\\" accept=\\".json\\" onchange=\\"openEncryptedFile(event)\\"><br>\\r\\n    <button onclick=\\"decryptText()\\">Decrypt Text</button><br><br>\\r\\n    <textarea id=\\"outputText\\" rows=\\"10\\" cols=\\"50\\" placeholder=\\"Encrypted/Decrypted text will appear here...\\" readonly></textarea>\\r\\n\\r\\n    <script>\\r\\n        async function encryptText() {\\r\\n            const text = document.getElementById(\'inputText\').value;\\r\\n            const passphrase = prompt(\\"Enter encryption passphrase:\\");\\r\\n            if (!passphrase) return;\\r\\n\\r\\n            const password = prompt(\\"Enter password for file:\\");\\r\\n            if (!password) return;\\r\\n\\r\\n            const iterations = prompt(\\"Enter number of iterations:\\");\\r\\n            if (!iterations) return;\\r\\n\\r\\n            const key = await deriveKey(passphrase, iterations);\\r\\n            const encryptedPassword = await encrypt(password, key);\\r\\n            const encryptedText = await encrypt(text, key);\\r\\n\\r\\n            // Clear sensitive variables\\r\\n            clearSensitiveData(passphrase);\\r\\n            clearSensitiveData(password);\\r\\n            clearSensitiveData(iterations);\\r\\n            clearSensitiveData(key);\\r\\n\\r\\n            const data = {\\r\\n                password: encryptedPassword,\\r\\n                text_data: encryptedText\\r\\n            };\\r\\n\\r\\n            document.getElementById(\'outputText\').value = JSON.stringify(data);\\r\\n        }\\r\\n\\r\\n        async function saveEncryptedText() {\\r\\n            const encryptedText = document.getElementById(\'outputText\').value;\\r\\n            if (!encryptedText) {\\r\\n                alert(\\"No data to save.\\");\\r\\n                return;\\r\\n            }\\r\\n\\r\\n            const blob = new Blob([encryptedText], { type: \'application/json\' });\\r\\n            const fileName = prompt(\\"Enter filename to save:\\");\\r\\n            if (!fileName) return;\\r\\n\\r\\n            const link = document.createElement(\'a\');\\r\\n            link.href = URL.createObjectURL(blob);\\r\\n            link.download = fileName + \'.json\';\\r\\n            link.click();\\r\\n        }\\r\\n\\r\\n        async function openEncryptedFile(event) {\\r\\n            const file = event.target.files[0];\\r\\n            if (!file) return;\\r\\n\\r\\n            const reader = new FileReader();\\r\\n            reader.onload = async function() {\\r\\n                const encryptedData = JSON.parse(reader.result);\\r\\n\\r\\n                const passphrase = prompt(\\"Enter decryption passphrase:\\");\\r\\n                if (!passphrase) return;\\r\\n\\r\\n                const password = prompt(\\"Enter password for file:\\");\\r\\n                if (!password) return;\\r\\n\\r\\n                const iterations = prompt(\\"Enter number of iterations:\\");\\r\\n                if (!iterations) return;\\r\\n\\r\\n                const key = await deriveKey(passphrase, iterations);\\r\\n                const decryptedPassword = await decrypt(encryptedData.password, key);\\r\\n\\r\\n                if (password !== decryptedPassword) {\\r\\n                    alert(\\"Incorrect password.\\");\\r\\n                    return;\\r\\n                }\\r\\n\\r\\n                const decryptedText = await decrypt(encryptedData.text_data, key);\\r\\n                document.getElementById(\'outputText\').value = decryptedText;\\r\\n\\r\\n                // Clear sensitive variables\\r\\n                clearSensitiveData(passphrase);\\r\\n                clearSensitiveData(password);\\r\\n                clearSensitiveData(iterations);\\r\\n                clearSensitiveData(key);\\r\\n            };\\r\\n            reader.readAsText(file);\\r\\n        }\\r\\n\\r\\n        async function decryptText() {\\r\\n            const encryptedText = document.getElementById(\'outputText\').value;\\r\\n            if (!encryptedText) {\\r\\n                alert(\\"No data to decrypt.\\");\\r\\n                return;\\r\\n            }\\r\\n\\r\\n            const passphrase = prompt(\\"Enter decryption passphrase:\\");\\r\\n            if (!passphrase) return;\\r\\n\\r\\n            const iterations = prompt(\\"Enter number of iterations:\\");\\r\\n            if (!iterations) return;\\r\\n\\r\\n            const key = await deriveKey(passphrase, iterations);\\r\\n            const decryptedText = await decrypt(encryptedText, key);\\r\\n            document.getElementById(\'outputText\').value = decryptedText;\\r\\n\\r\\n            // Clear sensitive variables\\r\\n            clearSensitiveData(passphrase);\\r\\n            clearSensitiveData(iterations);\\r\\n            clearSensitiveData(key);\\r\\n        }\\r\\n\\r\\n        async function deriveKey(passphrase, iterations) {\\r\\n            const encoder = new TextEncoder();\\r\\n            const data = encoder.encode(passphrase);\\r\\n            const hashBuffer = await crypto.subtle.digest(\'SHA-256\', data);\\r\\n            const salt = new Uint8Array([82, 97, 110, 100, 111, 109, 95, 115, 116, 114, 105, 110, 103, 95, 102, 111, 114, 95, 101, 110, 99, 114, 121, 112, 116, 105, 111, 110, 49]);\\r\\n            const key = await crypto.subtle.importKey(\'raw\', hashBuffer, { name: \'PBKDF2\' }, false, [\'deriveKey\']);\\r\\n            const derivedKey = await crypto.subtle.deriveKey({ name: \'PBKDF2\', salt, iterations: parseInt(iterations), hash: \'SHA-256\' }, key, { name: \'AES-GCM\', length: 256 }, true, [\'encrypt\', \'decrypt\']);\\r\\n            return derivedKey;\\r\\n        }\\r\\n\\r\\n        async function encrypt(data, key) {\\r\\n            const encoder = new TextEncoder();\\r\\n            const encodedData = encoder.encode(data);\\r\\n            const iv = crypto.getRandomValues(new Uint8Array(12));\\r\\n            const encryptedData = await crypto.subtle.encrypt({ name: \'AES-GCM\', iv }, key, encodedData);\\r\\n            const encryptedText = `${Array.from(new Uint8Array(iv)).join(\',\')}.${Array.from(new Uint8Array(encryptedData)).join(\',\')}`;\\r\\n            return encryptedText;\\r\\n        }\\r\\n\\r\\n        async function decrypt(data, key) {\\r\\n            const parts = data.split(\'.\');\\r\\n            const iv = Uint8Array.from(parts[0].split(\',\'));\\r\\n            const encryptedData = Uint8Array.from(parts[1].split(\',\'));\\r\\n            const decryptedData = await crypto.subtle.decrypt({ name: \'AES-GCM\', iv }, key, encryptedData);\\r\\n            const decoder = new TextDecoder();\\r\\n            return decoder.decode(decryptedData);\\r\\n        }\\r\\n\\r\\n        function clearSensitiveData(data) {\\r\\n            // Overwrite the data with random values\\r\\n            for (let i = 0; i < data.length; i++) {\\r\\n                data[i] = Math.floor(Math.random() * 256);\\r\\n            }\\r\\n        }\\r\\n    <\/script>\\r\\n</body>\\r\\n</html>\\r\\n\\r\\n```\\r\\n\\r\\n* **Step 3**. Open the HTML file in incognito mode on a browser.\\r\\nThen follow the same general workflow as the Python application.\\r\\n\\r\\n![HTML + JavaScript](/src/assets/blog/2024-03-28--13.png)\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* **[ChatGPT 3.5](https://chat.openai.com)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2024-03-28.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1696597200,"title":"CSS development notes from my website revamp\\r","name":"css-development-notes-from-my-website-revamp","tech":"logo-css\\r","tags":"[\\"CSS\\", \\"HTML\\"]\\r","date":"7 October 2023\\r","content":"This post covers my approach to improving my site from version 3 (deployed December 2022) to version 4 (deployed July 2023), by going through several key **basic** CSS lessons whilst redesigning it from scratch. Please note this is a reflective post and not intended as a \\"best practice\\" one.\\r\\n\\r\\n\\r\\n##  Context\\r\\n\\r\\nMy website\'s 3rd version catered for mobile portrait and small to medium-sized landscape monitors. You can find a copy of Version 3 at **[archive.org](https://web.archive.org/web/20221126031933/https://makuharistudio.github.io/#)**.\\r\\n\\r\\nThis is how it looked at 1920 x 1080 resolution using Microsoft Edge\'s Developer Tools. I assumed this would be the standard resolution for most corporate monitors, based on my browsing of **[Dell\'s website](https://www.dell.com/en-au/shop/computer-monitors/ar/8605)**.\\r\\n\\r\\n![Site version 3 at 1920 x 1080](/src/assets/blog/2023-10-07--01.png)\\r\\n\\r\\nThis is how it looked from an iPhone 14t 430 x 932 resolution.\\r\\n\\r\\n![Site version 3 at 430 x 932](/src/assets/blog/2023-10-07--02.png)\\r\\n\\r\\nSeveral months later, I realised it might be viewed at much larger screen resolutions. I found one of the largest monitors on Dell\'s site, the \\"_Dell UltraSharp 32 6K Monitor - U3224KB_\\" at 6144 x 3456 resolution, and my site did not cater for this at all. Text did not scale and was illegible, and elements were awkwardly disproportionate from each other.\\r\\n\\r\\n![Site version 3 at 6144 x 3456](/src/assets/blog/2023-10-07--03.png)\\r\\n\\r\\n\\r\\n##  Goal\\r\\n\\r\\nMy website serves as a journal to share my works. I\'ve had the fortunate and fun experience of meeting people, and showing them my website via my phone. So, I decided to take a mobile-first approach to my site\'s design, with the desktop design being as close to the mobile design as possible. This was for 2 reasons:\\r\\n\\r\\n* Familiarity; What I show people in person, they would easily recognise if they checked again later via desktop.\\r\\n\\r\\n* Code management; Minimal additions to the CSS code base are needed to make it viable for desktop.\\r\\n\\r\\n![Site version 4 outline](/src/assets/blog/2023-10-07--04.png)\\r\\n\\r\\nI decided to redo the entire CSS design from scratch, intending for the final code to be more thorough and easier to follow, rather than a patchwork approach that leads to confusion in later development.\\r\\n\\r\\nThe first problem to address was to ensure regardless of resolution and orientation, the new site had a...\\r\\n\\r\\n\\r\\n##  Responsive layout\\r\\n\\r\\n2 areas need to be covered.\\r\\n\\r\\n* Resolution - The general layout changes appropriately for portrait, landscape, and everything in between.\\r\\n* Scaling - Design elements and text scale in a balanced way with viewport changes. \\r\\n\\r\\nI had to decide on the breakpoint for switching between portrait to landscape.\\r\\n\\r\\nA square viewport would not be a suitable breakpoint because there is insufficient width for the interface and background to be similar proportions as the landscape design. A square viewport looks better with the portrait design (for smaller resolutions, at least).\\r\\n\\r\\n![Site version 4 square design](/src/assets/blog/2023-10-07--05.png)\\r\\n\\r\\nThe question becomes how much wider would the width need to be for the breakpoint to switch from portrait to landscape design. Through experimentation, I decided on a 3:2 ratio.\\r\\n\\r\\n![Site version 4 3:2 ratio design](/src/assets/blog/2023-10-07--06.png)\\r\\n\\r\\nNext, we create the 3 main divs for the layout using...\\r\\n\\r\\n\\r\\n### Grid layout + z-indexing\\r\\n\\r\\nThis was my first use of grid layout to position and z-index to overlay div components, as I previously used the position absolute property.\\r\\n\\r\\n#### HTML\\r\\n\\r\\n```\\r\\n<!DOCTYPE html>\\r\\n<html>\\r\\n    <head><link rel=\\"stylesheet\\" href=\\"Layout.css\\"></head>\\r\\n\\r\\n    <body>\\r\\n\\r\\n        <div class=\'container\'>\\r\\n\\r\\n            <div class=\\"interface\\">\\r\\n\\r\\n                <center id=\\"replace this entire div with your content\\">\\r\\n                    <br /><br /><br />\\r\\n                    <h1>INTERFACE</h1>\\r\\n                    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\\r\\n                    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\\r\\n                </center>\\r\\n\\r\\n            </div>\\r\\n\\r\\n            <div class=\\"background\\">\\r\\n            \\r\\n                <br />\\r\\n                <h1>BACKGROUND</h1>\\r\\n\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n\\r\\n    </body>\\r\\n</html>\\r\\n```\\r\\n\\r\\n#### CSS\\r\\n\\r\\n```\\r\\n@import url(\'https://fonts.googleapis.com/css2?family=Saira:wght@600&display=swap\');\\r\\n\\r\\nhtml { margin: 0px; padding: 0px; font-family: \'Saira\' }\\r\\nbody { margin: 0px; padding: 0px; }\\r\\ndiv { margin: 0px; padding: 0px; }\\r\\n\\r\\n::-webkit-scrollbar { display: none; }\\r\\n\\r\\n.container {\\r\\n    width: 100vw; height: 100vh;\\r\\n    background-color: #C00000;\\r\\n    display: grid;\\r\\n    grid-template-columns: 1fr 1fr 1fr;\\r\\n    grid-template-rows: 1fr;\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n.interface {\\r\\n    background-color: #92CDDC;\\r\\n    height: max-content;\\r\\n    grid-row-start: 1;\\r\\n    grid-row-end: 2;\\r\\n    z-index: 3;\\r\\n}\\r\\n\\r\\n.background {\\r\\n    background-color: #FFD965;\\r\\n    width: 100%;\\r\\n    height: 100vh;\\r\\n    position: fixed;\\r\\n    z-index: 2;\\r\\n}\\r\\n\\r\\n/* PORTRAIT */\\r\\n@media (max-aspect-ratio: 3/2) {\\r\\n\\r\\n    .interface {\\r\\n        width: 100vw;\\r\\n        grid-column-start: 1;\\r\\n        grid-column-end: 2;\\r\\n    }\\r\\n\\r\\n}\\r\\n\\r\\n/* LANDSCAPE */\\r\\n@media (min-aspect-ratio: 3/2) {\\r\\n\\r\\n    .interface {\\r\\n        width: 40vw;\\r\\n        grid-column-start: 2;\\r\\n        grid-column-end: 3;\\r\\n    }\\r\\n\\r\\n}\\r\\n```\\r\\n\\r\\n![CSS code result - vertical](/src/assets/blog/2023-10-07--07.png)\\r\\n\\r\\n![CSS code result - horizontal](/src/assets/blog/2023-10-07--08.png)\\r\\n\\r\\nKey notes on the above code are:\\r\\n\\r\\n* The removal of scrollbars to make the visual design a bit cleaner and seem more like an app rather than a website.\\r\\n\\r\\n```\\r\\n::-webkit-scrollbar { display: none; }\\r\\n```\\r\\n\\r\\n* The interface element\'s height is determined by its content. This allows it to scroll vertically whilst the background stays fixed.\\r\\n\\r\\n\\r\\n### Vertical carousel for portfolio and blog pages\\r\\n\\r\\nI used this YouTube video [How to make horizontal scroll item - CSS Tricks by Laravel Article](https://www.youtube.com/watch?v=2_E5uoiLCLY) as a guide to help me create a vertical carousel design for my portfolio and blog components (rather than a horizontal one which felt less natural to navigate).\\r\\n\\r\\n\\r\\n#### HTML\\r\\n\\r\\n```\\r\\n<div class=\'carousel\'>\\r\\n\\r\\n    <div class=\'blurb\'>\\r\\n        In the year 1878 I took my degree of Doctor of Medicine of the University of London, and proceeded to Netley to go through the course prescribed for surgeons in the army.\\r\\n    </div>\\r\\n\\r\\n    <div class=\'blurb\'>\\r\\n        Having completed my studies there, I was duly attached to the Fifth Northumberland Fusiliers as Assistant Surgeon. The regiment was stationed in India at the time, and before I could join it, the second Afghan war had broken out.\\r\\n    </div>\\r\\n\\r\\n    <div class=\'blurb\'>\\r\\n        On landing at Bombay, I learned that my corps had advanced through the passes, and was already deep in the enemy\'s country.\\r\\n    </div>\\r\\n\\r\\n    <div class=\'blurb\'>\\r\\n        I followed, however, with many other officers who were in the same situation as myself, and succeeded in reaching Candahar in safety, where I found my regiment, and at once entered upon my new duties.\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n```\\r\\n\\r\\n#### CSS\\r\\n\\r\\n```\\r\\n.carousel {\\r\\n  width: inherit;\\r\\n  box-sizing: border-box;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.blurb {\\r\\n  height: 25vh;\\r\\n  width: inherit;\\r\\n  margin-bottom: 5vh;\\r\\n  box-sizing: border-box;\\r\\n  border: 2px solid black;\\r\\n  background-color: aqua;\\r\\n}\\r\\n```\\r\\n\\r\\n![CSS vertical carousel](/src/assets/blog/2023-10-07--09.png)\\r\\n\\r\\n\\r\\n## Animated elements\\r\\n\\r\\n\\r\\n### Looping background\\r\\n\\r\\nMy profile page loops an image horizontally, giving the impression of passing along an infinite beach.\\r\\n\\r\\n![CSS looping background - browser rendered](/src/assets/blog/2023-10-07--10.png)\\r\\n\\r\\nThe background image\'s height is set to the viewport\'s height and its width set to \\"auto\\" in order to scale the image evenly. The image is repeated along the x-axis and the whole \\"train\\" of horizontally-lined images are moved horizontally using keyframes to give the looping effect.\\r\\n\\r\\n![CSS looping background - conceptual diagram](/src/assets/blog/2023-10-07--11.png)\\r\\n\\r\\nOptionally, background-position is used to define how the initial image is positioned onscreen on the initial render.\\r\\n\\r\\n#### CSS\\r\\n\\r\\n```\\r\\n.background {\\r\\n    width: 100%;\\r\\n    height: 100vh;\\r\\n    position: fixed;\\r\\n    z-index: 2;\\r\\n    background-size: auto 100vh;\\r\\n    background-repeat: repeat-x;\\r\\n    background-position: -450vw 0vh;\\r\\n    background-image: url(\\"https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/assets/theme/background/panorama-beach.png?raw=true\\");\\r\\n    animation: bg-auto-scrolling 1800.32s infinite;\\r\\n    animation-timing-function: linear;\\r\\n}\\r\\n\\r\\n@keyframes bg-auto-scrolling {\\r\\n    100% { background-position: 3000vw 0vh; }\\r\\n}\\r\\n```\\r\\n\\r\\nNote: Different animation times are defined for the portrait and landscape views to ensure a consistent feel across both on my actual website. I didn\'t do that here for ease of your reading.\\r\\n\\r\\nA similar concept is applied to the portfolio and blog pages, where a small transparent tile is repeated all over the screen, and as a collective are \\"looped\\".\\r\\n\\r\\n\\r\\n### Spinning gear\\r\\n\\r\\nOn both the portfolio and blog pages, there are spinning gears as part of the background. The images for these were sourced from Pixbay and created by TheDigitalArtist.\\r\\n\\r\\n* **[https://pixabay.com/vectors/art-circle-design-pattern-science-7147602](https://pixabay.com/vectors/art-circle-design-pattern-science-7147602)**\\r\\n\\r\\n* **[https://pixabay.com/vectors/cyber-tech-circle-rings-pattern-7153617](https://pixabay.com/vectors/cyber-tech-circle-rings-pattern-7153617)**\\r\\n\\r\\nI edited the SVGs using a text editor to change their original colour from black to blue, and reduced their opacity.\\r\\n\\r\\n#### SVG\\r\\n\\r\\n```\\r\\n<svg fill:#00B0FF;fill-opacity:0.42;stroke:#00B0FF;stroke-opacity:1;\\r\\n```\\r\\n\\r\\nThey now look like this.\\r\\n\\r\\n![Edited gear images on GitHub](/src/assets/blog/2023-10-07--12.png)\\r\\n\\r\\n#### HTML\\r\\n\\r\\n```\\r\\n    <div class=\\"background\\">\\r\\n        <div class=\\"gear1 spin-gear\\"></div>\\r\\n        <div class=\\"gear2 spin-gear\\"></div>\\r\\n    </div>\\r\\n```\\r\\n\\r\\n#### CSS\\r\\n\\r\\n```\\r\\n.gear1 {\\r\\n    position: absolute;\\r\\n    background-repeat: no-repeat;\\r\\n    background-image: url(\\"https://github.com/makuharistudio/makuharistudio.github.io/raw/main/src/assets/theme/background/gear-blue-7147602.svg\\");\\r\\n    z-index: 3;\\r\\n    top: -20vh;\\r\\n    left: -10vh;\\r\\n    width: 120vh;\\r\\n    height: 120vh;\\r\\n}\\r\\n\\r\\n.gear2 {\\r\\n    position: absolute;\\r\\n    background-repeat: no-repeat;\\r\\n    background-image: url(\\"https://github.com/makuharistudio/makuharistudio.github.io/raw/main/src/assets/theme/background/gear-blue-7153617.svg\\");\\r\\n    z-index: 3;\\r\\n    top: -8vh;\\r\\n    left: 2vh;\\r\\n    width: 96vh;\\r\\n    height: 96vh;\\r\\n}\\r\\n\\r\\n.spin-gear {\\r\\n    animation-name: spinning;\\r\\n    animation-iteration-count: infinite;\\r\\n    animation-timing-function: linear;\\r\\n    animation-fill-mode: forwards;\\r\\n    animation-duration: 56.32s;\\r\\n}\\r\\n\\r\\n@keyframes spinning {\\r\\n    from { transform: rotate(360deg); }\\r\\n    to { transform: rotate(0deg); }\\r\\n}\\r\\n```\\r\\n\\r\\n![Overlapped gears](/src/assets/blog/2023-10-07--13.png)\\r\\n\\r\\n\\r\\n### Buttons resizing when hovered over\\r\\n\\r\\nMy buttons are multiple div elements housed in a single 1 x 1 grid container div, using z-index to layer them.\\r\\n\\r\\nThen the continer div is set to scale all its nested elements when the cursor hovers over it.\\r\\n\\r\\n#### HTML\\r\\n\\r\\n```\\r\\n    <div class=\\"interface\\">\\r\\n\\r\\n        <br /><br /><br /><br /><br /><br /><br /><br /><br />\\r\\n\\r\\n        <div class=\\"button-container\\">\\r\\n            <a href=\'/\' target=\'_blank\'>\\r\\n                <img src=\\"https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/assets/theme/logo/github.png?raw=true\\" />\\r\\n            </a>\\r\\n            <div class=\\"button-inner-colour\\"></div>\\r\\n        </div>\\r\\n\\r\\n        <br /><br /><br /><br /><br /><br /><br /><br /><br />\\r\\n        <br /><br /><br /><br /><br /><br /><br /><br /><br />\\r\\n\\r\\n    </div>\\r\\n```\\r\\n\\r\\n#### CSS\\r\\n\\r\\n```\\r\\n.button-container {\\r\\n    width: 20vw;\\r\\n    height: 20vw;\\r\\n    display: grid;\\r\\n    grid-template-rows: 100%;\\r\\n    grid-template-columns: 100%;\\r\\n    background-color: black;\\r\\n    z-index: 10;\\r\\n}\\r\\n\\r\\n.button-inner-colour {\\r\\n    margin: auto;\\r\\n    width: 19vw;\\r\\n    height: 19vw;\\r\\n    grid-row-start: 1; grid-row-end: 2;\\r\\n    grid-column-start: 1; grid-column-end: 2;\\r\\n    background-color: white;\\r\\n    z-index: 11;\\r\\n}\\r\\n\\r\\n.button-container a { \\r\\n    margin: 0px;\\r\\n    padding: 0px;\\r\\n    width: inherit;\\r\\n    height: inherit;\\r\\n    text-decoration: none;\\r\\n    grid-row-start: 1; grid-row-end: 2;\\r\\n    grid-column-start: 1; grid-column-end: 2;\\r\\n    z-index: 12;\\r\\n}\\r\\n\\r\\n.button-container a img { width: 18vw; height: 18vw; margin: 1vw; }\\r\\n\\r\\n.button-container:hover { transform: scale(0.85); }\\r\\n```\\r\\n\\r\\n![GitHub button example with hover over resize](/src/assets/blog/2023-10-07--14.png)\\r\\n\\r\\n\\r\\n## Sound effects and music\\r\\n\\r\\n\\r\\n### Playing a sound effect when a button is clicked\\r\\n\\r\\nFor important buttons on my site, I applied a sound effect on-click as a novelty, being careful not to do so for every button in order to prevent it from becoming too bothersome for the end user.\\r\\n\\r\\nThe embedded JavaScript approach I took is definitely not best practice, as ideally you would want to somehow ensure the sound effect asset file is loaded into the session before putting it to use, to avoid a disconnect between the user clicking the button and the sound playing. In my case, the sound files seem small enough that occasional disconnect should be fine.\\r\\n\\r\\nThe sound file in the code below can be found at **[https://mixkit.co/free-sound-effects](https://mixkit.co/free-sound-effects)**.\\r\\n\\r\\n#### HTML\\r\\n\\r\\n```\\r\\n<!DOCTYPE html>\\r\\n<html>\\r\\n    <head>\\r\\n        <link rel=\\"stylesheet\\" href=\\"Layout.css\\">\\r\\n        <script>\\r\\n            let soundEffect = new Audio(\'https://github.com/makuharistudio/makuharistudio.github.io/raw/main/src/assets/theme/sound/technology-notification-3123.wav\');\\r\\n            function start() {\\r\\n                soundEffect.play();\\r\\n            };\\r\\n        <\/script>\\r\\n    </head>\\r\\n    <body>\\r\\n        <div class=\'container\'>\\r\\n            <div class=\\"interface\\">\\r\\n                <div class=\\"button-container\\">\\r\\n                    <a href=\'/\' target=\'_blank\' onClick=\\"start()\\">\\r\\n                        <img src=\\"https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/assets/theme/logo/github.png?raw=true\\" />\\r\\n                    </a>\\r\\n                    <div class=\\"button-inner-colour\\"></div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\"background\\"></div>\\r\\n        </div>\\r\\n    </body>\\r\\n</html>\\r\\n```\\r\\n\\r\\n\\r\\n### Background music\\r\\n\\r\\nFor each major page of my site, I used the audio tag to embed different background music, and applied JavaScript to preset the music\'s volume to 20% so it plays subtly.\\r\\n\\r\\nThe music file in the code below was created by Evgeny_Bardyuzha from Pixabay **[https://pixabay.com/users/evgeny_bardyuzha-25235210](https://pixabay.com/users/evgeny_bardyuzha-25235210)**.\\r\\n\\r\\n#### HTML\\r\\n\\r\\n```\\r\\n<!DOCTYPE html>\\r\\n<html>\\r\\n    <head>\\r\\n        <link rel=\\"stylesheet\\" href=\\"Layout.css\\">\\r\\n        <script>\\r\\n            window.onload = function() {\\r\\n                let audioPlayer = document.getElementById(\'audioPlayer\');\\r\\n                audioPlayer.volume = 0.2;\\r\\n            };\\r\\n        <\/script>\\r\\n    </head>\\r\\n    <body>\\r\\n        <div class=\'container\'>\\r\\n            <div class=\\"interface\\">\\r\\n                <audio id=\\"audioPlayer\\" src=\\"https://github.com/makuharistudio/makuharistudio.github.io/raw/main/src/assets/theme/music/evgeny-bardyuzha-good-mood-for-no-reason.mp3\\" controls autoplay loop></audio>\\r\\n            </div>\\r\\n            <div class=\\"background\\"></div>\\r\\n        </div>\\r\\n    </body>\\r\\n</html>\\r\\n```\\r\\n\\r\\nIn the example code above, I left in the controls attribute of the audio tag so it is obvious how an audio player element is embedded into the site.\\r\\n\\r\\n![Audio player in HTML](/src/assets/blog/2023-10-07--15.png)\\r\\n\\r\\nIn my actual site, I removed that attribute and instead created a custom design element of moving music bars.\\r\\n\\r\\n\\r\\n\\r\\n## Scalable images\\r\\n\\r\\nLastly, my favourite site for creating and editing scalable vector graphics (SVGs) at the time of writing this blog post, is Boxy SVG **[https://boxy-svg.com/app](https://boxy-svg.com/app)**. In the screenshot below I created the lanyard tag for my profile page\'s photo by converting a PNG to an SVG which wasn\'t quite clean enough, then used Boxy SVG to tweak my SVG\'s anchor points to make its code smaller and more efficient.\\r\\n\\r\\n![Boxy SVG example](/src/assets/blog/2023-10-07--16.png)\\r\\n\\r\\n\\r\\n\\r\\nThe revamp of my site came about mostly with the help of **[Bing Chat with GPT-4](https://www.bing.com/search?q=Bing+AI&showconv=1)** to figure out the approach and code for the bells and whistles I\'ve added, and I am quite happy with how I\'ve upgraded the visual design over its past versions.\\r\\n\\r\\n\\r\\n\\r\\n### Reference\\r\\n\\r\\n* Youtube video **[CSS grid - line based positioning and z-index by Sergiy Prygara](https://www.youtube.com/watch?v=rhUR_bGc2lM)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2023-10-07.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1678453200,"title":"Setting up a Python environment for AWS S3 bucket interaction\\r","name":"setting-up-a-python-environment-for-aws-s3-bucket-interaction","tech":"logo-aws\\r","tags":"[\\"AWS\\", \\"Python\\"]\\r","date":"11 March 2023\\r","content":"A step-by-step guide on how to set up a Python with Jupyter Notebook environment (in Windows) to be able to connect with your Amazon Web Services (AWS) S3 bucket. \\r\\n\\r\\nThis was a prerequisite step for one of my Python projects that uses the YouTube API to download videos to a local folder (see blog post for that set up **[here](https://makuharistudio.github.io/#/blog/how-to-webscrape-a-youtube-channels-video-titles-using-python-and-visual-studio-code)**), then upload them to an S3 bucket.\\r\\n\\r\\n\\r\\n## Step 1. Install Python\\r\\n\\r\\nDownload and install the latest version of Python.\\r\\n\\r\\n* **[https://www.python.org/downloads](https://www.python.org/downloads)**\\r\\n\\r\\nDuring the installation process, ensure you tick the _\\"Add Python to environment variables\\"_ option.\\r\\n\\r\\n![Python installation](/src/assets/blog/2023-03-11--01.png)\\r\\n\\r\\n\\r\\n## Step 2. Install classic Jupyter Notebook\\r\\n\\r\\nFor Windows machines, open Command Prompt and run the following code:\\r\\n\\r\\n```\\r\\npip install notebook\\r\\n```\\r\\n\\r\\n* **[https://jupyter.org/install](https://jupyter.org/install)**\\r\\n\\r\\n![Classic Jupyter Notebook installation](/src/assets/blog/2023-03-11--02.png)\\r\\n\\r\\n\\r\\n## Step 3. Create a project directory and a new notebook\\r\\n\\r\\nCreate a local folder where your project\'s code will be kept.\\r\\n\\r\\n![Project folder](/src/assets/blog/2023-03-11--03.png)\\r\\n\\r\\nFrom Windows File Explorer, navigate to that folder and replace the address bar\'s contents with cmd, then press Enter.\\r\\n\\r\\n![Run cmd from project folder](/src/assets/blog/2023-03-11--04.png)\\r\\n\\r\\nThis will open the Command Prompt to that location.\\r\\n\\r\\nType jupyter notebook, then press Enter.\\r\\n\\r\\n![Run jupyter notebook from cmd](/src/assets/blog/2023-03-11--05.png)\\r\\n\\r\\nThis will open an instance of Jupyter Notebook, where you can create a new Notebook from.\\r\\n\\r\\n![Jupyter Notebook](/src/assets/blog/2023-03-11--06.png)\\r\\n\\r\\n\\r\\n## Step 4. Create an AWS S3 Bucket\\r\\n\\r\\nLog into AWS\'s S3 console and create a new S3 bucket, ensuring you enable the _\\"Block all public access\\"_ setting for it.\\r\\n\\r\\n* **[https://s3.console.aws.amazon.com/s3](https://s3.console.aws.amazon.com/s3)**\\r\\n\\r\\nNote your name for the bucket. In this example, I named mine \\"youtube-video-analysis\\".\\r\\n\\r\\n![Create S3 Bucket](/src/assets/blog/2023-03-11--07.png)\\r\\n\\r\\nFor more information on S3 buckets, visit:\\r\\n\\r\\n* **[https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html](https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html)**\\r\\n\\r\\n\\r\\n## Step 5. Create an IAM policy and apply it to an AWS account\\r\\n\\r\\nNavigate to AWS\'s IAM console (Identity and Access Management), then from the left menu, click on the Access Management section\'s Policies link. Once in, click _\\"Create policy\\"_.\\r\\n\\r\\n![Create S3 Bucket](/src/assets/blog/2023-03-11--08.png)\\r\\n\\r\\nManually define your policy via the JSON tab as per the code below:\\r\\n\\r\\nIn your case, substitute _\\"youtube-video-analysis\\"_ for your buckets name.\\r\\n\\r\\n**Note**: The second _\\"arn:aws:s3:::youtube-video-analysis/*\\"_ entry allows access to all subfolders and objects for the bucket. Both the bucket-level and sub-bucket-level entries for Resource are needed.\\r\\n\\r\\n```\\r\\n{\\r\\n    \\"Version\\": \\"2012-10-17\\",\\r\\n    \\"Statement\\": [\\r\\n        {\\r\\n            \\"Sid\\": \\"ConsoleAccess\\",\\r\\n            \\"Effect\\": \\"Allow\\",\\r\\n            \\"Action\\": [\\r\\n                \\"s3:*\\"\\r\\n            ],\\r\\n            \\"Resource\\": [\\r\\n                \\"arn:aws:s3:::youtube-video-analysis\\",\\r\\n                \\"arn:aws:s3:::youtube-video-analysis/*\\"\\r\\n            ]\\r\\n        }\\r\\n    ]\\r\\n}\\r\\n```\\r\\n\\r\\nThis will update the Visual editor with the equivalent access levels.\\r\\n\\r\\nIn this example, I have named the policy \\"Custom_IAM_Policy_For_S3_Bucket\\".\\r\\n\\r\\n![Create IAM Policy](/src/assets/blog/2023-03-11--09.png)\\r\\n\\r\\nNavigate to the Access Management section in the left menu, and click the \\"Users\\" link, then open the AWS account you intend to use for your development work. Ideally, this should **not** be your root account, for security reasons.\\r\\n\\r\\nThen edit the account to manually apply the custom policy you created. This will allow the user to bypass the block all public access restriction placed on the bucket.\\r\\n\\r\\nIn my example, I have a user named \\"Python\\" that I added the policy to.\\r\\n\\r\\n![Apply IAM Policy to a User](/src/assets/blog/2023-03-11--10.png)\\r\\n\\r\\nEnsure you have both the Access Key ID and Secret Access Key for that User account, as we\'ll need it in the next section.\\r\\n\\r\\nThis can be found under the User\'s account, and by navigating to the _\\"Security credentials\\"_ tab, under the _\\"Access Keys\\"_ section. The Access Key ID will be visible there, and you can generate the Secret Access Key from it.\\r\\n\\r\\n![AWS Access Keys](/src/assets/blog/2023-03-11--11.png)\\r\\n\\r\\n\\r\\n## Step 6. Install the AWS CLI (Command Line Interface)\\r\\n\\r\\nInstall the AWS\' command line interface, as this is where we will save our credentials such that we do not need to inline embed them in our project files.\\r\\n\\r\\n* **[https://docs.aws.amazon.com/cli/v1/userguide/install-windows.html#msi-on-windows](https://docs.aws.amazon.com/cli/v1/userguide/install-windows.html#msi-on-windows)**\\r\\n\\r\\n![Install AWS CLI](/src/assets/blog/2023-03-11--12.png)\\r\\n\\r\\nOpen a new Command Prompt, then type:\\r\\n\\r\\n```\\r\\naws configure\\r\\n```\\r\\n\\r\\nThen set your AWS Access Key ID and AWS Secret Access Key. You can leave the default region name and output format as blank by Entering through.\\r\\n\\r\\n![Configure AWS CLI](/src/assets/blog/2023-03-11--13.png)\\r\\n\\r\\nFrom that, AWS CLI will save a config and credentials file that stores your keys locally.\\r\\n\\r\\n![Configure AWS CLI](/src/assets/blog/2023-03-11--14.png)\\r\\n\\r\\n\\r\\n## Step 7. Test 1: Python (via Jupyter) upload files to AWS S3 Bucket\\r\\n\\r\\nOpen a new Command Prompt window, then install the following dependencies:\\r\\n\\r\\n```\\r\\npip install pytube\\r\\npip install boto3\\r\\n```\\r\\n\\r\\n![pip installs](/src/assets/blog/2023-03-11--15.png)\\r\\n\\r\\n\\r\\nCreate a folder in the directory where your (perhaps still Untitled) Jupyter Notebook file is, then add files you want to upload into S3 into that new folder.\\r\\n\\r\\nIn this example, I created a folder named \\"filestoupload\\" and added animated gifs of my project previews into it.\\r\\n\\r\\n![Files for testing S3 upload](/src/assets/blog/2023-03-11--16.png)\\r\\n\\r\\nNow let\'s create code to upload all the files in that subfolder into a subfolder in the S3 bucket.\\r\\n\\r\\n```\\r\\nfrom pytube import YouTube\\r\\nimport boto3\\r\\nimport os\\r\\n\\r\\nlocal_subfolder = os.getcwd().replace(\'\\\\\\\\\',\'/\')+\'/filestoupload\'\\r\\naws_s3_bucket_name = \\"youtube-video-analysis\\"\\r\\naws_s3_bucket_subfolder = \'animated_gifs\'\\r\\n\\r\\nfiles_to_upload = os.listdir(local_subfolder)\\r\\n\\r\\ndef UploadToS3Bucket(file_to_load):\\r\\n    full_file_path = local_subfolder + \'/\' + file_to_load\\r\\n    s3 = boto3.client(\'s3\')\\r\\n    s3.upload_file(\\r\\n        Filename=full_file_path,\\r\\n        Bucket=aws_s3_bucket_name,\\r\\n        Key=aws_s3_bucket_subfolder + \'/\' + file_to_load,\\r\\n    )\\r\\n    os.remove(full_file_path)\\r\\n\\r\\nfor i in files_to_upload:\\r\\n    UploadToS3Bucket(i)\\r\\n```\\r\\n\\r\\n![Python code to upload to S3](/src/assets/blog/2023-03-11--17.png)\\r\\n\\r\\nWe can see the files we had locally are now gone...\\r\\n\\r\\n![Files removed from local folder](/src/assets/blog/2023-03-11--18.png)\\r\\n\\r\\n\\r\\n...and our S3 bucket now has the files in the new subfolder we defined.\\r\\n\\r\\n![Files uploaded to S3 bucket](/src/assets/blog/2023-03-11--19.png)\\r\\n\\r\\n\\r\\n## Step 8. Test 2: Python (via Jupyter) download files from AWS S3 Bucket\\r\\n\\r\\nI haven\'t been able to get the download from S3 to to a local subfolder, so the files just download to the same folder as the Python code below.\\r\\n\\r\\n```\\r\\ndef ListS3BucketSubfolderContents():\\r\\n    contents = []\\r\\n    client = boto3.client(\'s3\')\\r\\n\\r\\n    response = client.list_objects_v2(\\r\\n        Bucket=aws_s3_bucket_name,\\r\\n        Prefix=aws_s3_bucket_subfolder + \'/\')\\r\\n\\r\\n    for content in response.get(\'Contents\', []):\\r\\n        contents.append(content[\'Key\'])\\r\\n    \\r\\n    return contents\\r\\n\\r\\naws_s3_bucket_subfolder_list = ListS3BucketSubfolderContents()\\r\\n\\r\\nprint(aws_s3_bucket_subfolder_list)\\r\\n\\r\\ns3 = boto3.resource(\'s3\')\\r\\nbucket = s3.Bucket(aws_s3_bucket_name)\\r\\n\\r\\nfor i in aws_s3_bucket_subfolder_list:\\r\\n    filename = i.split(f\'{aws_s3_bucket_subfolder}/\',1)[1]\\r\\n    bucket.download_file(i,filename)\\r\\n```\\r\\n\\r\\n![Python code to download from S3](/src/assets/blog/2023-03-11--20.png)\\r\\n\\r\\nFiles successfully downloaded from S3 bucket to locally.\\r\\n\\r\\n![Files downloaded to script folder from S3](/src/assets/blog/2023-03-11--21.png)\\r\\n\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* YouTube video **[Upload and Download files from AWS S3 Bucket using python 2022 by Code Bear](https://www.youtube.com/watch?v=K68AtRsNEyo)**\\r\\n\\r\\n* Website **[How to Upload And Download Files From AWS S3 Using Python (2022) by Bex Tuychiev](https://towardsdatascience.com/how-to-upload-and-download-files-from-aws-s3-using-python-2022-4c9b787b15f2)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2023-03-11.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1669381200,"title":"How to use geographic maps in Power BI with AppSource Deneb\\r","name":"how-to-use-geographic-maps-in-power-bi-with-appsource-deneb","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\", \\"Deneb\\", \\"Vega\\", \\"Vega-Lite\\"] \\r","date":"26 November 2022\\r","content":"This post shows how to create country-level maps with AppSource Deneb in Power BI, and circumventing the external data source restriction by embedding the map data directly in your visual.\\r\\n\\r\\nThe final Power BI report *\\"AppSource Deneb Maps\\"* is available here:\\r\\n* **[https://community.powerbi.com/t5/Data-Stories-Gallery/AppSource-Deneb-Maps/m-p/2930366](https://community.powerbi.com/t5/Data-Stories-Gallery/AppSource-Deneb-Maps/m-p/2930366)**\\r\\n\\r\\n![My Power BI visualisation](/src/assets/portfolio/img-2022-11-power-bi-appsource-deneb-maps.gif)\\r\\n\\r\\n\\r\\nMany visualisations from the Vega and Vega-Lite Example Galleries can be copy-and-pasted into Power BI with Deneb.\\r\\n\\r\\n![Vega-Lite: Simple Bar Chart](/src/assets/blog/2022-11-26--01.png)\\r\\n\\r\\n![Deneb: Simple Bar Chart](/src/assets/blog/2022-11-26--02.png)\\r\\n\\r\\nA key exception are geographic maps because those templates connect to a web-hosted data file, and AppSource visuals are not allowed to access *\\"external services or resources\\"*.\\r\\n\\r\\n* **[https://learn.microsoft.com/en-us/power-bi/developer/visuals/power-bi-custom-visuals-certified](https://learn.microsoft.com/en-us/power-bi/developer/visuals/power-bi-custom-visuals-certified)**\\r\\n\\r\\n![Vega-Lite: Choropleth of Unemployment Rate per County](/src/assets/blog/2022-11-26--03.png)\\r\\n\\r\\n![Deneb: Choropleth of Unemployment Rate per County template](/src/assets/blog/2022-11-26--04.png)\\r\\n\\r\\nLogically, the workaround should be to embed the map data into the visual itself. But there are notable issues:\\r\\n\\r\\n* The map data may not have everything you need (e.g. country names) to map back to your Power BI dataset.\\r\\n\\r\\n![Vega-Lite: Example Gallery map data has no Country information](/src/assets/blog/2022-11-26--05.png)\\r\\n\\r\\n* Copying-and-pasting map data from the Example Gallery as-is without understanding the data structure may not work.\\r\\n\\r\\n![Deneb: Copy-and-pasting American state map data](/src/assets/blog/2022-11-26--06.png)\\r\\n\\r\\n* Performance issues editing the specification whilst the map data is embedded in it.\\r\\n\\r\\n\\r\\n## CREATE A COUNTRY-LEVEL VECTOR MAP DATASET\\r\\n\\r\\n\\r\\nDrawing shapes in Deneb (Vega/Vega-Lite) involves mapping out coordinates for each point of the shape a.k.a. \\"feature\\".\\r\\n\\r\\nA basic example of this can be copy-and-pasted from this Stack Overflow answer by Chris Woods **[(@ChrisWoodsSays)](https://twitter.com/ChrisWoodsSays)**.\\r\\n\\r\\n* **[https://stackoverflow.com/questions/71254436/loading-feature-data-into-vega-lite](https://stackoverflow.com/questions/71254436/loading-feature-data-into-vega-lite)**\\r\\n\\r\\n![Deneb: Copy-and-pasting American state map data](/src/assets/blog/2022-11-26--07.png)\\r\\n\\r\\nSo all we need is a dataset that has these coordinates that outline each country\'s shape.\\r\\n\\r\\n\\r\\n### Step 1. Retrieve a vector map data file\\r\\n\\r\\n*GeoJSON Maps of the globe* **[https://geojson-maps.ash.ms](https://geojson-maps.ash.ms)** by Ash Kyd **[(@ashkyd)](https://twitter.com/ashkyd)** is an excellent source for this.\\r\\n\\r\\nYou can choose how detailed the map is, and which regions to include.\\r\\n\\r\\nIn this example, we choose the lowest resolution (so it\'s less of a burden on the visual processing-wise), and all regions.\\r\\n\\r\\n![GeoJSON Maps of the globe: Part 1](/src/assets/blog/2022-11-26--08.png)\\r\\n\\r\\nClick the *\\"Build Custom GeoJSON\\"* button to download your custom.geo.json file.\\r\\n\\r\\n![GeoJSON Maps of the globe: Part 2](/src/assets/blog/2022-11-26--09.png)\\r\\n\\r\\n**Important!** This dataset is not comprehensive as it is missing a number of countries, e.g. Singapore. You can try seeking out other similar datasets as alternatives, as long as their structure is similar.\\r\\n\\r\\n\\r\\n### Step 2. Identify properties you do not need\\r\\n\\r\\nThis file has prolific properties you should review in case there are any you want to keep for your visual (highlighted in red), as well as the coordinates for the country shapes themselves (highlighted blue).\\r\\n\\r\\nIn this case, we will only be retaining the country names and coordinates, which would remove up to 2 thirds of the data.\\r\\n\\r\\nUsing Notepad++, you can use the JsonTools plugin to reformat the file\'s data into *\\"Pretty-print\\"*.\\r\\n\\r\\n![custom.geo.json modification: Part 1](/src/assets/blog/2022-11-26--10.png)\\r\\n\\r\\nYour data should now look like this:\\r\\n\\r\\n![custom.geo.json modification: Part 2](/src/assets/blog/2022-11-26--11.png)\\r\\n\\r\\nAn essential property to keep is:\\r\\n\\r\\n```\\r\\n\\"type\\": \\"Polygon\\"\\r\\n```\\r\\n\\r\\nBut there are other \\"type\\" properties including \\"Sovereignty\\", \\"Sovereign country\\", and \\"Country\\".\\r\\nSo we need to be careful we remove these, but not the \\"Polygon\\" one.\\r\\n\\r\\n![custom.geo.json modification: Part 3](/src/assets/blog/2022-11-26--12.png)\\r\\n\\r\\nThe property we will be keeping is \\"geounit\\", as it has the country name short form.\\r\\n\\r\\nWhereas other properties, like \\"fips_10\\", \\"formal_en\\", \\"homepart\\", etc. will need to be removed.\\r\\n\\r\\n![custom.geo.json modification: Part 4](/src/assets/blog/2022-11-26--13.png)\\r\\n\\r\\nUltimately, you want to create a string array of wildcard properties that will be used to assess each line of the custom.geo.json file, and remove that line where found.\\r\\n\\r\\n```\\r\\n\\"abbrev\\",\\"adm0_\\",\\"admin\\",\\"brk_\\",\\"continent\\",\\"economy\\",\\"fclass_\\",\\"featurecla\\",\\"filename\\",\\"fips_\\",\\"formal_\\",\\"gdp_\\",\\"geou_dif\\",\\"gu_a3\\",\\"homepart\\",\\"income_grp\\",\\"iso_\\",\\"label_\\",\\"labelrank\\", \\"level\\",\\"long_len\\",\\"mapcolor\\",\\"max_\\", \\"min_\\",\\"name\\",\\"ne_id\\",\\"note_\\",\\"pop_\\",\\"postal\\",\\"region_\\",\\"scalerank\\",\\"sov_\\",\\"sovereignt\\",\\"su_\\",\\"subregion\\",\\"subunit\\",\\"tiny\\",\\"tlc\\",\\"un_\\",\\"wb_\\",\\"wikidataid\\",\\"woe_\\",\\"ountry\\",\\"Dependency\\",\\"Sovereignty\\",\\"Disputed\\",\\"Indeterminate\\"\\r\\n```\\r\\n\\r\\nWe will use Python to do just that.\\r\\n\\r\\n\\r\\n### Step 3. Use Python to remove the unnecessary properties\\r\\n\\r\\nIn this example, we use Visual Studio Code and the Python extension to run the script needed to create a new file that only has the data we want.\\r\\n\\r\\nInstructions on how to create a Python environment are mentioned at the start of this previous post:\\r\\n\\r\\n* **[https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi](https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi)**\\r\\n\\r\\n\\r\\nThe Python script is as below:\\r\\n\\r\\n```\\r\\nimport os\\r\\ndef should_remove_line(line, stop_properties):\\r\\n    return any([word in line for word in stop_properties])\\r\\n\\r\\n# This lists the text strings that need to be detected for, and the lines they belong in removed\\r\\n\\r\\nstop_properties = [\\"abbrev\\",\\"adm0_\\",\\"admin\\",\\"brk_\\",\\"continent\\",\\"economy\\",\\"fclass_\\",\\"featurecla\\",\\"filename\\",\\"fips_\\",\\r\\n                   \\"formal_\\",\\"gdp_\\",\\"geou_dif\\",\\"gu_a3\\",\\"homepart\\",\\"income_grp\\",\\"iso_\\",\\"label_\\",\\"labelrank\\", \\"level\\",\\r\\n                   \\"long_len\\",\\"mapcolor\\",\\"max_\\", \\"min_\\",\\"name\\",\\"ne_id\\",\\"note_\\",\\"pop_\\",\\"postal\\",\\"region_\\",\\"scalerank\\",\\r\\n                   \\"sov_\\",\\"sovereignt\\",\\"su_\\",\\"subregion\\",\\"subunit\\",\\"tiny\\",\\"tlc\\",\\"un_\\",\\"wb_\\",\\"wikidataid\\",\\"woe_\\",\\r\\n                   \\"ountry\\",\\"Dependency\\",\\"Sovereignty\\",\\"Disputed\\",\\"Indeterminate\\"]\\r\\n\\r\\n# This code generates a temp file which removes nearly all of the unnecessary properties\\r\\n# But it leaves behind a single property \\"geounit\\", which has a comma at line end with no following property\\r\\n\\r\\nwith open(r\\"custom.geo.json\\") as f, open(r\\"stage1_output.json\\", \\"w\\") as stage1:    \\r\\n    for line in f:   \\r\\n        if not should_remove_line(line, stop_properties):  \\r\\n            stage1.write(line)\\r\\n\\r\\n# This code detects rows with the last remaining property, removes their commas, and writes to a second file\\r\\n\\r\\nstop_word = \\"geounit\\"\\r\\n\\r\\ndef remove_comma_after_name(line, stop_word):\\r\\n    return any([word in line for word in stop_word])\\r\\n\\r\\nwith open(r\\"stage1_output.json\\") as f, open(r\\"stage2_output.json\\", \\"w\\") as stage2:    \\r\\n    for line in f:\\r\\n        if stop_word in line:\\r\\n            line = line.replace(\',\',\'\',1)\\r\\n            stage2.write(line)\\r\\n        else:\\r\\n            stage2.write(line)\\r\\n\\r\\n```\\r\\n\\r\\nYour environment would have both the Python script and custom.geo.json, as per screenshot below, then you can just *Run Python File*.\\r\\n\\r\\n![Python: Part 1](/src/assets/blog/2022-11-26--14.png)\\r\\n\\r\\nThe script creates an initial file named *stage1_output.json*, where the \\"geounit\\" property has a comma at the end. If this is the only or last property, this will cause issues.\\r\\n\\r\\n![Python: Part 2](/src/assets/blog/2022-11-26--15.png)\\r\\n\\r\\nSo a second file is created named *stage2_output.json* to remove the comma. We will use the contents of this file for our Deneb visual.\\r\\n\\r\\n![Python: Part 3](/src/assets/blog/2022-11-26--16.png)\\r\\n\\r\\n\\r\\n### Step 4. Extract country names from the dataset\\r\\n\\r\\nOne way to extract country names is to Ctrl + F for all instances of \\"geounit\\" in the file via Notepad++, then copy-and-paste the results into Excel, and use formulas to remove the excess data such as line number, \\"geounit\\", etc.\\r\\n\\r\\n![Extract country names](/src/assets/blog/2022-11-26--17.png)\\r\\n\\r\\nYou can download this country list as an Excel file from here:\\r\\n\\r\\n* **[https://github.com/makuharistudio/data-visualisation-datasets/raw/main/AppSource%20Deneb%20maps/Countries.xlsx](https://github.com/makuharistudio/data-visualisation-datasets/raw/main/AppSource%20Deneb%20maps/Countries.xlsx)**\\r\\n\\r\\n\\r\\n### Step 5. Reformat map data file contents\\r\\n\\r\\nUsing Notepad++, you can use the JsonTools plugin to Compress the file.\\r\\n\\r\\n![Notepad++: Data compression Part 1](/src/assets/blog/2022-11-26--18.png)\\r\\n\\r\\n![Notepad++: Data compression Part 2](/src/assets/blog/2022-11-26--19.png)\\r\\n\\r\\nYou can additionally replace the \\"geounit\\" property name with \\"Country\\", to make it easily understood.\\r\\n\\r\\n![Notepad++: Data compression Part 3](/src/assets/blog/2022-11-26--20.png)\\r\\n\\r\\nYou can download this trimmed down geographic JSON data from here:\\r\\n\\r\\n* **[https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/compressed.geo.json](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/compressed.geo.json)**\\r\\n\\r\\n\\r\\n## CREATE POWER BI DATASET & MODEL\\r\\n\\r\\n\\r\\n### Step 1. Connect to the country dataset\\r\\n\\r\\nCreate a new Power BI report, then from Power Query, create a new Blank Query using the code below to connect to the list of countries extracted from the map dataset.\\r\\n\\r\\n**Power Query code**\\r\\n\\r\\n```\\r\\nlet\\r\\n    Source = Excel.Workbook(Web.Contents(\\"https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Countries.xlsx?raw=true\\"), null, true),\\r\\n    tbl_Countries_Table = Source{[Item=\\"tbl_Countries\\",Kind=\\"Table\\"]}[Data],\\r\\n    #\\"Changed Type\\" = Table.TransformColumnTypes(tbl_Countries_Table,{{\\"Country\\", type text}})\\r\\nin\\r\\n    #\\"Changed Type\\"\\r\\n```\\r\\n\\r\\n![Data Source: Map Countries](/src/assets/blog/2022-11-26--21.png)\\r\\n\\r\\n\\r\\n### Step 2. Connect to the city population dataset\\r\\n\\r\\nCreate another blank query for the sample city population dataset also using an Excel Workbook connection. This is a modified version of the **[\\"World Cities Datasets\\" by Viswanathan C](https://www.kaggle.com/datasets/viswanathanc/world-cities-datasets)** hosted on my GitHub.\\r\\n\\r\\n**Power Query code**\\r\\n\\r\\n```\\r\\nlet\\r\\n    Source = Excel.Workbook(Web.Contents(\\"https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Populations.xlsx?raw=true\\"), null, true),\\r\\n    tbl_CityPopulations_Table = Source{[Item=\\"tbl_CityPopulations\\",Kind=\\"Table\\"]}[Data],\\r\\n    #\\"Changed Type\\" = Table.TransformColumnTypes(tbl_CityPopulations_Table,{{\\"Country\\", type text}, {\\"City\\", type text}, {\\"Latitude\\", type number}, {\\"Longitude\\", type number}, \\r\\n    {\\"Capital?\\", type text}, {\\"Population\\", Int64.Type}})\\r\\nin\\r\\n    #\\"Changed Type\\"\\r\\n```\\r\\n\\r\\n\\r\\n### Step 3. Merge both datasets\\r\\n\\r\\nThe reason we import the country list from the map dataset is in case you want to use a dataset other than this city population one, and need to remap country names in your own dataset to match the country names from the map.\\r\\n\\r\\n![Data Source: City Populations](/src/assets/blog/2022-11-26--22.png)\\r\\n\\r\\nIn this example, we will just merge the two datasets so that only records with the same country names are used. You can do this by creating a third blank query for this code:\\r\\n\\r\\n**Power Query code**\\r\\n\\r\\n```\\r\\nlet\\r\\n    Source = Table.NestedJoin(Countries, {\\"Country\\"}, Populations, {\\"Country\\"}, \\"Populations\\", JoinKind.Inner),\\r\\n    #\\"Expand dataset\\" = Table.ExpandTableColumn(Source, \\"Populations\\", {\\"City\\", \\"Latitude\\", \\"Longitude\\", \\"Capital?\\", \\"Population\\"}, {\\"City\\", \\"Latitude\\", \\"Longitude\\", \\"Capital?\\", \\"Population\\"})\\r\\nin\\r\\n    #\\"Expand dataset\\"\\r\\n```\\r\\n\\r\\n![Power Query: Merged dataset](/src/assets/blog/2022-11-26--23.png)\\r\\n\\r\\nFrom Power BI\'s Column tools tab, ensure the Summarization and Data category values are properly set for the Longitude and Latitude fields\\r\\n\\r\\n![Power BI: Merged dataset](/src/assets/blog/2022-11-26--24.png)\\r\\n\\r\\n\\r\\n### Step 4. Import the Deneb custom visual from AppSource\\r\\n\\r\\nDeneb can be downloaded from the Microsoft App Store:\\r\\n\\r\\n* **[https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview](https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview)**\\r\\n\\r\\nThe official website for Deneb:\\r\\n\\r\\n* **[https://deneb-viz.github.io](https://deneb-viz.github.io)**\\r\\n\\r\\n![Power BI: Import Deneb visual](/src/assets/blog/2022-11-26--25.png)\\r\\n\\r\\nAdd the visual to your report.\\r\\n\\r\\n\\r\\n### Step 5. Add Country and Population to the Deneb visual\\r\\n\\r\\nCreate a measure that sums Population and add it to the Deneb visual, along with these fields:\\r\\n\\r\\n* Country\\r\\n* City\\r\\n* Latitude\\r\\n* Longitude\\r\\n\\r\\n```\\r\\nPopulation = SUM(\'Dataset\'[Population])\\r\\n```\\r\\n\\r\\n![Power BI: Add Deneb visual](/src/assets/blog/2022-11-26--26.png)\\r\\n\\r\\nThat measure will be useful to the lowest field (e.g. Country or City, depending on which is added).\\r\\n\\r\\nA separate measure is needed to explicitly sum on Country for specifications that use both Country and City level.\\r\\n\\r\\n```\\r\\nPopulation by Country = CALCULATE(SUM(\'Dataset\'[Population]),ALLEXCEPT(\'Dataset\',\'Dataset\'[Country]))\\r\\n```\\r\\n\\r\\n\\r\\n## HOW TO ADD MAP DATA TO DENEB SPECIFICATION\\r\\n\\r\\nThe different downloadabe specifications below use this embedded map data approach.\\r\\n\\r\\nTo add the map data to each specification, copy from *\\"features\\"* at the start of the data, to *\\"type\\": \\"Feature\\"}]* at the end of the data, as per screenshot below.\\r\\n\\r\\n![Deneb: How to add map data to Vega-Lite](/src/assets/blog/2022-11-26--27.png)\\r\\n\\r\\nThen paste it by replacing the *<< add map data here >>* placeholder in each of the specifications.\\r\\n\\r\\nIt is recommended to define your specification before pasting the map data, as editing the Specification can slow down a lot with that data in place.\\r\\n\\r\\nIf you must edit the specification with the map data in place, you can collapse it by clicking *hide*.\\r\\n\\r\\n![Deneb: How to add map data to Vega-Lite](/src/assets/blog/2022-11-26--28.png)\\r\\n\\r\\n\\r\\n## MISSING DATA\\r\\n\\r\\nAs at time of writing, Deneb visuals are limited to displaying up to 30,000 rows of data.\\r\\n\\r\\nIf your map specification goes over that threshold, country geometries toward the end of your dataset may not appear onscreen.\\r\\n\\r\\nTo display them, try enabling the limiter override via the Visualizations pane > Format your visual section > Visual tab > expand Data Limit Options > Override Row Limit.\\r\\n\\r\\nFor example, Zimbabwe being at the end of the alphabet, does not appear when the limiter override is off, but appears when toggled on.\\r\\n\\r\\n![Deneb: Override Row Limit](/src/assets/blog/2022-11-26--29.png)\\r\\n\\r\\n\\r\\n\\r\\nNext, let\'s create some standard map specifications based on Vega-Lite and Vega Example galleries by using the map data embedding we\'ve covered.\\r\\n\\r\\n\\r\\n\\r\\n## FILLED AREA MAP (FIXED)\\r\\n\\r\\nThis **Vega-Lite** map does not allow pan nor zoom.\\r\\n\\r\\nIt is based on the *\\"Choropleth of Unemployment Rate per County\\"* template, except this one is at country-level.\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/geo_choropleth.html](https://vega.github.io/vega-lite/examples/geo_choropleth.html)**\\r\\n\\r\\n**Preview**\\r\\n\\r\\n![Deneb: Filled area map fixed (Vega-Lite)](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Power%20BI%20gif%20preview/Filled%20area%20map%20fixed.gif?raw=true)\\r\\n\\r\\n**Deneb specification**\\r\\n\\r\\n```\\r\\n{\\"background\\": \\"null\\",\\r\\n \\"view\\": {\\"fill\\": \\"#F0F8FF\\", \\r\\n          \\"fillOpacity\\": 1.0 },\\r\\n \\"width\\": 1000,\\r\\n \\"height\\": 500,\\r\\n \\"data\\": {\\r\\n    \\"name\\": \\"map\\",\\r\\n    \\"values\\": {\\r\\n      \\"type\\": \\"FeatureCollection\\",\\r\\n      << add map data here >>\\r\\n    },\\r\\n    \\"format\\": {\\"type\\": \\"json\\", \\"property\\": \\"features\\"}\\r\\n },\\r\\n \\"transform\\": [{\\r\\n    \\"lookup\\": \\"properties.Country\\",\\r\\n    \\"from\\": {\\r\\n      \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n        \\"key\\": \\"Country\\",\\r\\n        \\"fields\\": [\\"Population\\"]\\r\\n    }\\r\\n }],\\r\\n \\"projection\\": { \\"type\\": \\"mercator\\" },\\r\\n \\"mark\\": {\\"type\\": \\"geoshape\\", \\r\\n          \\"strokeWidth\\": \\"0.5\\",\\r\\n          \\"stroke\\": \\"#000000\\"},\\r\\n \\"encoding\\": {\\r\\n    \\"tooltip\\": [{\\"field\\": \\"properties.Country\\", \\r\\n                 \\"title\\": \\"Country\\"}, \\r\\n                {\\"field\\": \\"Population\\"}],\\r\\n    \\"color\\": {\\r\\n      \\"field\\": \\"Population\\",\\r\\n      \\"type\\": \\"quantitative\\",\\r\\n      \\"scale\\": {\\"range\\": [\\"#EBF7BB\\", \\"#1D368A\\"]}\\r\\n    }\\r\\n }\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n## COORDINATE POINT MAP (FIXED)\\r\\n\\r\\nThis **Vega-Lite** map does not allow pan nor zoom.\\r\\n\\r\\nIt is based on the *\\"One Dot per Airport in the U.S. Overlayed on Geoshape\\"* template.\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/geo_layer.html](https://vega.github.io/vega-lite/examples/geo_layer.html)**\\r\\n\\r\\n**Preview**\\r\\n\\r\\n![Deneb: Coordinate point map fixed (Vega-Lite)](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Power%20BI%20gif%20preview/Coordinate%20point%20map%20fixed.gif?raw=true)\\r\\n\\r\\n**Deneb specification**\\r\\n\\r\\n```\\r\\n{\\"background\\": \\"null\\",\\r\\n \\"view\\": {\\"fill\\": \\"#F0F8FF\\", \\r\\n          \\"fillOpacity\\": 1.0 },\\r\\n \\"width\\": 1000,\\r\\n \\"height\\": 500,\\r\\n \\"layer\\": [\\r\\n    { \\"data\\": {\\r\\n        \\"values\\": {\\r\\n          \\"type\\": \\"FeatureCollection\\",\\r\\n          << add map data here >>\\r\\n        },\\r\\n        \\"format\\": {\\"type\\": \\"json\\", \\"property\\": \\"features\\"}\\r\\n      },\\r\\n      \\"mark\\": {\\"type\\": \\"geoshape\\", \\r\\n               \\"strokeWidth\\": \\"0.5\\",\\r\\n               \\"stroke\\": \\"#000000\\",\\r\\n               \\"fill\\": \\"#E8F5B9\\" },\\r\\n      \\"encoding\\": {\\r\\n        \\"tooltip\\": {\\"field\\": \\"properties.Country\\", \\"title\\": \\"Country\\"},\\r\\n        \\"shape\\": {\\"type\\": \\"geojson\\"}\\r\\n      }\\r\\n    },\\r\\n    { \\"data\\": { \\"name\\": \\"dataset\\" },\\r\\n      \\"projection\\": { \\"type\\": \\"mercator\\"},\\r\\n      \\"mark\\": \\"circle\\",\\r\\n      \\"encoding\\": {\\r\\n        \\"tooltip\\": [{\\"field\\": \\"Country\\"},\\r\\n                    {\\"field\\": \\"City\\"},\\r\\n                    {\\"field\\": \\"Latitude\\"},\\r\\n                    {\\"field\\": \\"Longitude\\"},\\r\\n                    {\\"field\\": \\"Population\\"}],\\r\\n        \\"longitude\\": {\\r\\n          \\"field\\": \\"Longitude\\",\\r\\n          \\"type\\": \\"quantitative\\"\\r\\n        },\\r\\n        \\"latitude\\": {\\r\\n          \\"field\\": \\"Latitude\\",\\r\\n          \\"type\\": \\"quantitative\\"\\r\\n        },\\r\\n        \\"size\\": {\\"value\\": 5},\\r\\n        \\"color\\": {\\"value\\": \\"red\\"}\\r\\n      }\\r\\n    }\\r\\n  ]\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n## FILLED AREA WITH COORDINATE POINT MAP (FIXED)\\r\\n\\r\\nThis **Vega-Lite** map does not allow pan nor zoom.\\r\\n\\r\\nIt is based on a combination of both *\\"Choropleth of Unemployment Rate per County\\"* and *\\"One Dot per Airport in the U.S. Overlayed on Geoshape\\"* templates.\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/geo_choropleth.html](https://vega.github.io/vega-lite/examples/geo_choropleth.html)**\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/geo_layer.html](https://vega.github.io/vega-lite/examples/geo_layer.html)**\\r\\n\\r\\n**Preview**\\r\\n\\r\\n![Deneb: Filled area with coordinate point map fixed (Vega-Lite)](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Power%20BI%20gif%20preview/Filled%20area%20with%20coordinate%20point%20map%20fixed.gif?raw=true)\\r\\n\\r\\n**Deneb specification**\\r\\n\\r\\n```\\r\\n{\\r\\n  \\"background\\": \\"null\\",\\r\\n  \\"view\\": {\\r\\n    \\"fill\\": \\"#F0F8FF\\",\\r\\n    \\"fillOpacity\\": 1\\r\\n  },\\r\\n  \\"width\\": 1000,\\r\\n  \\"height\\": 500,\\r\\n  \\"layer\\": [\\r\\n    {\\r\\n      \\"data\\": {\\r\\n        \\"values\\": {\\r\\n          \\"type\\": \\"FeatureCollection\\",\\r\\n          << add map data here >>\\r\\n        },\\r\\n        \\"format\\": {\\r\\n          \\"type\\": \\"json\\",\\r\\n          \\"property\\": \\"features\\"\\r\\n        }\\r\\n      },\\r\\n      \\"transform\\": [\\r\\n        {\\r\\n          \\"lookup\\": \\"properties.Country\\",\\r\\n          \\"from\\": {\\r\\n            \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n            \\"key\\": \\"Country\\",\\r\\n            \\"fields\\": [\\r\\n              \\"Population\\",\\r\\n              \\"Population by Country\\"\\r\\n            ]\\r\\n          }\\r\\n        }\\r\\n      ],\\r\\n      \\"projection\\": {\\r\\n        \\"type\\": \\"mercator\\"\\r\\n      },\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"geoshape\\",\\r\\n        \\"strokeWidth\\": \\"0.5\\",\\r\\n        \\"stroke\\": \\"#000000\\"\\r\\n      },\\r\\n      \\"encoding\\": {\\r\\n        \\"tooltip\\": [\\r\\n          {\\r\\n            \\"field\\": \\"properties.Country\\",\\r\\n            \\"title\\": \\"Country\\"\\r\\n          },\\r\\n          {\\r\\n            \\"field\\": \\"Population by Country\\",\\r\\n            \\"title\\": \\"Population\\"\\r\\n          }\\r\\n        ],\\r\\n        \\"color\\": {\\r\\n          \\"field\\": \\"Population by Country\\",\\r\\n          \\"type\\": \\"quantitative\\",\\r\\n          \\"scale\\": {\\r\\n            \\"range\\": [\\r\\n              \\"#EBF7BB\\",\\r\\n              \\"#1D368A\\"\\r\\n            ]\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n      \\"projection\\": {\\r\\n        \\"type\\": \\"mercator\\"\\r\\n      },\\r\\n      \\"mark\\": \\"circle\\",\\r\\n      \\"encoding\\": {\\r\\n        \\"tooltip\\": [\\r\\n          {\\"field\\": \\"Country\\"},\\r\\n          {\\"field\\": \\"City\\"},\\r\\n          {\\"field\\": \\"Latitude\\"},\\r\\n          {\\"field\\": \\"Longitude\\"},\\r\\n          {\\"field\\": \\"Population\\"}\\r\\n        ],\\r\\n        \\"longitude\\": {\\r\\n          \\"field\\": \\"Longitude\\",\\r\\n          \\"type\\": \\"quantitative\\"\\r\\n        },\\r\\n        \\"latitude\\": {\\r\\n          \\"field\\": \\"Latitude\\",\\r\\n          \\"type\\": \\"quantitative\\"\\r\\n        },\\r\\n        \\"size\\": {\\"value\\": 5},\\r\\n        \\"color\\": {\\"value\\": \\"red\\"}\\r\\n      }\\r\\n    }\\r\\n  ]\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n## MAP PROJECTION EXPLORER (FIXED)\\r\\n\\r\\nThis **Vega-Lite** map does not allow pan nor zoom.\\r\\n\\r\\nThis allows exploring various map projection types in Vega-Lite.\\r\\n\\r\\nIt is based on the *\\"Projection explorer\\"* template.\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/geo_params_projections.html](https://vega.github.io/vega-lite/examples/geo_params_projections.html)**\\r\\n\\r\\n**Preview**\\r\\n\\r\\n![Deneb: Map projection explorer fixed (Vega-Lite)](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Power%20BI%20gif%20preview/Map%20projection%20explorer%20fixed.gif?raw=true)\\r\\n\\r\\n**Deneb specification**\\r\\n\\r\\n```\\r\\n{\\"background\\": \\"null\\",\\r\\n \\"view\\": {\\"fill\\": \\"#F0F8FF\\", \\r\\n          \\"fillOpacity\\": 1.0 },\\r\\n \\"width\\": 1000,\\r\\n \\"height\\": 500,\\r\\n \\"params\\": [\\r\\n    { \\"name\\": \\"projection\\",\\r\\n      \\"value\\": \\"albers\\",\\r\\n      \\"bind\\": {\\r\\n        \\"input\\": \\"select\\",\\r\\n        \\"options\\": [\\r\\n          \\"albers\\",\\r\\n          \\"albersUsa\\",\\r\\n          \\"azimuthalEqualArea\\",\\r\\n          \\"azimuthalEquidistant\\",\\r\\n          \\"conicConformal\\",\\r\\n          \\"conicEqualArea\\",\\r\\n          \\"conicEquidistant\\",\\r\\n          \\"equalEarth\\",\\r\\n          \\"equirectangular\\",\\r\\n          \\"gnomonic\\",\\r\\n          \\"mercator\\",\\r\\n          \\"naturalEarth1\\",\\r\\n          \\"orthographic\\",\\r\\n          \\"stereographic\\",\\r\\n          \\"transverseMercator\\"\\r\\n        ]\\r\\n      }\\r\\n    }\\r\\n ],\\r\\n \\"layer\\": [\\r\\n    { \\"data\\": {\\r\\n        \\"values\\": {\\r\\n          \\"type\\": \\"FeatureCollection\\",\\r\\n          << add map data here >>\\r\\n        },\\r\\n        \\"format\\": {\\"type\\": \\"json\\", \\"property\\": \\"features\\"}\\r\\n      },\\r\\n      \\"transform\\": [{\\r\\n        \\"lookup\\": \\"properties.Country\\",\\r\\n          \\"from\\": {\\r\\n            \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n                     \\"key\\": \\"Country\\",\\r\\n                     \\"fields\\": [\\"Population\\", \\"Population by Country\\"]\\r\\n          }\\r\\n      }],\\r\\n      \\"projection\\": {\\"type\\": {\\"expr\\": \\"projection\\"}},\\r\\n      \\"mark\\": {\\"type\\": \\"geoshape\\",\\r\\n               \\"strokeWidth\\": \\"0.5\\",\\r\\n               \\"stroke\\": \\"#000000\\"\\r\\n      },\\r\\n      \\"encoding\\": {\\r\\n        \\"tooltip\\": [{\\"field\\": \\"properties.Country\\", \\r\\n                     \\"title\\": \\"Country\\"}, \\r\\n                    {\\"field\\": \\"Population by Country\\"}],\\r\\n        \\"color\\": {\\r\\n          \\"field\\": \\"Population by Country\\",\\r\\n          \\"type\\": \\"quantitative\\",\\r\\n          \\"scale\\": {\\"range\\": [\\"#EBF7BB\\", \\"#1D368A\\"]}\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    { \\"data\\": { \\"name\\": \\"dataset\\" },\\r\\n      \\"projection\\": {\\"type\\": {\\"expr\\": \\"projection\\"}},\\r\\n      \\"mark\\": \\"circle\\",\\r\\n      \\"encoding\\": {\\r\\n        \\"tooltip\\": [{\\"field\\": \\"Country\\"},\\r\\n                    {\\"field\\": \\"City\\"},\\r\\n                    {\\"field\\": \\"Latitude\\"},\\r\\n                    {\\"field\\": \\"Longitude\\"},\\r\\n                    {\\"field\\": \\"Population\\"}],\\r\\n        \\"longitude\\": {\\r\\n          \\"field\\": \\"Longitude\\",\\r\\n          \\"type\\": \\"quantitative\\"\\r\\n        },\\r\\n        \\"latitude\\": {\\r\\n          \\"field\\": \\"Latitude\\",\\r\\n          \\"type\\": \\"quantitative\\"\\r\\n        },\\r\\n        \\"size\\": {\\"value\\": 5},\\r\\n        \\"color\\": {\\"value\\": \\"red\\"}\\r\\n      }\\r\\n    }\\r\\n  ]\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n## SLIDER INTERACTIVE GLOBE (FIXED)\\r\\n\\r\\nThis **Vega-Lite** globe map does not allow pan nor zoom, but can rotate using sliders.\\r\\n\\r\\nIt is based on the *\\"Earthquakes Example\\"* template.\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/interactive_geo_earthquakes.html](https://vega.github.io/vega-lite/examples/interactive_geo_earthquakes.html)**\\r\\n\\r\\n**Preview**\\r\\n\\r\\n![Deneb: Slider interactive globe fixed (Vega-Lite)](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Power%20BI%20gif%20preview/Slider%20interactive%20globe%20fixed.gif?raw=true)\\r\\n\\r\\n**Deneb specification**\\r\\n\\r\\n```\\r\\n{\\r\\n  \\"width\\": 500,\\r\\n  \\"height\\": 500,\\r\\n  \\"projection\\": {\\r\\n    \\"type\\": \\"orthographic\\",\\r\\n    \\"rotate\\": {\\"expr\\": \\"[rotate0, rotate1, 0]\\"}\\r\\n  },\\r\\n  \\"params\\": [\\r\\n    {\\r\\n      \\"name\\": \\"rotate0\\",\\r\\n      \\"value\\": 0,\\r\\n      \\"bind\\": {\\"input\\": \\"range\\", \\"min\\": -90, \\"max\\": 90, \\"step\\": 1}\\r\\n    },\\r\\n    {\\r\\n      \\"name\\": \\"rotate1\\",\\r\\n      \\"value\\": 0,\\r\\n      \\"bind\\": {\\"input\\": \\"range\\", \\"min\\": -90, \\"max\\": 90, \\"step\\": 1}\\r\\n    },\\r\\n    {\\r\\n      \\"name\\": \\"populationSize\\",\\r\\n      \\"value\\": 2.0,\\r\\n      \\"bind\\": {\\"input\\": \\"range\\", \\"min\\": 0.1, \\"max\\": 4, \\"step\\": 0.1}\\r\\n    }\\r\\n  ],\\r\\n  \\"layer\\": [\\r\\n    {\\r\\n      \\"data\\": {\\"sphere\\": true},\\r\\n      \\"mark\\": {\\"type\\": \\"geoshape\\", \\"fill\\": \\"#F0F8FF\\"}\\r\\n    },\\r\\n    {\\r\\n      \\"data\\": { \\"graticule\\": true },\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"geoshape\\",\\r\\n        \\"stroke\\": \\"#B0D8FF\\",\\r\\n        \\"strokeWidth\\": 0.25\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\"data\\": {\\r\\n        \\"values\\": {\\r\\n          \\"type\\": \\"FeatureCollection\\",\\r\\n          << add map data here >>\\r\\n        },\\r\\n        \\"format\\": {\\"type\\": \\"json\\", \\"property\\": \\"features\\"}\\r\\n      },\\r\\n      \\"transform\\": [{\\r\\n        \\"lookup\\": \\"properties.Country\\",\\r\\n          \\"from\\": {\\r\\n            \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n            \\"key\\": \\"Country\\",\\r\\n            \\"fields\\": [\\"Population\\", \\"Population by Country\\"]\\r\\n          }\\r\\n      }],\\r\\n      \\"mark\\": {\\"type\\": \\"geoshape\\",\\r\\n               \\"strokeWidth\\": \\"0.5\\",\\r\\n               \\"stroke\\": \\"#000000\\"\\r\\n      },\\r\\n      \\"encoding\\": {\\r\\n        \\"shape\\": {\\"type\\": \\"geojson\\"},\\r\\n        \\"tooltip\\": [{\\"field\\": \\"properties.Country\\", \\r\\n                     \\"title\\": \\"Country\\"}, \\r\\n                    {\\"field\\": \\"Population by Country\\",\\r\\n                     \\"title\\": \\"Population\\"\\r\\n                    }],\\r\\n        \\"color\\": {\\r\\n          \\"field\\": \\"Population by Country\\",\\r\\n          \\"type\\": \\"quantitative\\",\\r\\n          \\"scale\\": {\\"range\\": [\\"#EBF7BB\\", \\"#1D368A\\"]}\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\"data\\": { \\"name\\": \\"dataset\\" },\\r\\n      \\"transform\\": [\\r\\n        {\\"calculate\\": \\"datum.Longitude\\", \\"as\\": \\"longitude\\"},\\r\\n        {\\"calculate\\": \\"datum.Latitude\\", \\"as\\": \\"latitude\\"},\\r\\n        {\\"filter\\": \\"(rotate0 * -1) - 90 < datum.longitude && datum.longitude < (rotate0 * -1) + 90 && (rotate1 * -1) - 90 < datum.latitude && datum.latitude < (rotate1 * -1) + 90\\"},\\r\\n        {\\"calculate\\": \\"abs(datum.Longitude)\\", \\"as\\": \\"magnitude\\"}\\r\\n      ],\\r\\n      \\"mark\\": {\\"type\\": \\"circle\\", \\"color\\": \\"red\\", \\"opacity\\": 1.0},\\r\\n      \\"encoding\\": {\\r\\n        \\"longitude\\": {\\"field\\": \\"longitude\\", \\"type\\": \\"quantitative\\"},\\r\\n        \\"latitude\\": {\\"field\\": \\"latitude\\", \\"type\\": \\"quantitative\\"},\\r\\n        \\"size\\": {\\r\\n          \\"legend\\": null,\\r\\n          \\"field\\": \\"magnitude\\",\\r\\n          \\"type\\": \\"quantitative\\",\\r\\n          \\"scale\\": {\\r\\n            \\"type\\": \\"sqrt\\",\\r\\n            \\"domain\\": [0, 100],\\r\\n            \\"range\\": [0, {\\"expr\\": \\"pow(populationSize, 3)\\"}]\\r\\n          }\\r\\n        },\\r\\n        \\"tooltip\\": [{\\"field\\": \\"Country\\", \\"name\\": \\"Country\\"},\\r\\n                    {\\"field\\": \\"City\\"},\\r\\n                    {\\"field\\": \\"Latitude\\"},\\r\\n                    {\\"field\\": \\"Longitude\\"},\\r\\n                    {\\"field\\": \\"Population\\"}]\\r\\n      }\\r\\n    }\\r\\n  ]\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n## INTERACTIVE MAP (PAN & ZOOM)\\r\\n\\r\\nThis **Vega** map allows pan and zoom.\\r\\n\\r\\nIt is based on the *\\"Zoomable World Map Example\\"* template, but mine takes it a couple of steps further by actually connecting the geographic shapes to your country data, and has an extra layer for latitude and longitude coordinates.\\r\\n\\r\\n* **[https://vega.github.io/vega/examples/zoomable-world-map](https://vega.github.io/vega/examples/zoomable-world-map)**\\r\\n\\r\\n**Preview**\\r\\n\\r\\n![Deneb: Interactive map pan & zoom (Vega-Lite)](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/AppSource%20Deneb%20maps/Power%20BI%20gif%20preview/Interactive%20map%20pan%20and%20zoom.gif?raw=true)\\r\\n\\r\\n**Deneb specification**\\r\\n\\r\\n```\\r\\n{\\r\\n  \\"width\\": 1100,\\r\\n  \\"height\\": 700,\\r\\n  \\"autosize\\": \\"true\\",\\r\\n  \\"background\\": \\"#EEFFFF\\",\\r\\n  \\"signals\\": [\\r\\n    { \\"name\\": \\"tx\\", \\"update\\": \\"width / 2\\" },\\r\\n    { \\"name\\": \\"ty\\", \\"update\\": \\"height / 2\\" },\\r\\n    { \\"name\\": \\"scale\\",\\r\\n      \\"value\\": 150,\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": {\\"type\\": \\"wheel\\", \\"consume\\": true},\\r\\n        \\"update\\": \\"clamp(scale * pow(1.0005, -event.deltaY * pow(16, event.deltaMode)), 150, 3000)\\"\\r\\n      }]\\r\\n    },\\r\\n    { \\"name\\": \\"angles\\",\\r\\n      \\"value\\": [0, 0],\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": \\"mousedown\\",\\r\\n        \\"update\\": \\"[rotateX, centerY]\\"\\r\\n      }]\\r\\n    },\\r\\n    { \\"name\\": \\"cloned\\",\\r\\n      \\"value\\": null,\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": \\"mousedown\\",\\r\\n        \\"update\\": \\"copy(\'projection\')\\"\\r\\n      }]\\r\\n    },\\r\\n    { \\"name\\": \\"start\\",\\r\\n      \\"value\\": null,\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": \\"mousedown\\",\\r\\n        \\"update\\": \\"invert(cloned, xy())\\"\\r\\n      }]\\r\\n    },\\r\\n    { \\"name\\": \\"drag\\",\\r\\n      \\"value\\": null,\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": \\"[mousedown, window:mouseup] > window:mousemove\\",\\r\\n        \\"update\\": \\"invert(cloned, xy())\\"\\r\\n      }]\\r\\n    },\\r\\n    { \\"name\\": \\"delta\\", \\"value\\": null,\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": {\\"signal\\": \\"drag\\"},\\r\\n        \\"update\\": \\"[drag[0] - start[0], start[1] - drag[1]]\\"\\r\\n      }]\\r\\n    },\\r\\n    { \\"name\\": \\"rotateX\\", \\"value\\": 0,\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": {\\"signal\\": \\"delta\\"},\\r\\n        \\"update\\": \\"angles[0] + delta[0]\\"\\r\\n      }]\\r\\n    },\\r\\n    { \\"name\\": \\"centerY\\", \\"value\\": 0,\\r\\n      \\"on\\": [{\\r\\n        \\"events\\": {\\"signal\\": \\"delta\\"},\\r\\n        \\"update\\": \\"clamp(angles[1] + delta[1], -60, 60)\\"\\r\\n      }]\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\"projections\\": [\\r\\n    {\\r\\n      \\"name\\": \\"projection\\",\\r\\n      \\"type\\": \\"mercator\\",\\r\\n      \\"scale\\": {\\"signal\\": \\"scale\\"},\\r\\n      \\"rotate\\": [{\\"signal\\": \\"rotateX\\"}, 0, 0],\\r\\n      \\"center\\": [0, {\\"signal\\": \\"centerY\\"}],\\r\\n      \\"translate\\": [{\\"signal\\": \\"tx\\"}, {\\"signal\\": \\"ty\\"}]\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\"data\\": [\\r\\n    { \\"name\\": \\"world\\",\\r\\n      \\"values\\": {\\r\\n        \\"type\\": \\"FeatureCollection\\",\\r\\n        << add map data here >>\\r\\n      },\\r\\n      \\"format\\": {\\"type\\": \\"json\\", \\"property\\": \\"features\\"}\\r\\n    },\\r\\n    { \\"name\\": \\"dataset\\", \\"format\\": {} },\\r\\n    { \\"name\\": \\"graticule\\",\\r\\n      \\"transform\\": [ { \\"type\\": \\"graticule\\", \\"step\\": [15, 15] } ]\\r\\n    },\\r\\n    { \\"name\\": \\"world_map\\",\\r\\n      \\"source\\": \\"world\\",\\r\\n      \\"transform\\": [\\r\\n        { \\"type\\": \\"formula\\",\\r\\n          \\"expr\\": \\"datum[\\\\\\"properties\\\\\\"] && datum[\\\\\\"properties\\\\\\"][\\\\\\"Country\\\\\\"]\\",\\r\\n          \\"as\\": \\"properties.Country\\"\\r\\n        },\\r\\n        { \\"type\\": \\"lookup\\",\\r\\n          \\"from\\": \\"dataset\\",\\r\\n          \\"key\\": \\"Country\\",\\r\\n          \\"fields\\": [\\"properties.Country\\"],\\r\\n          \\"values\\": [\\"Population\\", \\"Population by Country\\"]\\r\\n        },\\r\\n        { \\"type\\": \\"filter\\",\\r\\n          \\"expr\\": \\"isValid(datum[\\\\\\"Population\\\\\\"]) && isFinite(+datum[\\\\\\"Population\\\\\\"])\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    { \\"name\\": \\"powerbi_dataset\\",\\r\\n      \\"source\\": \\"dataset\\",\\r\\n      \\"transform\\": [\\r\\n        { \\"type\\": \\"geojson\\",\\r\\n          \\"fields\\": [\\"Longitude\\", \\"Latitude\\"],\\r\\n          \\"signal\\": \\"layer_1_geojson_0\\"\\r\\n        },\\r\\n        { \\"type\\": \\"geopoint\\",\\r\\n          \\"projection\\": \\"projection\\",\\r\\n          \\"fields\\": [\\"Longitude\\", \\"Latitude\\"],\\r\\n          \\"as\\": [\\"layer_1_x\\", \\"layer_1_y\\"]\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\"marks\\": [\\r\\n    { \\"type\\": \\"shape\\",\\r\\n      \\"from\\": {\\"data\\": \\"graticule\\"},\\r\\n      \\"encode\\": {\\r\\n        \\"enter\\": {\\r\\n          \\"strokeWidth\\": {\\"value\\": 0.25},\\r\\n          \\"stroke\\": {\\"value\\": \\"#88D5FF\\"},\\r\\n          \\"fill\\": {\\"value\\": \\"#88D5FF\\"}\\r\\n        }\\r\\n      },\\r\\n      \\"transform\\": [ { \\"type\\": \\"geoshape\\", \\"projection\\": \\"projection\\" } ]\\r\\n    },\\r\\n    { \\"type\\": \\"shape\\",\\r\\n      \\"style\\": [\\"geoshape\\"],\\r\\n      \\"from\\": {\\"data\\": \\"world_map\\"},\\r\\n      \\"encode\\": {\\r\\n        \\"enter\\": {\\r\\n          \\"strokeWidth\\": {\\"value\\": 0.5},\\r\\n          \\"stroke\\": {\\"value\\": \\"#000000\\"}\\r\\n        },\\r\\n        \\"update\\": {\\r\\n          \\"fill\\": {\\"scale\\": \\"color\\", \\"field\\": \\"Population by Country\\"},\\r\\n            \\"tooltip\\": {\\r\\n              \\"signal\\": \\"{\\\\\\"Country\\\\\\": isValid(datum[\\\\\\"properties.Country\\\\\\"]) ? datum[\\\\\\"properties.Country\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"properties.Country\\\\\\"], \\\\\\"Population\\\\\\": isValid(datum[\\\\\\"Population by Country\\\\\\"]) ? datum[\\\\\\"Population by Country\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"Population by Country\\\\\\"]}\\"\\r\\n            },\\r\\n            \\"ariaRoleDescription\\": {\\"value\\": \\"geoshape\\"},\\r\\n            \\"description\\": {\\r\\n              \\"signal\\": \\"\\\\\\"Population: \\\\\\" + (format(datum[\\\\\\"Population\\\\\\"], \\\\\\"\\\\\\")) + \\\\\\"; Country: \\\\\\" + (isValid(datum[\\\\\\"properties.Country\\\\\\"]) ? datum[\\\\\\"properties.Country\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"properties.Country\\\\\\"])\\"\\r\\n            }\\r\\n        }\\r\\n      },\\r\\n      \\"transform\\": [ { \\"type\\": \\"geoshape\\", \\"projection\\": \\"projection\\" } ]\\r\\n    },\\r\\n    { \\"type\\": \\"symbol\\",\\r\\n      \\"style\\": [\\"circle\\"],\\r\\n      \\"from\\": {\\"data\\": \\"powerbi_dataset\\"},\\r\\n      \\"encode\\": {\\r\\n        \\"update\\": {\\r\\n          \\"opacity\\": {\\"value\\": 1.0},\\r\\n          \\"fill\\": {\\"value\\": \\"red\\"},\\r\\n          \\"tooltip\\": {\\r\\n            \\"signal\\": \\"{\\\\\\"Country\\\\\\": isValid(datum[\\\\\\"Country\\\\\\"]) ? datum[\\\\\\"Country\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"Country\\\\\\"], \\\\\\"City\\\\\\": isValid(datum[\\\\\\"City\\\\\\"]) ? datum[\\\\\\"City\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"City\\\\\\"], \\\\\\"Population\\\\\\": isValid(datum[\\\\\\"Population\\\\\\"]) ? datum[\\\\\\"Population\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"Population\\\\\\"]}\\"\\r\\n          },\\r\\n          \\"ariaRoleDescription\\": {\\"value\\": \\"circle\\"},\\r\\n          \\"description\\": {\\r\\n            \\"signal\\": \\"\\\\\\"Longitude: \\\\\\" + (format(datum[\\\\\\"Longitude\\\\\\"], \\\\\\"\\\\\\")) + \\\\\\"; Latitude: \\\\\\" + (format(datum[\\\\\\"Latitude\\\\\\"], \\\\\\"\\\\\\")) + \\\\\\"; Country: \\\\\\" + (isValid(datum[\\\\\\"Country\\\\\\"]) ? datum[\\\\\\"Country\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"Country\\\\\\"]) + \\\\\\"; City: \\\\\\" + (isValid(datum[\\\\\\"City\\\\\\"]) ? datum[\\\\\\"City\\\\\\"] : \\\\\\"\\\\\\"+datum[\\\\\\"City\\\\\\"])\\"\\r\\n          },\\r\\n          \\"x\\": {\\"field\\": \\"layer_1_x\\"},\\r\\n          \\"y\\": {\\"field\\": \\"layer_1_y\\"},\\r\\n          \\"size\\": {\\"value\\": 10},\\r\\n          \\"shape\\": {\\"value\\": \\"circle\\"}\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  ],\\r\\n  \\"scales\\": [\\r\\n    { \\"name\\": \\"color\\",\\r\\n      \\"type\\": \\"linear\\",\\r\\n      \\"domain\\": {\\"data\\": \\"world_map\\", \\"field\\": \\"Population by Country\\"},\\r\\n      \\"range\\":  [\\"#EBF7BB\\", \\"#1D368A\\"],\\r\\n      \\"interpolate\\": \\"hcl\\",\\r\\n      \\"zero\\": false\\r\\n    }\\r\\n  ]\\r\\n}\\r\\n```\\r\\n\\r\\nThis is by no means an efficient way to create geographic maps with AppSource Deneb, but it does prove that it can be done, if for whatever reason you are not allowed to use the standalone Deneb version.\\r\\n\\r\\nIf you want to design maps in a particular style, like the futuristic outline ones you see in movies and video games, then it is doable with this approach.\\r\\n\\r\\n![Example futuristic map style](/src/assets/blog/2022-11-26--30.png)\\r\\n\\r\\nExample futuristic map from **[Reddit](https://www.reddit.com/r/imaginarymaps/comments/wado40/the_world_of_the_new_order_last_days_of_europe_in)**.\\r\\n\\r\\nSince geographic maps just use coordinate points, it also means it is feasible to draw all kinds of custom shapes.\\r\\n\\r\\nThe sky\'s the limit in what you can do with Deneb.\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* Microsoft Power BI Community Forum Question **[Deneb Vega Lite Map not displaying](https://community.powerbi.com/t5/Desktop/Deneb-Vega-Lite-Map-not-displaying/m-p/2487853)**\\r\\n\\r\\n* Stack Overflow Question **[Loading feature data into Vega-Lite](https://stackoverflow.com/questions/71254436/loading-feature-data-into-vega-lite)**\\r\\n\\r\\n* Website **[GeoJSON Maps of the globe](https://geojson-maps.ash.ms)**\\r\\n\\r\\n* Website **[Vega-Lite Example Gallery](https://vega.github.io/vega-lite/examples)**\\r\\n\\r\\n* Website **[Vega Example Gallery](https://vega.github.io/vega/examples)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-11-26.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1666962000,"title":"Comparing manual forecasting with Excel\'s built-in FORECAST.ETS function\\r","name":"comparing-manual-forecasting-with-excels-built-in-forecastets-function","tech":"logo-excel\\r","tags":"[\\"Excel\\", \\"DAX\\", \\"Machine Learning\\"]\\r","date":"29 October 2022\\r","content":"This post discusses my learnings from comparing manual forecasting in Excel using a ratio-to-moving averages method to estimate seasonal indices, versus using Excel\'s out-of-the-box FORECAST.ETS() function.\\r\\n\\r\\nThis began from my wanting to create an Excel variation of my Power BI International Marketplace profit report.\\r\\n\\r\\n![Excel profit forecast dashboard](/src/assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast.gif)\\r\\n\\r\\n* **[https://makuharistudio.github.io/#/project/ExcelInternationalMarketplaceProfitForecast](https://makuharistudio.github.io/#/project/ExcelInternationalMarketplaceProfitForecast)**\\r\\n\\r\\nOne key component of that report, is that it integrated Python into its data model via Power Query (typically not best practice) to forecast seasonal profits using exponential smoothing via Python. See my **[blog post](https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi)** for more information on that.\\r\\n\\r\\nFor my Excel variation, I wanted to keep the forecasting within Excel without relying on an additional tool, and began learning how to do it manually via Wayne Winston\'s 2014 course on LinkedIn Learning; *\\"Excel Data Analysis: Forecasting\\"* **[https://www.linkedin.com/learning/excel-data-analysis-forecasting](https://www.linkedin.com/learning/excel-data-analysis-forecasting)**.\\r\\n\\r\\nI later found Microsoft released the FORECAST.ETS() function only a couple of years later from Excel 2016:\\r\\n\\r\\n* **[https://support.microsoft.com/en-us/office/forecast-ets-function-15389b8b-677e-4fbd-bd95-21d464333f41](https://support.microsoft.com/en-us/office/forecast-ets-function-15389b8b-677e-4fbd-bd95-21d464333f41)**\\r\\n\\r\\nSo I tried applying both methods against my International Marketplace dataset:\\r\\n\\r\\n* **[https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/normalised%20flat%20files](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/normalised%20flat%20files)**\\r\\n\\r\\n\\r\\n### Download Excel file\\r\\n\\r\\nYou can download the completed Excel workbook comparing the two methods below:\\r\\n\\r\\n* **[https://github.com/makuharistudio/data-visualisation-datasets/raw/main/International%20Marketplace%20sales/International%20Marketplace%20FORECAST%20ETS%20vs%20ratio-to-moving%20point%20average.xlsx](https://github.com/makuharistudio/data-visualisation-datasets/raw/main/International%20Marketplace%20sales/International%20Marketplace%20FORECAST%20ETS%20vs%20ratio-to-moving%20point%20average.xlsx)**\\r\\n\\r\\n\\r\\n## Data modelling\\r\\n\\r\\nBefore getting into the forecasting, here\'s a bit of an explanation on how you can forecast values for dates with order/sales records that don\'t exist yet.\\r\\n\\r\\n\\r\\n### Step 1. Create a Year-Month table\\r\\n\\r\\nTo model the dates to account for both:\\r\\n\\r\\na) new records added to the dataset and\\r\\nb) keeping a consistent date buffer to forecast on, based on the latest record\\r\\n\\r\\nuse Power Query to create multiple references to the data source to find the earliest and latest Order Dates.\\r\\n\\r\\n![Power Query: Earliest and latest OrderDates](/src/assets/blog/2022-10-29--01.png)\\r\\n\\r\\n**OrderDate (earliest)**\\r\\n\\r\\n```\\r\\nlet\\r\\n    Source = FactSales,\\r\\n    #\\"remove other columns\\" = Table.SelectColumns(#\\"Source\\",{\\"OrderDate\\"}),\\r\\n    #\\"earliest date\\" = List.Min(#\\"remove other columns\\"[OrderDate])\\r\\nin\\r\\n    #\\"earliest date\\"\\r\\n```\\r\\n\\r\\n**OrderDate (latest)**\\r\\n\\r\\n```\\r\\nlet\\r\\n    Source = FactSales,\\r\\n    #\\"remove other columns\\" = Table.SelectColumns(#\\"Source\\",{\\"OrderDate\\"}),\\r\\n    #\\"removed duplicates\\" = Table.Distinct(#\\"remove other columns\\"),\\r\\n    #\\"latest date\\" = List.Max(#\\"removed duplicates\\"[OrderDate])\\r\\nin\\r\\n    #\\"latest date\\"\\r\\n```\\r\\n\\r\\n**Note:** It is very important to ensure that the data source is referenced separately. Otherwise, using Power Query\'s Reference on the existing sales query would lead to circular dependencies that prevent processing in the next step.\\r\\n\\r\\nThen using those dates, create a Year-Month calendar list. In this example, the query below takes the latest order date (31/12/2022) and it finds the 31st December for the following year and defines it as the last date for your calendar. Then change it to only include Year and Month numbers, and add an index column.\\r\\n\\r\\n![Power Query: Year-Month Index](/src/assets/blog/2022-10-29--02.png)\\r\\n\\r\\n**Year-Month Index**\\r\\n\\r\\n```\\r\\nlet\\r\\n    Source = List.Dates(#\\"OrderDate (earliest)\\", Duration.Days(Date.From(#datetime(Date.Year(#\\"OrderDate (latest)\\")+1, 12, 31, 0, 0, 0))-#\\"OrderDate (earliest)\\")+1, #duration(1, 0, 0, 0)),\\r\\n    #\\"convert to table\\" = Table.FromList(Source, Splitter.SplitByNothing(), null, null, ExtraValues.Error),\\r\\n    #\\"change type\\" = Table.TransformColumnTypes(#\\"convert to table\\",{{\\"Column1\\", type date}}),\\r\\n    #\\"rename to Date column\\" = Table.RenameColumns(#\\"change type\\",{{\\"Column1\\", \\"Date\\"}}),\\r\\n    #\\"add Year column\\" = Table.AddColumn(#\\"rename to Date column\\", \\"Year\\", each Date.Year([Date]), Int64.Type),\\r\\n    #\\"add Month column\\" = Table.AddColumn(#\\"add Year column\\", \\"Month\\", each Date.Month([Date]), Int64.Type),\\r\\n    #\\"remove other columns\\" = Table.SelectColumns(#\\"add Month column\\",{\\"Year\\", \\"Month\\"}),\\r\\n    #\\"remove duplicates\\" = Table.Distinct(#\\"remove other columns\\"),\\r\\n    #\\"add Index column\\" = Table.AddIndexColumn(#\\"remove duplicates\\", \\"Index\\", 1, 1, Int64.Type)\\r\\nin\\r\\n    #\\"add Index column\\"\\r\\n```\\r\\n\\r\\n\\r\\n### Step 2. Create a Date table\\r\\n\\r\\nFollowing similar principles in the previous step, create a main Date table, and merge the Year-Month table to it, so that the latter\'s index is added. In this example, we have named our date table as \\"Calendar\\".\\r\\n\\r\\n![Power Query: Merge Calendar table with Year-Month Index table](/src/assets/blog/2022-10-29--03.png)\\r\\n\\r\\n**Calendar**\\r\\n\\r\\n```\\r\\nlet\\r\\n    Source = List.Dates(#\\"OrderDate (earliest)\\", Duration.Days(Date.From(#datetime(Date.Year(#\\"OrderDate (latest)\\")+1, 12, 31, 0, 0, 0))-#\\"OrderDate (earliest)\\")+1, #duration(1, 0, 0, 0)),\\r\\n    #\\"conver to table\\" = Table.FromList(Source, Splitter.SplitByNothing(), null, null, ExtraValues.Error),\\r\\n    #\\"change type\\" = Table.TransformColumnTypes(#\\"conver to table\\",{{\\"Column1\\", type date}}),\\r\\n    #\\"rename to Date column\\" = Table.RenameColumns(#\\"change type\\",{{\\"Column1\\", \\"Date\\"}}),\\r\\n    #\\"add Year column\\" = Table.AddColumn(#\\"rename to Date column\\", \\"Year\\", each Date.Year([Date]), Int64.Type),\\r\\n    #\\"add Quarter column\\" = Table.AddColumn(#\\"add Year column\\", \\"Quarter\\", each \\"Q\\" & Text.From(Date.QuarterOfYear([Date])), type text),\\r\\n    #\\"add Month column\\" = Table.AddColumn(#\\"add Quarter column\\", \\"Month\\", each Date.Month([Date]), Int64.Type),\\r\\n    #\\"add Month name column\\" = Table.AddColumn(#\\"add Month column\\", \\"Month name\\", each Text.Upper(Text.Start(Date.MonthName([Date]),3)), type text),\\r\\n    #\\"add Day column\\" = Table.AddColumn(#\\"add Month name column\\", \\"Day\\", each Date.Day([Date]), Int64.Type),\\r\\n    #\\"add Day name column\\" = Table.AddColumn(#\\"add Day column\\", \\"Day name\\", each Text.Upper(Text.Start(Date.DayOfWeekName([Date]),3)), type text),\\r\\n    #\\"merge with Year-Month Index\\" = Table.NestedJoin(#\\"add Day name column\\", {\\"Year\\", \\"Month\\"}, #\\"Year-Month Index\\", {\\"Year\\", \\"Month\\"}, \\"Year-Month Index\\", JoinKind.Inner),\\r\\n    #\\"expand Year-Month Index\\" = Table.ExpandTableColumn(#\\"merge with Year-Month Index\\", \\"Year-Month Index\\", {\\"Index\\"}, {\\"Index\\"})\\r\\nin\\r\\n    #\\"expand Year-Month Index\\"\\r\\n```\\r\\n\\r\\nRemember to Mark as Date Table via Power Pivot.\\r\\n\\r\\nThen add the relationship between the sales table and the date table. \\r\\n\\r\\n![Power Query: Relationship between Calendar table and FactSales data](/src/assets/blog/2022-10-29--04.png)\\r\\n\\r\\n\\r\\n### Step 3. Create DAX measure and a pivot table\\r\\n\\r\\nIn the example above, we have an additional relationship from the sales table\'s ShipDate field to the calendar. This means needing to define USERELATIONSHIP() when creating our DAX query to sum profit:\\r\\n\\r\\n```\\r\\n=VAR currentyear = YEAR(CALCULATE(MAX(FactSales[OrderDate]), ALL(FactSales)))\\r\\nRETURN CALCULATE(SUM(FactSales[Profit]), YEAR(FactSales[OrderDate]) = currentyear, USERELATIONSHIP(\'Calendar\'[Date], FactSales[OrderDate]))\\r\\n```\\r\\n\\r\\n![Power Query: DAX measure](/src/assets/blog/2022-10-29--05.png)\\r\\n\\r\\n\\r\\nNext, add a pivot table from the Data Model, using the Index from the Calendar date table, year and month fields, and the DAX measure.\\r\\n\\r\\nBy default, Excel will only show the records that exist for the DAX measure.\\r\\n\\r\\n![Pivot table: Add calendar fields, index, and DAX measure](/src/assets/blog/2022-10-29--06.png)\\r\\n\\r\\nTo show the rows for unforecasted months, configure the *PivotTable Options* to *Show items with no data on rows*\\r\\n\\r\\n![Pivot table: Enable Show items with no data on rows](/src/assets/blog/2022-10-29--07.png)\\r\\n\\r\\nNow the rows without data which will be forecasted for, display in the pivot. If a new year\'s data is added, then the additional months will update in accordance with that.\\r\\n\\r\\n\\r\\n**Note:** As at the time of writing, FORECAST.ETS() cannot be called from within DAX, so ultimately, you would need to reference the pivot table\'s cells, and perform the calculations from normal cells.\\r\\n\\r\\n![Pivot table: Pivot table with extra year-months for predictions](/src/assets/blog/2022-10-29--08.png)\\r\\n\\r\\n\\r\\nFinally, onto the forecasting...\\r\\n\\r\\n\\r\\n## Manual: Ratio-to-moving averages method\\r\\n\\r\\nBeginning with the manual ratio-to-moving averages method, these are the general steps:\\r\\n\\r\\n\\r\\n### Step 1. 3-period moving average\\r\\n\\r\\nCreate a column for the moving average. You can choose how many periods cover the average and redo your analysis to try diffserent ones. In the case of the LinkedIn Learning course, 4 periods were used, but I\'ve used 3 here to reflect the number of months per quarter.\\r\\n\\r\\nBecause of the nature of the averaging and need to maintain a consistent pattern, the range for the result periods will be less than the range of the period data you have.\\r\\n\\r\\n![Ratio-to-moving average: 3-period moving average](/src/assets/blog/2022-10-29--09.png)\\r\\n\\r\\n\\r\\n### Step 2. Centred moving average (CMA)\\r\\n\\r\\nCreate a column for the centred moving average, which averages the previous and current period\'s 3-period moving average.\\r\\n\\r\\nIn this case, there\'ll just be one less period in the results from the start versus the input.\\r\\n\\r\\n![Ratio-to-moving average: Centred moving average](/src/assets/blog/2022-10-29--10.png)\\r\\n\\r\\n\\r\\n### Step 3. Actual  CMA\\r\\n\\r\\nCreate a column to divide the actual profit value by the centred moving average.\\r\\n\\r\\n![Ratio-to-moving average: Divide actual by CMA](/src/assets/blog/2022-10-29--11.png)\\r\\n\\r\\n\\r\\n### Step 4. Seasonal average based on month number\\r\\n\\r\\nCreate a separate reference table that averages the Actual  CMA results based on their month number as a seasonal index.\\r\\n\\r\\n![Ratio-to-moving average: Seasonal index](/src/assets/blog/2022-10-29--12.png)\\r\\n\\r\\nThen average the seasonal index values.\\r\\n\\r\\n![Ratio-to-moving average: Average the seasonal indexes](/src/assets/blog/2022-10-29--13.png)\\r\\n\\r\\n\\r\\n### Step 5. Normalised seasonal index\\r\\n\\r\\nAdd a new column to that reference table to normalise seasonal index values by dividing each with the overall average of them. This normalised index value is what will be used to forecast the later months.\\r\\n\\r\\n![Ratio-to-moving average: Normalise each seasonal indexes](/src/assets/blog/2022-10-29--14.png)\\r\\n\\r\\nHowever, incorporating those exact cells into the forecast will cause a circular reference, and thus not work. So the results need to be copy-and-pasted as plain values into new cells, which will be used for forecasting.\\r\\n\\r\\n![Ratio-to-moving average: Copy-and-paste normalised index](/src/assets/blog/2022-10-29--15.png)\\r\\n\\r\\n\\r\\n### Step 6. SLOPE() and INTERCEPT() of CMA\\r\\n\\r\\nNext, create 2 cells to each calculate the slope and intercepts of the CMA values based on the overall index value.\\r\\n\\r\\n![Ratio-to-moving average: Slope and intercept](/src/assets/blog/2022-10-29--16.png)\\r\\n\\r\\n\\r\\n### Step 7. Trendline level\\r\\n\\r\\nFor each month that will be forecasted, create a column to calculate trendline level.\\r\\nThis calculation will be the INTERCEPT() result + SLOPE() result x overall index\\r\\n\\r\\n![Ratio-to-moving average: Trendline level](/src/assets/blog/2022-10-29--17.png)\\r\\n\\r\\n\\r\\n### Step 8. Forecast using the trendline level and normalised index\\r\\n\\r\\nLastly, calculate the forecast by multiplying the trendline value for the month number, with a VLOOKUP of the normalised index.\\r\\n\\r\\n![Ratio-to-moving average: Forecast](/src/assets/blog/2022-10-29--18.png)\\r\\n\\r\\n\\r\\nNext we\'ll look at how we can forecast more simply and with more accuracy.\\r\\n\\r\\n\\r\\n\\r\\n## Excel\'s FORECAST.ETS() function\\r\\n\\r\\nYou will only need the overall index to serve as a continuous reference, and the profit columns only.\\r\\nSelect them, including the indexes being forecasted for.\\r\\n\\r\\nThen from the Data tab > Forecast Sheet\\r\\n\\r\\n![FORECAST.ETS function: Forecast Sheet](/src/assets/blog/2022-10-29--19.png)\\r\\n\\r\\nIn the Create Forecast Worksheet prompt, specify where the forecast starts and ends based on the index number, and the seasonality.\\r\\n\\r\\n![FORECAST.ETS function: Forecast Sheet prompt](/src/assets/blog/2022-10-29--20.png)\\r\\n\\r\\nNow you have both the forecasted values and a line chart to show its accuracy.\\r\\n\\r\\n![FORECAST.ETS function: Forecast Sheet result](/src/assets/blog/2022-10-29--21.png)\\r\\n\\r\\n\\r\\n\\r\\n## Compare forecasting accuracies of both methods\\r\\n\\r\\nThe mean absolute percentage error (MAPE) is used to check how much error the forecast could have. For example, a MAPE score of 5% means the forecast can be off by about 5%.\\r\\n\\r\\nHow to calculate the MAPE:\\r\\n\\r\\n### Step 1. Apply your forecasting method to actuals\\r\\n\\r\\nFor each of the methods above, create a new column that calculates the forecasts for the actual values you already have.\\r\\n\\r\\n* **Ratio-to-moving average**\\r\\n\\r\\nThe formula used to forecast the later months is easily adapted to existing months.\\r\\n\\r\\n![Forecast on actuals: Ratio-to-moving average](/src/assets/blog/2022-10-29--22.png)\\r\\n\\r\\n* **Forecast sheet**\\r\\n\\r\\nFor the Forecast Sheet method, rather than clicking on the Forecast Sheet button, simply apply the same formula in the forecasted cells.\\r\\n\\r\\n![Forecast on actuals: Forecast Sheet](/src/assets/blog/2022-10-29--23.png)\\r\\n\\r\\n\\r\\n### Step 2. Create the ABS % of the error\\r\\n\\r\\nCreate a new column to calculate the absolute percentage of the error between the actual and the forecast for it.\\r\\n\\r\\nThis is calculated as ABS((Actual - Forecast)  Actual)\\r\\n\\r\\n![Forecast on actuals: Absolute percentage of the error](/src/assets/blog/2022-10-29--24.png)\\r\\n\\r\\n\\r\\n### Step 3. Create the MAPE\\r\\n\\r\\nTake the average of these absolute percentages of errors to get the MAPE.\\r\\n\\r\\nComparing the two methods above, the MAPE scores are:\\r\\n\\r\\n* manual ratio-to-moving average method: 14.95%\\r\\n* Excel\'s FORECAST.ETS function: 1.16%\\r\\n\\r\\nSo clearly, the FORECAST.ETS function (at least on this dataset), is far less off in terms of forecasting accuracy than ratio-to-moving average. The performance of Excel\'s algorithm over the manual method is also self-evident by comparing the line charts.\\r\\n\\r\\n![Comparing MAPE scores of different methods](/src/assets/blog/2022-10-29--25.png)\\r\\n\\r\\n\\r\\n## Manual: Checking for autocorrelation\\r\\n\\r\\nHowever, the presence of autocorrelation (which seeks to detect the infrequency of + and - sign changes in errors) can negate the findings from MAPE. So as a final step, we can check for that in our model.\\r\\n\\r\\n\\r\\n### Step 1. Visualise the linear trendline coefficients for actuals\\r\\n\\r\\nAs an optional step, plot the actuals on a line chart, then add a linear trendline.\\r\\nThis will help you visually validate the values against the next step.\\r\\n\\r\\n![Excel: Linear trendline of actuals](/src/assets/blog/2022-10-29--26.png)\\r\\n\\r\\n\\r\\n### Step 2. Use the LINEST() function to get the coefficients\\r\\n\\r\\nPass the actual profit values, and the overall index as parameters into the LINEST() function. Be sure to click Citrl + Shift + Enter when completing the formula.\\r\\n\\r\\nThe first rows contains the slope and the y-intercept seen in the line chart\'s linear trendline.\\r\\n\\r\\n![Excel: LINEST() function](/src/assets/blog/2022-10-29--27.png)\\r\\n\\r\\n\\r\\n### Step 3. Calculate the + or - error values\\r\\n\\r\\nCreate a new column to calculate the positive or negative error values using the following equation:\\r\\n\\r\\nactual - (slope x month index + y-intercept)\\r\\n\\r\\n![Excel: + or - error values](/src/assets/blog/2022-10-29--28.png)\\r\\n\\r\\n\\r\\n### Step 4. Check for positive or negative values\\r\\n\\r\\nCreate a new column that performs a binary check to see if the multiplication of the previous period\'s + or - error value is less than 0.\\r\\n\\r\\n![Excel: Binary sign change check](/src/assets/blog/2022-10-29--29.png)\\r\\n\\r\\n\\r\\n### Step 5. Count the number of actual observations\\r\\n\\r\\nCreate a new reference cell to count the number of actual observations.\\r\\n\\r\\n![Autocorrelation: count observations](/src/assets/blog/2022-10-29--30.png)\\r\\n\\r\\n\\r\\n### Step 6. Sum the number of sign changes\\r\\n\\r\\nThe result of Step 4. should be each actual observation having a 1 or 0 based on the sign of the previous value. So summing these will show the number of changes.\\r\\n\\r\\n![Autocorrelation: sum sign changes](/src/assets/blog/2022-10-29--31.png)\\r\\n\\r\\n\\r\\n### Step 7. Calculate cut-off, then compare with sum of sign changes\\r\\n\\r\\nThe cut-off value indicates the minimum number of sign changes to not be impacted by autocorrelation.\\r\\n\\r\\nThe formula for this is:\\r\\n\\r\\n((observation count - 1)  2) - square root of (observation count - 1)\\r\\n\\r\\n![Autocorrelation: cut-off](/src/assets/blog/2022-10-29--32.png)\\r\\n\\r\\nIn this case, the sum of sign changes (8) is higher than the cut-off (6), so autocorrelation does not undermine the MAPE check performed earlier.\\r\\n\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* LinkedIn Learning Course **[Excel Data Analysis: Forecasting by Wayne Winston](https://www.linkedin.com/learning/excel-data-analysis-forecasting)**\\r\\n\\r\\n* YouTube video **[Forecasting in Excel Made SIMPLE (include seasonality & make predictions) by Leila Gharani](https://www.youtube.com/watch?v=j22tLUQQDh4)**\\r\\n\\r\\n* Microsoft Office Community Question **[Using coefficients from trendline in Excel Chart](https://answers.microsoft.com/en-us/msoffice/forum/all/using-coefficients-from-trendline-in-excel-chart/16bb5160-1b3d-432e-86dc-8fb15b44100f)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-10-29.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1663509600,"title":"How to webscrape a YouTube channel\'s video titles using Python and Visual Studio Code\\r","name":"how-to-webscrape-a-youtube-channels-video-titles-using-python-and-visual-studio-code","tech":"logo-python\\r","tags":"[\\"Python\\"]\\r","date":"19 September 2022\\r","content":"This post shows how to webscrape all the video titles from a YouTube channel, despite the 50 result per request limit of the YouTube API version 3 (as at time of writing), using Visual Studio Code, and a mix of Python libraries.\\r\\n\\r\\n\\r\\n## Step 1. Log into console.cloud.google.com and create a new project.\\r\\n\\r\\nIn the example below, I created a new project named *\\"Le Wagon YouTube Channel\\"*, but the name you use may not particularly matter, as the purpose of creating the project is just to get an API key for web scraping.\\r\\n\\r\\nAs at the time of writing, you can get a Twitter Developer account off the back of an existing Twitter account or create a new one, but you will need to provide your mobile phone number for verification.\\r\\n\\r\\n* **[https://console.cloud.google.com](https://console.cloud.google.com)**\\r\\n\\r\\n![Google Cloud Console: new project](/src/assets/blog/2022-09-19--01.png)\\r\\n\\r\\n\\r\\n## Step 2. Enable the YouTube Data API v3 and create an API key\\r\\n\\r\\nFrom within the project, go to the APIs and services section > Library > search for YouTube Data API v3 > Enable. \\r\\n\\r\\n![Google Cloud Console: enable YouTube API](/src/assets/blog/2022-09-19--02.png)\\r\\n\\r\\nOnce enabled, go to the APIs and services section > Credentials > create API Key\\r\\n\\r\\n![Google Cloud Console: generate API key](/src/assets/blog/2022-09-19--03.png)\\r\\n\\r\\n\\r\\n## Step 3. Install Python, create a virtual environment, and install libraries\\r\\n\\r\\nInstall Python\\r\\n* **[https://www.python.org/downloads/windows](https://www.python.org/downloads/windows)**\\r\\n\\r\\nCreate a folder for your Python project and open it in Visual Studio Code.\\r\\nIn this example, the folder name is *Project* and is on the Desktop.\\r\\n\\r\\nCreate your virtual environment as a subfolder of your project.\\r\\n\\r\\n```\\r\\npython -m venv C:\\\\Users\\\\Administrator\\\\Desktop\\\\Project\\\\venv\\r\\n```\\r\\n\\r\\nInstall the Python Extension for Visual Studio Code.\\r\\n\\r\\n![Visual Studio Code: create and activate virtual environment](/src/assets/blog/2022-09-19--04.png)\\r\\n\\r\\nYou can find more detailed screenshot steps of the above from a previous blog post:\\r\\n* **[Add forecasts from Python using Visual Studio Code to Power BI](https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi)**\\r\\n\\r\\n\\r\\nFrom within the Python virtual environment, install the required dependencies for the script.\\r\\n\\r\\n```\\r\\npip install google-api-python-client\\r\\npip install pandas\\r\\npip install numpy\\r\\n```\\r\\n\\r\\n![Visual Studio Code: install libraries](/src/assets/blog/2022-09-19--05.png)\\r\\n\\r\\n\\r\\n## Step 4. Find the YouTube channel\'s ID via browser source code\\r\\n\\r\\nNavigate to the main page for the YouTube channel you want to scrape, then right-click > View page source.\\r\\n\\r\\n![Browser: YouTube channel](/src/assets/blog/2022-09-19--06.png)\\r\\n\\r\\nPress Ctrl + F to find the *externalId* attribute, as its value is the channel ID.\\r\\n\\r\\n![Browser: YouTube channel ID](/src/assets/blog/2022-09-19--07.png)\\r\\n\\r\\nIn this example, Le Wagon\'s channel ID is **\'UChCDYcBCrb8tuPAO6e0P-Hw\'**\\r\\n\\r\\nBefore creating the python file to add and run the script, I\'ve outlined how it works below.\\r\\n\\r\\nIf you do not want an overview how the code works and just want to implement the code, then skip the *Code explanation* to Step 5, otherwise you can continue below:\\r\\n\\r\\n\\r\\n## Code explanation\\r\\n\\r\\nThe first half of the code is mostly based on this YouTube tutorial by techTFQ:\\r\\n\\r\\n* YouTube video **[\\"Python Project to Scrape YouTube using YouTube Data API | Analyze and Visualize YouTube data\\" by Thoufiq Mohammed](https://www.youtube.com/watch?v=SwSbnmqk3zY)**\\r\\n\\r\\nHowever, even though I copied the code from the tutorial, I found that I was unable to pull more than 50 records into a single file, despite the video showing it was capable of doing that.\\r\\n\\r\\nI was unsure if this was due to issues with the code demonstrated, or perhaps changes to YouTube\'s API, such as regarding immediate subsequent calls as part of the 50 result limit, that made the code no longer capable of pulling more than 50 videos worth of data.\\r\\n\\r\\nRather than spend time trying to figure that out, I instead took the approach of running a loop that would send separate API requests and store each result into individual temporary files, then use Python to append all the results into a single file.\\r\\n\\r\\n### Use the channel ID to retrieve the uploads ID\\r\\n\\r\\nThis is the first part of the code, where you would need to substitute the ?????????? with your API key and the channel ID retrieved in earlier steps. It uses that information to pull the uploads ID for the channel, which lists all the video IDs.\\r\\n\\r\\n```\\r\\nfrom googleapiclient.discovery import build\\r\\nimport pandas as pd\\r\\nimport numpy as np\\r\\nimport csv\\r\\nimport glob\\r\\nimport re\\r\\nimport json\\r\\n\\r\\napi_key = \'??????????\'\\r\\nservice = build(\'youtube\', \'v3\', developerKey=api_key)\\r\\nchannel_id = \'??????????\'\\r\\n\\r\\n\\r\\n\\r\\n# EXTRACT YOUTUBE CHANNEL\'S UPLOADS ID FOR FULL PLAYLIST\\r\\n\\r\\ndef get_uploads_id(service, channel_id):\\r\\n\\r\\n    request = service.channels().list(\\r\\n        part=\'contentDetails\',\\r\\n        id=channel_id\\r\\n    )\\r\\n    response = request.execute()\\r\\n\\r\\n    for channel in response[\'items\']:\\r\\n        channelstats = channel[\'contentDetails\'][\'relatedPlaylists\'][\'uploads\']\\r\\n\\r\\n    return channelstats\\r\\n\\r\\nuploadsID = (get_uploads_id(service, channel_id))\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Python part 1](/src/assets/blog/2022-09-19--08.png)\\r\\n\\r\\n\\r\\n### Store all the video ids from the channel\\r\\n\\r\\nThis second part of the code is pretty much straight from Thoufiq Mohammed\'s YouTube tutorial, and it retrieves all of the video IDs for the selected channel, then stores them into an array. In order to account for the 50 result per request limit, Thoufiq\'s code uses page tokens and a for loop to go through each \\"page\\" of 50 video IDs.\\r\\n\\r\\n* YouTube video **[\\"Python Project to Scrape YouTube using YouTube Data API | Analyze and Visualize YouTube data\\" by Thoufiq Mohammed](https://www.youtube.com/watch?v=SwSbnmqk3zY)**\\r\\n\\r\\n```\\r\\n# EXTRACT YOUTUBE VIDEO IDS TO SEPARATE CSV FILES\\r\\n\\r\\ndef get_video_ids(service, uploadsID):\\r\\n\\r\\n    request = service.playlistItems().list(\\r\\n        part=\'contentDetails\',\\r\\n        playlistId = uploadsID,\\r\\n        maxResults = 50)\\r\\n    response = request.execute()\\r\\n\\r\\n    video_ids = []\\r\\n\\r\\n    for i in range(len(response[\'items\'])):\\r\\n        video_ids.append(response[\'items\'][i][\'contentDetails\'][\'videoId\'])\\r\\n\\r\\n    next_page_token = response.get(\'nextPageToken\')\\r\\n    more_pages = True\\r\\n\\r\\n    while more_pages:\\r\\n        if next_page_token is None:\\r\\n            more_pages = False\\r\\n        else:\\r\\n            request = service.playlistItems().list(\\r\\n                        part=\'contentDetails\',\\r\\n                        playlistId = uploadsID,\\r\\n                        maxResults = 50,\\r\\n                        pageToken = next_page_token)\\r\\n            response = request.execute()   \\r\\n\\r\\n            for i in range(len(response[\'items\'])):\\r\\n                video_ids.append(response[\'items\'][i][\'contentDetails\'][\'videoId\'])\\r\\n\\r\\n            next_page_token = response.get(\'nextPageToken\')\\r\\n \\r\\n    return (video_ids)\\r\\n\\r\\nvideo_ids = get_video_ids(service, uploadsID)\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Python part 2](/src/assets/blog/2022-09-19--09.png)\\r\\n\\r\\n### Extract all the video ids into separate csv files\\r\\n\\r\\nThoufiq\'s code stores data for the API requests with variable arrays, as you would typically expect. But as it was not working for me, rather than figure out what other variation of similar in-memory based API requests would work, I took a primitive approach of separating the array into csv files with 50 video IDs each.\\r\\n\\r\\nWhether it\'s because of the different approach to pulling the data for the API requests, or its implied slower performance for subsequent API requests, I placed my chances on this allowing me to get what I needed.\\r\\n\\r\\nThis third part of the code is simple:\\r\\n\\r\\n```\\r\\nchunk_size = 50\\r\\n\\r\\nvideo_id_chunks = [video_ids[i:i + chunk_size] for i in range(0, len(video_ids), chunk_size)]\\r\\n\\r\\nfor i in range(len(video_id_chunks)):\\r\\n\\r\\n    filename = \'video_ids_\' + str(i) + \'.csv\'\\r\\n    file = open(filename, \'w\', newline=\'\', encoding=\'utf-8\')\\r\\n    writer = csv.writer(file)\\r\\n    writer.writerow(video_id_chunks[i])\\r\\n    file.close()\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Python part 3a](/src/assets/blog/2022-09-19--10.png)\\r\\n\\r\\nHere you can see an example of what the comma separated files look like:\\r\\n\\r\\n![Visual Studio Code: Python part 3b](/src/assets/blog/2022-09-19--11.png)\\r\\n\\r\\n### Loop each csv for YouTube API requests then store results into separate json files\\r\\n\\r\\nThis fourth part of the code creates a glob variable to list all the temp files containing the video IDs, then loops it for each file, which in turn each file has all its videos looped through to retrieve the video details via the API such as title and publish date, and exports each result set to separate temporary json files.\\r\\n\\r\\nThere is one issue here that I have not yet solved. Note that the dictionary keys for count of views, likes, and comments are commented out.\\r\\n\\r\\nIt is possible to uncomment these and retrieve results. However, in my testing I found that some videos returned a KeyError that stopped the whole process. Typically the way to deal with this is to create a try excepts, but as I am still a Python novice, could not figure out how to design it for a dict(), and didn\'t really need these fields, I didn\'t spend time to try to solve that yet.\\r\\n\\r\\n```\\r\\n# EXTRACT YOUTUBE VIDEO DETAILS TO SEPARATE JSON FILES\\r\\n\\r\\nall_files_ids = glob.glob(\\"video_ids_*.csv\\")\\r\\n\\r\\nfor i in range(len(all_files_ids)):\\r\\n\\r\\n    with open(all_files_ids[i]) as csvfile:\\r\\n        video_ids_for_details = np.loadtxt(csvfile, delimiter=\',\', dtype=\'str\')\\r\\n\\r\\n    def get_video_details(service, video_ids_for_details):\\r\\n\\r\\n        all_video_stats = []\\r\\n\\r\\n        for i in range(0, len(video_ids_for_details), 50):\\r\\n            request = service.videos().list(\\r\\n                part=\'snippet,statistics\',\\r\\n                id=\',\'.join(video_ids_for_details[i:i+50]))\\r\\n            response = request.execute()\\r\\n\\r\\n            for video in response[\'items\']:\\r\\n                video_stats = dict(Title = video[\'snippet\'][\'title\'],\\r\\n                                   Video_id = video[\'id\'],\\r\\n                                   # Views = video[\'statistics\'][\'viewCount\'],\\r\\n                                   # Likes = video[\'statistics\'][\'likeCount\'],\\r\\n                                   # Comments = video[\'statistics\'][\'commentCount\'],\\r\\n                                   Published_date = video[\'snippet\'][\'publishedAt\'])\\r\\n                all_video_stats.append(video_stats)\\r\\n\\r\\n            return all_video_stats\\r\\n\\r\\n    csv_video_list = pd.DataFrame(get_video_details(service, video_ids_for_details))\\r\\n    csv_video_list.to_json(re.sub(\'_ids_\',\'_details_\', re.sub(\'.csv\', \'\', all_files_ids[i])) + \'.json\', orient=\'records\')\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Python part 4a](/src/assets/blog/2022-09-19--12.png)\\r\\n\\r\\nHere you can see an example of what the json files look like (though honestly I applied the pretty-print function from Notepad++ to clean it up a little):\\r\\n\\r\\n![Visual Studio Code: Python part 4b](/src/assets/blog/2022-09-19--13.png)\\r\\n\\r\\n### Combine the temporary json files into a single json file\\r\\n\\r\\nThe fifth and final step of the code is to combine all the data from each of the temporary json files into a single json file output. Looking back on this, I should have included a clean up script component to delete the temporary csv and json files.\\r\\n\\r\\n```\\r\\n# COMBINE YOUTUBE VIDEO DETAILS INTO A SINGLE JSON FILE\\r\\n\\r\\nall_files_details = glob.glob(\\"video_details_*.json\\")\\r\\n\\r\\ndef merge_JsonFiles(filename):\\r\\n    result = list()\\r\\n    for f1 in filename:\\r\\n        with open(f1, \'r\') as infile:\\r\\n            result.extend(json.load(infile))\\r\\n\\r\\n    with open(\'compileddata.json\', \'w\') as output_file:\\r\\n        json.dump(result, output_file)\\r\\n\\r\\nmerge_JsonFiles(all_files_details)\\r\\n```\\r\\n\\r\\n![Visual Studio Code: Python part 5](/src/assets/blog/2022-09-19--14.png)\\r\\n\\r\\n\\r\\n## Step 5. Install Python, create a virtual environment, and install libraries\\r\\n\\r\\nCreate a new Python file in your project directory, in my case it is named *extract-script.py*.\\r\\n\\r\\nThen copy-and-paste the completed code below (substituting your API key and channel ID), then click Run Python File.\\r\\n\\r\\n![Visual Studio Code: Run Python File](/src/assets/blog/2022-09-19--15.png)\\r\\n\\r\\nThe completed json output is the file named *compileddata.json*.\\r\\n\\r\\n![Visual Studio Code: Output json file](/src/assets/blog/2022-09-19--16.png)\\r\\n\\r\\n**Note:** As-is, this code only extracts the YouTube video IDs, titles, and publish date. You can try to uncomment the view, like, and comment count, but there is a chance the script may fail due to KeyErrors.\\r\\nThat caveat aside, you now have all the video titles for a YouTube channel, and can explore more fields to pull via the YouTube Data API v3 official site.\\r\\n\\r\\n```\\r\\nfrom googleapiclient.discovery import build\\r\\nimport pandas as pd\\r\\nimport numpy as np\\r\\nimport csv\\r\\nimport glob\\r\\nimport re\\r\\nimport json\\r\\n\\r\\napi_key = \'??????????\'\\r\\nservice = build(\'youtube\', \'v3\', developerKey=api_key)\\r\\nchannel_id = \'UChCDYcBCrb8tuPAO6e0P-Hw\'\\r\\n\\r\\n\\r\\n\\r\\n# EXTRACT YOUTUBE CHANNEL\'S UPLOADS ID FOR FULL PLAYLIST\\r\\n\\r\\ndef get_uploads_id(service, channel_id):\\r\\n\\r\\n    request = service.channels().list(\\r\\n        part=\'contentDetails\',\\r\\n        id=channel_id\\r\\n    )\\r\\n    response = request.execute()\\r\\n\\r\\n    for channel in response[\'items\']:\\r\\n        channelstats = channel[\'contentDetails\'][\'relatedPlaylists\'][\'uploads\']\\r\\n\\r\\n    return channelstats\\r\\n\\r\\nuploadsID = (get_uploads_id(service, channel_id))\\r\\n\\r\\n\\r\\n\\r\\n# EXTRACT YOUTUBE VIDEO IDS TO SEPARATE CSV FILES\\r\\n\\r\\ndef get_video_ids(service, uploadsID):\\r\\n\\r\\n    request = service.playlistItems().list(\\r\\n        part=\'contentDetails\',\\r\\n        playlistId = uploadsID,\\r\\n        maxResults = 50)\\r\\n    response = request.execute()\\r\\n\\r\\n    video_ids = []\\r\\n\\r\\n    for i in range(len(response[\'items\'])):\\r\\n        video_ids.append(response[\'items\'][i][\'contentDetails\'][\'videoId\'])\\r\\n\\r\\n    next_page_token = response.get(\'nextPageToken\')\\r\\n    more_pages = True\\r\\n\\r\\n    while more_pages:\\r\\n        if next_page_token is None:\\r\\n            more_pages = False\\r\\n        else:\\r\\n            request = service.playlistItems().list(\\r\\n                        part=\'contentDetails\',\\r\\n                        playlistId = uploadsID,\\r\\n                        maxResults = 50,\\r\\n                        pageToken = next_page_token)\\r\\n            response = request.execute()   \\r\\n\\r\\n            for i in range(len(response[\'items\'])):\\r\\n                video_ids.append(response[\'items\'][i][\'contentDetails\'][\'videoId\'])\\r\\n\\r\\n            next_page_token = response.get(\'nextPageToken\')\\r\\n \\r\\n    return (video_ids)\\r\\n\\r\\nvideo_ids = get_video_ids(service, uploadsID)\\r\\n\\r\\nchunk_size = 50\\r\\n\\r\\nvideo_id_chunks = [video_ids[i:i + chunk_size] for i in range(0, len(video_ids), chunk_size)]\\r\\n\\r\\nfor i in range(len(video_id_chunks)):\\r\\n\\r\\n    filename = \'video_ids_\' + str(i) + \'.csv\'\\r\\n    file = open(filename, \'w\', newline=\'\', encoding=\'utf-8\')\\r\\n    writer = csv.writer(file)\\r\\n    writer.writerow(video_id_chunks[i])\\r\\n    file.close()\\r\\n\\r\\n\\r\\n\\r\\n# EXTRACT YOUTUBE VIDEO DETAILS TO SEPARATE JSON FILES\\r\\n\\r\\nall_files_ids = glob.glob(\\"video_ids_*.csv\\")\\r\\n\\r\\nfor i in range(len(all_files_ids)):\\r\\n\\r\\n    with open(all_files_ids[i]) as csvfile:\\r\\n        video_ids_for_details = np.loadtxt(csvfile, delimiter=\',\', dtype=\'str\')\\r\\n\\r\\n    def get_video_details(service, video_ids_for_details):\\r\\n\\r\\n        all_video_stats = []\\r\\n\\r\\n        for i in range(0, len(video_ids_for_details), 50):\\r\\n            request = service.videos().list(\\r\\n                part=\'snippet,statistics\',\\r\\n                id=\',\'.join(video_ids_for_details[i:i+50]))\\r\\n            response = request.execute()\\r\\n\\r\\n            for video in response[\'items\']:\\r\\n                video_stats = dict(Title = video[\'snippet\'][\'title\'],\\r\\n                                   Video_id = video[\'id\'],\\r\\n                                   # Views = video[\'statistics\'][\'viewCount\'],\\r\\n                                   # Likes = video[\'statistics\'][\'likeCount\'],\\r\\n                                   # Comments = video[\'statistics\'][\'commentCount\'],\\r\\n                                   Published_date = video[\'snippet\'][\'publishedAt\'])\\r\\n                all_video_stats.append(video_stats)\\r\\n\\r\\n            return all_video_stats\\r\\n\\r\\n    csv_video_list = pd.DataFrame(get_video_details(service, video_ids_for_details))\\r\\n    csv_video_list.to_json(re.sub(\'_ids_\',\'_details_\', re.sub(\'.csv\', \'\', all_files_ids[i])) + \'.json\', orient=\'records\')\\r\\n\\r\\n\\r\\n\\r\\n# COMBINE YOUTUBE VIDEO DETAILS INTO A SINGLE JSON FILE\\r\\n\\r\\nall_files_details = glob.glob(\\"video_details_*.json\\")\\r\\n\\r\\ndef merge_JsonFiles(filename):\\r\\n    result = list()\\r\\n    for f1 in filename:\\r\\n        with open(f1, \'r\') as infile:\\r\\n            result.extend(json.load(infile))\\r\\n\\r\\n    with open(\'compileddata.json\', \'w\') as output_file:\\r\\n        json.dump(result, output_file)\\r\\n\\r\\nmerge_JsonFiles(all_files_details)\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* YouTube video **[\\"Python Project to Scrape YouTube using YouTube Data API\\" | Analyze and Visualize YouTube data by Thoufiq Mohammed](https://www.youtube.com/watch?v=SwSbnmqk3zY)**\\r\\n\\r\\n* YouTube video **[\\"How to split a list into evenly sized chunks in Python | Python Tutorial\\" by Jie Jenn](https://www.youtube.com/watch?v=SuEk_TBkReQ)**\\r\\n\\r\\n* YouTube video **[\\"How to Read Multiple CSV Files in Python | For-Loop + 2 More\\" by Business Science](https://www.youtube.com/watch?v=TN_Cvyq_rxE)**\\r\\n\\r\\n* Soft Hints blog post **[How to Merge Multiple JSON Files Into Pandas DataFrame blog post by John D K](https://softhints.com/merge-multiple-json-files-pandas-dataframe)**\\r\\n\\r\\n* Stack Overflow Question **[KeyError: \'commentCount\' using Youtube API in Python](https://stackoverflow.com/questions/70103870/keyerror-commentcount-using-youtube-api-in-python)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-09-19.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1661522400,"title":"Creating a decorated scatterplot visual using Deneb and Power BI\\r","name":"creating-a-decorated-scatterplot-visual-using-deneb-and-power-bi","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Deneb\\", \\"Vega-Lite\\"]\\r","date":"27 August 2022\\r","content":"This is my second attempt with Deneb, and this time I\'ve designed a more advanced and fancier zoomable scatterplot. The centre of the axis represents Earth, and the data points around it represent satellites, whereby their distance from the centre reflects their average orbital distance from Earth, and their circumferential position relative to the centre reflects the year they were launched.\\r\\n\\r\\n\\r\\nThe final Power BI report *\\"Satellite launch overview\\"* is available here:\\r\\n* **[https://community.powerbi.com/t5/Data-Stories-Gallery/Satellite-launch-overview/m-p/2730077](https://community.powerbi.com/t5/Data-Stories-Gallery/Satellite-launch-overview/m-p/2730077)**\\r\\n\\r\\n\\r\\n![My Power BI visualisation](/src/assets/portfolio/img-2022-08-satellite-launch-overview.gif)\\r\\n\\r\\n### Requirements\\r\\n\\r\\nDeneb is a highly flexible custom visual developed by **[Daniel Marsh-Patrick](https://twitter.com/the_d_mp)** that can be used to create unique visualisations for Power BI reports with JSON-based syntaxes; Vega or Vega-lite.\\r\\n\\r\\nDeneb can be downloaded from the Microsoft App Store:\\r\\n\\r\\n* **[https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview](https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview)**\\r\\n\\r\\nThe official website for Deneb:\\r\\n\\r\\n* **[https://deneb-viz.github.io](https://deneb-viz.github.io)**\\r\\n\\r\\nTwo satellite datasets were merged together for my report, but this custom visual design only uses the one from the Union of Concerned Scientists:\\r\\n\\r\\n* **[https://www.ucsusa.org/resources/satellite-database](https://www.ucsusa.org/resources/satellite-database)**\\r\\n\\r\\nFor more information on my dataset merge using Power Query, see my Github:\\r\\n\\r\\n* **[https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Satellite%20launch%20overview](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Satellite%20launch%20overview)**\\r\\n\\r\\n\\r\\n### Inspiration\\r\\n\\r\\nThe main inspirations for this custom visual are these Tableau Public community gallery visualisations:\\r\\n\\r\\n* [Yuli Wang\'s :](https://twitter.com/Yuli_Wg) **[50 years of Chinese Aerospace](https://public.tableau.com/app/profile/yuri.wg/viz/50_15655374759590/1)**\\r\\n\\r\\n![Tableau satellite report by Yuli Wang](/src/assets/blog/2022-08-27--01.png)\\r\\n\\r\\n* [Wendy Shijia\'s :](https://twitter.com/ShijiaWendy) **[50 Years of China\'s Space Journey](https://public.tableau.com/app/profile/wendy.shijia/viz/50YearsofChinasSpaceJourney/50yrsChinasSpaceJourney)**\\r\\n\\r\\n![Tableau satellite report by Wendy Shijia](/src/assets/blog/2022-08-27--01a.png)\\r\\n\\r\\n* [Jean-Paul Frenett\'s :](https://public.tableau.com/app/profile/jean.paul.frenett) **[Satellites of Earth](https://public.tableau.com/app/profile/jean.paul.frenett/viz/SatellitesofEarth/SatellitesinOrbit)**\\r\\n\\r\\n![Tableau satellite report by Jean-Paul Frenett](/src/assets/blog/2022-08-27--02.png)\\r\\n\\r\\n* [Lubos Pribula\'s :](https://twitter.com/LubosPribula) **[Traffic Overhead](https://public.tableau.com/app/profile/lubospribula/viz/TrafficOverhead/TrafficOverhead)**\\r\\n\\r\\n![Tableau satellite report by Lubos Pribula](/src/assets/blog/2022-08-27--03.png)\\r\\n\\r\\n\\r\\n## BUILDING THE SATELLITE CUSTOM VISUAL USING DENEB\\r\\n\\r\\n\\r\\n### Step 1: Set up the data and custom columns needed to plot each satellite \\r\\n\\r\\nFollow the Power Query code from my Github repository (mentioned in the Requirements above) to import the data into Power BI.\\r\\nThe end result should be a single dimension table.\\r\\n\\r\\nFrom Report view, add the following custom columns to that dimension table using DAX:\\r\\n\\r\\n**Cos**\\r\\n\\r\\n```\\r\\nCos = \\r\\nVAR EarliestLaunch = CALCULATE(MIN(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))\\r\\nVAR LatestLaunch = CALCULATE(MAX(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))\\r\\nVAR Angle = IF(ISBLANK([Orbit class]) = FALSE, \\r\\n               (1.5 * PI() *\\r\\n                (INT(Satellites[Launch date] - EarliestLaunch)) \\r\\n                 /\\r\\n                (INT(LatestLaunch - EarliestLaunch))),\\r\\n               BLANK()\\r\\n            )\\r\\nVAR OrbitRadius = \\r\\n    SWITCH([Orbit class],\\r\\n           \\"Low Earth Orbit\\", Satellites[Distance (km)],\\r\\n           \\"Medium Earth Orbit\\", Satellites[Distance (km)],\\r\\n           \\"Geostationary Transfer Orbit\\", Satellites[Distance (km)],\\r\\n           \\"Geosynchronous Equatorial Orbit\\", Satellites[Distance (km)],\\r\\n           BLANK()\\r\\n    )\\r\\nRETURN IF(ISBLANK(Satellites[Orbit class]) = FALSE, (COS(Angle) * (OrbitRadius)))\\r\\n```\\r\\n\\r\\n**Sin**\\r\\n\\r\\n```\\r\\nSin = \\r\\nVAR EarliestLaunch = CALCULATE(MIN(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))\\r\\nVAR LatestLaunch = CALCULATE(MAX(Satellites[Launch date]), ALLEXCEPT(Satellites,Satellites[Record type]))\\r\\nVAR Angle = IF(ISBLANK([Orbit class]) = FALSE, \\r\\n               (1.5 * PI() *\\r\\n                (INT(Satellites[Launch date] - EarliestLaunch)) \\r\\n                 /\\r\\n                (INT(LatestLaunch - EarliestLaunch))),\\r\\n               BLANK()\\r\\n            )\\r\\nVAR OrbitRadius = \\r\\n    SWITCH([Orbit class],\\r\\n           \\"Low Earth Orbit\\", Satellites[Distance (km)],\\r\\n           \\"Medium Earth Orbit\\", Satellites[Distance (km)],\\r\\n           \\"Geostationary Transfer Orbit\\", Satellites[Distance (km)],\\r\\n           \\"Geosynchronous Equatorial Orbit\\", Satellites[Distance (km)],\\r\\n           BLANK()\\r\\n    )\\r\\nRETURN IF(ISBLANK(Satellites[Orbit class]) = FALSE, (SIN(Angle) * (OrbitRadius)))\\r\\n```\\r\\n\\r\\nThe idea behind using Sin and Cos for the calculations to map the satellites as a scatterplot is based on Yuli Wang\'s Tableau Public report. That report additionally (and very cleverly) removes the scaled distance of outlier satellites with average distances tremendously greater than the others, and in doing so is able to fit all the satellites onscreen in a neat and ordered way.\\r\\n\\r\\nHowever, the approach we will take is to deliberately show that scaled distance, even if the outliers are not immediately seen. As at the time of writing, Tableau is unable to zoom freely to resize what is seen onscreen, whereas Power BI can via Deneb and Vega-Lite, and in a way enhances the user\'s experience to be able to see and interact with that scale.\\r\\n\\r\\nAs a next step, import Deneb into your report, adding an instance of it to the page, and resize it to the full screen. Add the fields from the dimension table to the deneb visual as per screenshot below.\\r\\n\\r\\n![Power BI: Adding dimension fields to the Deneb custom visual](/src/assets/blog/2022-08-27--04.png)\\r\\n\\r\\n\\r\\n### Step 2: Create your planet Earth image base64 code\\r\\n\\r\\nNext find a .png image of Earth that will be used as the centre axis i.e. the origin (0,0).\\r\\n\\r\\nIn my case, I used this Earth image by PIRO4D from pixabay.com \\r\\n\\r\\n* **[https://pixabay.com/photos/earth-globe-sea-trenches-2314687](https://pixabay.com/photos/earth-globe-sea-trenches-2314687)**\\r\\n\\r\\n![Earth globe sea trenches](/src/assets/blog/2022-08-27--05.png)\\r\\n\\r\\nIf the image you want to use doesn\'t have a transparent background, you can use an online tool such as **[https://onlinepngtools.com/crop-png](https://onlinepngtools.com/crop-png)** to trim out that background.\\r\\n\\r\\n![Trim out background part of the image](/src/assets/blog/2022-08-27--06.png)\\r\\n\\r\\nNote that the larger the image, the more code it will generate when converted to base64, which in turn impacts the performance of the Deneb code for editing and rendering. You can use an online tool such as **[https://onlinepngtools.com/resize-png](https://onlinepngtools.com/resize-png)** to resize it, in my case to 50 x 50 pixels.\\r\\n\\r\\n![Resize the image](/src/assets/blog/2022-08-27--07.png)\\r\\n\\r\\nThen lastly, use an online tool such as [https://www.browserling.com/tools/image-to-base64](https://www.browserling.com/tools/image-to-base64) to convert the trimmed .png image to base64 code.\\r\\n\\r\\n![Generate base64 code for the image](/src/assets/blog/2022-08-27--08.png)\\r\\n\\r\\nCopy out the base64 code and save it e.g. to a .txt file, as we will use it a little later.\\r\\n\\r\\nIn my case, you can download the base64 code I used from my Github repository:\\r\\n\\r\\n* **[https://raw.githubusercontent.com/makuharistudio/data-visualisation-datasets/main/Satellite%20launch%20overview/images/base64code%20for%20earth-50x50.txt](https://raw.githubusercontent.com/makuharistudio/data-visualisation-datasets/main/Satellite%20launch%20overview/images/base64code%20for%20earth-50x50.txt)**\\r\\n\\r\\n\\r\\n### Step 3: Set a dark background for the entire report canvas\\r\\n\\r\\nYou can either set a solid black or other dark coloured background.\\r\\n\\r\\nIn my case, I used this galaxy wallpaper image by Adrien Olichon from pexels.com\\r\\n\\r\\n* **[https://www.pexels.com/photo/galaxy-wallpaper-2538107](https://www.pexels.com/photo/galaxy-wallpaper-2538107)**\\r\\n\\r\\n![Galaxy wallpaper](/src/assets/blog/2022-08-27--09.png)\\r\\n\\r\\n![Power BI add background image](/src/assets/blog/2022-08-27--10.png)\\r\\n\\r\\nThe colour palette we will use for the actual custom visual is lighter to contrast with the dark background.\\r\\n\\r\\n\\r\\n### Step 4: Begin setting up the core Vega-lite code for the Deneb visual\\r\\n\\r\\nThere will be multiple layers of Vega-lite code placed on top of each other to create this visual.\\r\\n\\r\\nBegin by clearing out the defaulted code, and replace it with the following core code:\\r\\n\\r\\n```\\r\\n{ \\"background\\": \\"null\\",\\r\\n  \\"view\\": {\\"fill\\": \\"#0B0D14\\", \\r\\n           \\"fillOpacity\\": 0 },\\r\\n  \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n  \\"layer\\": [\\r\\n  ],\\r\\n  \\"config\\": {\\r\\n    \\"legend\\": {\\"title\\": \\"null\\",\\r\\n               \\"titleColor\\": \\"#ffffff\\",\\r\\n               \\"labelColor\\": \\"#ffffff\\",\\r\\n               \\"labelFontSize\\": 10,\\r\\n               \\"labelFont\\": \\"Consolas\\",\\r\\n               \\"orient\\": \\"top-left\\",\\r\\n               \\"labelLimit\\": 260  }\\r\\n  }\\r\\n}\\r\\n```\\r\\n\\r\\n![Deneb: Adding the core code structure](/src/assets/blog/2022-08-27--11.png)\\r\\n\\r\\nOur next steps will be to fill in the **\\"layer\\": [ ]** array with multiple layers to complete the visual.\\r\\n\\r\\nSo the layer code structure will appear like this:\\r\\n\\r\\n```\\r\\n{ \\"background\\": \\"null\\",\\r\\n  \\"view\\": {\\"fill\\": \\"#0B0D14\\", \\r\\n           \\"fillOpacity\\": 0 },\\r\\n  \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n  \\"layer\\": [\\r\\n            { JSON code for layer 5 e.g. axis label to display year of satellite launch },\\r\\n            { JSON code for layer 9 e.g. axis label to display average orbital distance from Earth },\\r\\n            { JSON code for layer 2 e.g. x-axis line },\\r\\n            { JSON code for layer 1 e.g. Earth image },\\r\\n            { JSON code for layer 4 e.g. scatterplot data points for the satellites },\\r\\n  ],\\r\\n  \\"config\\": {\\r\\n    \\"legend\\": {\\"title\\": \\"null\\",\\r\\n               \\"titleColor\\": \\"#ffffff\\",\\r\\n               \\"labelColor\\": \\"#ffffff\\",\\r\\n               \\"labelFontSize\\": 10,\\r\\n               \\"labelFont\\": \\"Consolas\\",\\r\\n               \\"orient\\": \\"top-left\\",\\r\\n               \\"labelLimit\\": 260  }\\r\\n  }\\r\\n}\\r\\n```\\r\\n\\r\\nThe logic behind how each layer is constructed is outlined below.\\r\\n\\r\\n\\r\\n### Step 5: Layer 1 - Adding planet Earth to the centre of the axis\\r\\n\\r\\nWe want to place the image in the centre of the axis i.e. at the origin, coordinates (0,0).\\r\\n\\r\\nWhilst building this visual, I\'ve tried providing the raw value of 0, but this does not appear to work, presumably because it does not reference an actual data record.\\r\\n\\r\\nThe workaround I came up with was to perform a generalised aggregate calculation across all records, in this case, the maximum value of the Sin field, and create a separate calculation to multiply that aggregate with zero, to get the zero-value needed for axis mapping.\\r\\n\\r\\n```\\r\\n{ \\"transform\\": [\\r\\n      { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n      { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"origin zero\\" } ],\\r\\n```               \\r\\n\\r\\nThen we encode the data point\'s x and y axis to the calculation\'s zero value.\\r\\n\\r\\n```\\r\\n\\"encoding\\": { \\"x\\": { \\"aggregate\\": \\"median\\",\\r\\n                     \\"field\\": \\"origin zero\\",\\r\\n                     \\"type\\": \\"quantitative\\"},\\r\\n              \\"y\\": { \\"aggregate\\": \\"median\\",\\r\\n                     \\"field\\": \\"origin zero\\",\\r\\n                     \\"type\\": \\"quantitative\\"},\\r\\n```\\r\\n\\r\\nLastly, we embed the Earth image\'s base64 code.\\r\\n\\r\\n\\r\\n**Layer code to add to visual:**\\r\\n\\r\\n```\\r\\n{ \\"transform\\": [\\r\\n       { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n       { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"origin zero\\" } ],\\r\\n  \\"mark\\": {\\"type\\": \\"image\\",\\r\\n           \\"width\\": 75,\\r\\n           \\"height\\": 75},\\r\\n  \\"encoding\\": { \\"x\\": { \\"aggregate\\": \\"median\\",\\r\\n                       \\"field\\": \\"origin zero\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                \\"y\\": { \\"aggregate\\": \\"median\\",\\r\\n                       \\"field\\": \\"origin zero\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                \\"url\\": { \\"datum\\": \\"data:image/png;base64, << replace this message with your base64 code >>\\",\\r\\n                         \\"type\\":  \\"nominal\\"}\\r\\n              }\\r\\n}\\r\\n```\\r\\n\\r\\n**Note:** Because the base64 code is long, I\'ve excluded it from the code above, but you would just copy-and-paste it in place of the << >> message, as per screenshot below\\r\\n\\r\\n![Deneb: Adding the Earth layer code](/src/assets/blog/2022-08-27--12.png)\\r\\n\\r\\n\\r\\n### Step 6: Layers 2 & 3 - Adding the lines for the x and y axis\\r\\n\\r\\nFollowing the same multiply by zero calculation logic of the previous layer, we can create \\"rule\\"-type marks to draw out the lines for the x and y axis.\\r\\n\\r\\n**Layer code to add to visual:**\\r\\n\\r\\nAdd this code above the Earth layer, so that the lines are hidden behind the Earth image as they pass through it.\\r\\n\\r\\nThe further down you place an element within the **\\"layer\\": [ ]** array, the more it is \\"on top\\" of other layers.\\r\\n\\r\\n```\\r\\n{ \\"transform\\": [\\r\\n      { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n      { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"x-axis zero for vertical rule\\" } ],\\r\\n  \\"mark\\": {\\"type\\": \\"rule\\",\\r\\n           \\"strokeDash\\": [1, 10],\\r\\n           \\"strokeDashOffset\\": 50000},\\r\\n  \\"encoding\\": { \\"x\\": { \\"field\\": \\"x-axis zero for vertical rule\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                       \\"color\\": {\\"value\\": \\"#9DA4AC\\"},\\r\\n                       \\"size\\": {\\"value\\": 1} }\\r\\n  },\\r\\n{ \\"transform\\": [\\r\\n      { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n      { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"y-axis zero for horizontal rule\\" } ],\\r\\n  \\"mark\\": {\\"type\\": \\"rule\\",\\r\\n           \\"strokeDash\\": [1, 10],\\r\\n           \\"strokeDashOffset\\": 50000},\\r\\n  \\"encoding\\": { \\"y\\": { \\"field\\": \\"y-axis zero for horizontal rule\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                       \\"color\\": {\\"value\\": \\"#9DA4AC\\"},\\r\\n                       \\"size\\": {\\"value\\": 1} }\\r\\n},\\r\\n```\\r\\n\\r\\n![Deneb: Adding the x axis and y axis layer codes](/src/assets/blog/2022-08-27--13.png)\\r\\n\\r\\n\\r\\n### Step 7: Layer 4 - Adding scatterplot data points for the satellite data\\r\\n\\r\\nThis is the most important layer of the visual, as it enables zoom in and out with the user\'s mouse scroll wheel, and is based on an official Vega-Lite example called the *Scatterplot Pan & Zoom*.\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/selection_translate_scatterplot_drag.html](https://vega.github.io/vega-lite/examples/selection_translate_scatterplot_drag.html)**\\r\\n\\r\\nThe concept is to bind the scales as a parameter, and use the axis\' **\\"scale\\": {\\"domain\\"}** attribute to define a default zoom setting, which the user can get back to after scrolling, by double-clicking the visual.\\r\\n\\r\\nThe x-axis and y-axis are mapped to the satellite\'s **Sin** and **Cos** values respectively\\r\\n\\r\\n```\\r\\n{ \\"params\\": [{ \\"name\\": \\"grid\\",\\r\\n               \\"select\\": \\"interval\\",\\r\\n               \\"bind\\": \\"scales\\"},\\r\\n             { \\"name\\": \\"legend\\",\\r\\n               \\"select\\": {\\"type\\": \\"point\\", \\"fields\\": [\\"Orbit class\\"]},\\r\\n               \\"bind\\": \\"legend\\"} ],\\r\\n  \\"mark\\": { \\"type\\": \\"point\\", \\r\\n            \\"shape\\": \\"circle\\",\\r\\n            \\"tooltip\\": true,\\r\\n            \\"filled\\": true,\\r\\n            \\"fillOpacity\\": 0.75},\\r\\n  \\"encoding\\": { \\"x\\": {\\"field\\": \\"Sin\\", \\r\\n                      \\"type\\": \\"quantitative\\",\\r\\n                      \\"title\\": false, \\r\\n                      \\"axis\\": {\\"disable\\": true,\\r\\n                               \\"grid\\": false,\\r\\n                               \\"labels\\": false},\\r\\n                               \\"scale\\": {\\"domain\\": [-70400,70050]}},\\r\\n                \\"y\\": {\\"field\\": \\"Cos\\", \\r\\n                      \\"type\\": \\"quantitative\\",\\r\\n                      \\"title\\": false, \\r\\n                      \\"axis\\": {\\"disable\\": true,\\r\\n                               \\"grid\\": false,\\r\\n                               \\"labels\\": false},\\r\\n                               \\"scale\\": {\\"domain\\": [-69540,60370]}},\\r\\n```\\r\\n\\r\\nIn this case, we\'ve additionally defined a legend bind as an extra **params** element so that selecting an orbit class in the legend highlights satellite data points for that class.\\r\\n\\r\\nBy default, Vega-Lite sorts a column\'s values alphabetically, but you can manually define the sort order, as well as the colour scheme.\\r\\n\\r\\n```\\r\\n\\"color\\": { \\"field\\": \\"Orbit class\\",\\r\\n           \\"type\\": \\"nominal\\",\\r\\n           \\"sort\\": [\\"Geostationary Transfer Orbit\\", \\"Geosynchronous Equatorial Orbit\\", \\"Medium Earth Orbit\\", \\"Low Earth Orbit\\"],\\r\\n           \\"scale\\": {\\"range\\": [\\"#C8F6FF\\", \\"#8DECFF\\", \\"#2DDBFF\\", \\"#11BBDE\\"]} },\\r\\n```\\r\\n\\r\\n\\r\\n**Layer code to add to visual:**\\r\\n\\r\\nAdd this code below the Earth layer, so it is the last element in the **\\"layer\\": [ ]** array. This allows users to easily hover over the data points and show tooltips without the interference of other layers.\\r\\n\\r\\n```\\r\\n{ \\"params\\": [{ \\"name\\": \\"grid\\",\\r\\n               \\"select\\": \\"interval\\",\\r\\n               \\"bind\\": \\"scales\\"},\\r\\n             { \\"name\\": \\"legend\\",\\r\\n               \\"select\\": {\\"type\\": \\"point\\", \\"fields\\": [\\"Orbit class\\"]},\\r\\n               \\"bind\\": \\"legend\\"} ],\\r\\n  \\"mark\\": { \\"type\\": \\"point\\", \\r\\n            \\"shape\\": \\"circle\\",\\r\\n            \\"tooltip\\": true,\\r\\n            \\"filled\\": true,\\r\\n            \\"fillOpacity\\": 0.75},\\r\\n  \\"encoding\\": { \\"x\\": {\\"field\\": \\"Sin\\", \\r\\n                      \\"type\\": \\"quantitative\\",\\r\\n                      \\"title\\": false, \\r\\n                      \\"axis\\": {\\"disable\\": true,\\r\\n                               \\"grid\\": false,\\r\\n                               \\"labels\\": false},\\r\\n                      \\"scale\\": {\\"domain\\": [-70400,70050]}},\\r\\n                \\"y\\": {\\"field\\": \\"Cos\\", \\r\\n                      \\"type\\": \\"quantitative\\",\\r\\n                      \\"title\\": false, \\r\\n                      \\"axis\\": {\\"disable\\": true,\\r\\n                               \\"grid\\": false,\\r\\n                               \\"labels\\": false},\\r\\n                               \\"scale\\": {\\"domain\\": [-69540,60370]}},\\r\\n                \\"size\\": {\\"value\\": 50},\\r\\n                \\"color\\": { \\"field\\": \\"Orbit class\\",\\r\\n                           \\"type\\":  \\"nominal\\",\\r\\n                           \\"sort\\": [ \\"Geostationary Transfer Orbit\\", \\"Geosynchronous Equatorial Orbit\\", \\"Medium Earth Orbit\\", \\"Low Earth Orbit\\"],\\r\\n                           \\"scale\\": {\\"range\\": [\\"#C8F6FF\\", \\"#8DECFF\\", \\"#2DDBFF\\", \\"#11BBDE\\" ]} },\\r\\n                \\"opacity\\": { \\"condition\\": {\\"param\\": \\"legend\\", \\"value\\": 1},\\r\\n                             \\"value\\": 0.025 },\\r\\n                \\"tooltip\\": [ {\\"field\\": \\"Satellite catalog number (NORAD)\\", \\"type\\": \\"nominal\\", \\"title\\": \\"NORAD\\"},\\r\\n                             {\\"field\\": \\"International designator (COSPAR)\\", \\"title\\": \\"COSPAR\\"},\\r\\n                             {\\"field\\": \\"Name\\", \\"title\\": \\"SATELLITE\\"},\\r\\n                             {\\"field\\": \\"Country\\", \\"title\\": \\"COUNTRY\\"},\\r\\n                             {\\"field\\": \\"Purpose\\", \\"title\\": \\"PURPOSE\\"},\\r\\n                             {\\"field\\": \\"Users\\", \\"title\\": \\"USERS\\"},\\r\\n                             {\\"field\\": \\"Launch date\\", \\"title\\": \\"LAUNCH DATE\\", \\"type\\": \\"temporal\\", \\"format\\": \\"%d-%m-%Y (DMY)\\"},\\r\\n                             {\\"field\\": \\"Status\\", \\"title\\": \\"STATUS\\"},\\r\\n                             {\\"field\\": \\"Orbit class\\", \\"title\\": \\"ORBIT CLASS\\"},\\r\\n                             {\\"field\\": \\"Distance (km)\\", \\"title\\": \\"AVERAGE DISTANCE (km)\\", \\"type\\": \\"nominal\\", \\"format\\": \\",.0f\\"},\\r\\n                             {\\"field\\": \\"Apogee (km)\\", \\"title\\": \\"APOGEE (km)\\", \\"type\\": \\"nominal\\", \\"format\\": \\",.0f\\"},\\r\\n                             {\\"field\\": \\"Perigee (km)\\", \\"title\\": \\"PERIGEE (km)\\", \\"type\\": \\"nominal\\", \\"format\\": \\",.0f\\"},\\r\\n                             {\\"field\\": \\"Launch site\\", \\"title\\": \\"LAUNCH SITE\\"},\\r\\n                             {\\"field\\": \\"Launch vehicle\\", \\"title\\": \\"LAUNCH VEHICLE\\"}] }\\r\\n}\\r\\n```\\r\\n\\r\\n![Deneb: Adding the scatterplot for satellite data points](/src/assets/blog/2022-08-27--14.png)\\r\\n\\r\\n\\r\\n### Step 8: Layers 5, 6, 7, and 8 - Adding year labels for the top, bottom, left, and right sides of the origin\\r\\n\\r\\nUnfortunately, I was unable to figure out how to programmatically determine the years that reflect each side of the x and y axis.\\r\\n\\r\\nFortunately, we have the satellite data points onscreen, so we can just hover over the satellites which sit on each of the 4 axis points, and manually hardcode the year values as labels.\\r\\n\\r\\nFor example, there is only one satellite sitting on the positive y-axis, and its tooltip shows that its launch year is 1974\\r\\n\\r\\n![Identify the year for positive y-axis](/src/assets/blog/2022-08-27--15.png)\\r\\n\\r\\nIn this code we again use the multiply by zero calculation to align the position of the label, and define the distance of the label from the centre by applying the absolute function and multiply it with a fixed value of 50% the distance of the highest Sin value.\\r\\n\\r\\n```\\r\\n{ \\"transform\\": [\\r\\n       { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n       { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n       { \\"calculate\\": \\"abs(datum.max_sin) * 0.5\\", \\"as\\": \\"y-axis top year\\" } ],\\r\\n  \\"mark\\": {\\"type\\": \\"text\\",\\r\\n           \\"style\\": \\"label\\",\\r\\n           \\"angle\\": 0,\\r\\n           \\"baseline\\": \\"top\\",\\r\\n           \\"align\\": \\"center\\",\\r\\n           \\"fontSize\\": 30 },\\r\\n  \\"encoding\\": { \\"x\\": { \\"field\\": \\"x-axis zero\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                \\"y\\": { \\"field\\": \\"y-axis top year\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                       \\"text\\": {\\"value\\": \\"1974\\"},\\r\\n                       \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n},\\r\\n```\\r\\n\\r\\nThen rinse-and-repeat for the 3 other points from the origin.\\r\\n\\r\\n**Layer code to add to visual:**\\r\\n\\r\\nAdd these 4 layers for each of the 4 year labels, as the first elements in the **\\"layer\\": [ ]** array.\\r\\n\\r\\n```\\r\\n{ \\"transform\\": [\\r\\n       { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n       { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n       { \\"calculate\\": \\"abs(datum.max_sin) * 0.5\\", \\"as\\": \\"y-axis top year\\" } ],\\r\\n  \\"mark\\": {\\"type\\": \\"text\\",\\r\\n           \\"style\\": \\"label\\",\\r\\n           \\"angle\\": 0,\\r\\n           \\"baseline\\": \\"top\\",\\r\\n           \\"align\\": \\"center\\",\\r\\n           \\"fontSize\\": 30 },\\r\\n  \\"encoding\\": { \\"x\\": { \\"field\\": \\"x-axis zero\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                \\"y\\": { \\"field\\": \\"y-axis top year\\",\\r\\n                       \\"type\\": \\"quantitative\\"},\\r\\n                       \\"text\\": {\\"value\\": \\"1974\\"},\\r\\n                       \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n},\\r\\n{ \\"transform\\": [\\r\\n    { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n                    { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n                    { \\"calculate\\": \\"abs(datum.max_sin) * -1 * 0.6\\", \\"as\\": \\"y-axis bottom year\\" } ],\\r\\n      \\"mark\\": {\\"type\\": \\"text\\",\\r\\n               \\"style\\": \\"label\\",\\r\\n               \\"angle\\": 0,\\r\\n               \\"baseline\\": \\"bottom\\",\\r\\n               \\"align\\": \\"center\\",\\r\\n               \\"fontSize\\": 30 },\\r\\n      \\"encoding\\": { \\"x\\": {\\"field\\": \\"x-axis zero\\",\\r\\n                          \\"type\\":  \\"quantitative\\"},\\r\\n                    \\"y\\": {\\"field\\": \\"y-axis bottom year\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                    \\"text\\": {\\"value\\": \\"2006\\"},\\r\\n                    \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n},\\r\\n{ \\"transform\\": [\\r\\n    { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n                    { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n                    { \\"calculate\\": \\"abs(datum.max_sin) * 0.5\\", \\"as\\": \\"x-axis right year\\" } ],\\r\\n      \\"mark\\": {\\"type\\": \\"text\\",\\r\\n               \\"style\\": \\"label\\",\\r\\n               \\"angle\\": 0,\\r\\n               \\"baseline\\": \\"middle\\",\\r\\n               \\"align\\": \\"center\\",\\r\\n               \\"fontSize\\": 30 },\\r\\n      \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\",\\r\\n                          \\"type\\":  \\"quantitative\\"},\\r\\n                    \\"x\\": {\\"field\\": \\"x-axis right year\\",\\r\\n                          \\"type\\":  \\"quantitative\\"},\\r\\n                    \\"text\\": {\\"value\\": \\"1990\\"},\\r\\n                    \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n},\\r\\n{ \\"transform\\": [\\r\\n    { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n                    { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n                    { \\"calculate\\": \\"abs(datum.max_sin) * -1 * 0.5\\", \\"as\\": \\"x-axis left year\\" } ],\\r\\n      \\"mark\\": {\\"type\\": \\"text\\",\\r\\n               \\"style\\": \\"label\\",\\r\\n               \\"angle\\": 0,\\r\\n               \\"baseline\\": \\"middle\\",\\r\\n               \\"align\\": \\"center\\",\\r\\n               \\"fontSize\\": 30 },\\r\\n      \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\",\\r\\n                          \\"type\\":  \\"quantitative\\"},\\r\\n                    \\"x\\": {\\"field\\": \\"x-axis left year\\",\\r\\n                          \\"type\\":  \\"quantitative\\"},\\r\\n                    \\"text\\": {\\"value\\": \\"2021\\"},\\r\\n                    \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n},\\r\\n```\\r\\n\\r\\n![Deneb: Adding year labels for each of the 4 points of the origin](/src/assets/blog/2022-08-27--16.png)\\r\\n\\r\\n\\r\\n### Step 9: Layers 9 and more\\r\\n\\r\\nThe last part is to add multiple layers for each label along the axis to mark various satellite distances from Earth.\\r\\n\\r\\nIt is arbitrary how many labels you would like to add, but one idea is to include the minimum and maximum values for each Orbit class along each of the four axis parts, so that when a user zooms in, they have an idea of how many satellites fall within that min-max range.\\r\\n\\r\\nBecause the distance label will be marked along the axis, we need to filter the data by the year that part of the axis represents.\\r\\nIn this case, we are filtering by 2021 because we are using the negative part of the x-axis.\\r\\n\\r\\n```\\r\\n{ \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n{ \\"filter\\": \\"year(datum.date) == 2021\\"},\\r\\n```\\r\\n\\r\\nTo suffix \\"km\\" to the distance value, simply concatenate it:\\r\\n\\r\\n```\\r\\n{ \\"calculate\\": \\"abs(round(datum.min_sin_GEO)) + \'km\'\\", \\"as\\": \\"display GEO max 2021 kms\\"},\\r\\n```\\r\\n\\r\\n**Layer code to add to visual:**\\r\\n\\r\\nAdd this code between the years layers and the axis layers within the **\\"layer\\": [ ]** array.\\r\\n\\r\\nThis is an example of a single label, for the satellite in Geosynchronous Equatorial Orbit with the lowest average distance from Earth and launched in 2021.\\r\\n\\r\\n```\\r\\n{ \\"transform\\": [\\r\\n          { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n          { \\"filter\\": \\"year(datum.date) == 2021\\"},\\r\\n          { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Geosynchronous Equatorial Orbit\\"}},\\r\\n          { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Sin\\", \\"as\\": \\"min_sin_GEO\\"}] },\\r\\n          { \\"calculate\\": \\"datum.min_sin_GEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n          { \\"calculate\\": \\"abs(round(datum.min_sin_GEO)) + \'km\'\\", \\"as\\": \\"display GEO max 2021 kms\\"},\\r\\n          { \\"calculate\\": \\"abs(datum.min_sin_GEO) * -1\\", \\"as\\": \\"x-axis GEO max 2021 distance\\" } ],\\r\\n  \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n  \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                \\"x\\": {\\"field\\": \\"x-axis GEO max 2021 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                \\"text\\": {\\"field\\": \\"display GEO max 2021 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n},\\r\\n```\\r\\n\\r\\n![Deneb: Adding distance label](/src/assets/blog/2022-08-27--17.png)\\r\\n\\r\\nYou can find more distance label layers in the completed code below.\\r\\n\\r\\nAn important note is to filter your data by Record type: \\"UCSUSA active observation\\", as the n2yo.com data does not have the average distance data, because most of those records are for decayed or unknown status satellites.\\r\\n\\r\\n![Power BI: Apply filter to the Deneb visual](/src/assets/blog/2022-08-27--18.png)\\r\\n\\r\\n\\r\\n## FINAL DENEB CODE\\r\\n\\r\\nThis is the final Deneb code for the custom code:\\r\\n\\r\\n```\\r\\n{\\"background\\": \\"null\\",\\r\\n \\"view\\": {\\"fill\\": \\"#0B0D14\\", \\r\\n          \\"fillOpacity\\": 0 },\\r\\n \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n \\"layer\\": [\\r\\n     { \\"transform\\": [\\r\\n            { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n            { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n            { \\"calculate\\": \\"abs(datum.max_sin) * 0.5\\", \\"as\\": \\"y-axis top year\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\",\\r\\n                \\"style\\": \\"label\\",\\r\\n                \\"angle\\": 0,\\r\\n                \\"baseline\\": \\"top\\",\\r\\n                \\"align\\": \\"center\\",\\r\\n                \\"fontSize\\": 30 },\\r\\n       \\"encoding\\": { \\"x\\": {\\"field\\": \\"x-axis zero\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"y\\": {\\"field\\": \\"y-axis top year\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"value\\": \\"1974\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n            { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n            { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n            { \\"calculate\\": \\"abs(datum.max_sin) * -1 * 0.6\\", \\"as\\": \\"y-axis bottom year\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\",\\r\\n                \\"style\\": \\"label\\",\\r\\n                \\"angle\\": 0,\\r\\n                \\"baseline\\": \\"bottom\\",\\r\\n                \\"align\\": \\"center\\",\\r\\n                \\"fontSize\\": 30 },\\r\\n       \\"encoding\\": { \\"x\\": {\\"field\\": \\"x-axis zero\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"y\\": {\\"field\\": \\"y-axis bottom year\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"value\\": \\"2006\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n            { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n            { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n            { \\"calculate\\": \\"abs(datum.max_sin) * 0.5\\", \\"as\\": \\"x-axis right year\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\",\\r\\n                \\"style\\": \\"label\\",\\r\\n                \\"angle\\": 0,\\r\\n                \\"baseline\\": \\"middle\\",\\r\\n                \\"align\\": \\"center\\",\\r\\n                \\"fontSize\\": 30 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis right year\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"value\\": \\"1990\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n            { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n            { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n            { \\"calculate\\": \\"abs(datum.max_sin) * -1 * 0.5\\", \\"as\\": \\"x-axis left year\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\",\\r\\n                \\"style\\": \\"label\\",\\r\\n                \\"angle\\": 0,\\r\\n                \\"baseline\\": \\"middle\\",\\r\\n                \\"align\\": \\"center\\",\\r\\n                \\"fontSize\\": 30 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis left year\\",\\r\\n                           \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"value\\": \\"2021\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#9DA4AC\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 1974\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Cos\\", \\"as\\": \\"min_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_LEO * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO max 1974 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_LEO)\\", \\"as\\": \\"y-axis LEO max 1974 distance\\" } ],\\r\\n       \\"mark\\": { \\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"left\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis LEO max 1974 distance\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO max 1974 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 1990\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Sin\\", \\"as\\": \\"min_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_LEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO max 1990 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_LEO)\\", \\"as\\": \\"x-axis LEO max 1990 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis LEO max 1990 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO max 1990 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 1990\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Geosynchronous Equatorial Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Sin\\", \\"as\\": \\"min_sin_GEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_GEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_GEO)) + \'km\'\\", \\"as\\": \\"display GEO max 1990 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_GEO)\\", \\"as\\": \\"x-axis GEO max 1990 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis GEO max 1990 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display GEO max 1990 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2006\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Cos\\", \\"as\\": \\"max_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.max_sin_LEO * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.max_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO min 2006 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.max_sin_LEO) * -1\\", \\"as\\": \\"y-axis LEO min 2006 distance\\" } ],\\r\\n       \\"mark\\": { \\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"left\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis LEO min 2006 distance\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO min 2006 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2006\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"median\\", \\"field\\": \\"Cos\\", \\"as\\": \\"med_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.med_sin_LEO * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.med_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO med 2006 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.med_sin_LEO) * -1\\", \\"as\\": \\"y-axis LEO med 2006 distance\\" } ],\\r\\n       \\"mark\\": { \\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"left\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis LEO med 2006 distance\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO med 2006 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2006\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Cos\\", \\"as\\": \\"min_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_LEO * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO max 2006 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_LEO) * -1\\", \\"as\\": \\"y-axis LEO max 2006 distance\\" } ],\\r\\n       \\"mark\\": { \\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"left\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis LEO max 2006 distance\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO max 2006 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2006\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Medium Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Cos\\", \\"as\\": \\"min_sin_MEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_MEO * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_MEO)) + \'km\'\\", \\"as\\": \\"display MEO max 2006 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_MEO) * -1\\", \\"as\\": \\"y-axis MEO max 2006 distance\\" } ],\\r\\n       \\"mark\\": { \\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"left\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis MEO max 2006 distance\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display MEO max 2006 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2006\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Geosynchronous Equatorial Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Cos\\", \\"as\\": \\"min_sin_GEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_GEO * 0\\", \\"as\\": \\"x-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_GEO)) + \'km\'\\", \\"as\\": \\"display GEO max 2006 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_GEO) * -1\\", \\"as\\": \\"y-axis GEO max 2006 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"left\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis GEO max 2006 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display GEO max 2006 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2021\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.max_sin_LEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.max_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO min 2021 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.max_sin_LEO) * -1\\", \\"as\\": \\"x-axis LEO min 2021 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis LEO min 2021 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO min 2021 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2021\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"median\\", \\"field\\": \\"Sin\\", \\"as\\": \\"med_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.med_sin_LEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.med_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO med 2021 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.med_sin_LEO) * -1\\", \\"as\\": \\"x-axis LEO med 2021 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis LEO med 2021 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO med 2021 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2021\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Low Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Sin\\", \\"as\\": \\"min_sin_LEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_LEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_LEO)) + \'km\'\\", \\"as\\": \\"display LEO max 2021 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_LEO) * -1\\", \\"as\\": \\"x-axis LEO max 2021 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis LEO max 2021 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display LEO max 2021 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2021\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Medium Earth Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Sin\\", \\"as\\": \\"min_sin_MEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_MEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_MEO)) + \'km\'\\", \\"as\\": \\"display MEO max 2021 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_MEO) * -1\\", \\"as\\": \\"x-axis MEO max 2021 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis MEO max 2021 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display MEO max 2021 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n         { \\"timeUnit\\": \\"year\\", \\"field\\": \\"Launch date\\", \\"as\\": \\"date\\"},\\r\\n         { \\"filter\\": \\"year(datum.date) == 2021\\"},\\r\\n         { \\"filter\\": {\\"field\\": \\"Orbit class\\", \\"equal\\": \\"Geosynchronous Equatorial Orbit\\"}},\\r\\n         { \\"aggregate\\": [{\\"op\\": \\"min\\", \\"field\\": \\"Sin\\", \\"as\\": \\"min_sin_GEO\\"}] },\\r\\n         { \\"calculate\\": \\"datum.min_sin_GEO * 0\\", \\"as\\": \\"y-axis zero\\" },\\r\\n         { \\"calculate\\": \\"abs(round(datum.min_sin_GEO)) + \'km\'\\", \\"as\\": \\"display GEO max 2021 kms\\"}, \\r\\n         { \\"calculate\\": \\"abs(datum.min_sin_GEO) * -1\\", \\"as\\": \\"x-axis GEO max 2021 distance\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"text\\", \\"style\\": \\"label\\", \\"angle\\": 0, \\"baseline\\": \\"bottom\\", \\"align\\": \\"center\\", \\"fontSize\\": 16 },\\r\\n       \\"encoding\\": { \\"y\\": {\\"field\\": \\"y-axis zero\\", \\"type\\":  \\"quantitative\\"},\\r\\n                     \\"x\\": {\\"field\\": \\"x-axis GEO max 2021 distance\\", \\"type\\": \\"quantitative\\"},\\r\\n                     \\"text\\": {\\"field\\": \\"display GEO max 2021 kms\\", \\"type\\": \\"nominal\\"},\\r\\n                     \\"color\\": {\\"value\\": \\"#AAB6C4\\"} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n            { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n            { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"x-axis zero for vertical rule\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"rule\\",\\r\\n                \\"strokeDash\\": [1, 10],\\r\\n                \\"strokeDashOffset\\": 50000},\\r\\n       \\"encoding\\": { \\"x\\": { \\"field\\": \\"x-axis zero for vertical rule\\",\\r\\n                            \\"type\\": \\"quantitative\\"},\\r\\n                            \\"color\\": {\\"value\\": \\"#9DA4AC\\"},\\r\\n                            \\"size\\": {\\"value\\": 1} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n            { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n            { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"y-axis zero for horizontal rule\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"rule\\",\\r\\n                \\"strokeDash\\": [1, 10],\\r\\n                \\"strokeDashOffset\\": 50000},\\r\\n       \\"encoding\\": { \\"y\\": { \\"field\\": \\"y-axis zero for horizontal rule\\",\\r\\n                            \\"type\\": \\"quantitative\\"},\\r\\n                            \\"color\\": {\\"value\\": \\"#9DA4AC\\"},\\r\\n                            \\"size\\": {\\"value\\": 1} }\\r\\n     },\\r\\n     { \\"transform\\": [\\r\\n            { \\"aggregate\\": [{\\"op\\": \\"max\\", \\"field\\": \\"Sin\\", \\"as\\": \\"max_sin\\"}] },\\r\\n            { \\"calculate\\": \\"datum.max_sin * 0\\", \\"as\\": \\"origin zero\\" } ],\\r\\n       \\"mark\\": {\\"type\\": \\"image\\",\\r\\n                \\"width\\": 75,\\r\\n                \\"height\\": 75},\\r\\n       \\"encoding\\": { \\"x\\": { \\"aggregate\\": \\"median\\",\\r\\n                            \\"field\\": \\"origin zero\\",\\r\\n                            \\"type\\": \\"quantitative\\"},\\r\\n                     \\"y\\": { \\"aggregate\\": \\"median\\",\\r\\n                            \\"field\\": \\"origin zero\\",\\r\\n                            \\"type\\": \\"quantitative\\"},\\r\\n                     \\"url\\": { \\"datum\\": \\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAXYElEQVRoQ71aeYxdd3X+7n7v29+bfeyxZ7edGCfOQlZISFEr2oLYpCZQ1EJSCSFo6Z/8Q4Gqoi2oQRQVqBLRNpAQAWkkICUkyDGNKThxHGInJN5mMvaMZ94sb+btd+93fs+hpEkgQNqxrseeefPu75zzfd/5zrmj4TX6uPymj0xpJm6wLHO/bRl7291g/MzS2s4U0MZHB9D2O+lz8/PPQ9fmNU0/rtnW0djzDuLIvadfiyNov82b7HvjbRNRnP6p7di36Fo6wwBg8QrCGEdPLCHrmmh1fEA3oPFOadRC2N0ATJOXC1gONDtzUjfteyLH/hccvmvuNz3PbxTI7uv/5HIk+Jiha++SG+t8F4cBuJ6DLK9mfR2GkcIxY5xZ7qAZethYmodXKKNx/hhgWCoIWC40J8Mrqy7dzd6X2plPh4e+/PivG9CvFcjUte8btKF9jrm9RWeWw6DL5Boo5HOweHA9aqKvbwAGEz737GOY2fU6HDp8BOvRKPZdPI6VxUXM/fQHBJvO6KUqDg+fR+rmoFt8Zy8PRgvYmXscw/lo80dfqr7agF51IFNX/NHNSOMvappWQpogjnyYho5KpR+mFjL7CXK5LDIuIRN18fyzTyDHCjx7tobz6wGyfSOYmRzBU0ceQ1g/x/NphJuGlMQysgOsDgOzLOgZBpMpS0CbcN0PBQe/fM+rCeZVBHKjObGv/MUo9m+LkxBp2EWS+DC0FJ7nwdISjE/OYnJmN4w0xM8Of5cBFLFRXUfTj3FsyYDhlaEZNi7ZVcHC/DzOn3qKZ0sZiN4LJmVQBnnEquisiJYtqSvNlpG4+TtDfeiDeOQT0S8L6JcGUp68vOi5/d/RNf36OOywIAFsx4LnZuDws2vriP0W9u67glXpImxvYmnuKUQ82PomqWDbON+w0TIGkMvocKJNrNeZDN1Bd+lJ9X4adFZFeEa4SXCEm5ktIPVyQK4CrTDEYAqP+qb3h3j477ZeKZhXDqR8ebGUtx+xLetS27ZgktGGnrLaFhHgEB6L2D4xCyttgDrFgBrodkNsNlpYCsrM7Ag6aRbD5jlsaFNwoypWV7fg15Z40D4GYwPBFuJOjQExuCRmVSxoacwMMBgGomXJnxzfqziCyMs86Wveja8UzCsEcqOZG6wdyBaK12cyOVbBQRK2Ucw5Csqul0Fn6zw8O4Zt8DJ11Lca8KOExM8I/HGiPYRmOsDDUY3IAy0NsDX/JGJWLQmafI0BZ2AWWhKgs/KsCkSnSmgUEZ1wM0SvCTXkCbF8H1AYRJItHfKj8o0vB7OXDSQ7cPEdmWz+1kKxTwXhqSqYPDRJLlkk0bW4Bc+KUCrkEPkd1OtttIMElb48Eh5CZwVDHuy51sWItCIT0UV38Rj8zWXwPwymo2TYLo1RwCjF1PO4tcb3avE+hCwFQ0sJNcJYLw5IEEgKA4izxTvD799+2/+G2EsCKYzuv9nSjXtyxQoDcElohz2Bicl6iJjJoLXKhAeEWoyMRdyzJbRaXbS7ERthgvIgA0l1RLFcBjbtMdT1KfitTXTmfoQgiJB2t/gePT4kSQLDLcAi3HQKQnvlBKskss43VsqWwioMkytlhJkColyRcp2/JfjeZ7/+i8G8KJDc0L5B2zKf87xcSeDjsjPbpgabB24RSvkMsUso5VgpLW6jWVtBt0OSx5pSKMu00TeU4eF0kt9ArW2gXbwEQeygvrqI5pkfkw8UH8m0qJX0Ev5bKqJ7FdgCn9YKwkZVQUt6lSZwcwgvLYJeGUFIzsS5yqZt2Lua3//sz/vMiwIpDO7+quN4700poykhJPJaKBFePLxjhygU+nlYHoK4Ji3Qrm+h3myjxUASfj3xNQbvICPVk4pQBhqV65EuH8X8M8+oIHpyy/eQmggfSGzFDwpIZnAXxeAsJZ4cogCYTExKNbMdT8E58egAKtsRM5GhV7g7fPAf3vtCVX4eiJUZudy07MfFDyFps7kVMDAywcxvscnpcNmoMjwkwhYD8dFgACkP2iEv2jGrYbNfaBbCiE2ynKHwWGjY46iGO9BePgMtIo/mn6DOWvRcgRIE+Uu3swywS6mWnyny3my0mT5YlR1IGytMaJtUyiJhICkhR6OJpDSAUDjjZq8MH/h7ZWd+Hohmlr5hGum7xc+lhE25f4Rde4A3rSOXzfJyVQcXGaYQoNb00W61sLq2AVeEgAfXeeVYjYCNIS1NYSm6GK3qAlVpDjN7RlGdn0Pdd9GtnmDGKbO8u6iU4bBv6Dq8yhiMTD8cKqVfX0ParpH8dTilcbqZHCF3nolqIckXVVWiTP6+4MHPKb93IRB3nICcYyCEEKWP/ml0bBfy+SyzHLDRbdDJ0hpRTcKQ8KDanFuro9kNUKQYWFSDQi5DldJI2n5mbQjr+kVobayhtfgcsxxgx/ROlEoWJbkPC48dRHN9ScFLPsz8AKxcv2qKUiHTK6K7ehp6QmEgAuzyOKV6Gkm3iXaVECXEYopRQOIHhjeJ7392rvdOuvtJisPHTeKcakucu+wVeUW2mdlpHmhBNULBaZQYWKs30el2kTJgh0FkKAwibR6j7VSuY+O0UGvZCDohDzTPTK7zcHnMXnYpgyyjz2nhiR8cQGN5gRygmBRGIE038LuK+NmRi9CleoFuImb312n58+NXseI5BLVziFgVgViHYpR4hU8FD97+Vz2k6vYJAn7GpPFzXRvDo2PY2jgHn4TTqD42pdAlB7xsryGmjLrW8DE6UIQfpCogixnI0JIk2VF0vT3YivvQqa2jPneUPIuQ23kpKrN7kNaWMVbuYvsg8O17HuJ9NmHRJKY8bBK0+D45OOWdhBuJTdKb7OomlTOOKdPkThz48DfOsgF04DOQON9/Mnjo87MSyBSLe0qsjmOliguS/ZRWwfNsNEJfya9B2LgkUJEc6FB1WqGFbXlRHRKcECnkPEwPFWG7Hk5UmUlvFEdO59E89zQPtg2Z4SkU+4pYefowxiZGkIlXcHY9w/lkjgrHJp7tNc2EQTuskEHFyozuoqPPsAc1YLVOITJIcL6222rD71apXDYiwjK1vWkJ5AOsyZ3SiT2awFLJ48FN1UM8lrvDDHRYmQwtdsqsZCuDmPN3snsX+bUG9pQX2ABTDFVKGC0V+FrKMBtbpLt4ZGU/anM/Q7Z/jM7WxdD4CKrPn0O8ehIrJ59A3+zVKA1PoFtbZKNM0V/mjJPbicvGQ1hxk70+Qa3jYHENWD76ENpJATkmJKEARQmhaLtskhney7hVAvk8r4/IiOo5uurgolyFvEeis1eQCyHT4IoqkexNcwLrXbpSaWYs48Q4s6oPYMZ+mhZiFq4eYXbYx1x3FMdXJxC16kxAzO7t4e3765hbSfDgN79HlW1j+orr0CFXJyf6yTETF/XX0GjHGDXZFGPhY4h6y8e5dQOL4Sy2zq8iam5QyZoI/S2klVFE5HPkuF+QQA7wutFhNVxHxlV+Ax4If+VE5dJJZJ8lF60/25kknehSeWODWc4ObmPeDPQPsEM7FXSMEWQt+iRqf5DmeGD6MnJsetDHTTuWUG05uP/BBezeO42V5TVUN2Pivo3x6TGscJz3OG3qQ7swqR/BoHYKC51RnDlfhh2cw9qauGxaoRb9nl9jp++HTy4lrvuIBMIthjZpETqyJEioSqnhwaWLLbktVJyEzY4DEAm97Pdho0F7TfxKRcQrlUa3oV2ro7xrP3YXTuMsLoavF6lctlIvm0rI6Qvv2LWIMU6xBqt++7d1/M6lDs6ttPGdr30LoztGsVZlloMAU79/G1VsCK6xioDw1ei6q8+dRuPkYYSbZ5msPGjNETQX2U84SZZH4BvmvASSmDQ2GfFRJPxmk4OOzAqmB6cyjFHnPIY4fVq2iSPLQ4hC2gtyQHkgBpMbGUfUbiE7thvFchHTpbMYyYR4on0pOgkNHuF4w+QarhnvMB4Gx6p/5j8KeMNkA3Ua4BPHT+HJJ84oqR269E3om9yHUM/wDGJlEoykx9BeXcPiJolOiHdWF1iNDknvI2ZSQlqbrqnJbIZUYFXOW3BomRe49SAu1KWzbLn+Ci4uryPvGTi+VsDqJpuWCoLfJ7R0EiozuB1ZdtvtI9R1yu/OXBV5Nsjjjd3YCkzsGWzibft89hwNVSbqvmP9aGz5cMNlzP1sAQWzgdHpCaw5e1EoGhjPLqPfqePQ6usI8hp+z70fD8zvRU0bQ6dK6aWEW2yIfn0BDQbX5RlUIB6zVGEgCSG1vNpmEEJk4QHnkL4xFLI+dle2sJ4M4MxZMaysihg+VsTK91P/OXRNXoId2zxMDETYMxKw79h4fGMHVoI+qppH2IbwkwyCRCCXImw24VYf53vQTRdKqNqvg5MrYbK0gDcPH2PzdfHQ4gzqHNbe0XcQ5+ouDm3uZzP26KKPKUXrcrrs0o10OScpaGVdQyvmHeI/ZYNLZFJQGZflgMGGZHAhUM43UCgPo715GisrXBCIxaY/svKDNHZcvHU48rJSwxddhov2TuGa2Qjb+h3EfJ9/+slOfraxo6JhN4Os1SIsnDiDtXUqmk2fVdgBuziMmf42dhefxa78Jl1BBw4VkP4Xtqdjc7WFM2tNfG/lGpw+epxJdihKdA70fx0tUdCayzjGuM3OvcX5QVY98pGyo6sth5mBWd7O7lugQhJOYZXBEH4CLQk0U1SVCeurvKWYtxj5gW3om7kE+/btwI4+OmSOuwMZumT+2JGn1/DMT0+itXwScWMN3rZ9GL767RjZPoBP3XQKJv1UQM55qSxN2JSpmG1Oi1thiKPPLuH44hZ+8GOQ4JRsOvSIXb8ZtxXZD7CH3KgRTuKjUhq13ofsnCTrXDwUt9Fal9QQFDfX1WvEuqhXiVdiNrscvOTfyvMQtwmbp1McJJYHaftFwukA2FxT9gBZ/8QcnthgkN22Fzve8kG8dW8d72efCTYaSJsdmCR0p9bEYI5zzUAOc+fW8V8nF7FKo/qdw9zSUEFTzvMdjtxdREp+/5Hm8MNCYMlwSEymwg9iUB3L4FqTjtQdnmQzon5361QYmhLC6kK8sGkTxFpEHW5rxJ73qKf+lksXVyBQTdiByKlYRl0mQmeApb1vxujVb8XfvGkd1w5sksBNdOscDzaaXFR0MeMwadftxtKRk3hmYQOHqxv46kM1tO0JGBwzfC1GK6irhvgBduw7K9yQtLpUAHKEpCAG6dvlIFQm6cxOaUiNpiHthMgij6emOrJS8UW4Em5xscDvKUgyUFE1JQz8LIbQpSrGMqvQvxUmryKsdqM0uRdXTWj49HWca2gSA87/QbOFNa6OhCdTr5+E2ZfFxmPP4cenqjh4dgV3H2iym3NaHZ1h0+Vu2W8rizJFSJwqUJNjwqvF3ZRSLXol6SUmd7MynUnPMDnqhuscRcUVSyh0qnIoqZxVHiVPVlQNJAhTOq5MghKYxcSwTwj0xNbIkqF88U0oX3Qd3nlFFn9+GUlPI2h0mqgSTn6H4zM/a9wH7Ll+mnYlootexE9OrdC/Jbj7gTkk5Ie7cx9dsE+nHSjTKDc4kbH1GTlsi9uQ3uhGDnAjKIcw2E2FF7rFxUKbHJEDsiJSCfXIQC0JLPU6gZ7Gw5tcd8Z0symTYAiMVBDqZsyTR1t/CWavegO+fgubK98vYfaDdps/Q4/Fish6SRYfiWOycRJu5Mw5P8FXHl7EsTNtRIU8rCEaSD0+WX/4K8rGy8cnLUP/uBwoIEd60fGQiuxsepRfXbIqCzOubyLCSx1I7W7ZjBgEpxJa9Vl23tPkgvwof1aYIlsSWbgJp2RWUOLAzWGnjsm3fRj3/7HGbWSXksxhjST3OUhlMgYOnM/jgZVt2Okuw0UL+5xncfCkj2/+sI52m9AqFOD1DXFfkPx1+8C/ffyFQCYMQ+eGwFADTC8QgRcrInZEpJbPMQzCzODQ3z3LZxyCfdoP2d3yYY36mezO/ey6S0ia9N2ierKzotWQQIT6VnFIZc3wSnw0kkNpz3V4+zUVfHTvMmqU9NVNKhAfVRxqTuGeR8mRbgvR1iLNqYWJ7RnU7VEsHD6ILpcjMZuoQzexEdDF/vAbF0bdXgW+RdK/M6WySBZNLgFk5d/beBAaNIiaTc7kuIqp0mcyc72K9YYrgaXFILOje1A/fbgnxYr4F3IleyomJRF+CRTFWdN85scvw5+972r8xRt9PHlqE98+puPu+55Ae/Gkeo1UWuTaIFSHZ7fTMVMQOABq5UE6heQ+/+DXfnH5IJFYV/Bcj6nVOKVXWRSLczsXAQo6tCFqtckDp1ztJG2RUBJXWRXpKUJyzjTErRxeKiNJUNxQMk5l4wIuZB+SVSiV4AL5TQxd+y584m0B7v3PFg4++CjvRWFQsJRWIIgUk8oRY2wvt5rnOd7KoweO2X7zyvDQt168DpJQmNmvEQzvUbC5QHiNBBdFUlAh4YTcIrmJ9AK+zhAJJoT0CxwwMxVkhmbQWnpa9SJZysk8Y+YGWOUKlY0HoRSLpMs9CtPXcmZhkwwa6KxxGSFfl0AlncIvMaZEglTGHJ1iA2wg4bqI2+O7gx/e+9IFXY/zNPpmwP2NXlLGWAgv8GBfsej7426bisyhQm5CsioJlkseIjIYeZhoMHDhks05vbv8nIKdMzDJw3CrT/mOWhuonzmsoCkNWDaJ8hrlb+QvdT9CkBUT76ZR4mVFFNFTJRmOtlxy0JZsWnG8q/mjf3/5lWmPifYtLOPdhBr/yS0FR10N7PrcdJjcu6aysuHSWUFG+ovqMb2g5WAyp8h5nMq2HsEJTQlQqiNKFXBfLJBLCE+pskh2D369WNQrpeHya9LDNN6LizMuHlIE3PJEAgjE7wkevf9Fj+ReUK1eQV74sNw7aARvFYdpmVy/tGg7iFNZognxTCqObDkMcka4o3oJby7mUT3i5Ynke97IjJrNfTZRIbl4KwG92v9KmBd2v8qoKiqxvkxEEgasBk9MNUy4eko5fscym+s074l/Z/vR+371Y4ULsZia4x0gpK7PeyEXEDRuNGumy1VlxJJfCEJGXYdVEgGQIATb8kcOLEmwuZSTqsRdGkGBjASsZFn8mATCwFVjJcReqIeglM9IYo64qc1EZbjrlQWgmxVAH6rry3zQ88hLnie+fEV60RRpXx+hhl9ayMTstEJcOWSvwYmUCixMkl0OK75LoCCwU9LL7MashoiAOjB5IK+R3qKWU6oPqW1fz0jwXWQJEdN4JlyxJuzq7IyEc4VBsDJIn4QV3Fh7+Bsv+xzxlwXCWDiEe+l3+Sz9uix3wnVCTJM+oKAjgRC/8kBTSCmB8WsCO43DkkOlC2gi1bZFPU/na5UaMfdqgU0YyVNi4YvAjpc8h0zkkQanSz2bQ65vGLN8pN1otg6dWFv+g1cKQrL+KwJRleFQXvkSM3yrptwuD8GbG2yWJm2LbAcNgQyD0MWqE9simUZ+WCmY/F9Mp/QNReUL0toLqPcQNJWApGeIgyGMyoOjuPbqi7B/qoz5+fN3PmXig4984rd4PP0iAcj130y8fFEz3ZKSXOkh0qgkmwysN8NfWEiQHxK0YXP9csHxCqGVUl14nKDkWgjNSwIw+DCnMrwNV125C2+8fALV8+c3585VP3THZ/72tfqFgV8IJzc0SMjfDtN+j+DeEJLLtyUQmQJVzvk1LqSNbIX45iMzLnblOWHCcVXZGtp5tRXgulPn6KyR0NvHp/COt1yJHSMF1GsbWDi7evfaavMv7/rS/zxae7GsvvR/rwZaL/2p4gjtjPkxPhp7p9gX1T9UlXqkVYMWx2ObD4SiiBUT46nUiD2J8iw7KbH3pVIJr98/jbfcsBfL1RpWq5v3VWv1T9/1hdv/b3+p5iURFXdO2J79fpLhZgbGeabXT3r25sIlkCNnpD8YsqyQz7xKhSze/buXcGoOT9Yb7a93NttfueuOL/z//prTy5Z5bHqKC9IbqMv72VP20nqMM5ad/D/bhBzeTou5zPMDxfz8+GjxeNbWj0ZBcvDef/3n1+QXz/4bNfzT2OZnpQwAAAAASUVORK5CYII=\\",\\r\\n                              \\"type\\":  \\"nominal\\"}\\r\\n                   }\\r\\n     },\\r\\n     { \\"params\\": [{ \\"name\\": \\"grid\\",\\r\\n                    \\"select\\": \\"interval\\",\\r\\n                    \\"bind\\": \\"scales\\"},\\r\\n                  { \\"name\\": \\"legend\\",\\r\\n                    \\"select\\": {\\"type\\": \\"point\\", \\"fields\\": [\\"Orbit class\\"]},\\r\\n                    \\"bind\\": \\"legend\\"} ],\\r\\n       \\"mark\\": { \\"type\\": \\"point\\", \\r\\n                 \\"shape\\": \\"circle\\",\\r\\n                 \\"tooltip\\": true,\\r\\n                 \\"filled\\": true,\\r\\n                 \\"fillOpacity\\": 0.75},\\r\\n       \\"encoding\\": { \\"x\\": { \\"field\\": \\"Sin\\", \\r\\n                            \\"type\\": \\"quantitative\\",\\r\\n                            \\"title\\": false, \\r\\n                            \\"axis\\": {\\"disable\\": true,\\r\\n                                     \\"grid\\": false,\\r\\n                                     \\"labels\\": false},\\r\\n                                     \\"scale\\": {\\"domain\\": [-70400,70050]}},\\r\\n                      \\"y\\": { \\"field\\": \\"Cos\\", \\r\\n                             \\"type\\": \\"quantitative\\",\\r\\n                             \\"title\\": false, \\r\\n                             \\"axis\\": {\\"disable\\": true,\\r\\n                                      \\"grid\\": false,\\r\\n                                      \\"labels\\": false},\\r\\n                                      \\"scale\\": {\\"domain\\": [-69540,60370]}},\\r\\n                      \\"size\\": {\\"value\\": 50},\\r\\n                      \\"color\\": { \\"field\\": \\"Orbit class\\",\\r\\n                                 \\"type\\":  \\"nominal\\",\\r\\n                                 \\"sort\\": [ \\"Geostationary Transfer Orbit\\", \\"Geosynchronous Equatorial Orbit\\", \\"Medium Earth Orbit\\", \\"Low Earth Orbit\\"],\\r\\n                                 \\"scale\\": {\\"range\\": [\\"#C8F6FF\\", \\"#8DECFF\\", \\"#2DDBFF\\", \\"#11BBDE\\" ]} },\\r\\n                      \\"opacity\\": { \\"condition\\": {\\"param\\": \\"legend\\", \\"value\\": 1},\\r\\n                                   \\"value\\": 0.025 },\\r\\n                      \\"tooltip\\": [ {\\"field\\": \\"Satellite catalog number (NORAD)\\", \\"type\\": \\"nominal\\", \\"title\\": \\"NORAD\\"},\\r\\n                                   {\\"field\\": \\"International designator (COSPAR)\\", \\"title\\": \\"COSPAR\\"},\\r\\n                                   {\\"field\\": \\"Name\\", \\"title\\": \\"SATELLITE\\"},\\r\\n                                   {\\"field\\": \\"Country\\", \\"title\\": \\"COUNTRY\\"},\\r\\n                                   {\\"field\\": \\"Purpose\\", \\"title\\": \\"PURPOSE\\"},\\r\\n                                   {\\"field\\": \\"Users\\", \\"title\\": \\"USERS\\"},\\r\\n                                   {\\"field\\": \\"Launch date\\", \\"title\\": \\"LAUNCH DATE\\", \\"type\\": \\"temporal\\", \\"format\\": \\"%d-%m-%Y (DMY)\\"},\\r\\n                                   {\\"field\\": \\"Status\\", \\"title\\": \\"STATUS\\"},\\r\\n                                   {\\"field\\": \\"Orbit class\\", \\"title\\": \\"ORBIT CLASS\\"},\\r\\n                                   {\\"field\\": \\"Distance (km)\\", \\"title\\": \\"AVERAGE DISTANCE (km)\\", \\"type\\": \\"nominal\\", \\"format\\": \\",.0f\\"},\\r\\n                                   {\\"field\\": \\"Apogee (km)\\", \\"title\\": \\"APOGEE (km)\\", \\"type\\": \\"nominal\\", \\"format\\": \\",.0f\\"},\\r\\n                                   {\\"field\\": \\"Perigee (km)\\", \\"title\\": \\"PERIGEE (km)\\", \\"type\\": \\"nominal\\", \\"format\\": \\",.0f\\"},\\r\\n                                   {\\"field\\": \\"Launch site\\", \\"title\\": \\"LAUNCH SITE\\"},\\r\\n                                   {\\"field\\": \\"Launch vehicle\\", \\"title\\": \\"LAUNCH VEHICLE\\"}] }\\r\\n     }\\r\\n    ],\\r\\n    \\"config\\": {\\r\\n      \\"legend\\": {\\"title\\": \\"null\\",\\r\\n                 \\"titleColor\\": \\"#ffffff\\",\\r\\n                 \\"labelColor\\": \\"#ffffff\\",\\r\\n                 \\"labelFontSize\\": 10,\\r\\n                 \\"labelFont\\": \\"Consolas\\",\\r\\n                 \\"orient\\": \\"top-left\\",\\r\\n                 \\"labelLimit\\": 260  }\\r\\n    }\\r\\n}\\r\\n```\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-08-27.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1659189600,"title":"How to webscrape recent Twitter posts by keyword using Python and Visual Studio Code\\r","name":"how-to-webscrape-recent-twitter-posts-by-keyword-using-python-and-visual-studio-code","tech":"logo-python\\r","tags":"[\\"Python\\"]\\r","date":"31 July 2022\\r","content":"This post shows how to webscrape recent Tweets based on a predefined keyword or hashtag, and other related data using the Twitter API, Visual Studio Code, and the Python-based Tweepy library.\\r\\n\\r\\n## Step 1. Create a free Twitter Developer account\\r\\n\\r\\nAs at the time of writing, you can get a Twitter Developer account off the back of an existing Twitter account or create a new one, but you will need to provide your mobile phone number for verification.\\r\\n\\r\\n* **[https://developer.twitter.com](https://developer.twitter.com)**\\r\\n\\r\\nFrom the Twitter Developer Portal, you can create your project and app, and then additionally request for Elevated access, which provides higher level Twitter API accesses and limits. Be mindful that your application may incur costs depending on the features you request, and in my case, I chose free Read-Only access.\\r\\n\\r\\n![Developer Portal: Project](/src/assets/blog/2022-07-31--01.png)\\r\\n\\r\\nGenerate the API Key, Access Tokens, and Secrets that will be needed for your API connection, being careful that data is securely stored.\\r\\n\\r\\n![Developer Portal: Keys and tokens](/src/assets/blog/2022-07-31--02.png)\\r\\n\\r\\n\\r\\n## Step 2. From Visual Studio Code install Python and set up your virtual environment\\r\\n\\r\\nInstall Python\\r\\n* **[https://www.python.org/downloads/windows](https://www.python.org/downloads/windows)**\\r\\n\\r\\nCreate a folder for your Python project and open it in Visual Studio Code. In this example, the folder name is *twitter-web-scraping*.\\r\\n\\r\\nInstall the Python Extension for Visual Studio Code.\\r\\n![Visual Studio Code](/src/assets/blog/2022-04-17--01.png)\\r\\n\\r\\nCreate your virtual environment as a subfolder of your project.\\r\\n```\\r\\npython -m venv C:\\\\Project\\\\twitter-web-scraping\\\\venv\\r\\n```\\r\\n\\r\\nYou can find more detailed screenshot steps of the above from a previous blog post:\\r\\n* **[Add forecasts from Python using Visual Studio Code to Power BI](https://makuharistudio.github.io/#/blog/add-forecasts-from-python-using-visual-studio-code-to-power-bi)**\\r\\n\\r\\n## Step 3. Install relevant Python libraries\\r\\n\\r\\n```\\r\\npip install tweepy\\r\\npip install configparser\\r\\npip install pandas\\r\\n```\\r\\n\\r\\n## Step 4. Create a configuration file to store your Twittter API keys, tokens, and secrets\\r\\n\\r\\nCreate a config.ini file in your project folder, and add your API keys, tokens, and secrets in place of the ???? below.\\r\\n\\r\\n**config.ini**\\r\\n```\\r\\n[twitter]\\r\\n\\r\\napi_key = ????\\r\\napi_key_secret = ????\\r\\n\\r\\naccess_token = ????\\r\\naccess_token_secret = ????\\r\\n```\\r\\n\\r\\nBe very careful not to publish these details publically, such as via Github.\\r\\n\\r\\n![Visual Studio Code: config.ini](/src/assets/blog/2022-07-31--03.png)\\r\\n\\r\\n\\r\\n## Step 5. Create a Python script to run the Tweet extraction\\r\\n\\r\\nThis Python script uses the keys, tokens, and secrets by referencing the config.ini from the previous step.\\r\\n\\r\\nIn the example below, the keyword search being used is \\"Motorola\\". Simply substitute that value for your preferred text string, or hashtag.\\r\\n\\r\\nAt the time of my testing, I can only retrieve a maximum of about 900 records every 15 minutes using my elevated API, and have coded that as part of the script\'s limit so it doesn\'t error out when it is executed.\\r\\n\\r\\n**Note:** tweet.text appears to be a truncated variation of the Tweet data, whereas tweet.full_text scrapes the full Tweet.\\r\\n\\r\\nBecause the data is saved to a CSV file, new lines and commas are replaced with space characters to keep the data to single row records.\\r\\n\\r\\n**python_script.py**\\r\\n```\\r\\nimport tweepy\\r\\nimport configparser\\r\\nimport pandas as pd\\r\\n\\r\\nconfig = configparser.ConfigParser()\\r\\nconfig.read(\'config.ini\')\\r\\napi_key = config[\'twitter\'][\'api_key\']\\r\\napi_key_secret = config[\'twitter\'][\'api_key_secret\']\\r\\naccess_token = config[\'twitter\'][\'access_token\']\\r\\naccess_token_secret = config[\'twitter\'][\'access_token_secret\']\\r\\n\\r\\nauth = tweepy.OAuthHandler(api_key,api_key_secret)\\r\\nauth.set_access_token(access_token, access_token_secret)\\r\\napi = tweepy.API(auth)\\r\\n\\r\\nkeywords = [\'Motorola\']\\r\\n\\r\\nlimit = 901\\r\\ntweets = tweepy.Cursor(api.search_tweets, q=keywords, lang=\'en\', result_type=\'recent\', tweet_mode=\\"extended\\").items(limit)\\r\\n\\r\\ncolumns = [\'TweetDateTime\', \\r\\n           \'UserID\',\\r\\n           \'UserName\',\\r\\n           \'UserScreenName\',\\r\\n           \'UserDescription\',\\r\\n           \'UserCreatedDateTime\',\\r\\n           \'UserVerified\',\\r\\n           \'UserLocation\',\\r\\n           \'UserFollowers\',\\r\\n           \'TweetContent\',\\r\\n           \'TweetFavourites\',\\r\\n           \'TweetRetweets\']\\r\\ndata = []\\r\\nfor tweet in tweets:\\r\\n    data.append([tweet.created_at,\\r\\n                 tweet.user.id, \\r\\n                 tweet.user.name.replace(\'\\\\n\', \' \').replace(\',\',\' \'),\\r\\n                 tweet.user.screen_name.replace(\'\\\\n\', \' \').replace(\',\',\' \'),\\r\\n                 tweet.user.description.replace(\'\\\\n\', \' \').replace(\',\',\' \'),\\r\\n                 tweet.user.created_at,\\r\\n                 tweet.user.verified,\\r\\n                 tweet.user.location.replace(\'\\\\n\', \' \').replace(\',\',\' \'),\\r\\n                 tweet.user.followers_count,\\r\\n                 tweet.full_text.replace(\'\\\\n\', \' \').replace(\',\',\' \'),\\r\\n                 tweet.favorite_count,\\r\\n                 tweet.retweet_count])\\r\\ndf = pd.DataFrame(data, columns=columns)\\r\\ndf.to_csv(\'tweets.csv\')\\r\\n```\\r\\n\\r\\n![Visual Studio Code: python_script.py](/src/assets/blog/2022-07-31--04.png)\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* YouTube video **[\\"How to get TWEETS by Python | Twitter API 2022\\" by AI Spectrum](https://www.youtube.com/watch?v=Lu1nskBkPJU)**\\r\\n\\r\\n* YouTube video **[\\"Get TWEETS by User and Hashtag with Python | Twitter API 2022\\" by AI Spectrum](https://www.youtube.com/watch?v=FmbEhKSpR7M)**\\r\\n\\r\\n* YouTube video **[\\"how to automate search of trending hashtag and number of tweets from those hashtags\\" by iknowpython](https://www.youtube.com/watch?v=ywl--vO3oGs)**\\r\\n\\r\\n* Twitter API v1 Search Tweets Reference **[https://developer.twitter.com/en/docs/twitter-api/v1/tweets/search/api-reference/get-search-tweets](https://developer.twitter.com/en/docs/twitter-api/v1/tweets/search/api-reference/get-search-tweets)**\\r\\n\\r\\n* Twitter API v2 data dictionary **[https://developer.twitter.com/en/docs/twitter-api/data-dictionary/object-model/tweet](https://developer.twitter.com/en/docs/twitter-api/data-dictionary/object-model/tweet)**\\r\\n\\r\\n* Tweepy library Exteded Tweets **[https://docs.tweepy.org/en/stable/extended_tweets.html](https://docs.tweepy.org/en/stable/extended_tweets.html)**\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-07-31.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1655820000,"title":"How to embed an Excel workbook into a React.js application\\r","name":"how-to-embed-an-excel-workbook-into-a-reactjs-application","tech":"logo-react\\r","tags":"[\\"React.js\\", \\"Excel\\", \\"OneDrive\\"]\\r","date":"22 June 2022\\r","content":"In this scenario, we are publishing an Excel workbook that we want the general public to view and interact with, but not allow them to download a copy of. We will walk through creating your own free OneDrive account to host the Excel file, extract and modify the JavaScript embed code, then apply it to our React.js component.\\r\\n\\r\\n**Note:** There are limitaions on what the free version of OneDrive allows you to publish in your Excel workbook. In my case, I found that External Data Connections (e.g. using Power Query to Get Data from a GitHub repository), and using \\"Camera Tools\\" to create a dynamic link to inserted workbook images, are not supported. So bear this in mind when building Excel dashboards for your portfolio.\\r\\n\\r\\n## Step 1. Ensure your Excel workbook has a cell range defined for what the users can view.\\r\\n\\r\\n![Excel cell range named](/src/assets/blog/2022-06-22--00.png)\\r\\n\\r\\n## Step 2.  Create (or log into) your free **[OneDrive.com](https://onedrive.com)** account.\\r\\n\\r\\nIf creating a new account, click \\"See plans and pricing\\" then \\"Sign up for free\\".\\r\\n\\r\\n![Microsoft 365 OneDrive Personal Cloud Storage](/src/assets/blog/2022-06-22--01.png)\\r\\n\\r\\n![OneDrive Basic 5GB Free](/src/assets/blog/2022-06-22--02.png)\\r\\n\\r\\n\\r\\n## Step 3. Add your Excel file to your OneDrive.\\r\\n\\r\\n## Step 4. Extract the JavaScript embed code.\\r\\n\\r\\nRight-click the Excel file and click Embed.\\r\\n\\r\\n![OneDrive right-click for Embed code 1](/src/assets/blog/2022-06-22--03.png)\\r\\n\\r\\nClick \\"Customise how this embedded workbook will appear to others\\".\\r\\n\\r\\n![OneDrive right-click for Embed code 2](/src/assets/blog/2022-06-22--04.png)\\r\\n\\r\\nConfigure your settings as required for the Excel workbook, and this will autopopulate the JavaScript code.\\r\\n\\r\\nCopy the contents of the JavaScript code.\\r\\n\\r\\n![Extract OneDrive JavaScript Embed code](/src/assets/blog/2022-06-22--05.png)\\r\\n\\r\\n## Step 5. Modify the JavaScript embed code and add to React.js component\\r\\n\\r\\nThe code you receive, discounting the comments, appears as below and is structured for basic HTML pages, i.e. on its own you can\'t just copy and paste it into a React.js component.\\r\\n\\r\\nExample JavaScript embed code from OneDrive:\\r\\n\\r\\n```\\r\\n<div id=\\"myExcelDiv\\" style=\\"width: 700px; height: 900px\\"></div>\\r\\n<script type=\\"text/javascript\\" src=\\"https://onedrive.live.com/embed?resid=ABC12345ABC123A%12345&authkey=%12AB123abc1AbcDEF1&em=3&wdItem=%22\'Dashboard\'!A%1ABCD%22&wdDivId=%22myExcelDiv%22&wdActiveCell=%22\'Dashboard\'!A1%22&wdAllowInteractivity=0&wdAllowTyping=1\\"><\/script>\\r\\n```\\r\\n\\r\\nWhat we will keep from the code above is the div tag and its id\\r\\n\\r\\n```\\r\\n<div id=\\"myExcelDiv\\"></div>\\r\\n```\\r\\n\\r\\nand the src code from the script tag to view the file in an iframe.\\r\\n\\r\\n```\\r\\n\\"https://onedrive.live.com/embed?resid=ABC12345ABC123A%12345&authkey=%12AB123abc1AbcDEF1&em=3&wdItem=%22\'Dashboard\'!A%1ABCD%22&wdDivId=%22myExcelDiv%22&wdActiveCell=%22\'Dashboard\'!A1%22&wdAllowInteractivity=0&wdAllowTyping=1\\"\\r\\n```\\r\\n\\r\\nWe can then append the following code to the src code\\r\\n\\r\\n```\\r\\n&action=embedview&wdbipreview=true\\r\\n```\\r\\n\\r\\nSo it now appears as this.\\r\\n\\r\\n```\\r\\n\\"https://onedrive.live.com/embed?resid=ABC12345ABC123A%12345&authkey=%12AB123abc1AbcDEF1&em=3&wdItem=%22\'Dashboard\'!A%1ABCD%22&wdDivId=%22myExcelDiv%22&wdActiveCell=%22\'Dashboard\'!A1%22&wdAllowInteractivity=0&wdAllowTyping=1&action=embedview&wdbipreview=true\\"\\r\\n```\\r\\n\\r\\nFrom your React.js component, add the src code into your function before the return clause.\\r\\n\\r\\n```\\r\\nconst script = document.createElement(\\"script\\");\\r\\n\\r\\nscript.src = \\"https://onedrive.live.com/embed?resid=ABC12345ABC123A%12345&authkey=%12AB123abc1AbcDEF1&em=3&wdItem=%22\'Dashboard\'!A%1ABCD%22&wdDivId=%22myExcelDiv%22&wdActiveCell=%22\'Dashboard\'!A1%22&wdAllowInteractivity=0&wdAllowTyping=1&action=embedview&wdbipreview=true\\";\\r\\n\\r\\nscript.async = true;\\r\\n\\r\\ndocument.body.appendChild(script);\\r\\n```\\r\\n\\r\\nAdd the myExcelDiv div inside the return clause.\\r\\n\\r\\n```\\r\\n<div id=\\"myExcelDiv\\" className=\'embeddedExcel\'></div>\\r\\n```\\r\\n\\r\\nThen use CSS to style your myExcelDiv. In this example, we have tried to make this full width, minus 20 pixels for the scrollbar\'s width.\\r\\n\\r\\n```\\r\\n.embeddedExcel {\\r\\n    width: (100vw) - 20px;\\r\\n    height: 950px;\\r\\n}\\r\\n```\\r\\n\\r\\nSo the completed code for the React.js component would appear similar to below:\\r\\n\\r\\n```\\r\\nimport React from \'react\';\\r\\nimport \'../App.css\';\\r\\n\\r\\nexport default function ExcelCustomerSupportAgentPerformance() {\\r\\n\\r\\n    const script = document.createElement(\\"script\\");\\r\\n\\r\\n    script.src = \\"https://onedrive.live.com/embed?resid=ABC12345ABC123A%12345&authkey=%12AB123abc1AbcDEF1&em=3&wdItem=%22\'Dashboard\'!A%1ABCD%22&wdDivId=%22myExcelDiv%22&wdActiveCell=%22\'Dashboard\'!A1%22&wdAllowInteractivity=0&wdAllowTyping=1&action=embedview&wdbipreview=true\\";\\r\\n    script.async = true;\\r\\n\\r\\n    document.body.appendChild(script);\\r\\n\\r\\n    return (\\r\\n        <>\\r\\n            <div id=\\"myExcelDiv\\" className=\'embeddedExcel\'></div>\\r\\n\\r\\n        </>\\r\\n    )\\r\\n\\r\\n}\\r\\n```\\r\\n\\r\\n![React.js code](/src/assets/blog/2022-06-22--06.png)\\r\\n\\r\\nReferences\\r\\n\\r\\n* Stack Overflow Question **[Adding a script tag to React.js](https://stackoverflow.com/questions/34424845/adding-script-tag-to-react-jsx)**\\r\\n\\r\\n* YouTube video **[STOP Emailing Excel Files - Securely Embed them in Web Pages Instead!](https://www.youtube.com/watch?v=uvA-U9FKgPw&t=385s)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-06-22.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1650981600,"title":"Creating custom visuals using Deneb and Vega-Lite in Power BI\\r","name":"creating-custom-visuals-using-deneb-and-vega-lite-in-power-bi","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Deneb\\", \\"Vega-Lite\\"]\\r","date":"27 April 2022\\r","content":"This is my first attempt at using Deneb to create two custom visuals in Power BI, based on 2 visual design elements from existing Tableau Public reports. The dataset used is from my International Marketplace SSIS package project, found in my previous blog post: **[https://makuharistudio.github.io/#/blog/international-marketplace-dataset-created-with-integration-services](https://makuharistudio.github.io/#/blog/international-marketplace-dataset-created-with-integration-services)**\\r\\n\\r\\nDeneb is a highly flexible custom visual developed by **[Daniel Marsh-Patrick](https://twitter.com/the_d_mp)** that can be used to create unique visualisations for Power BI reports with JSON-based syntaxes; Vega or Vega-Lite.\\r\\n\\r\\nDeneb can be downloaded from the Microsoft App Store:\\r\\n\\r\\n* **[https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview](https://appsource.microsoft.com/en-US/product/power-bi-visuals/coacervolimited1596856650797.deneb?tab=Overview)**\\r\\n\\r\\nThe official website for Deneb:\\r\\n\\r\\n* **[https://deneb-viz.github.io](https://deneb-viz.github.io)**\\r\\n\\r\\n\\r\\nThe Power BI report I used to incorporate these visuals:\\r\\n* **[https://community.powerbi.com/t5/Data-Stories-Gallery/International-Marketplace-profit-report-using-Python-and-Deneb/m-p/2480550#M7154](https://community.powerbi.com/t5/Data-Stories-Gallery/International-Marketplace-profit-report-using-Python-and-Deneb/m-p/2480550#M7154)**\\r\\n\\r\\n\\r\\n### Deneb visual 1: Time series circle chart with bar chart totals\\r\\n\\r\\nThe first custom visual was a design element mimicked from a Tableau Public community gallery visualisation by [Pradeep Kumar G](https://twitter.com/pradeep_zen) named **[Sample Superstore - Sales Performance | VOTD](https://public.tableau.com/app/profile/pradeepkumar.g/viz/SampleSuperstore-SalesPerformance/viz_)**.\\r\\n\\r\\n**[https://public.tableau.com/app/profile/pradeepkumar.g/viz/SampleSuperstore-SalesPerformance/viz_](https://public.tableau.com/app/profile/pradeepkumar.g/viz/SampleSuperstore-SalesPerformance/viz_)**\\r\\n\\r\\nThe original dashboard appears as below:\\r\\n\\r\\n![Tableau sales dashboard by Pradeep Kumar](/src/assets/blog/2022-04-27--01.png)\\r\\n\\r\\nIf you scroll further down, you will find the design element I attempted to replicate using Deneb:\\r\\n\\r\\n![Tableau sales dashboard element by Pradeep Kumar](/src/assets/blog/2022-04-27--02.png)\\r\\n\\r\\nPower BI native visuals do not have the ability to recreate the circle chart with gradient colours (that I can find as yet), so Deneb is useful here to create that component. \\r\\n\\r\\nOpening this dashboard in Tableau Desktop, the composition of the circle chart and the bar chart are simply two separate visuals placed side-by-side.\\r\\n\\r\\n![Tableau sales dashboard element by Pradeep Kumar in Tableau Desktop](/src/assets/blog/2022-04-27--03.png)\\r\\n\\r\\nAnother major advantage of Deneb is that you can create multiple visuals as a single chart, so rather than having to create a separate bar chart, it can be created as an additional \\"view\\" alongside the circle chart.\\r\\n\\r\\nDeneb has a few ways to **[concatenate views](https://vega.github.io/vega-lite/docs/concat.html)**, which involves how you want to set the visual elements bedside each other. In this case I used hconcat for horizontal layout of the circle chart, the bar chart, and a third chart to act as a numerical marker for the bar chart.\\r\\n\\r\\n![Deneb hconcat Vega-Lite outline](/src/assets/blog/2022-04-27--04.png)\\r\\n\\r\\nVega-Lite code structure:\\r\\n\\r\\n```\\r\\n \\"hconcat\\": [\\r\\n     {\\"mark\\": { \\"type\\": \\"circle\\"}\\r\\n       ...\\r\\n     },\\r\\n     {\\"mark\\": { \\"type\\": \\"bar\\"}\\r\\n       ...\\r\\n     },\\r\\n     {\\"mark\\": { \\"type\\": \\"text\\"}\\r\\n       ...\\r\\n     },\\r\\n\\r\\n```\\r\\n\\r\\nThe main challenge I had with the circle chart is that I have data for years 2022 and 2023, but I wasn\'t able to find a way to display these along the x-axis as separate levels of labels (i.e. months on the top row and year in the second row).\\r\\n\\r\\nIn hindsight, I could have created a custom column that concatenated year and month number, but during development I found severe slowness of the Power BI report as-is (likely due to the Python predictive analytics integration), so I opted to just display 2023 by filtering the visual (though this can also be done from within the Deneb code), and display the initial for each month.\\r\\n\\r\\n![Deneb initials for months](/src/assets/blog/2022-04-27--05.png)\\r\\n\\r\\nVega-Lite code structure:\\r\\n\\r\\n```\\r\\n\\"encoding\\": {\\r\\n              ...\\r\\n             \\"x\\": {\\"timeUnit\\": \\"month\\",\\r\\n                   \\"field\\": \\"OrderDate\\",\\r\\n                   \\"axis\\": { \\"labelAlign\\": \\"center\\",\\r\\n                             \\"labelExpr\\": \\"datum.label[0]\\" }\\r\\n```\\r\\n\\r\\nI haven\'t replicated the original for every detail, but have the general outlay in Deneb, and the rest would be minor finessing.\\r\\n\\r\\nThis is the finalised code:\\r\\n\\r\\n```\\r\\n{\\r\\n  \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n  \\"bounds\\": \\"flush\\",\\r\\n  \\"spacing\\": 6,\\r\\n  \\"params\\": [{\\"name\\": \\"pts\\",\\r\\n              \\"select\\": \\"interval\\"\\r\\n            }],\\r\\n  \\"hconcat\\": [\\r\\n     {\\"mark\\": { \\"type\\": \\"circle\\",\\r\\n                \\"size\\": 50,\\r\\n                \\"tooltip\\": true\\r\\n     },\\r\\n      \\"width\\": 150,\\r\\n      \\"height\\": 530,\\r\\n      \\"encoding\\": {\\r\\n                   \\"y\\": {\\"field\\": \\"Subcategory\\",\\r\\n                         \\"type\\": \\"nominal\\",\\r\\n                         \\"title\\": null,\\r\\n                         \\"axis\\": {\\"labelFontSize\\": 9, \\"grid\\": true, \\"tickBand\\": \\"extent\\", \\"gridColor\\": \\"#f6f6f6\\", \\"gridWidth\\": 1},\\r\\n                         \\"sort\\": {\\"op\\": \\"sum\\", \\"field\\": \\"Total quantity\\", \\"order\\": \\"descending\\"}\\r\\n                        },\\r\\n                   \\"x\\": {\\"timeUnit\\": \\"month\\",\\r\\n                         \\"field\\": \\"OrderDate\\",\\r\\n                         \\"title\\": null,\\r\\n                         \\"axis\\": { \\"labelAlign\\": \\"center\\",\\r\\n                                   \\"labelExpr\\": \\"datum.label[0]\\" }\\r\\n                        },\\r\\n                   \\"color\\": {\\r\\n                             \\"aggregate\\": \\"sum\\",\\r\\n                             \\"field\\": \\"Total quantity\\",\\r\\n                             \\"scale\\":  {\\r\\n                               \\"domainMin\\": 0, \\"domainMax\\": 100000,\\r\\n                               \\"range\\": [\\"#cbf2f2\\", \\"#82e0e0\\", \\"#90dfdf\\", \\"#32c9c9\\", \\"#19abab\\", \\"#048e8e\\"] }\\r\\n                            },\\r\\n                   \\"tooltip\\": [{\\"timeUnit\\": \\"year\\", \\"field\\": \\"OrderDate\\", \\"title\\": \\"YEAR\\"},\\r\\n                               {\\"timeUnit\\": \\"month\\", \\"field\\": \\"OrderDate\\", \\"title\\": \\"MONTH\\"},\\r\\n                               {\\"field\\": \\"Category\\", \\"type\\": \\"nominal\\", \\"title\\": \\"CATEGORY\\"},\\r\\n                               {\\"field\\": \\"Subcategory\\", \\"type\\": \\"nominal\\", \\"title\\": \\"SUBCATEGORY\\"},\\r\\n                               {\\"aggregate\\": \\"sum\\", \\"field\\": \\"Total quantity\\", \\"title\\": \\"QUANTITY\\"}]\\r\\n                  }\\r\\n     },\\r\\n     {\\"mark\\": { \\"type\\": \\"bar\\", \\"tooltip\\": true},\\r\\n      \\"width\\": 100,\\r\\n      \\"height\\": 530,\\r\\n      \\"encoding\\": {\\r\\n                   \\"y\\": {\\"field\\": \\"Subcategory\\",\\r\\n                         \\"type\\": \\"nominal\\",\\r\\n                         \\"title\\": null,\\r\\n                         \\"sort\\": {\\"op\\": \\"sum\\", \\"field\\": \\"Total quantity\\", \\"order\\": \\"descending\\"},\\r\\n                         \\"axis\\": {\\"labelFontSize\\": 9, \\"labels\\": false, \\"grid\\": true, \\"gridColor\\": \\"#f6f6f6\\", \\"gridWidth\\": 1}\\r\\n                        },\\r\\n                   \\"x\\": {\\"field\\": \\"Total quantity\\",\\r\\n                         \\"type\\": \\"quantitative\\",\\r\\n                         \\"aggregate\\": \\"sum\\",\\r\\n                         \\"title\\": null,\\r\\n                         \\"axis\\": {\\"labels\\": false,\\r\\n                                  \\"gridColor\\": \\"white\\"\\r\\n                         }\\r\\n                        },\\r\\n                   \\"color\\": {\\"aggregate\\": \\"sum\\",\\r\\n                             \\"field\\": \\"Total quantity\\",\\r\\n                             \\"scale\\":  {\\"range\\": [\\"#cbf2f2\\", \\"#82e0e0\\", \\"#90dfdf\\", \\"#32c9c9\\", \\"#19abab\\", \\"#048e8e\\"] }\\r\\n                            },\\r\\n                   \\"tooltip\\": [{\\"timeUnit\\": \\"year\\", \\"field\\": \\"OrderDate\\", \\"title\\": \\"YEAR\\"},\\r\\n                               {\\"field\\": \\"Category\\", \\"type\\": \\"nominal\\", \\"title\\": \\"CATEGORY\\"},\\r\\n                               {\\"field\\": \\"Subcategory\\", \\"type\\": \\"nominal\\", \\"title\\": \\"SUBCATEGORY\\"},\\r\\n                               {\\"aggregate\\": \\"sum\\", \\"field\\": \\"Total quantity\\", \\"title\\": \\"QUANTITY\\"}]\\r\\n                   }\\r\\n     },\\r\\n     {\\"mark\\": {\\"type\\": \\"text\\", \\"align\\": \\"left\\", \\"x\\": 0, \\"fontSize\\": 9},\\r\\n      \\"width\\": 50,\\r\\n      \\"height\\": 530,\\r\\n      \\"encoding\\": {\\"text\\": {\\"aggregate\\": \\"sum\\",\\r\\n                            \\"field\\": \\"Total quantity\\"\\r\\n                           },\\r\\n                   \\"y\\": {\\"field\\": \\"Subcategory\\",\\r\\n                         \\"type\\": \\"nominal\\",\\r\\n                         \\"title\\": null,\\r\\n                         \\"sort\\": {\\"op\\": \\"sum\\", \\"field\\": \\"Total quantity\\", \\"order\\": \\"descending\\"},\\r\\n                         \\"axis\\": {\\"labels\\": false, \\"labelFontSize\\": 9}\\r\\n                        }\\r\\n                  }\\r\\n     }\\r\\n  ],\\r\\n  \\"config\\": {\\"legend\\": {\\"disable\\": true} }\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n### Deneb visual 2: Zoomable scatterplot\\r\\n\\r\\nThe second custom visual is yet another design element mimicked from a Tableau Public visualisation by [Pradeep Kumar G](https://twitter.com/pradeep_zen), this time named **[Profit Analysis - Sample Superstore](https://public.tableau.com/app/profile/pradeepkumar.g/viz/ProfitAnalysis-SampleSuperstore/viz)**.\\r\\n\\r\\n* **[https://public.tableau.com/app/profile/pradeepkumar.g/viz/ProfitAnalysis-SampleSuperstore/viz](https://public.tableau.com/app/profile/pradeepkumar.g/viz/ProfitAnalysis-SampleSuperstore/viz)**\\r\\n\\r\\nThe original dashboard appears as below:\\r\\n\\r\\n![Tableau profit dashboard by Pradeep Kumar](/src/assets/blog/2022-04-27--06.png)\\r\\n\\r\\nOnce again, you need to scroll down a bit further to find the design element I tried to replicate with Deneb:\\r\\n\\r\\n![Tableau profit dashboard element by Pradeep Kumar](/src/assets/blog/2022-04-27--07.png)\\r\\n\\r\\nThis was much easier to create, as I simply modified an existing official Vega-Lite scatterplot example found here:\\r\\n\\r\\n* **[https://vega.github.io/vega-lite/examples/selection_translate_scatterplot_drag.html](https://vega.github.io/vega-lite/examples/selection_translate_scatterplot_drag.html)**\\r\\n\\r\\nThe main advantage of using Deneb here is the scatterplot has the ability to easily zoom in and out using the mouse scrollwheel, and pan using mouse-click-hold-and-drag action, whereas Power BI out of-the-box (as of at the time of writing), requires a lot of clicking around for the user to use the zoom slice for each axis.\\r\\n\\r\\n![Power BI zoom slicer on scaterplot](/src/assets/blog/2022-04-27--08.png)\\r\\n\\r\\nThe original design element uses a hexagon with a centred dot for each point, and as Kerry Kolosko\'s blog shows, it is possible to place unique shapes and pictures as marks using Deneb:\\r\\n\\r\\n* **[https://kerrykolosko.com/images-and-custom-shapes-in-deneb](https://kerrykolosko.com/images-and-custom-shapes-in-deneb)**\\r\\n\\r\\nThough there may be a limitation to the level of detail in creating these marks as SVG paths. I created the hexagon using https://vecta.io/, but was unable to add the centre dot using Vega-Lite, either because multi-path support doesn\'t exist as yet for marks, or I have simply struggled to figure out how to make it work.\\r\\n\\r\\n![Hexagon shape created using vecta.io](/src/assets/blog/2022-04-27--09.png)\\r\\n\\r\\nVega-Lite code structure:\\r\\n\\r\\n```\\r\\n  ...\\r\\n    \\"mark\\": {\\r\\n             \\"type\\": \\"point\\", \\r\\n             \\"shape\\": \\"M-3.671-1.9184L-.5855-3.875l3.0856 1.9566v2.837L-.5855 2.875-3.671.9186z\\"\\r\\n```\\r\\n\\r\\nThe main challenge of this visual was to add profit margin on the x-axis, and as a value in general, per customer. The reason for this is because I originally had a DAX measure that involved variables to help perform the calculation for profit margin, but it seemed to produce incorrect results when added to the Deneb visual. \\r\\n\\r\\nSo instead, I added both profit and sales measures to the Deneb visual (which were independently correct), then within the visual performed the profit margin calculation per customer.\\r\\n\\r\\nVega-Lite code structure:\\r\\n\\r\\n```\\r\\n  ...\\r\\n      \\"transform\\": [\\r\\n        {\\r\\n          \\"aggregate\\": [\\r\\n            {\\"op\\": \\"sum\\", \\"field\\": \\"Total profit\\", \\"as\\": \\"sum_profit\\"},\\r\\n            {\\"op\\": \\"sum\\", \\"field\\": \\"Total sales\\", \\"as\\": \\"sum_sales\\"} ],\\r\\n            \\"groupby\\": [\\"CustomerID\\"]\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_profit\\", \\"as\\": \\"Profit\\"\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_sales\\", \\"as\\": \\"Sales\\"\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_profit/datum.sum_sales * 100\\", \\"as\\": \\"Profit margin\\"\\r\\n        },\\r\\n```\\r\\n\\r\\nThen I added condition colouring for the points, similar to the Tableau design reference, whereby any values with a profit margin less than 0% would be turned red.\\r\\n\\r\\n```\\r\\n  ...\\r\\n  \\"color\\": {\\r\\n    \\"condition\\": {\\r\\n      \\"test\\": \\"datum[\'Profit\'] < 0 || datum[\'Profit margin\'] < 0\\",\\r\\n      \\"value\\": \\"#ff0000\\"}},\\r\\n```\\r\\n\\r\\nThe last bells-and-whistles to add were to include an overlay of median values of the x-axis for profit margin, and the y-axis for profit, across all customers. Unlike the concatenation method used previously, since thi is just overlaying \\"rules\\" i.e. lines for the medians, views are simply added within the same layer, as opposed to beside each other.\\r\\n\\r\\n```\\r\\n{\\r\\n  ...\\r\\n  \\"layer\\": [\\r\\n    {\\r\\n      ...\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"point\\", \\r\\n        ...\\r\\n    },\\r\\n    {\\r\\n      ...\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"rule\\",\\r\\n        \\"strokeDash\\": [7, 6]},\\r\\n      \\"encoding\\": {\\r\\n        \\"x\\": {\\r\\n          \\"aggregate\\": \\"median\\",\\r\\n          \\"field\\": \\"Profit margin\\",\\r\\n           ...\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      ...\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"rule\\",\\r\\n        \\"strokeDash\\": [7, 6]},\\r\\n      \\"encoding\\": {\\r\\n        \\"y\\": {\\r\\n          \\"aggregate\\": \\"median\\",\\r\\n          \\"field\\": \\"Profit\\",\\r\\n          ...\\r\\n      }\\r\\n    }\\r\\n  ]\\r\\n```\\r\\n\\r\\nThe final product looks like this:\\r\\n\\r\\n![Deneb scatterplot in Power BI](/src/assets/blog/2022-04-27--10.png)\\r\\n\\r\\nVega-Lite code structure:\\r\\n\\r\\n```\\r\\n{\\r\\n  \\"data\\": {\\"name\\": \\"dataset\\"},\\r\\n  \\"layer\\": [\\r\\n    {\\r\\n      \\"params\\": [{\\r\\n        \\"name\\": \\"grid\\",\\r\\n        \\"select\\": \\"interval\\",\\r\\n        \\"bind\\": \\"scales\\"}],\\r\\n      \\"transform\\": [\\r\\n        {\\r\\n          \\"aggregate\\": [\\r\\n            {\\"op\\": \\"sum\\", \\"field\\": \\"Total profit\\", \\"as\\": \\"sum_profit\\"},\\r\\n            {\\"op\\": \\"sum\\", \\"field\\": \\"Total sales\\", \\"as\\": \\"sum_sales\\"} ],\\r\\n            \\"groupby\\": [\\"CustomerID\\"]\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_profit\\", \\"as\\": \\"Profit\\"\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_sales\\", \\"as\\": \\"Sales\\"\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_profit/datum.sum_sales * 100\\", \\"as\\": \\"Profit margin\\"\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"(datum.sum_profit/datum.sum_sales) * (datum.sum_profit/datum.sum_sales)\\", \\"as\\": \\"Point size\\"\\r\\n        }],\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"point\\", \\r\\n        \\"shape\\": \\"M-3.671-1.9184L-.5855-3.875l3.0856 1.9566v2.837L-.5855 2.875-3.671.9186z\\",\\r\\n        \\"tooltip\\": true,\\r\\n        \\"color\\":\\"#33cbcb\\",\\r\\n        \\"filled\\": false},\\r\\n      \\"encoding\\": {\\r\\n        \\"x\\": {\\r\\n          \\"field\\": \\"Profit margin\\",\\r\\n          \\"type\\": \\"quantitative\\",\\r\\n          \\"scale\\": {\\r\\n            \\"domain\\": [-25, 25],\\r\\n            \\"domainMax\\": 100,\\r\\n            \\"domainMin\\": -150},\\r\\n          \\"axis\\": {\\"format\\": \\".0f\\", \\"titleFontSize\\": 11},\\r\\n          \\"title\\": \\"PROFIT MARGIN  (%)\\"},\\r\\n        \\"y\\": {\\r\\n          \\"field\\": \\"Profit\\",\\r\\n          \\"type\\": \\"quantitative\\",\\r\\n          \\"axis\\": {\\r\\n            \\"titleFontSize\\": 11,\\r\\n            \\"titleAngle\\": 360,\\r\\n            \\"titlePadding\\": 30},\\r\\n          \\"title\\": \\"PROFIT  ($)\\",\\r\\n          \\"scale\\": {\\r\\n            \\"domain\\": [-100, 100],\\r\\n            \\"domainMax\\": 12000,\\r\\n            \\"domainMin\\": -850 }},\\r\\n        \\"color\\": {\\r\\n          \\"condition\\": {\\r\\n            \\"test\\": \\"datum[\'Profit\'] < 0 || datum[\'Profit margin\'] < 0\\",\\r\\n            \\"value\\": \\"#ff0000\\"}},\\r\\n        \\"size\\": {\\r\\n          \\"field\\": \\"Point size\\",\\r\\n          \\"type\\": \\"quantitative\\"},\\r\\n        \\"tooltip\\": [\\r\\n          {\\"field\\": \\"CustomerID\\", \\"type\\": \\"nominal\\", \\"title\\": \\"CUSTOMER ID\\"},\\r\\n          {\\"field\\": \\"Profit\\", \\"title\\": \\"PROFIT ($)\\"},\\r\\n          {\\"field\\": \\"Sales\\", \\"title\\": \\"SALES ($)\\"},\\r\\n          {\\"field\\": \\"Profit margin\\", \\"format\\": \\".1f\\", \\"title\\": \\"PROFIT MARGIN (%)\\"}]}\\r\\n    },\\r\\n    {\\r\\n      \\"transform\\": [\\r\\n        {\\r\\n          \\"aggregate\\": [\\r\\n            {\\"op\\": \\"sum\\", \\"field\\": \\"Total profit\\", \\"as\\": \\"sum_profit\\"},\\r\\n            {\\"op\\": \\"sum\\", \\"field\\": \\"Total sales\\", \\"as\\": \\"sum_sales\\"} ],\\r\\n          \\"groupby\\": [\\"CustomerID\\"]\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_profit\\", \\"as\\": \\"Profit\\"\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_sales\\", \\"as\\": \\"Sales\\"\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_profit/datum.sum_sales * 100\\", \\"as\\": \\"Profit margin\\"\\r\\n        }],\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"rule\\",\\r\\n        \\"strokeDash\\": [7, 6]},\\r\\n      \\"encoding\\": {\\r\\n        \\"x\\": {\\r\\n          \\"aggregate\\": \\"median\\",\\r\\n          \\"field\\": \\"Profit margin\\",\\r\\n          \\"type\\": \\"quantitative\\"},\\r\\n        \\"color\\": {\\"value\\": \\"#b3b3b3\\"},\\r\\n        \\"size\\": {\\"value\\": 2}\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\"transform\\": [\\r\\n        {\\r\\n          \\"aggregate\\": [\\r\\n            {\\"op\\": \\"sum\\", \\"field\\": \\"Total profit\\", \\"as\\": \\"sum_profit\\"}],\\r\\n          \\"groupby\\": [\\"CustomerID\\"]\\r\\n        },\\r\\n        {\\r\\n          \\"calculate\\": \\"datum.sum_profit\\", \\"as\\": \\"Profit\\"\\r\\n        }],\\r\\n      \\"mark\\": {\\r\\n        \\"type\\": \\"rule\\",\\r\\n        \\"strokeDash\\": [7, 6]},\\r\\n      \\"encoding\\": {\\r\\n        \\"y\\": {\\r\\n          \\"aggregate\\": \\"median\\",\\r\\n          \\"field\\": \\"Profit\\",\\r\\n          \\"type\\": \\"quantitative\\"},\\r\\n        \\"color\\": {\\"value\\": \\"#b3b3b3\\"},\\r\\n        \\"size\\": {\\"value\\": 2}\\r\\n      }\\r\\n    }\\r\\n  ],\\r\\n  \\"config\\": {\\"legend\\": {\\"disable\\": true} }\\r\\n}\\r\\n```\\r\\n\\r\\nThat\'s it! A couple of wonderful custom visualisations (with tooltips too). Hopefully on my next attempt they will be ones of my own design.\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-04-27.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1650117600,"title":"Add forecasts from Python using Visual Studio Code to Power BI\\r","name":"add-forecasts-from-python-using-visual-studio-code-to-power-bi","tech":"logo-python\\r","tags":"[\\"Power BI\\", \\"Python\\", \\"Power Query\\"]\\r","date":"17 April 2022\\r","content":"This is a record of my first attempt at utilising Python for predictive analytics and embedding it into Power BI, using the International Marketplace dataset created using SQL Server Integration Services from my [previous blog post](https://makuharistudio.github.io/#/blog/international-marketplace-dataset-created-with-integration-services).\\r\\n\\r\\nThe normalised version of the output is used, which you can download from here:\\r\\n\\r\\n**[https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/International%20Marketplace%20Normalised%20for%20Power%20BI.xlsx?raw=true](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/International%20Marketplace%20Normalised%20for%20Power%20BI.xlsx?raw=true)**\\r\\n\\r\\n\\r\\n\\r\\n## Step 1. Setup Visual Studio Code to run Python\\r\\n\\r\\n### Install the Python extension for Visual Studio Code\\r\\n\\r\\nInstall the Microsoft verified Python extension.\\r\\n\\r\\n![Visual Studio Code Python extension](/src/assets/blog/2022-04-17--01.png)\\r\\n\\r\\n\\r\\n\\r\\n### Create a Virtual Environment to allow import of Python modules\\r\\n\\r\\nThe set up of a virtual environment is so that you can install as many libraries for data analysis and visualisation using Python (i.e. model training and testing), which may be more than the actual libraries needed for the code you ultimately embed in your Power BI report.\\r\\n\\r\\nIf you want to link your project to GitHub, follow the standard setup steps, i.e.:\\r\\n* Create a public repository in GitHub.com\\r\\n* Create a local repository for the project (Code > Open with GitHub Desktop)\\r\\n\\r\\nFrom Visual Studio Code, open a cmd terminal\\r\\n\\r\\n![Open a command terminal, part 1](/src/assets/blog/2022-04-17--02.png)\\r\\n\\r\\nVisual Studio opens a PowerShell terminal by default, so switch it to Command Prompt.\\r\\n\\r\\n![Open a command terminal, part 2](/src/assets/blog/2022-04-17--03.png)\\r\\n\\r\\nThe reason for this is PowerShell will by default block running potentially harmful scripts.\\r\\nSo you should be using cmd terminal from within Visual Studio Code, rather than the PowerShell terminal.\\r\\n\\r\\n![Open a command terminal, part 3](/src/assets/blog/2022-04-17--04.png)\\r\\n\\r\\nFrom the Visual Studio Code cmd terminal, use the following command structure:\\r\\n\\r\\n```\\r\\npython -m venv yourpythonprojectfolder\\\\yourvenvname\\r\\n```\\r\\n\\r\\nFor example:\\r\\n```\\r\\npython -m venv C:\\\\Project\\\\python-for-power-bi\\\\venv\\r\\n```\\r\\n\\r\\n![Create virtual environment, part 1](/src/assets/blog/2022-04-17--05.png)\\r\\n\\r\\nThe venv virtual environment will appear as a folder under VS Code\'s Explorer pane.\\r\\n\\r\\n![Create virtual environment, part 2](/src/assets/blog/2022-04-17--06.png)\\r\\n\\r\\n\\r\\n\\r\\n### Activating the Virtual Environment\\r\\n\\r\\nCommand structure:\\r\\n```\\r\\nyourvenvname\\\\Scripts\\\\activate\\r\\n```\\r\\n\\r\\nFor example:\\r\\n```\\r\\nvenv\\\\Scripts\\\\activate\\r\\n```\\r\\n\\r\\n![Run virtual environment](/src/assets/blog/2022-04-17--07.png)\\r\\n\\r\\n**Note:** When you close Visual Studio Code, the environment will be stopped. To activate it again, use the above command from a cmd terminal in Visual Studio Code.\\r\\n\\r\\n\\r\\n\\r\\n### Add the Virtual Environment to .gitignore\\r\\n\\r\\nLooking at the previous screenshot, you can see the Source Control icon has over 900 items pending change due to the venv environment. The Python modules that will be later installed for model training and testing, will also be added to that folder.\\r\\n\\r\\nSo to avoid pushing all those unnecesary files to GitHub (which _will_ stall it), create a new .gitignore file in your folder\'s directory and add venv (or whatever your virtual environments folder name is), inside that .gitignore file.\\r\\n\\r\\nYou will notice the number of pending changes are cut down, and your virtual environment\'s folder should be greyed out.\\r\\n\\r\\n![Add virtual environment to .gitignore](/src/assets/blog/2022-04-17--08.png)\\r\\n\\r\\n\\r\\n\\r\\n### Deactivate and delete Virtual Environment\\r\\n\\r\\nTo deactivate the environment (can be re-activated again later), use the deactivate command.\\r\\n\\r\\n```\\r\\ndeactivate\\r\\n```\\r\\n\\r\\nIf you need to delete the environment, use the following code via a PowerShell terminal if its folder was named venv, otherwise replace venv with the folder name you used.\\r\\n\\r\\n```\\r\\nrm -r venv\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n### Import Python libraries\\r\\n\\r\\nAfter performing the steps above (minus deactivating then deleting the environment), you can now install Python libraries a.k.a. modules. Be sure the (venv) prefix is displayed before running, so you know it installs to the virtual environment.\\r\\n\\r\\nCommand structure:\\r\\n```\\r\\npip install pythonmodulename\\r\\n```\\r\\n\\r\\nFor example:\\r\\n```\\r\\npip install pandas\\r\\npip install numpy\\r\\npip install scikit-learn\\r\\npip install matplotlib\\r\\npip install seaborn\\r\\n```\\r\\n\\r\\n![Install Python libraries](/src/assets/blog/2022-04-17--09.png)\\r\\n\\r\\nYou may encounter a pip message preventing installation of subsequent libraries due to version incompatibility. In my case, the message asked to run the following, which you may need to do for your own folder.\\r\\n\\r\\n```\\r\\nc:\\\\project\\\\python-for-power-bi\\\\venv\\\\scripts\\\\python.exe -m pip install --upgrade pip\\r\\n```\\r\\n\\r\\nYou can test the environment and Python libraries, by creating a Python script with .py file format extension in your main folder with the following code.\\r\\n\\r\\n```\\r\\nimport pandas as pd\\r\\nimport numpy as np\\r\\n\\r\\njusticeLeague = np.array([\\r\\n   [1, \'Superman\', 1938],\\r\\n   [2, \'Batman\', 1939],\\r\\n   [3, \'Wonderwoman\', 1941],\\r\\n   [4, \'Flash\', 1940,]\\r\\n])\\r\\n\\r\\ncolumnNames = [\\r\\n   \'League ID\',\\r\\n   \'Codename\',\\r\\n   \'First Appearance\'\\r\\n]\\r\\n\\r\\ndf = pd.DataFrame(data = justiceLeague, columns = columnNames)\\r\\nprint(df)\\r\\n```\\r\\n\\r\\nThen click Run to render the script. If the data displays, then Python is working from the virtual environment.\\r\\n\\r\\n![Test Python script displays](/src/assets/blog/2022-04-17--10.png)\\r\\n\\r\\n\\r\\n\\r\\n### Clearing terminal\\r\\n\\r\\nVisual Studio Code has removed the hotkey shortcut for clearing console, which is going to be regularly used for trial-and-error coding and displaying results.\\r\\n\\r\\nTo create a shortcut for it, from Visual Studio Code navigate to File > Preferences > Keyboard Shortcuts, then search for the command *workbench.action.terminal.clear*, and apply your keybinding, for example Ctrl + K.\\r\\n\\r\\n![Set up shortcut to clear terminal](/src/assets/blog/2022-04-17--11.png)\\r\\n\\r\\n\\r\\n\\r\\n### Allow plotting to display within Visual Studio Code\\r\\n\\r\\nTo allow Visual Studio Code to display plots i.e. visualisations, place this tag at the top of your Python script: #%%\\r\\n\\r\\nIt will automatically add a paired tag to the end of the script.\\r\\n\\r\\nFor example, replace your test Python file\'s contents with this:\\r\\n\\r\\n```\\r\\n#%%\\r\\n\\r\\nimport pandas as pd\\r\\nimport numpy as np\\r\\nimport matplotlib.pyplot as plt\\r\\n\\r\\nmonthlySales = np.array([\\r\\n   [1, 21],\\r\\n   [2, 17],\\r\\n   [3, 25],\\r\\n   [4, 29],\\r\\n   [5, 15],\\r\\n   [6, 11],\\r\\n   [7, 18],\\r\\n   [8, 13],\\r\\n   [9, 7],\\r\\n   [10, 3],\\r\\n   [11, 14],\\r\\n   [12, 32]\\r\\n])\\r\\n\\r\\ncolumnNames = [\\r\\n   \'Month\',\\r\\n   \'Sales\'\\r\\n]\\r\\n\\r\\ndf = pd.DataFrame(data = monthlySales, columns = columnNames)\\r\\nmonth = df.loc[:, \'Month\'].values\\r\\nsales = df.loc[:, \'Sales\'].values\\r\\nplt.plot(month, sales)\\r\\n```\\r\\n\\r\\nThen click the \\"Run Cell\\" hyperlink at the top of the script. If it isn\'t already installed, ipykernel package will prompt to be installed in your virtual environment, which you will need.\\r\\n\\r\\n![Install ipykernel](/src/assets/blog/2022-04-17--12.png)\\r\\n\\r\\nOnce complete, the plot should display.\\r\\n\\r\\n![Data visual in Visual Studio Code](/src/assets/blog/2022-04-17--13.png)\\r\\n\\r\\n\\r\\n\\r\\n## Step 2. Import data and do preliminary visualisation\\r\\n\\r\\nFor the moment, I am choosing to just look at the OrderDate and Profit columns i.e. ignoring other independent variables.\\r\\nAlthough the following can easily be done in an Excel or Power BI linechart, using Python I want to see the monthly profits.\\r\\n\\r\\nFirst by listing out the results:\\r\\n\\r\\n```\\r\\nimport pandas as pd\\r\\nimport numpy as np\\r\\n\\r\\ndata = pd.read_excel (r\'https://github.com/makuharistudio/data-visualisation-datasets/blob/main/International%20Marketplace%20sales/International%20Marketplace%20Normalised%20for%20Power%20BI.xlsx\', sheet_name=\'FactSales\', parse_dates = True)\\r\\ndf = pd.DataFrame(data, columns= [\'OrderDate\',\'Profit\'])\\r\\ndf.set_index(\'OrderDate\')\\r\\n\\r\\n# create YearMonth column, and total column by YearMonth\\r\\ndf[\'YearMonth\'] = df[\'OrderDate\'].dt.to_period(\\"M\\")\\r\\ngroupby = df.groupby([\'YearMonth\'])\\r\\ndf[\'MonthlyProfit\'] = groupby[\'Profit\'].transform(np.sum)\\r\\n# remove OrderDate and Profit column so duplicate rows (of YearMonth and MonthlyProfit) becomes evident\\r\\n# .duplicated() checks if entire row\'s values match a previous row, and returns True if the case except for the first occurrence\\r\\ndf = df.drop(columns=[\'OrderDate\',\'Profit\'])\\r\\ndf.drop_duplicates(keep=\'first\', inplace = True)\\r\\ndf.set_index(\'YearMonth\')\\r\\ndf.index.freq = \'MS\'\\r\\n\\r\\nprint(df)\\r\\n```\\r\\n\\r\\n![List of monthly profit](/src/assets/blog/2022-04-17--14.png)\\r\\n\\r\\nThen adding the following code after that to plot/visualise it:\\r\\n\\r\\n```\\r\\nimport matplotlib.pyplot as plt\\r\\n\\r\\ndf[\'YearMonth\'] = pd.to_datetime(df[\'YearMonth\'].astype(str) + \'-01\')\\r\\nyearMonth = df.loc[:, \'YearMonth\'].values\\r\\nmonthlyProfit = df.loc[:, \'MonthlyProfit\'].values\\r\\nplt.plot(yearMonth, monthlyProfit, c = \'b\', marker = \'.\', markersize = 10)\\r\\nplt.xticks(fontsize = 8)\\r\\nplt.yticks(fontsize = 8)\\r\\nplt.xlabel(\'Year-Month\', fontsize = 10)\\r\\nplt.ylabel(\'Millions $\', fontsize = 10)\\r\\n```\\r\\n\\r\\n![Plot of monthly profit](/src/assets/blog/2022-04-17--15.png)\\r\\n\\r\\n\\r\\n\\r\\n## Step 3. Training and testing prediction models\\r\\n\\r\\nThis is the point where you would train and test models, with the ultimate objective of generating a list of forecasted figures to load into Power BI as a separate data file. The reason for this is it\'s better than embeddding the Python model inside the Power BI report directly, especially as complexity and result sets increase.\\r\\n\\r\\nAs at the time of writing, I am still aways off from being any kind of statistician, so I\'ll defer to using the exponential smoothing method Absent Data took in his blog post:\\r\\n\\r\\n**[https://www.absentdata.com/power-bi/forecasting-with-python-and-power-bi](https://www.absentdata.com/power-bi/forecasting-with-python-and-power-bi)**\\r\\n\\r\\nLike Absent Data, I\'ve started off with a daily dataset that I want aggregated to monthly values (as the Power BI report I\'ll be designing won\'t be allowing drill down past monthly level for the forecast).\\r\\n\\r\\nFrom Step 2, you can see that I\'ve needed to do some tinkering to get the monthly totals so that I could visualise them. That code will need to be incorporated into what we add into Power BI later, as it\'ll be a needed prep work step, otherwise I end up with forecasted values for Day 1 for each month, rather than the sum of all days for each month.\\r\\n\\r\\nFrom Visual Studio Code, the results look like this when listed:\\r\\n\\r\\n```\\r\\nfrom statsmodels.tsa.holtwinters import ExponentialSmoothing\\r\\nmodel = ExponentialSmoothing(df[\'MonthlyProfit\'],trend=\'mul\',seasonal=\'mul\',seasonal_periods=12).fit()\\r\\nrange = pd.date_range(\'01-01-2024\', periods=12, freq=\'MS\')\\r\\npredictions = model.forecast(12)\\r\\npredictions_range = pd.DataFrame({\'MonthlyProfit\':predictions,\'YearMonth\':range})\\r\\n\\r\\nprint(predictions_range)\\r\\n```\\r\\n\\r\\n![List of forecasted monthly profit](/src/assets/blog/2022-04-17--16.png)\\r\\n\\r\\nThen when visualised, show a similar pattern to the original dataset:\\r\\n\\r\\n```\\r\\nimport matplotlib.pyplot as plt\\r\\n\\r\\nyearMonthForecast = predictions_range.loc[:, \'YearMonth\'].values\\r\\nmonthlyProfitForecast = predictions_range.loc[:, \'MonthlyProfit\'].values\\r\\ndf[\'YearMonth\'] = pd.to_datetime(df[\'YearMonth\'].astype(str) + \'-01\')\\r\\nyearMonth = df.loc[:, \'YearMonth\'].values\\r\\nmonthlyProfit = df.loc[:, \'MonthlyProfit\'].values\\r\\nplt.plot(yearMonth, monthlyProfit, c = \'b\', marker = \'.\', markersize = 10)\\r\\nplt.plot(yearMonthForecast, monthlyProfitForecast, c = \'orange\', marker = \'.\', markersize = 10)\\r\\nplt.xticks(fontsize = 8)\\r\\nplt.yticks(fontsize = 8)\\r\\nplt.xlabel(\'Year-Month\', fontsize = 10)\\r\\nplt.ylabel(\'Millions $\', fontsize = 10)\\r\\n```\\r\\n\\r\\n![Plot of forecasted monthly profit](/src/assets/blog/2022-04-17--17.png)\\r\\n\\r\\n\\r\\n\\r\\n## Step 4. Integrate Python model into Power BI\\r\\n\\r\\nIn this scenario, only 12 values are produced, so there is likely minimal impact from incorporating it into Power BI.\\r\\n\\r\\n**Note:** However, if your scenario involves a larger output, it may be better to export the data from Visual Studio Code to a flat file using either of these commands, then loading the file to Power BI:\\r\\n\\r\\n```\\r\\ndf.to_csv(path_or_buf=\'export/filename.csv\', index=False)\\r\\ndf.to_excel(excel_writer=\'export/filename.xlsx\', index=False)\\r\\n```\\r\\n\\r\\nContinuing with our example, from Power Query in Power BI, I reference the fact table and perform a Group By to sum the daily profits of the original dataset.\\r\\n\\r\\n![Power Query Group By](/src/assets/blog/2022-04-17--18.png)\\r\\n\\r\\nThen convert the OrderDate to data type text, and split column on the forwardslash / delimiter at every occurrence.\\r\\n\\r\\n![Power Query split date column](/src/assets/blog/2022-04-17--19.png)\\r\\n\\r\\nThe reason for this is to create a new _text datatype_ column using dash delimiter, to align with Python\'s date formatting.\\r\\n\\r\\n```\\r\\n[Year] & \\"-\\"  & [Month] & \\"-\\" & \\r\\n(if Text.Length([Day]) = 1\\r\\nthen \\"0\\"\\r\\nelse \\"\\") & [Day]\\r\\n```\\r\\n\\r\\n![Power Query add custom date column](/src/assets/blog/2022-04-17--20.png)\\r\\n\\r\\nThen remove the unnecessary columns, so only the essential ones are included for the dataset that Python ingests.\\r\\n\\r\\n![Power Query remove unneeded columns](/src/assets/blog/2022-04-17--21.png)\\r\\n\\r\\nFrom Power Query\'s Transform tab, click \\"Run Python Script\\".\\r\\n\\r\\n![Power Query Run Python Script](/src/assets/blog/2022-04-17--22.png)\\r\\n\\r\\nWhilst most of the code from your Python script can be copy-and-pasted, note that the data source is the step in Query Settings prior to your Python script, and is named \\"dataset\\", so you need to adjust your script to accommodate for that.\\r\\n\\r\\n```\\r\\nimport pandas as pd\\r\\nimport numpy as np\\r\\ndf = pd.DataFrame(dataset, columns = [\'OrderDate\',\'Profit\'])\\r\\n\\r\\ndf[\'OrderDate\'] = pd.to_datetime(df[\'OrderDate\'], errors = \'ignore\')\\r\\n\\r\\ndf.set_index(\'OrderDate\')\\r\\ndf[\'YearMonth\'] = df[\'OrderDate\'].dt.to_period(\\"M\\")\\r\\ngroupby = df.groupby([\'YearMonth\'])\\r\\ndf[\'MonthlyProfit\'] = groupby[\'Profit\'].transform(np.sum)\\r\\ndf = df.drop(columns=[\'OrderDate\',\'Profit\'])\\r\\ndf.drop_duplicates(keep=\'first\', inplace = True)\\r\\ndf.set_index(\'YearMonth\')\\r\\ndf.index.freq = \'MS\'\\r\\nfrom statsmodels.tsa.holtwinters import ExponentialSmoothing\\r\\nmodel = ExponentialSmoothing(df[\'MonthlyProfit\'],trend=\'mul\',seasonal=\'mul\',seasonal_periods=12).fit()\\r\\nrange = pd.date_range(\'01-01-2024\', periods=12, freq=\'MS\')\\r\\npredictions = model.forecast(12)\\r\\npredictions_range = pd.DataFrame({\'MonthlyProfit\':predictions,\'YearMonth\':range})\\r\\n```\\r\\n\\r\\n![Power Query add Python script](/src/assets/blog/2022-04-17--23.png)\\r\\n\\r\\n**Important!**: Upon clicking OK, you may encounter error messages preventing the script from running, asking for you to install Python libraries in order to proceed. The reason for this is that the libraries you installed in Visual Studio Code were for your virtual environment. However, Power BI does not access that virtual environment, and instead is accessing your native Python installation, which you may not have installed the libraries to.\\r\\n\\r\\nThen click to expand Table for the predictions_range variable.\\r\\n\\r\\n![Power Query expand Table](/src/assets/blog/2022-04-17--24.png)\\r\\n\\r\\n![Power Query expanded Table with monthly forecast values](/src/assets/blog/2022-04-17--25.png)\\r\\n\\r\\nConnect the output to your date or calendar table to help ensure the values plot in your Power BI time series visuals. **Note:** I am aware that best practice modelling typically advises to avoid 2 way relationships as much as possible, so that\'s something that needds to be looked into amending the data model here later on.\\r\\n\\r\\n![Power BI Model view connect to Calendar table](/src/assets/blog/2022-04-17--26.png)\\r\\n\\r\\nHere are the two line charts of actuals and forecasted figures next to each other:\\r\\n\\r\\n![Power BI line chart comparing actuals and forecast](/src/assets/blog/2022-04-17--27.png)\\r\\n\\r\\nThen following one of many tutorials you can find on YouTube to merge actuals and forecasted figures, you can create a single linechart like below:\\r\\n\\r\\n![Power BI line chart comparing actuals and forecast](/src/assets/blog/2022-04-17--28.png)\\r\\n\\r\\n\\r\\nMy recommendations are:\\r\\n\\r\\n* YouTube video: **[Showing actuals and forecasts in the same chart with Power BI by SQLBI](https://www.youtube.com/watch?v=DKgF-5QHY68)**\\r\\n\\r\\n* YouTube video: **[Combining ACTUALS and FORECAST as one LINE in Power BI by How to Power BI](https://www.youtube.com/watch?v=_TAGpAJ9rTQ)**\\r\\n\\r\\nThe second takes the first video one step futher by showing the calculation used to sum the actuals and forecasts into a single measure.\\r\\n\\r\\n\\r\\n\\r\\n### References\\r\\n\\r\\n* Blog post **[Forecasting with Python and Power BI by Absent Data](https://www.absentdata.com/power-bi/forecasting-with-python-and-power-bi)**\\r\\n\\r\\n* YouTube video **[How do I find and remove duplicate rows in pandas?](https://www.youtube.com/watch?v=ht5buXUMqkQ)**\\r\\n\\r\\n* YouTube video **[How to install Python Libraries in Visual Studio Code by Aditya Thakur](https://www.youtube.com/watch?v=ThU13tikHQw)**\\r\\n\\r\\n* Stack Overflow question **[How to show Python plots in Visual Studio Code](https://stackoverflow.com/questions/49992300)**\\r\\n\\r\\n* Stack Overflow question **[How to clear Visual Studio Code terminal](https://stackoverflow.com/questions/49992300)**\\r\\n\\r\\n* Stack Overflow question **[Python script in Power BI returns date as Microsoft.OleDb.Date](https://stackoverflow.com/questions/51929420/python-script-in-power-bi-returns-date-as-microsoft-oledb-date)**\\r\\n\\r\\n* Stack Overflow question **[Setting the x axis as time (years, months) for a set of values](https://stackoverflow.com/questions/28948898/setting-the-x-axis-as-time-years-months-for-a-set-of-values)**\\r\\n\\r\\n* LinkedIn Learning course **[Python: Working with Predictive Analytics by Isil Berkun](https://www.linkedin.com/learning/python-working-with-predictive-analytics)**\\r\\n\\r\\n* LinkedIn Learning course **[Python for Data Visualization by Michael Galarnyk and Madecraft](https://www.linkedin.com/learning/python-for-data-visualization)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-04-17.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1645880400,"title":"Find grouped records with a date that matches another date column using DAX\\r","name":"find-grouped-records-with-a-date-that-matches-another-date-column-using-dax","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"DAX\\"]\\r","date":"27 February 2022\\r","content":"How to use DAX to group records by an identity column, and see if the most recent row has a date value that matches a date value in another column.\\r\\n\\r\\nIn previous posts I\'ve tried to find __[window aggregate values using DAX](https://makuharistudio.github.io/#/blog/calculate-aggregate-for-grouped-rows-based-on-column-value-dax-version)__, and as many Power BI developers highlight, there are many ways to get the same outcome. However the difference between that previous post and this one is that the prior one applied a value to a specific row of the group, whereas this one applies the value to all rows of each grouping, which will be needed for other calculated columns.\\r\\n\\r\\nWhilst working on a small data integrity report at work, I came across this method which is a slightly modified script from a Power BI Communities post, intended to pull the desired value per grouping and apply it to all rows of each group.\\r\\n\\r\\n**DAX structure**\\r\\n```\\r\\nCustom column 1 =\\r\\nVAR identifiercolumn = \'Table\'[ID column]\\r\\nVAR findlatestrecord = CALCULATE( MAX( \'Table\'[Date A] ), ALLEXCEPT( \'Table\', \'Table\'[ID column] ) )\\r\\nRETURN\\r\\n   CALCULATE ( \\r\\n              MAX( \'Table\'[Date A] ),\\r\\n              FILTER( \'Table\', \'Table\'[Date A] = findlatestrecord ),\\r\\n                      \'Table\'[ID column] = identifiercolumn               \\r\\n   )\\r\\n```\\r\\nWhat should be noted is the aggregation under RETURN doesn\'t matter in this case i.e. it could be MIN or MAX, because the second declared variable targets the specific row to get its value from, rather than actually aggregating all values for the group.\\r\\n\\r\\nThe scenario I applied this to involves a series of flat files produced on separate days to represent historic and future orders. Each order is scheduled to be delivered on a specific date at a certain cost. The report is intended to highlight problematic data, such as Order IDs that were scheduled for a specific date in one file, but do not appear in the other files generated on that same date.\\r\\n\\r\\nIn this context, we want to know the most recent *Planned Delivery Date* applied to an *Order ID* based on the latest *File\'s date* that the *Order ID* appears in, then apply that value to all the rows for that *Order ID*\\r\\n\\r\\nIn the example below, there are 2 Order IDs, 8 and 9. *Order ID* 8 has its *Planned Delivery Date* moved earlier, and *Order ID* 9 has its own moved later, in subsequent files. The ones highlighted orange are the ones we want to display.\\r\\n\\r\\n![Sample dataset 1](/src/assets/blog/2022-02-27--01.png)\\r\\n\\r\\nApplying the above DAX structure, we get the following:\\r\\n\\r\\n**DAX implementation**\\r\\n```\\r\\nMost recent Planned Delivery Date = \\r\\nVAR orderid = \'Data integrity audit\'[Order ID]\\r\\nVAR highestfiledatebyorderid =\\r\\n    CALCULATE(\\r\\n        MAX( \'Data integrity audit\'[File\'s date] ), ALLEXCEPT( \'Data integrity audit\',\'Data integrity audit\'[Order ID] )\\r\\n    )\\r\\nRETURN\\r\\n    CALCULATE(\\r\\n        MAX ( \'Data integrity audit\'[Planned Delivery Date] ),\\r\\n        FILTER( \'Data integrity audit\', \'Data integrity audit\'[File\'s date] = highestfiledatebyorderid ),\\r\\n                \'Data integrity audit\'[Order ID] = orderid\\r\\n    )\\r\\n```\\r\\n\\r\\n![Applied DAX structure to find recent date value by Order ID](/src/assets/blog/2022-02-27--02.png)\\r\\n\\r\\n![Successfully applied DAX column added to table 1](/src/assets/blog/2022-02-27--03.png)\\r\\n\\r\\nNow that we have applied the most recent *Planned Delivery Date* for every row based on *Order ID* as an anchor, we just need to check to if the *Order ID* has a row reflecting that it appears in a file whose generation date is the same as the most recent *Planned Delivery Date*. In this context, it serves as affirmation that it was delivered on that day.\\r\\n\\r\\n**DAX structure**\\r\\n```\\r\\nCustom column 2 =\\r\\nIF (\\r\\n    ISBLANK(\\r\\n            CALCULATE(\\r\\n               FIRSTNONBLANK( \'Table\'[ID column], 1 ),\\r\\n               FILTER( ALLEXCEPT( \'Table\', \'Table\'[ID column] ),\\r\\n                                  \'Table\', \'Table\'[Custom column 1] = \'Table\'[Date B]               \\r\\n               )\\r\\n            )\\r\\n    )\\r\\n)\\r\\n```\\r\\n\\r\\nLooking at *Order ID* examples 8 and 16, the former has a matchng record and the latter does not.\\r\\n\\r\\n![Sample dataset 2](/src/assets/blog/2022-02-27--04.png)\\r\\n\\r\\n**DAX implementation**\\r\\n```\\r\\nDoes Order ID appear in File with date matching Delivery Date? = \\r\\nIF(\\r\\n    ISBLANK(\\r\\n        CALCULATE(\\r\\n            FIRSTNONBLANK(\'Data integrity audit\'[Order ID], 1),\\r\\n            FILTER( ALLEXCEPT(\'Data integrity audit\',\'Data integrity audit\'[Order ID] ),\\r\\n                              \'Data integrity audit\'[Most recent Planned Delivery Date] = \'Data integrity audit\'[File\'s date] )\\r\\n        )\\r\\n    ) = FALSE,\\r\\n    \\"Yes\\",\\r\\n    \\"No\\"\\r\\n)\\r\\n```\\r\\n\\r\\n![Applied DAX structure to match different date columns and apply to all records per group](/src/assets/blog/2022-02-27--05.png)\\r\\n\\r\\n![Successfully applied DAX column added to table 2](/src/assets/blog/2022-02-27--06.png)\\r\\n\\r\\nOther more complex columns can then be built on top of this one, in my case, creating a conditional column that categorises the different patterns to highlight areas where data integrity may require review.\\r\\n\\r\\n![Complex conditional DAX query built on top of the aforementioned queries](/src/assets/blog/2022-02-27--07.png)\\r\\n\\r\\n![Example categorisation from previous query added to a matrix](/src/assets/blog/2022-02-27--08.png)\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-02-27.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1641906000,"title":"International Marketplace dataset created with Integration Services\\r","name":"international-marketplace-dataset-created-with-integration-services","tech":"logo-sqlserver\\r","tags":"[\\"SQL Server Integration Services\\", \\"T-SQL\\", \\"Dataset\\"]\\r","date":"12 January 2022\\r","content":"SQL Server Integration Services (SSIS) was used to create this fictional dataset, by merging Microsoft\'s *Wide World Importers* database and *Contoso* data warehouse, with Tableau\'s *Sample - APAC Superstore* dataset, with some data alterations.\\r\\n\\r\\n![International Marketplace SSIS package](/src/assets/blog/2022-01-12--01.png)\\r\\n\\r\\n![International Marketplace in Power BI sales by city](/src/assets/blog/2022-01-12--00.png)\\r\\n\\r\\n**Final output**\\r\\n\\r\\nYou can download Excel copies of the completed dataset:\\r\\n\\r\\n* Star schema (for Power BI data visualisation) **[download here](https://github.com/makuharistudio/data-visualisation-datasets/raw/main/International%20Marketplace%20sales/International%20Marketplace%20Normalised%20for%20Power%20BI.xlsx)**.\\r\\n\\r\\n![International Marketplace: Normalised star schema](/src/assets/blog/2022-01-12--02.png)\\r\\n\\r\\n* Denormalised (for Tableau data visualisation) **[download here](https://github.com/makuharistudio/data-visualisation-datasets/raw/main/International%20Marketplace%20sales/International%20Marketplace%20Denormalised%20for%20Tableau.xlsx)**.\\r\\n\\r\\n![International Marketplace: Denormalised](/src/assets/blog/2022-01-12--03.png)\\r\\n\\r\\nThis blog post outlines the planning and challenges in making the dataset, which was my first attempt at creating an SSIS package from scratch. For information on the data flows and SQL scripts used in the package, visit my GitHub repository:\\r\\n\\r\\n*  **[https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales)**.\\r\\n\\r\\n**REVIEWING THE ORIGINAL DATA SOURCES**\\r\\n\\r\\n**APAC Superstore**\\r\\n\\r\\nTableau\'s APAC Superstore dataset can be found and extracted from Tableau Desktop\'s *Saved Data Sources*.\\r\\n\\r\\n - Customers: 795 (by name), 5,220 (by name and city)\\r\\n - Products: 1,913\\r\\n - Countries: 23\\r\\n - Cities: 537\\r\\n - Sales records: 10,925\\r\\n - Sales years: 2018 to 2021\\r\\n\\r\\nThis is a succinct and denormalised dataset, where customers have no personal locations, as the same names are replicated across many countries. The names are also not very ethnically diverse, given the name of the dataset.\\r\\n\\r\\n![APAC Superstore order map](/src/assets/blog/2022-01-12--04.png)\\r\\n\\r\\n![APAC Superstore data source](/src/assets/blog/2022-01-12--05.png)\\r\\n\\r\\nAt the time of writing this blog post, the order dates covered are from 2018 to 2021. I\'m highlighting that because I suspect that unlike the other datasets, Tableau\'s dataset has its dates automatically changed over time, and the SSIS package we create needs to accommodate for that.\\r\\n\\r\\nThe structure of the dataset merge will be based on APAC Superstore, since it has the least dimensions and facts compared to the Microsoft ones, which are proper databases.\\r\\n\\r\\n\\r\\n**Wide World Importers**\\r\\n\\r\\nMicrosoft\'s Wide World Importers database backup (.bak) file can be downloaded from here:\\r\\n**[https://github.com/Microsoft/sql-server-samples/releases/tag/wide-world-importers-v1.0](https://github.com/Microsoft/sql-server-samples/releases/tag/wide-world-importers-v1.0)**\\r\\n\\r\\n - Customers: 663\\r\\n - Products: 227\\r\\n - Countries: 1\\r\\n - Cities: 655\\r\\n - Sales records: 228,265\\r\\n - Sales years: 2013 to 2016\\r\\n\\r\\nThis is an extensive normalised dataset with customers based only in the United States. Each customer only exists in one city, but there are customer names for the same corporation in different cities e.g.\\r\\n - Tailspin Toys (Arietta, NY)\\r\\n - Tailspin Toys (Trentwood, WA)\\r\\nThese make up 60.6% of the customer records (402 out of 663).\\r\\n\\r\\n![Wide World Importers customer map](/src/assets/blog/2022-01-12--06.png)\\r\\n\\r\\nWhilst 263 customer records have them based in a specific city, most have invoices for multiple other cities, presumably reflecting B2B sales.\\r\\n\\r\\n![Wide World Importers tables](/src/assets/blog/2022-01-12--07.png)\\r\\n\\r\\n\\r\\n**Contoso BI Demo Dataset for Retail Industry**\\r\\n\\r\\nMicrosoft\'s Contoso BI Demo Dataset for Retail Industry data warehouse .bak file can be downloaded from here:\\r\\n**[https://www.microsoft.com/en-us/download/details.aspx?id=18279](https://www.microsoft.com/en-us/download/details.aspx?id=18279)**\\r\\n\\r\\n - Customers: 18,785 (by name) 18,868 (by name and city)\\r\\n - Products: 2,516\\r\\n - Countries: 29\\r\\n - Cities: 476\\r\\n - Sales records: 3,324,410 (online sales only)\\r\\n - Sales years: 2007 to 2009\\r\\n\\r\\n![Contoso customer map](/src/assets/blog/2022-01-12--08.png)\\r\\n\\r\\nThis is the largest of the 3 datasets in terms of the number of sales records. Each sales row represents a single unit for a product, meaning aggregations need to be calculated where the same product is sold multiple times under the same order number.\\r\\n\\r\\nSo a lot of record removal is needed to bring down the dataset to a more manageable size, only using the latest order number for each customer (retaining multiple order line rows), which will leave a usable 19 thousand records.\\r\\n\\r\\n - Customers: 18,674 (by name) 18,753 (by name and city)\\r\\n - Products: 463\\r\\n - Countries: 29\\r\\n - Cities: 476\\r\\n - Sales records: 19,419\\r\\n - Sales years: 2007 to 2009\\r\\n\\r\\nContoso also has a lot of trailing spaces in values, which need to be trimmed as part of the ETL\'s data cleaning. Geographic corrections also need to be made, for example, the city Perth is incorrectly listed under South Australia.\\r\\n\\r\\n![Contoso tables](/src/assets/blog/2022-01-12--09.png)\\r\\n\\r\\nThe table below shows a summary of how the dataset columns align as-is, and the T-SQL needed to populate respective columns with existing data.\\r\\n\\r\\n![Comparing columns across the 3 datasets](/src/assets/blog/2022-01-12--10.png)\\r\\n\\r\\n**CHALLENGES**\\r\\n\\r\\n**Region inconsistency**\\r\\n\\r\\nWide World Importers has a comprehensive Country table for Region and Subregion. We will remap the countries from APAC Superstore and Contoso to those regions for consistency.\\r\\n\\r\\n**Support for special characters**\\r\\n\\r\\nA large number of products use commas, and many names, states, cities and the like, use special characters, which I found to store accurately in Unicode tab-delimited text files, as opposed to some other file format types which cannot render the characters correctly. So both the APAC Superstore and the remapping files use this file format.\\r\\n\\r\\n**Customer names are incoherent and do not reflect country-of-origin**\\r\\n\\r\\nThe APAC Superstore and Contoso datasets have customers outside the United States, but their names do not reflect those locations. Using my past experience with country-based name randomisation (plugging my previous blog post **[here](https://makuharistudio.github.io/#/blog/customer-support-ticket-update-generator-and-sample-dataset)**), I created customer name re-mapping files **[here](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales/text%20files%20for%20value%20remapping%20in%20SSIS)**.\\r\\n\\r\\nContoso also has company names with a missing space before the \\"Company\\" suffix. As these are just the city with \\"Company\\" suffixed, they are remapped with a person\'s name instead.\\r\\n\\r\\n**Mostly United States sales**\\r\\n\\r\\nWide World Importers is a United States sales dataset, so the U.S. sales data from Contoso will be remapped to other countries, to give the final dataset more global reach. The geographic remapping file for this is **[here](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales/text%20files%20for%20value%20remapping%20in%20SSIS)**.\\r\\n\\r\\n**Product, Category/Subcategory, and Supplier remapping**\\r\\n\\r\\nThere are shared _Supplier_ names across Contoso and Wide World Importers, but the spelling needs to be amended so they align. World Wide Importers uses _Stock Groups_, where each product item can belong to multiple groups (1:M), whereas APAC Superstore and Contoso have 1:1 Category and Sub-Category for their products. So all of these have been remapped and re-classified as a whole. Remapping files are **[here](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/International%20Marketplace%20sales/text%20files%20for%20value%20remapping%20in%20SSIS)**.\\r\\n\\r\\n**Customer segmentation**\\r\\n\\r\\nAPAC Superstore defines its segmentation by Consumer, Home Office, and Corporate. International Marketplace merges Home Office with Consumer, as Contoso uses Person and Company for its segmentations. So these are easily remapped:\\r\\n\\r\\n```\\r\\ncase\\r\\n   when c.CustomerType = \'Person\' then N\'Consumer\'\\r\\n   when c.CustomerType = \'Company\' then N\'Corporate\'\\r\\n   else null end as \\"Segment\\"\\r\\n```\\r\\n\\r\\nWorld Wide Importers made the remapping simple as company names are suffixed with the office\'s city in parenthesis:\\r\\n\\r\\n```\\r\\ncase\\r\\n   when c.CustomerName like \'%(%\' then N\'Corporate\'\\r\\n   else N\'Consumer\' end as \\"Segment\\"\\r\\n```\\r\\n\\r\\n**Ship Date missing**\\r\\n\\r\\nOnly APAC Superstore has this column, with no decent equivalents in Contoso and World Wide Importers. So we used T-SQL randomisation to populate this column.\\r\\n\\r\\nAs Contoso is a regional dataset, the _Ship Date_ is set to randomise up to 17 days after the _Order Date_.\\r\\n\\r\\n```\\r\\nconvert(varchar, (dateadd(day,(abs(checksum(newid())) % 18),s.Datekey)),103) \\"Ship Date\\"\\r\\n```\\r\\n\\r\\nTo give some variation toward shorter ship times, World Wide Importers randomises up to 7 days after the _Order Date_.\\r\\n\\r\\n```\\r\\nconvert(varchar,dateadd(day,(abs(checksum(newid())) % 8),o.OrderDate),103) \\"Ship Date\\",\\r\\n```\\r\\n\\r\\n**Ship Mode**\\r\\n\\r\\nLike _Ship Date_, only APAC Superstore has this column. This value is randomised in different phases for Contoso and Wide World Importers.\\r\\n\\r\\nThe first pass involves checking where the _Order Date_ and _Ship Date_ are the same value, and approximately 66.6% of them are randomised to be treated as \\"Same Day\\" shipment.\\r\\n\\r\\n```\\r\\nupdate zs2\\r\\n   set zs2.FromShipMode = \'Same Day\'\\r\\n   from z_sales zs2\\r\\n   inner join\\r\\n      (select cast((ABS(CHECKSUM(NewId()))%3) as bigint) as \\"random\\", zs1.SalesStagingID\\r\\n       from  z_sales zs1\\r\\n       where zs1.FromOrderDate = zs1.FromShipDate and zs1.FromShipMode is null) as rzs\\r\\n      on zs2.SalesStagingID = rzs.SalesStagingID\\r\\n   where rzs.random < 2;\\r\\n```\\r\\n\\r\\nAs randomisation in SQL Server seems to result in near-equal value distribution, all remaining sales are allocated _Ship Mode_ based on a 0 to 9 randomisation with categories disproportionately assigned to integer ranges. \\r\\n\\r\\n```\\r\\nupdate zs2\\r\\n   set zs2.FromShipMode =\\r\\n      case\\r\\n         when rzs.random between 0 and 5 then N\'Standard Class\'           \\r\\n         when rzs.random between 6 and 8 then N\'Second Class\'\\r\\n         else N\'First Class\' end\\r\\n   from z_sales zs2\\r\\n   inner join\\r\\n      (select cast((ABS(CHECKSUM(NewId()))%10) as bigint) as \\"random\\", zs1.SalesStagingID\\r\\n       from  z_sales zs1\\r\\n       where zs1.FromShipMode is null) as rzs\\r\\n      on zs2.SalesStagingID = rzs.SalesStagingID;\\r\\n```\\r\\n\\r\\n**Different date ranges**\\r\\n\\r\\nAligning the order dates across the datasets to cover the same years is done with an initial randomised approximately 50:50 split of the sales data to be moved to 2022.\\r\\n\\r\\n```\\r\\nupdate zs2\\r\\n   set\\r\\n      zs2.toshipdate = dateadd(year,(2022-cast(convert(varchar(4),zs2.fromshipdate,112) as int)),zs2.fromshipdate),\\r\\n      zs2.toorderdate = dateadd(year,(2022-cast(convert(varchar(4),zs2.fromorderdate,112) as int)),zs2.fromorderdate)\\r\\n   from z_sales zs2\\r\\n   inner join\\r\\n      (select cast((ABS(CHECKSUM(NewId()))%2) as bigint) as \\"random\\", zs1.SalesStagingID\\r\\n       from  z_sales zs1 where zs1.toorderdate is null and zs1.toshipdate is null) as rzs\\r\\n       on zs2.SalesStagingID = rzs.SalesStagingID\\r\\n   where rzs.random < 1;\\r\\n```\\r\\n\\r\\nWith the remainder set to the following year. In hindsight, it would have been better to implement this as a package-scoped variable to allow the user to place any year they wanted.\\r\\n\\r\\n```\\r\\nupdate zs\\r\\n   set\\r\\n      zs.toshipdate = dateadd(year,(2022-cast(convert(varchar(4),zs.fromshipdate,112) as int)+1),zs.fromshipdate),\\r\\n      zs.toorderdate = dateadd(year,(2022-cast(convert(varchar(4),zs.fromorderdate,112) as int)+1),zs.fromorderdate)\\r\\n   from z_sales zs\\r\\n   where zs.toorderdate is null and zs.toshipdate is null;\\r\\n```\\r\\n\\r\\n**OTHER LESSONS LEARNED**\\r\\n\\r\\n**Creating bins for histograms**\\r\\n\\r\\nAPAC Superstore uses a Profit (bin) field to round down profits to nearest $200, including going into negatives. To apply that to the invoice line profit field in Wide World Importers, the basic select for this would be:\\r\\n\\r\\n```\\r\\nfloor( il.LineProfit / 200 ) * 200\\r\\n```\\r\\n\\r\\n**For Flat File connections, Visual Studio may retain cached file loads**\\r\\n\\r\\nSimply running the Play button won\'t reflect changes to the file, but I found closing and reopening Visual Studio before hitting play to work in some cases.\\r\\n\\r\\n**Unicode and non-Unicode conversion**\\r\\n\\r\\nFor this error message that appears when using OLE DB Source: _\\"Column cannot convert between unicode and non-unicode string data types.\\"_\\r\\nRight-click the OLE DB Source element > Show Advanced Editor > navigate to \\"Input and Output Properties\\" tab > expand \\"OLE DB Source Output\\" > expand \\"Output Columns\\" > check the DataType field for each column reported, and adjust where needed.\\r\\n\\r\\n**Flat file data sources, with double quotations as string delimiter**\\r\\n\\r\\nTo get rid of them, the following can be used in Derived Column transformations **[https://stackoverflow.com/questions/65176461/ssis-flat-file-source-get-rid-of-some-embedded-unwanted-double-quotes](https://stackoverflow.com/questions/65176461/ssis-flat-file-source-get-rid-of-some-embedded-unwanted-double-quotes)**.\\r\\n\\r\\n```\\r\\nREPLACE([4-2-27  Data Conversion 3].Product,\\"\\\\\\"\\",\\"\\")\\r\\n```\\r\\n**Note:** There\'s a backspace before the second double quotation mark, in order to escape the double quotation. Which is ironic since markdown files do the same thing any you may not see it in the code above.\\r\\n\\r\\n\\r\\n**SSIS Derived Columns can truncate flat file columns**\\r\\n\\r\\nThis can be resolved by right-clicking the Derived Column element > Show Advanced Editor, see above Unicode error for same steps, but this time involves changing the length for Derived Column Output **[https://nishantrana.me/2019/05/08/error-the-derived-column-failed-because-truncation-occurred-and-the-truncation-row-disposition-on-derived-column-outputsderived-column-output-columnsfilepath-specifies-failure-on-truncat](https://nishantrana.me/2019/05/08/error-the-derived-column-failed-because-truncation-occurred-and-the-truncation-row-disposition-on-derived-column-outputsderived-column-output-columnsfilepath-specifies-failure-on-truncat)**.\\r\\n\\r\\n**Creating text file-based remapping files may not work if NULLs are involved**\\r\\n\\r\\nRemapping files for Wide World Importers had to be separated from the other 2 data sources because it alone had null on categories. Otherwise produced whitespace that could not be trimmed because it used an ASCII 194 160 combination **[https://stackoverflow.com/questions/42424555/trim-whitespace-ascii-character-194-from-string](https://stackoverflow.com/questions/42424555/trim-whitespace-ascii-character-194-from-string)**.\\r\\n\\r\\n**Data Flow encapsulation**\\r\\n\\r\\nI noticed a strange behaviour where putting the flows to populate both the main State and City tables inside a single dataflow populates just State, but not the City table, but if the flows were separated into their own data flows, then they each populate. Currently suspecting it may be because they share the same OLE DB Source (though different SQL was used).\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2022-01-12.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1639746000,"title":"How to create a free Azure account to post reports to the Power BI Gallery\\r","name":"how-to-create-a-free-azure-account-to-post-reports-to-the-power-bi-gallery","tech":"logo-azure\\r","tags":"[\\"Azure\\", \\"Power BI\\", \\"Active Directory\\"]\\r","date":"18 December 2021\\r","content":"If your work or school account does not provide you access to Power BI (for the purposes of publishing to Web, specifically the Community Gallery), you can create your own. \\r\\n\\r\\nYou can check your existing account by navigating to **[https://powerbi.microsoft.com](https://powerbi.microsoft.com)**, then clicking \\"Have an account? Sign in\\".\\r\\n\\r\\n![Check Power BI sign in](/src/assets/blog/2021-12-18--01.png)\\r\\n\\r\\nIf you receive the following message:\\r\\n\\r\\n*\\"Sorry, we can\'t sign you up as ...*\\r\\n\\r\\n*Your IT department has turned off signup for Microsoft Power BI. Contact them to complete signup.\\"*\\r\\n\\r\\n![Power BI sign up disabled](/src/assets/blog/2021-12-18--02.png)\\r\\n\\r\\n...and have no sway over your IT department to give you access, you can sign up for a new account instead by clicking \\"No account? Create one!\\", and set up your new email and password.\\r\\n\\r\\n![Azure Sign in create account](/src/assets/blog/2021-12-18--03.png)\\r\\n\\r\\n![Azure create a new account](/src/assets/blog/2021-12-18--04.png)\\r\\n\\r\\nYou can then start your Azure free trial. Fill out your details, which will require providing a mobile number for identity verification.\\r\\n\\r\\n![Azure portal](/src/assets/blog/2021-12-18--05.png)\\r\\n\\r\\nWith your account set up, you can now begin creating your own \\"organisation\\" or tenant, which would have Power BI enabled. Begin by going to Azure Active Directory.\\r\\n\\r\\n![Azure Active Directory](/src/assets/blog/2021-12-18--06.png)\\r\\n\\r\\nClick \\"Manage tenants\\", and create your new tenant.\\r\\n\\r\\n![Azure Active Directory Manage tenants](/src/assets/blog/2021-12-18--07.png)\\r\\n\\r\\nThen create a new user under that tenant domain e.g. yourname@yourtennt.onmicrosoft.com, and ensure that new user is added to the Administrators group of the tenant.\\r\\n\\r\\n![Azure Active Directory Add User](/src/assets/blog/2021-12-18--08.png)\\r\\n\\r\\n![Azure Active Directory Add User Assignment](/src/assets/blog/2021-12-18--08a.png)\\r\\n\\r\\nFor that new user account, assign the roles Power BI Administrator and Power Platform admin, which you can do from **[https://portal.office.com](https://portal.office.com)**.\\r\\n\\r\\n![Microsoft 365 admin center](/src/assets/blog/2021-12-18--09.png)\\r\\n\\r\\nThen you can configure \\"Publish to Web\\" from the Admin portal at **[https://app.powerbi.com](https://app.powerbi.com)**. There are plenty of other resources for setup recommendations. For example, this post from **[Radacad](https://radacad.com/power-bi-administrator-tenant-settings-configuration-you-dont-dare-to-miss)**.\\r\\n\\r\\n![Power BI Admin portal](/src/assets/blog/2021-12-18--10.png)\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2021-12-18.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1635598800,"title":"Customer support ticket update generator and sample dataset\\r","name":"customer-support-ticket-update-generator-and-sample-dataset","tech":"logo-excel\\r","tags":"[\\"Excel\\", \\"Dataset\\"]\\r","date":"31 October 2021\\r","content":"This is a sample dataset created using Excel randomisation, and you can create your own using the file generator.\\r\\n\\r\\nYou can download or connect to the sample dataset from **[here](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/Support%20ticket%20updates/Support%20ticket%20updates.xlsx?raw=true)**.\\r\\n\\r\\nThe Github repository with the agent photos can be found **[here](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates/agents)**.\\r\\n\\r\\nAn Excel random person name and business generator was also used to create this dataset, downloadable **[here](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/Support%20ticket%20updates/Random%20name%20and%20business%20generator.xlsx?raw=true)**.\\r\\n\\r\\nThe dataset contains:\\r\\n - 5000 support tickets\\r\\n - 27780 support ticket update records\\r\\n - 29 agents across 8 countries and 12 cities\\r\\n - 1233 end users across 27 countries and 65 cities\\r\\n - Date/timestamps are based on Sydney, Australia time (AEST GMT+10/AEDT GMT+11)\\r\\n\\r\\nThe first worksheet \\"Updates\\" has the back-and-forth update records for each ticket, indicating if the update is a public user message or agent reply, or an internal message by an Agent.\\r\\n\\r\\n![Support ticket updates](/src/assets/blog/2021-10-31--01.png)\\r\\n\\r\\nThe second worksheet \\"Assignment\\" has the ticket created versus ticket assigned date/time data.\\r\\n\\r\\n![Support ticket assignments](/src/assets/blog/2021-10-31--02.png)\\r\\n\\r\\nThe third worksheet \\"Agents\\" has photo IDs that correlate to the images in this **[Github folder](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates/agents)**.\\r\\n\\r\\n![Support ticket agents](/src/assets/blog/2021-10-31--03.png)\\r\\n\\r\\n![Support ticket agent photos](/src/assets/blog/2021-10-31--04.png)\\r\\n\\r\\n\\r\\n**Why this dataset was created?**\\r\\n\\r\\nWorking in a global support team providing follow-the-sun (FTS) customer service, I wanted to be able to visualise the teamwork across staff members.\\r\\n\\r\\nAs I needed a fake dataset to test ideas on, I created an Excel file that randomly generated support ticket update information (e.g. when a end-user opens a ticket, when an agent first replies to the end-user, and the back-and-forth until the ticket becomes solved). The columns used in the dataset are meant to be similar to those seen in CRM systems that provide reporting on such ticket updates (e.g. Zendesk).\\r\\n\\r\\nI noticed my random generator did not account for the ticket IDs being in a realistic sequence, which needs to be amended after extracting the data from the generator. Also, the generator is limited in providing \\"follow-the-sun\\" support update records, so I spent some time manually editing records to demonstrate this in the sample dataset.\\r\\n\\r\\n\\r\\n**Disclaimer**\\r\\n\\r\\nThis dataset is free to use and alter as you need, and no attribution is required, though would be appreciated.\\r\\n\\r\\nAll names in this dataset are fictional and not based on real-life people. The random name generator that was used to create them can be found **[here](https://github.com/makuharistudio/data-visualisation-datasets/blob/main/Support%20ticket%20updates/Random%20name%20and%20business%20generator.xlsx?raw=true)**.\\r\\n\\r\\nPhotographs were taken from **[Pixabay.com](https://pixabay.com/service/license)** and **[Pexels.com](https://www.pexels.com/license)** for non-commercial use, edited to fit the appearance of an organisational profile photo, and direct URL attribution included in the dataset for each photo.\\r\\n\\r\\nThe GitHub repository for this is **[here](https://github.com/makuharistudio/data-visualisation-datasets/tree/main/Support%20ticket%20updates)**.\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2021-10-31.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1634994000,"title":"Calculate aggregate for grouped rows based on column value, DAX version\\r","name":"calculate-aggregate-for-grouped-rows-based-on-column-value-dax-version","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\", \\"DAX\\"]\\r","date":"24 October 2021\\r","content":"How to use DAX to find the aggregate value for rows grouped by a column value in Power BI.\\r\\n\\r\\nIn a __[previous post](https://makuharistudio.github.io/#/blog/find-aggregate-value-for-grouped-rows-based-on-column-value)__, I wrote on window aggregation equivalents in Power Query, going on the notion that categorical columns are generally better off done in Power Query using M code, as opposed to done in DAX.\\r\\n\\r\\nHowever, in a Power BI report I am working on, it seemed re-implementing it using DAX had faster report load times than Power Query, which I attributed to existing Power Query merges needed for the model, which slowed down processing. It also required having 2 columns in the model (one for the aggregation, and the other for the conditional result), unlike DAX which only required one.\\r\\n\\r\\nThat M code looked like this:\\r\\n\\r\\n**Power Query M structure**\\r\\n```\\r\\n    #\\"Added Custom 1\\" = Table.NestedJoin(#\\"Previous step\\",\\r\\n                                      {\\"Column A to join on\\"},\\r\\n                                      Table.Group(Table.SelectRows(#\\"Changed Type\\", each ([Column C] = \\"Agent\\")),\\r\\n                                                  {\\"Column A to join on\\"},\\r\\n                                                  {{\\"Result of aggregation\\",\\r\\n                                                  each List.Min([#\\"Column B to aggregate on\\"]), type nullable datetime}}),\\r\\n                                      {\\"Column A to join on\\"},\\r\\n                                      \\"Merged group by table\\",\\r\\n                                      JoinKind.Inner),\\r\\n    #\\"Expanded Merged group by table\\" = Table.ExpandTableColumn(#\\"Added Custom 1\\", \\"Merged group by table\\", {\\"Result of aggregation\\"}, {\\"Result of aggregation\\"}),\\r\\n    #\\"Added Custom 2\\" = Table.AddColumn(#\\"Expanded Merged group by table\\", \\"M column result\\", each if [#\\"Column B to aggregate on\\"] = [#\\"Result of aggregation\\"] then \\"Yes\\" else \\"No\\")\\r\\n```\\r\\n\\r\\nIn this example we\'re still using randomised support ticket update data, and trying to find which agent reply to the user is the first for each Ticket ID.\\r\\n\\r\\n![Sample dataset with only 15 rows of data](/src/assets/blog/2021-10-24--01.png)\\r\\n\\r\\n\\r\\n**Power Query implementation**\\r\\n```\\r\\n    #\\"Added Custom\\" = Table.NestedJoin(#\\"Changed Type\\",\\r\\n                                      {\\"Ticket ID\\"},\\r\\n                                      Table.Group(Table.SelectRows(#\\"Changed Type\\", each ([Updater role] = \\"Agent\\")),\\r\\n                                                  {\\"Ticket ID\\"},\\r\\n                                                  {{\\"Earliest date/time by Ticket ID\\",\\r\\n                                                  each List.Min([#\\"Update - Timestamp\\"]), type nullable datetime}}),\\r\\n                                      {\\"Ticket ID\\"},\\r\\n                                      \\"Merged group by table\\",\\r\\n                                      JoinKind.Inner),\\r\\n    #\\"Expanded Merged group by table\\" = Table.ExpandTableColumn(#\\"Added Custom\\", \\"Merged group by table\\", {\\"Earliest date/time by Ticket ID\\"}, {\\"Earliest date/time by Ticket ID\\"}),\\r\\n    #\\"Added Custom1\\" = Table.AddColumn(#\\"Expanded Merged group by table\\", \\"1st reply?\\", each if [#\\"Update - Timestamp\\"] = [#\\"Earliest date/time by Ticket ID\\"] then \\"Yes\\" else \\"No\\")\\r\\nin\\r\\n    #\\"Added Custom1\\"\\r\\n```\\r\\n\\r\\n![Sample dataset with only 15 rows of data Power Query M code](/src/assets/blog/2021-10-24--02.png)\\r\\n\\r\\n\\r\\n![Sample dataset with only 15 rows of data Power Query performance](/src/assets/blog/2021-10-24--03.png)\\r\\n\\r\\nNow let\'s look at the DAX alternative.\\r\\n\\r\\nIn DAX, we\'ve coded it as a new column, where an initial if condition is used to pre-determine the result for invalid rows (such as messages from client), and the nested false condition checks the remaining canidate rows (messages from agents) to see if the aggregate value (i.e. the earliest *Update - Timestamp*) matches for the existing row for each Ticket ID group.\\r\\n\\r\\n![Sample dataset with only 15 rows of data DAX Add New Column](/src/assets/blog/2021-10-24--04.png)\\r\\n\\r\\n**DAX structure**\\r\\n```\\r\\nDAX column = IF([Column C] = \\"Column value of rows that should be excluded from aggregation\\",\\r\\n                \\"No\\",\\r\\n                IF(Tablename[Column B to aggregate on] = \\r\\n                    CALCULATE (\\r\\n                               MIN ( Tablename[Column B to aggregate on] ),\\r\\n                               FILTER(ALLEXCEPT (Tablename, Tablename[Column A to join on]), Tablename[Column C] = \\"Column value of rows to aggregate on\\" ))\\r\\n                              ,\\"Yes\\"\\r\\n                              ,\\"No\\"\\r\\n                )\\r\\n             )\\r\\n```\\r\\n\\r\\n**DAX implementation**\\r\\n```\\r\\n1st reply? = IF([Updater role] = \\"Client\\",\\r\\n                \\"No\\",\\r\\n                IF(Updates1[Update - Timestamp] = \\r\\n                    CALCULATE (\\r\\n                               MIN ( Updates1[Update - Timestamp] ),\\r\\n                               FILTER(ALLEXCEPT (Updates1, Updates1[Ticket ID]), Updates1[Updater role] = \\"Agent\\" ))\\r\\n                              ,\\"Yes\\"\\r\\n                              ,\\"No\\"\\r\\n                )\\r\\n             )\\r\\n```\\r\\n\\r\\n![Sample dataset with only 15 rows of data DAX code](/src/assets/blog/2021-10-24--05.png)\\r\\n\\r\\n\\r\\n![Sample dataset with only 15 rows of data DAX performance](/src/assets/blog/2021-10-24--06.png)\\r\\n\\r\\n\\r\\nComparing the initial table refreshes from the screenshots above seems to indicate Power Query in this scenario is more performant than DAX.\\r\\n* DAX: 224ms\\r\\n* Power Query: 94ms\\r\\n\\r\\nHowever, this is a flat dataset with only 15 rows. So I set out to test it with a larger flat dataset (27780 rows), and if the results still show Power Query is more performant than DAX for categorical window aggregation, I would test a second time with that larger dataset, but using pre-existing merges to more closer reflect my model.\\r\\n\\r\\n\\r\\n**COMPARING DAX AND M FOR CATEGORICAL WINDOW AGGREGATION**\\r\\n\\r\\nThis blog post compares DAX vs Power Query (M) implementation of this scenario against:\\r\\n1. flat dataset using M for the window aggregation column\\r\\n2. flat dataset using DAX for the window aggregation column\\r\\n3. dataset with existing merge using M for the window aggregation column\\r\\n4. dataset with existing merge using DAX for the window aggregation column\\r\\n\\r\\n**Test 1: Flat dataset using M for the aggregation column**\\r\\n\\r\\n![Large flat dataset using M window aggregation M code](/src/assets/blog/2021-10-24--07.png)\\r\\n\\r\\nNote: Refresh 1 is when the column is first added to the visual.\\r\\n\\r\\n![Large flat dataset using M performance](/src/assets/blog/2021-10-24--09.png)\\r\\n\\r\\n\\r\\n**Test 2: Flat dataset using DAX for the aggregation column**\\r\\n\\r\\n![Large flat dataset using M window aggregation DAX code](/src/assets/blog/2021-10-24--08.png)\\r\\n\\r\\n\\r\\n![Large flat dataset using DAX](/src/assets/blog/2021-10-24--10.png)\\r\\n\\r\\nNow we\'ve applied a simple merge to the dataset to display additional columns.\\r\\n\\r\\n![Large dataset with existing merge](/src/assets/blog/2021-10-24--11.png)\\r\\n\\r\\n\\r\\n**Test 3: Merged dataset using M for the aggregation column**\\r\\n\\r\\n![Large dataset with existing merge using M performance](/src/assets/blog/2021-10-24--12.png)\\r\\n\\r\\n\\r\\n![Large dataset with existing merge using DAX performance](/src/assets/blog/2021-10-24--15.png)\\r\\n\\r\\n\\r\\n**Test 4: Merged dataset using DAX  for the aggregation column**\\r\\n\\r\\n![Large dataset with existing merge using DAX](/src/assets/blog/2021-10-24--13.png)\\r\\n\\r\\n\\r\\n![Large dataset with existing merge using DAX performance](/src/assets/blog/2021-10-24--14.png)\\r\\n\\r\\n\\r\\n![Large dataset with existing merge using DAX performance](/src/assets/blog/2021-10-24--16.png)\\r\\n\\r\\nReviewing these table refresh times, it appears that for data sources involving a merge, using DAX for window aggregations is more performant than using Power Query, whereas it seems to be the reverse for data sources not involving merges.\\r\\n\\r\\n![Comparing table refresh times](/src/assets/blog/2021-10-24--17.png)\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2021-10-24.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1634389200,"title":"Find aggregate value for grouped rows based on column value\\r","name":"find-aggregate-value-for-grouped-rows-based-on-column-value","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\"]\\r","date":"17 October 2021\\r","content":"How to use Power Query to find the aggregate value for rows grouped by a column value in Power BI.\\r\\n\\r\\nT-SQL uses the concept of window functions to perform aggregations across groupings of rows, which are based on a specific column\'s values. More info on this can be found on [Pinal Dave\'s blog](https://blog.sqlauthority.com/2015/05/28/sql-server-what-are-t-sql-window-functions-notes-from-the-field-082.\\r\\n\\r\\n```\\r\\nTable.NestedJoin(#\\"Previous step in your Power Query code\\", \\r\\n                 {\\"Column(s) for left side of the join\\"}, \\r\\n                Table.Group(#\\"Previous step in your Power Query code\\", \\r\\n                             {\\"Column(s) to group by\\"}, \\r\\n                             {{\\"New column name for the aggregation result\\", \\r\\n                             each List.Min([#\\"Column to apply aggregation on\\"]), \\r\\n                             type nullable datatypeofyouraggregation}}),\\r\\n                 {\\"Column(s) for right side of the join\\"}, \\r\\n                 \\"New merged group by table name\\",\\r\\n                 JoinKind.Inner)\\r\\n```\\r\\n\\r\\nAs a basic example, say your dataset has rows representing quarterly sales and you need to calculate the proportion of sales which quarter represents for the whole year i.e. Quarterly Sales  Annual Sales.\\r\\n\\r\\nYou can do this by using a preliminary window function to first calculate annual sales by summing the rows based on shared year column values, providing that same value for each row of the group. Then for each row, calculate the proportion from there.\\r\\n\\r\\n![Example concept of Window function](/src/assets/blog/2021-10-17--01.png)\\r\\n\\r\\nThe equivalent of Window functions in Power BI would typically be used for quantitative measures, and are thus more likely to be implemented using DAX calculations.\\r\\n\\r\\nHowever, there can be scenarios where window functions need to employed in a more categorical nature. Going by the general principle that custom measures (i.e. quantitative calculations) should be done in DAX, and that custom columns (typically categorical) should be done in Power Query, the latter is what we will employ here.\\r\\n\\r\\nIn this example scenario\'s dataset, we have 5 unique support ticket numbers, with each row representing an instance where a support agent has sent a response to the end-user for a ticket, as indicated by the date/timestamp.\\r\\n\\r\\n![Example categorical scenario of support ticket response date/timestamps](/src/assets/blog/2021-10-17--02.png)\\r\\n\\r\\nOur objective is to create a column that identifies which rows of data represent the \\"first response\\" to the end-user for each ticket, with that intended 1st response flag being a rudimentary marker to help calculate other support agent statistics we may want (e.g. proportion of support tickets where the 1st responder is the assignee).\\r\\n\\r\\nThis is the equivalent of the previous example\'s proportion of annual sales that quarterly sales represents, in that the creation of a preliminary window function is needed. In our scenario, instead of doing a sum of sales based on rows sharing the same year, we will get the minimum (and hence the first) date/timestamps based on rows sharing the same ticket number.\\r\\n\\r\\nThe approach taken here is to create a new column whose definition is the combination of two common queries:\\r\\n1. The Table.NestedJoin function that\'s commonly seen in *Merge Queries* to combine your existing dataset to the conceptual grouped dataset.\\r\\n2. The Table.Group function creates a conceptual grouped by table of the existing dataset with the desired aggregate result, and that conceptual table being passed as the right-joined table parameter into the Table.NestedJoin.\\r\\n3. Then expand the merged table to display the aggregate result for each row of the original dataset.\\r\\n\\r\\n**Code structure**\\r\\n\\r\\n```\\r\\nTable.NestedJoin(#\\"Previous step in your Power Query code\\", \\r\\n                 {\\"Column(s) for left side of the join\\"}, \\r\\n                Table.Group(#\\"Previous step in your Power Query code\\", \\r\\n                             {\\"Column(s) to group by\\"}, \\r\\n                             {{\\"New column name for the aggregation result\\", \\r\\n                             each List.Min([#\\"Column to apply aggregation on\\"]), \\r\\n                             type nullable datatypeofyouraggregation}}),\\r\\n                 {\\"Column(s) for right side of the join\\"}, \\r\\n                 \\"New merged group by table name\\",\\r\\n                 JoinKind.Inner)\\r\\n```\\r\\n\\r\\n**Example**\\r\\n\\r\\nApplying the code structure above, the M code would be as below:\\r\\n\\r\\n![M code with merged](/src/assets/blog/2021-10-17--03.png)\\r\\n\\r\\n```\\r\\n    #\\"Added Custom\\" = Table.NestedJoin(#\\"Changed Type\\", \\r\\n                                       {\\"Ticket ID\\"},\\r\\n                                       Table.Group(#\\"Changed Type\\",\\r\\n                                                   {\\"Ticket ID\\"},\\r\\n                                                   {{\\"1st response\\",\\r\\n                                                   each List.Min([#\\"Update - Timestamp\\"]), type nullable datetime}}),\\r\\n                                       {\\"Ticket ID\\"},\\r\\n                                       \\"Merged group by table\\",\\r\\n                                       JoinKind.Inner)\\r\\n```\\r\\n\\r\\nThe result of the new column addition (which is a merged table), will appear as below.\\r\\n\\r\\n![Power Query with new column for merged Group By table](/src/assets/blog/2021-10-17--04.png)\\r\\n\\r\\nThen you simply need to expand out the aggregate column from the merge.\\r\\n\\r\\n![Power Query expand merged Group By table to display the aggregate column 1](/src/assets/blog/2021-10-17--05.png)\\r\\n\\r\\n![Power Query expand merged Group By table to display the aggregate column 2](/src/assets/blog/2021-10-17--06.png)\\r\\n\\r\\nNow that the preliminary window function is complete, we can address the example objective of creating a custom column to indicate which data row per Ticket ID represents the first support agent response to an end-user, which is a simple if condition to compare the \\"Update - Timestamp\\" and \\"1st response\\" columns.\\r\\n\\r\\n![Power Query if condition for example custom column](/src/assets/blog/2021-10-17--07.png)\\r\\n\\r\\n![Power Query final example custom column](/src/assets/blog/2021-10-17--08.png)\\r\\n\\r\\nIn this way, regardless of how the data is sorted in Power Query, the records representing the 1st responses will remain.\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2021-10-17.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1633784400,"title":"Dynamically apply time zone and daylight savings on date/times in Power BI\\r","name":"dynamically-apply-time-zone-and-daylight-savings-on-datetimes-in-power-bi","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\"]\\r","date":"10 October 2021\\r","content":"How to use Power Query to apply time zone offsets based on daylight savings \\"anchors\\" on date/times using a parameter, and without needing a separate calendar table in Power BI.\\r\\n\\r\\nThe final product is being able to use a Parameter to select a desired time zone, and apply it to your dataset\'s \\"Date/Time\\" column, and produce a \\"Date/Time/Zone\\" value.\\r\\n![Power BI Tokyo example](/src/assets/blog/2021-10-10--01.png)\\r\\n\\r\\nWhat makes this different from the DateTime.Zone function alone, is that this method respects when the UTC offset changes based on time zone by creating custom functions to do this.\\r\\n\\r\\nThis post incorporates my previous posts on [how to import time zone and daylight saving observations from Wikipedia](https://makuharistudio.github.io/#/blog/import-time-zone-offsets-and-observations-from-wikipedia-in-power-bi), which indicate when different offsets are applied (e.g. first Sunday of October), and my post on [how to find the nth day of a month](https://makuharistudio.github.io/#/blog/find-date-for-the-nth-day-of-a-month-in-power-bi) to convert those into usable \\"anchors\\" to determine the offset value for the date/times.\\r\\n\\r\\n**Note:** This is not an appropriate solution to time zone application in terms of data accuracy, processing efficiency, and coding involved. Ideally a predefined dataset or an API with actual date/time values for observation period start/ends would be best.\\r\\n\\r\\nA good example of this can be found in [a blog post by John White](https://whitepages.unlimitedviz.com/2020/10/dynamic-time-zone-conversion-using-power-bi)\\r\\n\\r\\nThis post shows how date/time anchor values can be used as an alternative way to solve this problem, which does not use calendar tables nor APIs.\\r\\n\\r\\nThis is the **[sample date/time dataset](/src/assets/blog/Date_times_to_convert.xlsx?raw=true)** we will dynamically apply time zone offsets to via parameter selection.\\r\\n\\r\\nNote there is no time zone in the data itself, so assumptions made by any application (e.g. user\'s machine time zone) may be incorrect.\\r\\n\\r\\n![Sample date time dataset in Excel](/src/assets/blog/2021-10-10--02.png)\\r\\n\\r\\n![Sample date time dataset imported into Power Query](/src/assets/blog/2021-10-10--03.png)\\r\\n\\r\\nAfter importing the sample date/time dataset, we next import the combined time zone offset and daylight savings observation **[dataset](/src/assets/blog/Time_zone_offsets_and_DST_observations.xlsx?raw=true)** created in this [post](https://makuharistudio.github.io/#/blog/import-time-zone-offsets-and-observations-from-wikipedia-in-power-bi).\\r\\n\\r\\nAt this point, if you only need certain time zones to select from, you can filter for them here before proceeding.\\r\\n\\r\\n![Offset and observation dataset imported into Power Query](/src/assets/blog/2021-10-10--04.png)\\r\\n\\r\\nNext, we will create a list from the Timezone column, to be used as the available selections of the parameter.\\r\\n\\r\\n![Power Query Convert to List Part A](/src/assets/blog/2021-10-10--05.png)\\r\\n\\r\\n![Power Query Convert to List Part B](/src/assets/blog/2021-10-10--06.png)\\r\\n\\r\\nThen set up the parameter itself to pull from that list.\\r\\n\\r\\n![Power Query Create new parameter](/src/assets/blog/2021-10-10--07.png)\\r\\n\\r\\n![Power Query Manage Parameters Part A](/src/assets/blog/2021-10-10--08.png)\\r\\n\\r\\n![Power Query Manage Parameters Part B](/src/assets/blog/2021-10-10--09.png)\\r\\n\\r\\nNext, we create a new column in the sample dataset whose value is the parameter selection.\\r\\n\\r\\n![Power Query custom column for Parameter value Part A](/src/assets/blog/2021-10-10--10.png)\\r\\n\\r\\n![Power Query custom column for Parameter value Part B](/src/assets/blog/2021-10-10--11.png)\\r\\n\\r\\nThen merge the two datasets using that new custom column.\\r\\n![Power Query Merge Queries](/src/assets/blog/2021-10-10--12.png)\\r\\n\\r\\n![Power Query Merge Queries](/src/assets/blog/2021-10-10--13.png)\\r\\n\\r\\nWhilst expanding the merged table, we can prefix the column names, which may be useful if intending to merge multiple times, e.g. parameter for data source\'s actual time zone vs parameter for desired time zone. We will only do the merge once, in this example.\\r\\n\\r\\n![Power Query expand merge queries Part A](/src/assets/blog/2021-10-10--14.png)\\r\\n\\r\\n![Power Query expand merge queries Part B](/src/assets/blog/2021-10-10--15.png)\\r\\n\\r\\nOur next step is to create a custom column to convert our Date/Time value to match the time zone of the parameter selection. This is not as simple as appending an offset to our Date/Time value, because of these considerations\\r\\n\\r\\na. The need to account for different Date/Time offsets based on standard vs daylight savings.\\r\\n\\r\\nb. The anchor dataset (which determines whether or not daylight savings is applied) has a mix of data structures e.g. anchor date/times can be either UTC or local time-based, and can either have a specific date of the month, or relative day position of the month.\\r\\n\\r\\nc. The datasets\' standard and daylight saving offset values are in a text based structure e.g. \\"+10:00\\", rather than straight numbers, which are more easily consumed by Power Query functions (e.g. *DateTime.AddZone()*).\\r\\n\\r\\nBefore we create the custom column, we will need 3 custom functions.\\r\\n1. A simple suffix of the standard or daylight daylight offset to the Date/Time value to make it a DateTimeZone value, which we\'ll name **DatetimeToDatetimezone**.\\r\\n2. A slightly more complex function that pulls in all date anchor values to convert to an actual date. But it only lets single parameters to pass for the time anchor (which could be UTC or local time) and offset (standard or daylight saving), which we\'ll name **AnchorToDatetimezone**.\\r\\n3. The complex function that applies the time zone to the Date/Time value, factoring in daylight saving and standard time observation by using the previous two functions, which we\'ll name **DatetimeAppendZone**.\\r\\n\\r\\nBeginning with the simple **DatetimeToDatetimezone** custom function, which is meant to resolve consideration *c)*.\\r\\n\\r\\n![Power Query create custom function Part A](/src/assets/blog/2021-10-10--16.png)\\r\\n\\r\\n![Power Query create custom function Part B](/src/assets/blog/2021-10-10--17.png)\\r\\n\\r\\n```\\r\\nlet\\r\\n  DatetimeToDatetimezone = (DateTimestamp as datetime, Offset as nullable text) => \\r\\n    DateTimeZone.FromText(DateTime.ToText(DateTimestamp) & \\" \\" & Offset)\\r\\nin\\r\\n  DatetimeToDatetimezone\\r\\n```\\r\\n\\r\\n![Power Query create 1st custom function](/src/assets/blog/2021-10-10--18.png)\\r\\n\\r\\nNext we create the second custom function **AnchorToDatetimezone**, which takes in the dependent date/time value to get the year, and nullable parameters for time, offset, and the anchors for month, day, and *n*th occurrence of the day within the month. It checks the data structure to create the anchor\'s date, and appends the time and offset values passed into it.\\r\\n\\r\\n* The first if condition checks that there are no incorrect nor incomplete data structures.\\r\\n* The first else if condition creates the date time zone if there is a date anchor e.g. \\"21st\\" of given month.\\r\\n* The second and third else if conditions convert to date time zones based on 1st, 2nd, 3rd, or 4th occurrence of specified day anchors, and are based on this previous [post](https://makuharistudio.github.io/#/blog/find-date-for-the-nth-day-of-a-month-in-power-bi).\\r\\n* The fourth and fifth if else conditions convert based on the last occurrence of the specified day anchor, based on the last section of that same [post](https://makuharistudio.github.io/#/blog/find-date-for-the-nth-day-of-a-month-in-power-bi).\\r\\n\\r\\n```\\r\\nlet\\r\\n  AnchorToDatetimezone = (DateTimestamp as datetime, MonthAnchor as nullable number, DayAnchor as nullable number, PositionAnchor as nullable number, DateAnchor as nullable number, Time as nullable time, Offset as nullable text) => \\r\\n  /* Error-handling based on insufficient data or incorrect value combination */\\r\\n  if (MonthAnchor = null) \\r\\n    or (DateAnchor = null and DayAnchor = null)\\r\\n    or (DateAnchor <> null and DayAnchor <> null)\\r\\n    or (DayAnchor <> null and PositionAnchor = null)\\r\\n    or (DayAnchor = null and PositionAnchor <> null)\\r\\n    or (Time = null)\\r\\n    or (Offset = null)\\r\\n  then \\"Incomplete data\\"\\r\\n  /* Applying time zone to DateTimestamp, with separate conditions for position anchor = 9 i.e. \\"Last\\" */\\r\\n  else if DateAnchor <> null\\r\\n    then Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor)  & \\"/\\" & Text.From(DateAnchor) & \\" \\" & Text.From(Time) & Offset\\r\\n  else if DayAnchor < 6 and PositionAnchor > 0 and PositionAnchor < 5\\r\\n  /* Optional parameter in Date.DayOfWeek 1 = Day.Monday will get Sunday, hence DayAnchor (Sunday = 0) + 1 */\\r\\n    then Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/\\" & Text.From( (7 - Date.DayOfWeek(Date.FromText(Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/1\\"), DayAnchor + 1)) + (-7 + (7 * PositionAnchor)) ) & \\" \\" & Text.From(Time) & Offset\\r\\n  /* Need to pass Day.Sunday to get Saturday */\\r\\n  else if DayAnchor = 6 and PositionAnchor > 0 and PositionAnchor < 5\\r\\n    then Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/\\" & Text.From( (7 - Date.DayOfWeek(Date.FromText(Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/1\\"), Day.Sunday )) + (-7 + (7 * PositionAnchor)) ) & \\" \\" & Text.From(Time) & Offset\\r\\n  /* handling for last specific day of month */\\r\\n  else if DayAnchor = 0 and PositionAnchor = 9\\r\\n    then Text.From(Date.AddDays(Date.EndOfMonth(Date.From(Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/1\\")),(-1 * Number.From(Date.DayOfWeek(Date.EndOfMonth(Date.From(Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/1\\")), Day.Sunday))))) & \\" \\" & Text.From(Time) & Offset\\r\\n  else if DayAnchor > 0 and PositionAnchor = 9\\r\\n    then Text.From(Date.AddDays(Date.EndOfMonth(Date.From(Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/1\\")),(-1 * (Number.From(Date.DayOfWeek(Date.EndOfMonth(Date.From(Text.From(Date.Year(DateTimestamp)) & \\"/\\" & Text.From(MonthAnchor) & \\"/1\\")), Day.Sunday)) + ( 7 - DayAnchor ))))) & \\" \\" & Text.From(Time) & Offset\\r\\n  else null\\r\\nin\\r\\n  AnchorToDatetimezone\\r\\n```\\r\\n\\r\\n![Power Query create 2nd custom function](/src/assets/blog/2021-10-10--19.png)\\r\\n\\r\\nThe third custom function **DatetimeAppendZone** uses the **AnchorToDatetimezone** custom function to create date/time anchors for the start and end of daylight savings, then compares them with the Date/Time value to determine if standard or daylight savings offsets should be suffixed to the Date/Time value, using the **DatetimeToDatetimezone** custom function.\\r\\n\\r\\nSome data sources may be incorrectly failing to account for daylight savings differences. In this third custom function, you can use the \\"Difference\\" parameter to add/subtract the missed hour(s) to compensate for those. The code below does not do that, but you can add it in, if required.\\r\\n\\r\\n```\\r\\nlet\\r\\n  DatetimeAppendZone = (DateTimestamp as datetime, Difference as number, StandardOffset as nullable text, DaylightOffset as nullable text, DSTstartAncDate as nullable number, DSTstartAncPosition as nullable number, DSTstartAncDay as nullable number, DSTstartAncMonth as nullable number, DSTstartAncUTC as nullable time, DSTstartAncLocal as nullable time, DSTendAncDate as nullable number, DSTendAncPosition as nullable number, DSTendAncDay as nullable number, DSTendAncMonth as nullable number, DSTendAncUTC as nullable time, DSTendAncLocal as nullable time) => \\r\\n  /* Validation to ensure same time anchor types for start and end are used */\\r\\n  if Difference <> 0 and ( (DSTstartAncLocal = null and DSTstartAncUTC = null) or (DSTendAncLocal = null and DSTendAncUTC = null) )\\r\\n    then \\"Incomplete data\\"\\r\\n\\r\\n  /* Where DST is not observed, just append Standard UTC offset */\\r\\n  else if Difference = 0\\r\\n    then DatetimeToDatetimezone(DateTimestamp, StandardOffset)\\r\\n\\r\\n  /* From this point on, if using a data source that doesn\'t properly account for Daylight Savings offsets, you can factor those into the calculations */\\r\\n\\r\\n  /* Where DST is observed with Standard time result */\\r\\n  else if Difference <> 0\\r\\n    and (\\r\\n          (\\r\\n           /* Where local offset is used, 1 DST period in same year, datetimestamp is outside daylight savings */\\r\\n           DSTstartAncLocal <> null and DSTstartAncMonth < DSTendAncMonth\\r\\n           and ( DatetimeToDatetimezone(DateTimestamp,StandardOffset) < DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTstartAncMonth, DSTstartAncDay, DSTstartAncPosition, DSTstartAncDate, DSTstartAncLocal, StandardOffset))\\r\\n                or DatetimeToDatetimezone(DateTimestamp,StandardOffset) > DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTendAncMonth, DSTendAncDay, DSTendAncPosition, DSTendAncDate, DSTendAncLocal, StandardOffset)) )\\r\\n          )\\r\\n      or  (\\r\\n           /* Where local offset is used, 2 DST periods in same year, datetimestamp is outside both daylight savings periods */\\r\\n           DSTstartAncLocal <> null and DSTstartAncMonth > DSTendAncMonth \\r\\n           and Date.Month(DateTimestamp) >= DSTendAncMonth and Date.Month(DateTimestamp) <= DSTstartAncMonth\\r\\n           and DatetimeToDatetimezone(DateTimestamp,DaylightOffset) > DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTendAncMonth, DSTendAncDay, DSTendAncPosition, DSTendAncDate, DSTendAncLocal, DaylightOffset))\\r\\n           and DatetimeToDatetimezone(DateTimestamp,DaylightOffset) < DateTimeZone.From(AnchorToDatetimezone(Date.AddYears(DateTimestamp,1), DSTstartAncMonth, DSTstartAncDay, DSTstartAncPosition, DSTstartAncDate, DSTstartAncLocal, DaylightOffset))           \\r\\n          )\\r\\n      or  (\\r\\n           /* Where UTC offset is used, 1 DST period in same year, datetimestamp is inside daylight savings */\\r\\n           DSTstartAncUTC <> null and DSTstartAncMonth < DSTendAncMonth\\r\\n           and ( DateTimeZone.ToUtc(DatetimeToDatetimezone(DateTimestamp,StandardOffset)) <  DateTimeZone.FromText(AnchorToDatetimezone(DateTimestamp, DSTstartAncMonth, DSTstartAncDay, DSTstartAncPosition, DSTstartAncDate, DSTstartAncUTC, \\"+00:00\\"))\\r\\n                 or DateTimeZone.ToUtc(DatetimeToDatetimezone(DateTimestamp,StandardOffset)) > DateTimeZone.FromText(AnchorToDatetimezone(DateTimestamp, DSTendAncMonth, DSTendAncDay, DSTendAncPosition, DSTendAncDate, DSTendAncUTC, \\"+00:00\\")) )\\r\\n          )\\r\\n    )\\r\\n    then DatetimeToDatetimezone(DateTimestamp, StandardOffset)\\r\\n\\r\\n  /* Where DST is observed with Dayliht Saving time result */\\r\\n  else if Difference <> 0\\r\\n    and (\\r\\n          (\\r\\n           /* Where local offset is used, 1 DST period within same year, datetimestamp is inside daylight savings */    \\r\\n           DSTstartAncLocal <> null and DSTstartAncMonth < DSTendAncMonth\\r\\n           and ( DatetimeToDatetimezone(DateTimestamp,StandardOffset) >= DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTstartAncMonth, DSTstartAncDay, DSTstartAncPosition, DSTstartAncDate, DSTstartAncLocal, StandardOffset))\\r\\n                or DatetimeToDatetimezone(DateTimestamp,StandardOffset) <= DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTendAncMonth, DSTendAncDay, DSTendAncPosition, DSTendAncDate, DSTendAncLocal, StandardOffset)) )\\r\\n          )\\r\\n      or  (\\r\\n           /* Where local offset is used, 2 DST periods in same year, datetimestamp is inside 1st daylight savings period */\\r\\n           DSTstartAncLocal <> null and DSTstartAncMonth > DSTendAncMonth and Date.Month(DateTimestamp) <= DSTendAncMonth\\r\\n           and DatetimeToDatetimezone(DateTimestamp,DaylightOffset) <= DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTendAncMonth, DSTendAncDay, DSTendAncPosition, DSTendAncDate, DSTendAncLocal, DaylightOffset))\\r\\n          )\\r\\n      or  (\\r\\n           /* Where local offset is used, 2 DST periods in same year, datetimestamp is inside 2nd daylight savings period */\\r\\n           DSTstartAncLocal <> null and DSTstartAncMonth > DSTendAncMonth and Date.Month(DateTimestamp) >= DSTendAncMonth\\r\\n           and DatetimeToDatetimezone(DateTimestamp,DaylightOffset) >= DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTstartAncMonth, DSTstartAncDay, DSTstartAncPosition, DSTstartAncDate, DSTstartAncLocal, DaylightOffset))\\r\\n          )\\r\\n      or  (\\r\\n           /* Where UTC offset is used, 1 DST period in same year, datetimestamp is outside daylight savings */\\r\\n           DSTstartAncUTC <> null and DSTstartAncMonth < DSTendAncMonth\\r\\n           and DateTimeZone.ToUtc(DatetimeToDatetimezone(DateTimestamp,StandardOffset)) >=  DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTstartAncMonth, DSTstartAncDay, DSTstartAncPosition, DSTstartAncDate, DSTstartAncUTC, \\"+00:00\\"))\\r\\n           and DateTimeZone.ToUtc(DatetimeToDatetimezone(DateTimestamp,StandardOffset)) <= DateTimeZone.From(AnchorToDatetimezone(DateTimestamp, DSTendAncMonth, DSTendAncDay, DSTendAncPosition, DSTendAncDate, DSTendAncUTC, \\"+00:00\\")) \\r\\n          )\\r\\n    )\\r\\n    then DatetimeToDatetimezone(DateTimestamp, DaylightOffset)\\r\\n  else null\\r\\nin\\r\\n  DatetimeAppendZone\\r\\n```\\r\\n\\r\\n![Power Query create 3rd custom function](/src/assets/blog/2021-10-10--20.png)\\r\\n\\r\\nNow that our functions are complete, we can use the third **DatetimeAppendZone** to create the custom column which converts Date/Time to a datetimezone value, by passing in all the respective anchors as parameters.\\r\\n\\r\\n```\\r\\nDatetimeAppendZone([#\\"Date/Time\\"],[#\\"Daylight offset - Standard offset\\"],[Standard UTC offset],[Daylight Saving UTC offset],[#\\"DST start (date anchor)\\"],[#\\"DST start (position anchor)\\"],[#\\"DST start (day anchor)\\"],[#\\"DST start (month anchor)\\"],[#\\"DST start (UTC time anchor)\\"],[#\\"DST start (local time anchor)\\"],[#\\"DST end (date anchor)\\"],[#\\"DST end (position anchor)\\"],[#\\"DST end (day anchor)\\"],[#\\"DST end (month anchor)\\"],[#\\"DST end (UTC time anchor)\\"],[#\\"DST end (local time anchor)\\"])\\r\\n```\\r\\n\\r\\n![Power BI Create report](/src/assets/blog/2021-10-10--21.png)\\r\\n\\r\\nIf we now create a table in the Power BI\'s report designer, we can see the appropriate suffixing of standard vs daylight saving offsets to our Date/Time values as we change the parameter. Then we can test to see if, regardless of the data structure used for the daylight savings anchoring, that the appropriate offset is applied to our Date/Time dataset.\\r\\n\\r\\nAustralia, Sydney is a time zone that uses local time and non-\\"last position\\" for its daylight savings start and end anchors.\\r\\n![Power BI Sydney example Part A](/src/assets/blog/2021-10-10--22a.png)\\r\\n\\r\\n![Power BI Sydney example Part B](/src/assets/blog/2021-10-10--22.png)\\r\\n\\r\\nEurope, Dublin is a time zone that uses UTC time and \\"last position\\" (indicated by the 9), for its anchors.\\r\\n![Power BI Dublin example Part A](/src/assets/blog/2021-10-10--23a.png)\\r\\n\\r\\n![Power BI Dublin example Part B](/src/assets/blog/2021-10-10--23.png)\\r\\n\\r\\nAfrica, Casablanca is a time zone that uses a fixed date of the month for its anchors.\\r\\n![Power BI Casablanca example Part A](/src/assets/blog/2021-10-10--24a.png)\\r\\n\\r\\n![Power BI Casablanca example Part B](/src/assets/blog/2021-10-10--24.png)\\r\\n\\r\\nSo now we have created a parameterised way of defining our data source\'s time zone, with potential to compensate for skipped daylight savings conversions it may have, by using the concept of anchor values to construct relative date/times.\\r\\n\\r\\nUse cases for this include:\\r\\n1. Dynamically converting date/times to another time zone e.g. a report reader from one time zone wanting to know the date/times from the perspective of another time zone.\\r\\n2. The admittedly rare instance where the time zone of date/times may vary at access or export when creating a datset.\\r\\n\\r\\nAn example where I encountered use case #2, was manually exporting data from Explore, the reporting tool for the Zendesk customer service platform, where date/times are automatically converted to match the time zone of the extractor\'s Zendesk login.\\r\\n\\r\\nIn that scenario, if multiple people from different time zones are creating or maintaining dashboards not made in the native Explore tool (e.g. via Power BI), their extract date times can be inconsistent.\\r\\n\\r\\nThere are simple ways around this:\\r\\n* Creating a shared account fixed to a specific time zone for data extracts.\\r\\n* Having access to the data source\'s API.\\r\\n\\r\\nYou can take this further for other solutions, such as hard-coding the desired time zone, or make it based on the values of another column e.g. time zone is based on country or city values.\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2021-10-10.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1633183200,"title":"Import time zone offsets and observations from Wikipedia in Power BI\\r","name":"import-time-zone-offsets-and-observations-from-wikipedia-in-power-bi","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\"]\\r","date":"3 October 2021\\r","content":"How to use Power BI to scrape Wikipedia pages and create a data source for UTC time zone offsets and daylight saving observation anchors (e.g. the first Sunday of October).\\r\\n\\r\\nHere we will be importing Wikipedia table data from 2 different pages. The first example contains structured data values requiring minimal data cleaning. The second contains data which requires disaggregation of qualitative information to make it more quantitative.\\r\\n\\r\\nTime zone offset hours\\r\\n[https://en.wikipedia.org/wiki/List_of_tz_database_time_zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)\\r\\n\\r\\n![Wikipedia List of tz database time zones](/src/assets/blog/2021-10-03--01.png)\\r\\n\\r\\nDaylight Saving observation period anchors\\r\\n[https://en.wikipedia.org/wiki/Daylight_saving_time_by_country](https://en.wikipedia.org/wiki/Daylight_saving_time_by_country)\\r\\n\\r\\n![Wikipedia Daylight saving time by country](/src/assets/blog/2021-10-03--02.png)\\r\\n\\r\\n**Exercise 1:**\\r\\n\\r\\nBeginning with the time zone offset hours, we Get Data from Web and provide the URL.\\r\\n\\r\\n![Power BI Import data from a web page](/src/assets/blog/2021-10-03--03.png)\\r\\n\\r\\nSelect the Basic option. The intention is to export the results to Excel, as opposed to a live ongoing connection. This is to mitigate problems regarding source page changes and connection delays.\\r\\n\\r\\n![Power BI Import data Basic setting and set URL](/src/assets/blog/2021-10-03--04.png)\\r\\n\\r\\nThe HTML table we are after is the list containing the offsets.\\r\\nTick it, then click Transform Data.\\r\\n\\r\\n![Power BI Import data web page table selection](/src/assets/blog/2021-10-03--05.png)\\r\\n\\r\\nNext we Use First Row as Headers to assign the column names.\\r\\n\\r\\n![Power Query Use First Row as Headers](/src/assets/blog/2021-10-03--06.png)\\r\\n\\r\\nThen we add new custom columns to substitute existing columns to clean the data.\\r\\n\\r\\nFirst we add a new column to substitute the TZ database name column, replacing the single forward slashes / with forward slashes surrounded by spaces  / , and replace the underscores _ with spaces  , for readability.\\r\\n\\r\\n```\\r\\nText.Replace(Text.Replace([TZ database name],\\"/\\", \\", \\"),\\"_\\",\\" \\")\\r\\n```\\r\\n\\r\\n![Power Query Replace text to make more readable](/src/assets/blog/2021-10-03--07.png)\\r\\n\\r\\nSecondly, the data sources offsets use a different dash character \\"\\" (slightly longer) from the mathematical operator \\"-\\" (shorter), so we need to create custom columns to substitute the longer dash with the shorter one.\\r\\n\\r\\nFor the Standard UTC offset:\\r\\n\\r\\n```\\r\\nText.Replace([#\\"UTC offset hh:mm\\"],\\"\\",\\"-\\")\\r\\n```\\r\\n![Power Query Custom Column: Standard UTC offset](/src/assets/blog/2021-10-03--08.png)\\r\\n\\r\\nFor the Daylight Saving UTC offset:\\r\\n\\r\\n```\\r\\nText.Replace([#\\"UTC DST offset hh:mm\\"],\\"\\",\\"-\\")\\r\\n```\\r\\n![Power Query Custom Column: Daylight Saving UTC offset](/src/assets/blog/2021-10-03--09.png)\\r\\n\\r\\nNow to add a column that shows the difference between the standard and daylight savings offsets.\\r\\nThe nature of the data means you cannot subtract them in a simple way.\\r\\nComments are included in the code to explain what is occurring.\\r\\n\\r\\n```\\r\\n/* If the offsets are identical, it may imply no Daylight Saving observed */\\r\\nif [Standard UTC offset] = [Daylight Saving UTC offset]\\r\\nthen 0\\r\\n\\r\\n/* If minutes are the same and aren\'t zero, just subtract hours */\\r\\nelse if (Text.End([Standard UTC offset],2) <> \\"00\\" or \\r\\nText.End([Daylight Saving UTC offset],2) <> \\"00\\") and Text.End([Standard UTC offset],2) = Text.End([Daylight Saving UTC offset],2)\\r\\nthen Number.FromText(Text.Range([Daylight Saving UTC offset],0,3)) - Number.FromText(Text.Range([Standard UTC offset],0,3))\\r\\n\\r\\n/* If minutes are different and either of them aren\'t zero, convert minutes to proper decimals, subtract, then convert minutes back */\\r\\nelse if (Text.End([Standard UTC offset],2) <> \\"00\\" or \\r\\nText.End([Daylight Saving UTC offset],2) <> \\"00\\") and Text.End([Standard UTC offset],2) <> Text.End([Daylight Saving UTC offset],2)\\r\\nthen (Number.FromText(Text.Range([Daylight Saving UTC offset],1,2)) + (Number.FromText(Text.End([Daylight Saving UTC offset],2)) / 60)) - (Number.FromText(Text.Range([Standard UTC offset],1,2)) + (Number.FromText(Text.End([Standard UTC offset],2)) / 60))\\r\\n\\r\\n/* Standard expectation that difference is only in the hour values */\\r\\nelse Number.FromText(Text.Range([Daylight Saving UTC offset],1,2)) - Number.FromText(Text.Range([Standard UTC offset],1,2))\\r\\n```\\r\\n\\r\\n![Power Query Custom Column: Offset difference](/src/assets/blog/2021-10-03--10.png)\\r\\n\\r\\nNext we filter out the data rows not required, starting with only including Canonical status offsets\\r\\n\\r\\n![Power Query Filter for Canonical records](/src/assets/blog/2021-10-03--11.png)\\r\\n\\r\\nThen we filter for time zones that have a country code.\\r\\n\\r\\n![Power Query Filter for country codes](/src/assets/blog/2021-10-03--12.png)\\r\\n\\r\\nLastly, remove columns that wont be needed, depending on what you need for your data source.\\r\\n\\r\\n![Power Query Remove other columns](/src/assets/blog/2021-10-03--13.png)\\r\\n\\r\\nIn my scenario, I want to retain this data separately in an Excel file, so I create a table in Power BI with all the columns, then Export.\\r\\n\\r\\n![Power BI Export table results](/src/assets/blog/2021-10-03--14.png)\\r\\n\\r\\n\\r\\n\\r\\n**Exercise 2:**\\r\\n\\r\\nFor our second dataset, we need to retrieve the relative anchors for daylight saving periods using the second URL: [https://en.wikipedia.org/wiki/Daylight_saving_time_by_country](https://en.wikipedia.org/wiki/Daylight_saving_time_by_country)\\r\\n\\r\\n![Power BI Import data Basic setting and set URL](/src/assets/blog/2021-10-03--15.png)\\r\\n\\r\\nAgain, click Transform Data and Use First Row as Headers.\\r\\n\\r\\n![Power BI Import data web page table selection](/src/assets/blog/2021-10-03--16.png)\\r\\n\\r\\n![Power Query Use First Row as Headers](/src/assets/blog/2021-10-03--17.png)\\r\\n\\r\\nNext we filter for records with a valid current DST start value.\\r\\n\\r\\n![Power Query Filter for valid DST start](/src/assets/blog/2021-10-03--18.png)\\r\\n\\r\\nThe problem with this dataset is that the DST start and DST end columns are not quantified at a low enough level to be easily worked with. Revising these columns, we can see value commonalities that can be separated out into custom columns as declartive anchors for each daylight saving periods start and end.\\r\\n\\r\\nThis includes:\\r\\n* Positions (i.e. first, second, third, fourth, last)\\r\\n* Weekday names\\r\\n* Month names\\r\\n* UTC prefixed with a specific UTC time (e.g. 01:00 UTC), or prefixed with a non-UTC time (e.g. 002:00 AST (UTC-4)\\r\\n* Phrases local standard time and local daylight saving time prefixed with a time\\r\\n\\r\\n![Power Query Exploring qualitative data values](/src/assets/blog/2021-10-03--19.png)\\r\\n\\r\\nThe custom columns are base conditions that check for substrings and substitute them with numerical data where possible, so they can be referenced by other custom functions.\\r\\n\\r\\nWell begin with the position-related column.\\r\\n\\r\\nEvery day has at least four occurrences in each month, but the last position could either be the fourth or fifth occurrence of that day. I chose to use an arbitrary value of 9 for the output of last, given 5 could possibly be used for the fifth instance of the day. Note: With this particular dataset, neither Fourth nor Fifth occur, so they can be omitted here if you want.\\r\\n\\r\\n```\\r\\nif Text.Contains([DST start], \\"First\\")\\r\\nthen 1\\r\\nelse if Text.Contains([DST start], \\"Second\\")\\r\\nthen 2\\r\\nelse if Text.Contains([DST start], \\"Third\\")\\r\\nthen 3\\r\\nelse if Text.Contains([DST start], \\"Fourth\\")\\r\\nthen 4\\r\\nelse if Text.Contains([DST start], \\"Fifth\\")\\r\\nthen 5\\r\\nelse if Text.Contains([DST start], \\"Last\\")\\r\\nthen 9\\r\\nelse null\\r\\n```\\r\\n\\r\\n![Power Query Custom Column: DST start position anchor](/src/assets/blog/2021-10-03--20.png)\\r\\n\\r\\nNext to create a custom column for the weekdays, using Power Querys Day functions, which translate as numbers from 0 for Sunday to 6 for Saturday.\\r\\n\\r\\n```\\r\\nif Text.Contains([DST start], \\"Sunday\\")\\r\\nthen Day.Sunday\\r\\nelse \\r\\nif Text.Contains([DST start], \\"Monday\\")\\r\\nthen Day.Monday\\r\\nelse \\r\\nif Text.Contains([DST start], \\"Tuesday\\")\\r\\nthen Day.Tuesday\\r\\nelse \\r\\nif Text.Contains([DST start], \\"Wednesday\\")\\r\\nthen Day.Wednesday\\r\\nelse \\r\\nif Text.Contains([DST start], \\"Thursday\\")\\r\\nthen Day.Thursday\\r\\nelse \\r\\nif Text.Contains([DST start], \\"Friday\\")\\r\\nthen Day.Friday\\r\\nelse \\r\\nif Text.Contains([DST start], \\"Saturday\\")\\r\\nthen Day.Saturday\\r\\nelse null\\r\\n```\\r\\n\\r\\n![Power Query Custom Column: DST start day anchor](/src/assets/blog/2021-10-03--21.png)\\r\\n\\r\\nWe repeat with similar logic for the DST start fields month anchor. At time of writing, Power Query has a function that converts month numbers to month names, but not the other way around.\\r\\n\\r\\n```\\r\\nif Text.Contains([DST start], \\"January\\")\\r\\nthen 1\\r\\nelse if Text.Contains([DST start], \\"February\\")\\r\\nthen 2\\r\\nelse if Text.Contains([DST start], \\"March\\")\\r\\nthen 3\\r\\nelse if Text.Contains([DST start], \\"April\\")\\r\\nthen 4\\r\\nelse if Text.Contains([DST start], \\"May\\")\\r\\nthen 5\\r\\nelse if Text.Contains([DST start], \\"June\\")\\r\\nthen 6\\r\\nelse if Text.Contains([DST start], \\"July\\")\\r\\nthen 7\\r\\nelse if Text.Contains([DST start], \\"August\\")\\r\\nthen 8\\r\\nelse if Text.Contains([DST start], \\"September\\")\\r\\nthen 9\\r\\nelse if Text.Contains([DST start], \\"October\\")\\r\\nthen 10\\r\\nelse if Text.Contains([DST start], \\"November\\")\\r\\nthen 11\\r\\nelse if Text.Contains([DST start], \\"December\\")\\r\\nthen 12\\r\\nelse null\\r\\n```\\r\\n\\r\\n![Power Query Custom Column: DST start month anchor](/src/assets/blog/2021-10-03--22.png)\\r\\n\\r\\nLastly, we will pull where a UTC time is specified. There are entries where a local time with its UTC offset value is provided, but since these entries are few and complex to manage, I will edit the export result afterward to account for these. Its a cost vs benefit juggle.\\r\\n\\r\\n```\\r\\nif Text.Contains([DST start], \\" UTC\\") then Text.Range([DST start], Text.PositionOf([DST start],\\" UTC\\") - 5, 5) else null\\r\\n```\\r\\n\\r\\n![Power Query Custom Column: DST start UTC time anchor](/src/assets/blog/2021-10-03--23.png)\\r\\n\\r\\nRinse-and-repeat the creation of those anchor columns. An alternative is creating a custom function to make it easier to manage later on.\\r\\n\\r\\n![Power Query Custom Columns for DST end](/src/assets/blog/2021-10-03--24.png)\\r\\n\\r\\nThen we can retain the columns we need, such as Country/Territory, Notes, and the custom columns we created.\\r\\n\\r\\n![Power Query Remove other columns](/src/assets/blog/2021-10-03--25.png)\\r\\n\\r\\nLastly, as with the previous dataset, we will export this to Excel, and clean up the file from there, e.g. accounting for records that have a different data structure for their anchors, such as an exact date for day and month per year, and records that include local time, etc.\\r\\n\\r\\n![Power BI Export table results](/src/assets/blog/2021-10-03--26.png)\\r\\n\\r\\nAt this point, we typically would merge these datasets, similar to left outer joins in SQL. Unfortunately, the first dataset uses an incoherent structure for its time zone name values, e.g. _country, city_ or _region, city_ or _region, country, city_ etc., as opposed to the second data set, which only lists country.\\r\\n\\r\\n![Power Query Merge Queries](/src/assets/blog/2021-10-03--27.png)\\r\\n\\r\\nI tried fuzzy matching, but as at time of writing, it cannot connect a high enough number of the records, regardless of adjustments made to the accuracy.\\r\\n\\r\\n![Power Query Merge using fuzzy matching](/src/assets/blog/2021-10-03--28.png)\\r\\n\\r\\nAn alternative solution would be to create a list based on the second datasets county column, but this would neglect the _region, city_ joins from the first dataset. Another would be to find a third dataset to extend the other datasets and formulate a common column for the merge.\\r\\n\\r\\nIn my scenario, it would be more time efficient to do the mapping manually, as this dataset is small, and intended for a niche non-scaled need. \\r\\n\\r\\nFind a copy of the end product to download as an Excel file **[here](/src/assets/blog/Time_zone_offsets_and_DST_observations.xlsx?raw=true)**.\\r\\n\\r\\nAs a reminder, this is strictly an exercise file, and its data is not comprehensive nor accurate, so please be mindful of that if using it.\\r\\n\\r\\n![Manually cleaned output](/src/assets/blog/2021-10-03--29.png)\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2021-10-03.md)** for this post\'s markdown file in GitHub.","photo":""},{"id":1632578400,"title":"Find date for the nth day of a month in Power BI\\r","name":"find-date-for-the-nth-day-of-a-month-in-power-bi","tech":"logo-powerbi\\r","tags":"[\\"Power BI\\", \\"Power Query\\"]\\r","date":"26 September 2021\\r","content":"How to use Power Query to find the date for the nth day of a month/year based on another date column (e.g. 3rd Tuesday of October 2021).\\r\\n\\r\\nIn Power BI this can be used for the conditional logic of other Custom Columns. For example, to create indicators that data rows occur on or fall between relative date ranges (e.g. Black Friday sales). The following involves adding a Custom Column in Power Query i.e. M code, not DAX.\\r\\n\\r\\nThis finds the first Monday of the month, where our dependent date column is OurDateField.\\r\\n\\r\\n```\\r\\nDate.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/\\" & Text.From((7 - (Date.DayOfWeek(Date.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/1\\"),Day.Monday)))))\\r\\n```\\r\\n\\r\\n![Power Query: 1st Sunday of month](/src/assets/blog/2021-09-26--01.png)\\r\\n\\r\\n**How it works**\\r\\n\\r\\nTo find the first Sunday of a specific month/year relative to another date, first establish the start of the month e.g. 1/10 (1st October), passing in the date field you are using e.g. [OurDateField], to append its year.\\r\\n\\r\\n```\\r\\nDate.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/1\\")\\r\\n```\\r\\n\\r\\nIn this example, we are hard-coding October regardless of OurDateFields month value, but if you need it to be relative to its month too, simply add an extra concatenation for month in the same way year is treated, i.e. using Date.Month().\\r\\n\\r\\nNow we need to identify what day of the week that this first day of the month is, using Date.DayOfWeek, and setting the optional parameter for what the start of the week is, as Day.Monday\\r\\n\\r\\n```\\r\\nDate.DayOfWeek(Date.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/1\\"),Day.Monday)\\r\\n```\\r\\n\\r\\n![Power Query: Day of week number](/src/assets/blog/2021-09-26--02.png)\\r\\n\\r\\n \\r\\nIn this example, 1st October 2021 is a Friday, and Fridays day number is 4 (with Monday being 0).\\r\\n\\r\\n![Calendar: Weekday of 1st day of month](/src/assets/blog/2021-09-26--03.png)\\r\\n\\r\\nIf you do not provide the Day.Monday parameter, it will default to Day.Monday in the background. If another parameter is used e.g. Day.Sunday, then the assignment numbers will change.\\r\\n\\r\\nNow we subtract the weekday number 4 from 7, and get 3, which is the first Sundays date.\\r\\n\\r\\n```\\r\\n7 - (Date.DayOfWeek(Date.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/1\\"),Day.Monday))\\r\\n```\\r\\n\\r\\n![Power Query: Date of 1st Sunday](/src/assets/blog/2021-09-26--04.png)\\r\\n\\r\\nThen concatenate this with the year month retrieved earlier\\r\\n\\r\\n```\\r\\nDate.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/\\" & Text.From((7 - (Date.DayOfWeek(Date.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/1\\"),Day.Monday)))))\\r\\n```\\r\\n\\r\\n![Power Query: Concatenate the month year to the date](/src/assets/blog/2021-09-26--05.png)\\r\\n\\r\\nIf you need to change the weekday that Power Query needs to find, simply increment the Day.Monday parameter to the following day of the desired weekday.\\r\\n\\r\\nFor example, if you want to find the first Wednesday, change the parameter to Day.Thursday.\\r\\n\\r\\n```\\r\\nDate.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/\\" & Text.From((7 - (Date.DayOfWeek(Date.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/1\\"),Day.Thursday)))))\\r\\n```\\r\\n\\r\\n![Power Query: 1st Wednesday of month](/src/assets/blog/2021-09-26--06.png)\\r\\n\\r\\n![Calendar: 1st Wednesday of the month](/src/assets/blog/2021-09-26--07.png)\\r\\n\\r\\nIf you need to change the position from first, to second, third, or fourth Sunday, simply add 7 for the second, 14 for the third, and 21 for the fourth.\\r\\n\\r\\nFor example, we will retrieve the 3rd Sunday.\\r\\n\\r\\n```\\r\\nDate.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/\\" & Text.From((7 - (Date.DayOfWeek(Date.FromText(Text.From(Date.Year([OurDateField])) & \\"/10/1\\"),Day.Monday)) + 14 )))\\r\\n```\\r\\n\\r\\n![Calendar: 3rd Sunday of the month](/src/assets/blog/2021-09-26--08.png)\\r\\n\\r\\n\\r\\n\\r\\n**Edit: 9th October 2021**\\r\\n\\r\\nIf the last occurrence of a specific day in a month needs to be retrieved, it can possibly be the 4th or 5th instance of that day. Retrieving this may be required for conditional or other custom column dependencies. \\r\\n\\r\\nAs an example, this Power Query code finds the last Sunday of the month, where our dependent date column is OurDateField.\\r\\n\\r\\n```\\r\\nDate.AddDays(Date.EndOfMonth([OurDateField]),(-1 * Number.From(Date.DayOfWeek(Date.EndOfMonth([OurDateField]), Day.Sunday))))\\r\\n```\\r\\n![Power Query Day number of last of the month year Day.Sunday](/src/assets/blog/2021-09-26--12.png)\\r\\n\\r\\n**How it works**\\r\\n\\r\\nWe will try to retrieve the last Sunday of a specific month/year, passing in our relative *OurDateField*.\\r\\n\\r\\n```\\r\\nDate.EndOfMonth([OurDateField])\\r\\n```\\r\\n![Power Query last day of the month year](/src/assets/blog/2021-09-26--09.png)\\r\\n\\r\\nThen find out which day of the week it is.\\r\\n\\r\\n```\\r\\nDate.DayOfWeek(Date.EndOfMonth([OurDateField]), Day.Monday)\\r\\n```\\r\\n![Power Query Day number of last of the month year Day.Monday](/src/assets/blog/2021-09-26--10.png)\\r\\n\\r\\nIn this example, 31st January 2021 is a Sunday, and Sundays day number is 6. This is if the optional parameter for start of the week is Day.Monday (which is the default, if not provided).\\r\\n\\r\\n![Calendar using Day.Monday](/src/assets/blog/2021-09-26--11.png)\\r\\n\\r\\nNow we will swap that Day.Monday parameter out with Day.Sunday, so that the value for Sunday becomes 0 instead of 6.\\r\\n\\r\\n```\\r\\nDate.DayOfWeek(Date.EndOfMonth([OurDateField]), Day.Sunday)\\r\\n```\\r\\n![Power Query Day number of last of the month year Day.Sunday](/src/assets/blog/2021-09-26--12.png)\\r\\n\\r\\n![Calendar using Day.Sunday](/src/assets/blog/2021-09-26--13.png)\\r\\n\\r\\nWe then minus this number from the last date of the month, to get the last Sunday of the month, whih ironically is the same day i.e. Sunday 31/01/2021 - 0 = 31/01/2021. We do this using the Date.AddDays function and multiplying the number with -1.\\r\\n\\r\\n```\\r\\nDate.AddDays(Date.EndOfMonth([OurDateField]),(-1 * Number.From(Date.DayOfWeek(Date.EndOfMonth([OurDateField]), Day.Sunday))))\\r\\n```\\r\\n![Power Query last date Sunday](/src/assets/blog/2021-09-26--14.png)\\r\\n\\r\\nLastly, if you need to pick any other last specific day of the month, just increment by one for each day you want to go earlier in the week e.g. Saturday is +1, Friday is +2 etc.\\r\\n\\r\\nFor example, the last Friday of the month year.\\r\\n\\r\\n```\\r\\nDate.AddDays(Date.EndOfMonth([OurDateField]),(-1 * (Number.From(Date.DayOfWeek(Date.EndOfMonth([OurDateField]), Day.Sunday)) + 2)))\\r\\n```\\r\\n![Power Query last date Friday](/src/assets/blog/2021-09-26--15.png)\\r\\n\\r\\n![Power Query last date Friday](/src/assets/blog/2021-09-26--16.png)\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/posts/2021-09-26.md)** for this post\'s markdown file in GitHub.","photo":""}]');function sF(){const n=Dg.length,e=Rg.length;return ae.jsxs("content",{className:"content-no-bg",children:[ae.jsx("center",{children:ae.jsx("h1",{children:"ABOUT"})}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsxs("div",{id:"about",children:[ae.jsx("img",{src:zP,alt:"avatar"}),ae.jsxs("div",{id:"about-desc",children:[ae.jsxs("div",{id:"about-title",children:[ae.jsx("img",{src:BP,alt:""}),ae.jsx("img",{src:HP,alt:""}),ae.jsx("img",{src:VP,alt:""})]}),ae.jsx("p",{children:"A data and tech enthusiast with over 12 years client services experience in the advertising software and healthcare industries."}),ae.jsx("p",{children:"Specialist in software problem-solving and performing data analysis with SQL querying, Excel data models, and Power BI."}),ae.jsxs("ul",{children:[ae.jsxs("li",{children:[n," side projects since October 2021"]}),ae.jsxs("li",{children:[e," blog posts since Sep 2021"]})]})]})]}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx(aF,{}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx(Z5,{}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx("center",{children:ae.jsx("h2",{children:"SITE CREDITS"})}),ae.jsxs("div",{id:"credits",children:[ae.jsx("p",{children:"I designed and coded this website, but also incorporated the following:"}),ae.jsxs("ul",{children:[ae.jsx("li",{children:ae.jsxs("p",{children:["Creating a React site with URL path management: a LinkedIn Learning course by Shaun Wassell ",ae.jsx("a",{href:"https://www.linkedin.com/learning/react-creating-and-hosting-a-full-stack-site-24928483/defining-environment-variables",target:"_blank",children:"https://www.linkedin.com/learning/react-creating-and-hosting-a-full-stack-site-24928483/defining-environment-variables"}),"."]})}),ae.jsx("li",{children:ae.jsxs("p",{children:["JavaScript code that renders multiple page data from markdown: a YouTube tutorial by Will Ward ",ae.jsx("a",{href:"https://www.youtube.com/watch?v=gT1v33oA1gI&list=PLASldBPN_pkBfRXOkBOaeCJYzCnISw5-Z",target:"_blank",children:"https://www.youtube.com/watch?v=gT1v33oA1gI&list=PLASldBPN_pkBfRXOkBOaeCJYzCnISw5-Z"}),"."]})}),ae.jsx("li",{children:ae.jsxs("p",{children:["Three.js code for a rotating Earth: a YouTube tutorial by Robot Bobby ",ae.jsx("a",{href:"https://www.youtube.com/watch?v=FntV9iEJ0tU",target:"_blank",children:"https://www.youtube.com/watch?v=FntV9iEJ0tU"}),"."]})})]}),ae.jsxs("p",{children:["To create your own GitHub Pages site using React, you can refer to this site's ",ae.jsx("a",{href:"https://github.com/makuharistudio/makuharistudio.github.io",target:"_blank",children:"README"})," on GitHub."]})]})]})}const kg="/assets/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency-original-CwHgzC0-.png",Pg="/assets/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency-DRqH-BJD.gif",Lg="/assets/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency-DzmDo5wY.png",Ig="/assets/img-2021-11-power-bi-follow-the-sun-customer-support-original-trimmed-B3ca5T7J.png",Og="/assets/img-2021-11-power-bi-follow-the-sun-customer-support-original-B2Ig6zIv.png",Ug="/assets/img-2021-11-power-bi-follow-the-sun-customer-support-previous-COTtGLLi.png",Ng="/assets/img-2021-11-power-bi-follow-the-sun-customer-support-BTfFtLlJ.gif",Fg="/assets/img-2021-11-power-bi-follow-the-sun-customer-support-BTD_ixIU.png",zg="/assets/img-2022-01-sql-server-integration-services-international-marketplace-trimmed-BY36NJxj.png",Bg="/assets/img-2022-01-sql-server-integration-services-international-marketplace-B-aiuGpr.png",Hg="/assets/img-2022-04-power-bi-international-marketplace-python-deneb-original-D3Fk3wtD.png",Vg="/assets/img-2022-04-power-bi-international-marketplace-python-deneb-previous-9jg07XaV.png",Gg="/assets/img-2022-04-power-bi-international-marketplace-python-deneb-Bj5ZeCeY.gif",jg="/assets/img-2022-04-power-bi-international-marketplace-python-deneb-CBbtHBl8.png",qg="/assets/img-2022-06-excel-customer-support-agent-performance-original-BkK14kN9.png",Wg="/assets/img-2022-06-excel-customer-support-agent-performance-Oj0_rXIX.gif",Yg="/assets/img-2022-06-excel-customer-support-agent-performance-C8S9Zb7x.png",Xg="/assets/img-2022-08-satellite-launch-overview-mHp2kvlH.gif",Qg="/assets/img-2022-10-excel-international-marketplace-profit-forecast-original-rL6-YDgw.png",Zg="/assets/img-2022-10-excel-international-marketplace-profit-forecast-DgzDdmOb.gif",Kg="/assets/img-2022-11-power-bi-appsource-deneb-maps-CLOvmfwS.gif";function oF({projects:n}){const[e,t]=ge.useState(null);if(!n)return ae.jsx("div",{children:"No projects available"});const i=n.flatMap(h=>JSON.parse(h.tags)),s=[...new Set(i)].sort(),l=e?n.filter(h=>JSON.parse(h.tags).includes(e)):n,c={color:"var(--button-font-color-hover)",border:"1px solid var(--button-font-color-hover)"};return ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"filter",children:[ae.jsx("button",{onClick:()=>t(null),style:e===null?c:{},children:"ALL PROJECTS"}),s.map(h=>ae.jsx("button",{onClick:()=>t(h),style:e===h?c:{},children:h},h))]}),ae.jsx("div",{id:"portfolio-list",children:l.map(h=>{const d=h.photo.startsWith("http")?h.photo:new URL(Object.assign({"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency-original.png":kg,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.gif":Pg,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.png":Lg,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-original-trimmed.png":Ig,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-original.png":Og,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-previous.png":Ug,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.gif":Ng,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.png":Fg,"../assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace-trimmed.png":zg,"../assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace.png":Bg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb-original.png":Hg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb-previous.png":Vg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.gif":Gg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.png":jg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance-original.png":qg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance.gif":Wg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance.png":Yg,"../assets/portfolio/img-2022-08-satellite-launch-overview.gif":Xg,"../assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast-original.png":Qg,"../assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast.gif":Zg,"../assets/portfolio/img-2022-11-power-bi-appsource-deneb-maps.gif":Kg})[`../assets/portfolio/${h.photo.split("/").pop().trim()}`],import.meta.url).href;return ae.jsxs(Na,{to:"/portfolio/"+h.name,children:[ae.jsx("h4",{children:h.title}),ae.jsx("h5",{children:h.date}),ae.jsx("img",{src:d,loading:"lazy",alt:h.title}),ae.jsx("p",{children:h.desc})]},h.name)})})]})}function lF(){return ae.jsxs(ae.Fragment,{children:[ae.jsxs("center",{children:[ae.jsx("h1",{children:"PORTFOLIO"}),ae.jsx("h3",{children:"These are personal projects I created whilst exploring different technologies."})]}),ae.jsx(oF,{projects:Dg})]})}const kw="/assets/2021-09-26--01-CN2UEg_u.png",Pw="/assets/2021-09-26--02-DcXVAYrq.png",Lw="/assets/2021-09-26--03-DEOW-nZy.png",Iw="/assets/2021-09-26--04-QiKdQCfc.png",Ow="/assets/2021-09-26--05-BpR1Uth4.png",Uw="/assets/2021-09-26--06-CZ9B3zyN.png",Nw="/assets/2021-09-26--07-ZeJ8X8ib.png",Fw="/assets/2021-09-26--08-DQi7Slko.png",zw="/assets/2021-09-26--09-Deji7B9x.png",Bw="/assets/2021-09-26--10-ulqXh80B.png",Hw="/assets/2021-09-26--11-g50LgiWd.png",Vw="/assets/2021-09-26--12-D52VG_t7.png",Gw="/assets/2021-09-26--13-BZX8gER8.png",jw="/assets/2021-09-26--14-Cmgy--G1.png",qw="/assets/2021-09-26--15-rVAhqHMK.png",Ww="/assets/2021-09-26--16-BT9Ub-kJ.png",Yw="/assets/2021-10-03--01-Cv8vGuEW.png",Xw="/assets/2021-10-03--02-9NLB3zrT.png",Qw="/assets/2021-10-03--03-BI0-9vjk.png",Zw="/assets/2021-10-03--04-C4Sjx6LV.png",Kw="/assets/2021-10-03--05-lLyWTVhA.png",Jw="/assets/2021-10-03--06-RQWN-iFL.png",$w="/assets/2021-10-03--07-DZ3DLhlu.png",ex="/assets/2021-10-03--08-iAaa3aqQ.png",tx="/assets/2021-10-03--09-CQKSdiQK.png",nx="/assets/2021-10-03--10-YgO-AgqZ.png",rx="/assets/2021-10-03--11-MCTJbUXw.png",ix="/assets/2021-10-03--12-B1SbH3DF.png",ax="/assets/2021-10-03--13-BaHJOdir.png",sx="/assets/2021-10-03--14-BHA1g5qz.png",ox="/assets/2021-10-03--15-Cl_kMgVm.png",lx="/assets/2021-10-03--16-BwmhFDeq.png",cx="/assets/2021-10-03--17-yN-E_DGG.png",ux="/assets/2021-10-03--18-DJewq8lU.png",hx="/assets/2021-10-03--19-LMrFezWQ.png",dx="/assets/2021-10-03--20-yXUJkANj.png",fx="/assets/2021-10-03--21-BJaj4FXr.png",px="/assets/2021-10-03--22-aISiaK4Y.png",mx="/assets/2021-10-03--23-DMFG-08T.png",gx="/assets/2021-10-03--24-BX0Z1B76.png",yx="/assets/2021-10-03--25-DCxXWRlp.png",bx="/assets/2021-10-03--26-D4B7qHE7.png",vx="/assets/2021-10-03--27-qINw90dY.png",_x="/assets/2021-10-03--28-BLaBL1CA.png",wx="/assets/2021-10-03--29-DNcz_ipR.png",xx="/assets/2021-10-10--01-DCMXf4Qs.png",Sx="/assets/2021-10-10--02-8-Jl4wuD.png",Tx="/assets/2021-10-10--03-DvjLWL93.png",Ex="/assets/2021-10-10--04-DQTlpT5a.png",Mx="/assets/2021-10-10--05-T8X2flk0.png",Ax="/assets/2021-10-10--06-B-wIKEBi.png",Cx="/assets/2021-10-10--07-lAHiGVC0.png",Dx="/assets/2021-10-10--08-B13ggMM1.png",Rx="/assets/2021-10-10--09-C3A-q0W7.png",kx="/assets/2021-10-10--10-B88AE_JU.png",Px="/assets/2021-10-10--11-B9NygW-9.png",Lx="/assets/2021-10-10--12-O_pKLe2Q.png",Ix="/assets/2021-10-10--13-B-yHAJoe.png",Ox="/assets/2021-10-10--14-DIiMS1q9.png",Ux="/assets/2021-10-10--15-CXMzzsJr.png",Nx="/assets/2021-10-10--16-DYU8EcU0.png",Fx="/assets/2021-10-10--17-mslEC_xz.png",zx="/assets/2021-10-10--18-BEyhXMYz.png",Bx="/assets/2021-10-10--19-B6bIpLy0.png",Hx="/assets/2021-10-10--20-DRDr5d6X.png",Vx="/assets/2021-10-10--21-BNvX9777.png",Gx="/assets/2021-10-10--22-XThAwSGx.png",jx="/assets/2021-10-10--22a-BbH3M5An.png",qx="/assets/2021-10-10--23-O7-nDyxL.png",Wx="/assets/2021-10-10--23a-DGDWQQ3U.png",Yx="/assets/2021-10-10--24-BWOFpnK6.png",Xx="/assets/2021-10-10--24a-DsjKr18f.png",Qx="/assets/2021-10-17--01-DbYAffHu.png",Zx="/assets/2021-10-17--02-B8Khk-t2.png",Kx="/assets/2021-10-17--03-Ce9ULgVe.png",Jx="/assets/2021-10-17--04-yX3EQtPv.png",$x="/assets/2021-10-17--05-CM0iIh72.png",eS="/assets/2021-10-17--06-CFZjFcWQ.png",tS="/assets/2021-10-17--07-BhOiAbYb.png",nS="/assets/2021-10-17--08-BaaXf0PT.png",rS="/assets/2021-10-24--01-CkFbMREY.png",iS="/assets/2021-10-24--02-DvWJ9dVz.png",aS="/assets/2021-10-24--03-Bsa4xjoj.png",sS="/assets/2021-10-24--04-DWrQbnij.png",oS="/assets/2021-10-24--05-BpI-zY7p.png",lS="/assets/2021-10-24--06-ChB3NF68.png",cS="/assets/2021-10-24--07-B8140qtS.png",uS="/assets/2021-10-24--08-BrbRPykg.png",hS="/assets/2021-10-24--09-Cqk71G2L.png",dS="/assets/2021-10-24--10-Bq-CnBa-.png",fS="/assets/2021-10-24--11-D5riVssO.png",pS="/assets/2021-10-24--12-B_PIsuFM.png",mS="/assets/2021-10-24--13-7YQJEqzW.png",gS="/assets/2021-10-24--14-B4sg7sva.png",yS="/assets/2021-10-24--15-Yk0ja-SD.png",bS="/assets/2021-10-24--16-7O2-5KTE.png",vS="/assets/2021-10-24--17-COMaX37c.png",_S="/assets/2021-10-31--01-CgQymK0O.png",wS="/assets/2021-10-31--02-BBStEqpG.png",xS="/assets/2021-10-31--03-CJvDizX5.png",SS="/assets/2021-10-31--04-BTGJmZaz.png",TS="/assets/2021-12-18--01-D45zoY_T.png",ES="/assets/2021-12-18--02-HMON8EFr.png",MS="/assets/2021-12-18--03-D1VfoBGQ.png",AS="/assets/2021-12-18--04-BmR22aCu.png",CS="/assets/2021-12-18--05-Vw5DiO3t.png",DS="/assets/2021-12-18--06-C5LY2K9e.png",RS="/assets/2021-12-18--07-BE9iwhX_.png",kS="/assets/2021-12-18--08-CSmdBFtz.png",PS="/assets/2021-12-18--08a-Czzc_gcT.png",LS="/assets/2021-12-18--09-DdsCMemD.png",IS="/assets/2021-12-18--10-Cehmz-2Q.png",OS="/assets/2022-01-12--00-BxT7OUeU.png",US="/assets/2022-01-12--01-Dj-3qpd4.png",NS="/assets/2022-01-12--02-CGrffE9U.png",FS="/assets/2022-01-12--03-D2TbHEe5.png",zS="/assets/2022-01-12--04-C6v3i3tZ.png",BS="/assets/2022-01-12--05-CQLH12-P.png",HS="/assets/2022-01-12--06-ORqpgS30.png",VS="/assets/2022-01-12--07-CMBkP9X6.png",GS="/assets/2022-01-12--08-CVxq747K.png",jS="/assets/2022-01-12--09-Bp1EhYSw.png",qS="/assets/2022-01-12--10-BPuIR5Zt.png",WS="/assets/2022-02-27--01-Clup5RBd.png",YS="/assets/2022-02-27--02-DqsgNlxH.png",XS="/assets/2022-02-27--03-_mFsCc3Z.png",QS="/assets/2022-02-27--04-BdiSZH_D.png",ZS="/assets/2022-02-27--05-B_MA6XbD.png",KS="/assets/2022-02-27--06-qdRJJmbc.png",JS="/assets/2022-02-27--07-Bcu9JLzb.png",$S="/assets/2022-02-27--08-CWLh3uzC.png",eT="/assets/2022-04-17--01-agelPGzU.png",tT="/assets/2022-04-17--02-IWB4pf2s.png",nT="/assets/2022-04-17--03-tjerC9kA.png",rT="/assets/2022-04-17--04-CG3JvIVw.png",iT="/assets/2022-04-17--05-BffQ6ORa.png",aT="/assets/2022-04-17--06-CHMOigMd.png",sT="/assets/2022-04-17--07-r3696-G9.png",oT="/assets/2022-04-17--08-CPbhZFV2.png",lT="/assets/2022-04-17--09-qXFRKZ_m.png",cT="/assets/2022-04-17--10-DK4rBiUn.png",uT="/assets/2022-04-17--11-CEywFBwl.png",hT="/assets/2022-04-17--12-BHS680Yb.png",dT="/assets/2022-04-17--13-ttXz3XOo.png",fT="/assets/2022-04-17--14-BO4Iyil_.png",pT="/assets/2022-04-17--15-Cwh8hTMp.png",mT="/assets/2022-04-17--16-laKvuRZU.png",gT="/assets/2022-04-17--17-Cm6T-z8A.png",yT="/assets/2022-04-17--18-DoGubWy8.png",bT="/assets/2022-04-17--19-BpkNlCGR.png",vT="/assets/2022-04-17--20-AZH2QUhl.png",_T="/assets/2022-04-17--21-Cxi1IbeO.png",wT="/assets/2022-04-17--22-CxTLPbjn.png",xT="/assets/2022-04-17--23-CJleFwgX.png",ST="/assets/2022-04-17--24-D7lLKw0c.png",TT="/assets/2022-04-17--25-D9t23en4.png",ET="/assets/2022-04-17--26-adRwJCLu.png",MT="/assets/2022-04-17--27-DnXc35r9.png",AT="/assets/2022-04-17--28-CL17WkVs.png",CT="/assets/2022-04-27--01-wuAbb8hF.png",DT="/assets/2022-04-27--02-zoBxWu-t.png",RT="/assets/2022-04-27--03-DfBKxFfN.png",kT="/assets/2022-04-27--04-v9s9WbME.png",PT="/assets/2022-04-27--05-BSFUXvZh.png",LT="/assets/2022-04-27--06-w48xL5z7.png",IT="/assets/2022-04-27--07-C_oYGre-.png",OT="/assets/2022-04-27--08-3UdzeYqv.png",UT="/assets/2022-04-27--09-1A1R3sDC.png",NT="/assets/2022-04-27--10-Cq_5ElO7.png",FT="/assets/2022-06-22--00-DUoyQIKK.png",zT="/assets/2022-06-22--01-DDhYeO-c.png",BT="/assets/2022-06-22--02-DTxpz4-6.png",HT="/assets/2022-06-22--03-CpTABCZO.png",VT="/assets/2022-06-22--04-CB68qCka.png",GT="/assets/2022-06-22--05-GnCTa0lG.png",jT="/assets/2022-06-22--06-D9aK8V6j.png",qT="/assets/2022-07-31--01-DrYjOboV.png",WT="/assets/2022-07-31--02-C4kCCYpx.png",YT="/assets/2022-07-31--03-DVi0T0oF.png",XT="/assets/2022-07-31--04-BWyN3But.png",QT="/assets/2022-08-27--01-CQFZLWv4.png",ZT="/assets/2022-08-27--01a-D3rWCiQr.png",KT="/assets/2022-08-27--02-DlrxWkX1.png",JT="/assets/2022-08-27--03-BB5xYiip.png",$T="/assets/2022-08-27--04-piV0FRXt.png",eE="/assets/2022-08-27--05-CXacJ-Ux.png",tE="/assets/2022-08-27--06-_hmQeTIo.png",nE="/assets/2022-08-27--07-C8y7eyMA.png",rE="/assets/2022-08-27--08-CndKqTYQ.png",iE="/assets/2022-08-27--09-OgFI74iU.png",aE="/assets/2022-08-27--10-CuBHm6gq.png",sE="/assets/2022-08-27--11-B9ilxeEH.png",oE="/assets/2022-08-27--12-Bk0ipdNY.png",lE="/assets/2022-08-27--13-CbOCyHqy.png",cE="/assets/2022-08-27--14-BGYLSkFm.png",uE="/assets/2022-08-27--15-8iyaJo-m.png",hE="/assets/2022-08-27--16-BEfRMiuV.png",dE="/assets/2022-08-27--17-BBjlo4xh.png",fE="/assets/2022-08-27--18-B3FZk8Nz.png",pE="/assets/2022-09-19--01-yZsQHHGF.png",mE="/assets/2022-09-19--02-D-uJ5tx7.png",gE="/assets/2022-09-19--03-tQg3jf4y.png",yE="/assets/2022-09-19--04-JCc_xhyZ.png",bE="/assets/2022-09-19--05-OL47FdDM.png",vE="/assets/2022-09-19--06-QDxoUEs9.png",_E="/assets/2022-09-19--07-mrRdn7j_.png",wE="/assets/2022-09-19--08-DZXbqjkz.png",xE="/assets/2022-09-19--09-C3GZCIf8.png",SE="/assets/2022-09-19--10-B_T2_YiA.png",TE="/assets/2022-09-19--11-_c6EB6c9.png",EE="/assets/2022-09-19--12-Cp8v056W.png",ME="/assets/2022-09-19--13-DOJIyEU2.png",AE="/assets/2022-09-19--14-DuRPl-Ws.png",CE="/assets/2022-09-19--15-Dcxy5PpG.png",DE="/assets/2022-09-19--16-Cv5hTBtv.png",RE="/assets/2022-10-29--01-egOcVzPk.png",kE="/assets/2022-10-29--02-DMgVXKeM.png",PE="/assets/2022-10-29--03-DDO9M27g.png",LE="/assets/2022-10-29--04-B_X26PLG.png",IE="/assets/2022-10-29--05-CEdBS65q.png",OE="/assets/2022-10-29--06-B0497Uy9.png",UE="/assets/2022-10-29--07-BiNzyUFs.png",NE="/assets/2022-10-29--08-DofCH4vX.png",FE="/assets/2022-10-29--09-Bzvl2-EZ.png",zE="/assets/2022-10-29--10-9BijOcQu.png",BE="/assets/2022-10-29--11-BgaDb5Se.png",HE="/assets/2022-10-29--12-xYfIPdIH.png",VE="/assets/2022-10-29--13-to_1Ik-S.png",GE="/assets/2022-10-29--14-ez8xAKsE.png",jE="/assets/2022-10-29--15-Q9wE_zQA.png",qE="/assets/2022-10-29--16-Dhr090yB.png",WE="/assets/2022-10-29--17-Dq9B1FMb.png",YE="/assets/2022-10-29--18-BI91Iy6k.png",XE="/assets/2022-10-29--19-BihPCGqM.png",QE="/assets/2022-10-29--20-BasAdrPz.png",ZE="/assets/2022-10-29--21-CO_p56s0.png",KE="/assets/2022-10-29--22-DzIhezWf.png",JE="/assets/2022-10-29--23-AgALuDjj.png",$E="/assets/2022-10-29--24-Cx-LjqVH.png",eM="/assets/2022-10-29--25-D-Nn9l8c.png",tM="/assets/2022-10-29--26-Dt6by7Vg.png",nM="/assets/2022-10-29--27-DHYFD1Nx.png",rM="/assets/2022-10-29--28-BrG7Zytx.png",iM="/assets/2022-10-29--29-B6FdoAm4.png",aM="/assets/2022-10-29--30-BRJsnYfw.png",sM="/assets/2022-10-29--31-BpReobma.png",oM="/assets/2022-10-29--32-D8oDy5hk.png",lM="/assets/2022-10-29--33-C4kZ_XM5.png",cM="/assets/2022-11-26--01-Dznrz8Nq.png",uM="/assets/2022-11-26--02-BwP3TOki.png",hM="/assets/2022-11-26--03-YmLygtDR.png",dM="/assets/2022-11-26--04-zGUiU4bq.png",fM="/assets/2022-11-26--05-D_ccYrlu.png",pM="/assets/2022-11-26--06-Bzs7oRtV.png",mM="/assets/2022-11-26--07-BJrAsnj8.png",gM="/assets/2022-11-26--08-B3g7c88M.png",yM="/assets/2022-11-26--09-BFpwKop3.png",bM="/assets/2022-11-26--10-1CyKqMEE.png",vM="/assets/2022-11-26--11-DLMQQqsH.png",_M="/assets/2022-11-26--12-I7WCLuVv.png",wM="/assets/2022-11-26--13-ySX0si5Y.png",xM="/assets/2022-11-26--14-BtDuT6gI.png",SM="/assets/2022-11-26--15-CWzjD29K.png",TM="/assets/2022-11-26--16-dx6S6ZOA.png",EM="/assets/2022-11-26--17-CKepHRdC.png",MM="/assets/2022-11-26--18-DJHtzj_G.png",AM="/assets/2022-11-26--19-pBg0zU02.png",CM="/assets/2022-11-26--20-C_FqArTy.png",DM="/assets/2022-11-26--21-DjITr4sW.png",RM="/assets/2022-11-26--22-BvF1nHjm.png",kM="/assets/2022-11-26--23-BbLYMWmJ.png",PM="/assets/2022-11-26--24-DztO8fH0.png",LM="/assets/2022-11-26--25-DY5XhyDv.png",IM="/assets/2022-11-26--26-CmUmF7Ip.png",OM="/assets/2022-11-26--27-SNfFYV9c.png",UM="/assets/2022-11-26--28-CJNYF2Gl.png",NM="/assets/2022-11-26--29-MuGvtN53.png",FM="/assets/2022-11-26--30-DP2_4zMi.png",zM="/assets/2023-03-11--01-CxVx1eWw.png",BM="/assets/2023-03-11--02-DphjrUNS.png",HM="/assets/2023-03-11--03-DLrgxAI1.png",VM="/assets/2023-03-11--04-D_mx3WpQ.png",GM="/assets/2023-03-11--05-fuKBkg7r.png",jM="/assets/2023-03-11--06-D6fjGAxR.png",qM="/assets/2023-03-11--07-DTa6lQE5.png",WM="/assets/2023-03-11--08-rzyaaRM4.png",YM="/assets/2023-03-11--09-DLKhIQ8i.png",XM="/assets/2023-03-11--10-DHu9Pzep.png",QM="/assets/2023-03-11--11-D5GqVEHi.png",ZM="/assets/2023-03-11--12-sceE5ihE.png",KM="/assets/2023-03-11--13-Cf66hrvB.png",JM="/assets/2023-03-11--14-Dj-7PcD2.png",$M="/assets/2023-03-11--15-CIQA_No6.png",e3="/assets/2023-03-11--16-BVg76BDd.png",t3="/assets/2023-03-11--17-DeOX4AYq.png",n3="/assets/2023-03-11--18-TcrZ7wvU.png",r3="/assets/2023-03-11--19-CS4hUSxw.png",i3="/assets/2023-03-11--20-DUYArMYG.png",a3="/assets/2023-03-11--21-DSIvgppo.png",s3="/assets/2023-10-07--01-BJERjMcy.png",o3="/assets/2023-10-07--02-DjKZb3wg.png",l3="/assets/2023-10-07--03-DqYsiDFn.png",c3="/assets/2023-10-07--04-DIgG06hW.png",u3="/assets/2023-10-07--05-BXEo10YE.png",h3="/assets/2023-10-07--06-Bg2Rv6R2.png",d3="/assets/2023-10-07--07-BmrvvdDR.png",f3="/assets/2023-10-07--08-D7IjTRYR.png",p3="/assets/2023-10-07--09-C-IApgio.png",m3="/assets/2023-10-07--10-BT3Vdd0N.png",g3="/assets/2023-10-07--11-CMgqH4EA.png",y3="/assets/2023-10-07--12-BkVaryce.png",b3="/assets/2023-10-07--13-oYU3tK_g.png",v3="/assets/2023-10-07--14-Cyt8LvFo.png",_3="/assets/2023-10-07--15-BwjTASJ4.png",w3="/assets/2023-10-07--16-xnBNkf-K.png",x3="/assets/2024-03-28--01-DB9gumNl.png",S3="/assets/2024-03-28--02-h85Zwxtb.png",T3="/assets/2024-03-28--03-uhz41bH0.png",E3="/assets/2024-03-28--04-VYd_YthH.png",M3="/assets/2024-03-28--05-KPCMpjIt.png",A3="/assets/2024-03-28--06-ByfiKHPG.png",C3="/assets/2024-03-28--07-BifI8QTW.png",D3="/assets/2024-03-28--08-w8XYqyr6.png",R3="/assets/2024-03-28--09-BpE3eLFj.png",k3="/assets/2024-03-28--10-WpUuyoUw.png",P3="/assets/2024-03-28--11-C4cGImJ4.png",L3="/assets/2024-03-28--12-BB8rTzuy.png",I3="/assets/2024-03-28--13-Bg9sQjGK.png",O3="/assets/2024-10-07--01-C8XHQhHE.png",U3="/assets/2024-10-07--02-CnPKubEX.png",N3="/assets/2024-10-07--03-A-kzFr6L.png",F3="/assets/2024-10-07--04-CnPUVQj5.png",z3="/assets/2024-10-07--05-CxKuV8ok.png",B3="/assets/2024-10-07--06-DAlF-klP.png",H3="/assets/2024-10-07--07-4tslKTSH.png",V3="/assets/2024-10-07--08-Bk6umGAt.png",G3="/assets/2024-10-07--09-BN203i-V.png",j3="/assets/2024-10-07--10-Cr7TyCrl.png",q3="/assets/2024-10-07--11-DDld-Cbt.png",W3="/assets/2024-10-07--12-D-nRFDxx.png",Y3="/assets/2024-10-07--13-Bm2xkQYz.png",X3="/assets/2024-10-07--14-CHZbR4Ut.png",Q3="/assets/2024-10-07--15-Bow2l24s.png",Z3="/assets/2024-10-07--16-gF34yP1k.png",K3="/assets/2024-10-07--17-BpakVJFa.png",J3="/assets/2024-10-07--18-D7uzQ-Kc.png",$3="/assets/2024-10-07--19-DJyqwUhd.png",eA="/assets/2024-10-07--20-mQBJuCWF.png",tA="/assets/2024-10-07--21-BbKGToT8.png",nA="/assets/2024-10-07--22-CnhGfGIr.png",rA="/assets/2024-10-07--23-wpwvQ2k-.png",iA="/assets/2024-10-07--24-Fl-tM74K.png",aA="/assets/2024-10-07--25-BGKD_H7Y.png",sA="/assets/2024-10-07--26-DsHLHyQv.png",oA="/assets/2024-10-07--27-Ddjq6Wq6.png",lA="/assets/2024-10-07--28-BIeVt67e.png",cA="/assets/2024-10-07--29-D98tAtND.png",uA="/assets/2024-10-07--30-DwDXPLsr.png",hA="/assets/2024-10-07--31-BWb_TP-1.png",dA="/assets/2024-10-07--32-lxSSNwwe.png",fA="/assets/2024-10-07--33-BfKfwtzz.png",pA="/assets/2024-10-07--34-B8W1b7lM.png",mA="/assets/2024-10-07--35-DYi-0SzF.png",gA="/assets/2024-10-07--36-Bi8c44_r.png",yA="/assets/Date_times_to_convert-s50hZSQX.xlsx",bA="/assets/Time_zone_offsets_and_DST_observations-BWffavpn.xlsx",Nh="/assets/12-rules-for-life-by-jordan-b-peterson-C_dLlzOT.png",Fh="/assets/elon-musk-by-walter-isaacson-BbqzTHUc.png",zh="/assets/mastery-by-robert-greene-C0TUdMf1.png";function cF(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const uF=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hF=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dF={};function U1(n,e){return(dF.jsx?hF:uF).test(n)}const fF=/[ \t\n\f\r]/g;function pF(n){return typeof n=="object"?n.type==="text"?N1(n.value):!1:N1(n)}function N1(n){return n.replace(fF,"")===""}class wc{constructor(e,t,i){this.property=e,this.normal=t,i&&(this.space=i)}}wc.prototype.property={};wc.prototype.normal={};wc.prototype.space=null;function vA(n,e){const t={},i={};let s=-1;for(;++s<n.length;)Object.assign(t,n[s].property),Object.assign(i,n[s].normal);return new wc(t,i,e)}function Gm(n){return n.toLowerCase()}class Kr{constructor(e,t){this.property=e,this.attribute=t}}Kr.prototype.space=null;Kr.prototype.boolean=!1;Kr.prototype.booleanish=!1;Kr.prototype.overloadedBoolean=!1;Kr.prototype.number=!1;Kr.prototype.commaSeparated=!1;Kr.prototype.spaceSeparated=!1;Kr.prototype.commaOrSpaceSeparated=!1;Kr.prototype.mustUseProperty=!1;Kr.prototype.defined=!1;let mF=0;const Dt=Ms(),Pn=Ms(),_A=Ms(),Fe=Ms(),fn=Ms(),ko=Ms(),Dr=Ms();function Ms(){return 2**++mF}const jm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Dt,booleanish:Pn,commaOrSpaceSeparated:Dr,commaSeparated:ko,number:Fe,overloadedBoolean:_A,spaceSeparated:fn},Symbol.toStringTag,{value:"Module"})),Up=Object.keys(jm);class Jg extends Kr{constructor(e,t,i,s){let l=-1;if(super(e,t),F1(this,"space",s),typeof i=="number")for(;++l<Up.length;){const c=Up[l];F1(this,Up[l],(i&jm[c])===jm[c])}}}Jg.prototype.defined=!0;function F1(n,e,t){t&&(n[e]=t)}const gF={}.hasOwnProperty;function Ho(n){const e={},t={};let i;for(i in n.properties)if(gF.call(n.properties,i)){const s=n.properties[i],l=new Jg(i,n.transform(n.attributes||{},i),s,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(l.mustUseProperty=!0),e[i]=l,t[Gm(i)]=i,t[Gm(l.attribute)]=i}return new wc(e,t,n.space)}const wA=Ho({space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xA=Ho({space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function SA(n,e){return e in n?n[e]:e}function TA(n,e){return SA(n,e.toLowerCase())}const EA=Ho({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:TA,properties:{xmlns:null,xmlnsXLink:null}}),MA=Ho({transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Pn,ariaAutoComplete:null,ariaBusy:Pn,ariaChecked:Pn,ariaColCount:Fe,ariaColIndex:Fe,ariaColSpan:Fe,ariaControls:fn,ariaCurrent:null,ariaDescribedBy:fn,ariaDetails:null,ariaDisabled:Pn,ariaDropEffect:fn,ariaErrorMessage:null,ariaExpanded:Pn,ariaFlowTo:fn,ariaGrabbed:Pn,ariaHasPopup:null,ariaHidden:Pn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fn,ariaLevel:Fe,ariaLive:null,ariaModal:Pn,ariaMultiLine:Pn,ariaMultiSelectable:Pn,ariaOrientation:null,ariaOwns:fn,ariaPlaceholder:null,ariaPosInSet:Fe,ariaPressed:Pn,ariaReadOnly:Pn,ariaRelevant:null,ariaRequired:Pn,ariaRoleDescription:fn,ariaRowCount:Fe,ariaRowIndex:Fe,ariaRowSpan:Fe,ariaSelected:Pn,ariaSetSize:Fe,ariaSort:null,ariaValueMax:Fe,ariaValueMin:Fe,ariaValueNow:Fe,ariaValueText:null,role:null}}),yF=Ho({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:TA,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ko,acceptCharset:fn,accessKey:fn,action:null,allow:null,allowFullScreen:Dt,allowPaymentRequest:Dt,allowUserMedia:Dt,alt:null,as:null,async:Dt,autoCapitalize:null,autoComplete:fn,autoFocus:Dt,autoPlay:Dt,blocking:fn,capture:null,charSet:null,checked:Dt,cite:null,className:fn,cols:Fe,colSpan:null,content:null,contentEditable:Pn,controls:Dt,controlsList:fn,coords:Fe|ko,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Dt,defer:Dt,dir:null,dirName:null,disabled:Dt,download:_A,draggable:Pn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Dt,formTarget:null,headers:fn,height:Fe,hidden:Dt,high:Fe,href:null,hrefLang:null,htmlFor:fn,httpEquiv:fn,id:null,imageSizes:null,imageSrcSet:null,inert:Dt,inputMode:null,integrity:null,is:null,isMap:Dt,itemId:null,itemProp:fn,itemRef:fn,itemScope:Dt,itemType:fn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Dt,low:Fe,manifest:null,max:null,maxLength:Fe,media:null,method:null,min:null,minLength:Fe,multiple:Dt,muted:Dt,name:null,nonce:null,noModule:Dt,noValidate:Dt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Dt,optimum:Fe,pattern:null,ping:fn,placeholder:null,playsInline:Dt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Dt,referrerPolicy:null,rel:fn,required:Dt,reversed:Dt,rows:Fe,rowSpan:Fe,sandbox:fn,scope:null,scoped:Dt,seamless:Dt,selected:Dt,shadowRootClonable:Dt,shadowRootDelegatesFocus:Dt,shadowRootMode:null,shape:null,size:Fe,sizes:null,slot:null,span:Fe,spellCheck:Pn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Fe,step:null,style:null,tabIndex:Fe,target:null,title:null,translate:null,type:null,typeMustMatch:Dt,useMap:null,value:Pn,width:Fe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fn,axis:null,background:null,bgColor:null,border:Fe,borderColor:null,bottomMargin:Fe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Dt,declare:Dt,event:null,face:null,frame:null,frameBorder:null,hSpace:Fe,leftMargin:Fe,link:null,longDesc:null,lowSrc:null,marginHeight:Fe,marginWidth:Fe,noResize:Dt,noHref:Dt,noShade:Dt,noWrap:Dt,object:null,profile:null,prompt:null,rev:null,rightMargin:Fe,rules:null,scheme:null,scrolling:Pn,standby:null,summary:null,text:null,topMargin:Fe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Fe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Dt,disableRemotePlayback:Dt,prefix:null,property:null,results:Fe,security:null,unselectable:null}}),bF=Ho({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:SA,properties:{about:Dr,accentHeight:Fe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Fe,amplitude:Fe,arabicForm:null,ascent:Fe,attributeName:null,attributeType:null,azimuth:Fe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Fe,by:null,calcMode:null,capHeight:Fe,className:fn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Fe,diffuseConstant:Fe,direction:null,display:null,dur:null,divisor:Fe,dominantBaseline:null,download:Dt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Fe,enableBackground:null,end:null,event:null,exponent:Fe,externalResourcesRequired:null,fill:null,fillOpacity:Fe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ko,g2:ko,glyphName:ko,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Fe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Fe,horizOriginX:Fe,horizOriginY:Fe,id:null,ideographic:Fe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Fe,k:Fe,k1:Fe,k2:Fe,k3:Fe,k4:Fe,kernelMatrix:Dr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Fe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Fe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Fe,overlineThickness:Fe,paintOrder:null,panose1:null,path:null,pathLength:Fe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Fe,pointsAtY:Fe,pointsAtZ:Fe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Dr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Dr,rev:Dr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Dr,requiredFeatures:Dr,requiredFonts:Dr,requiredFormats:Dr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Fe,specularExponent:Fe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Fe,strikethroughThickness:Fe,string:null,stroke:null,strokeDashArray:Dr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Fe,strokeOpacity:Fe,strokeWidth:null,style:null,surfaceScale:Fe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Dr,tabIndex:Fe,tableValues:null,target:null,targetX:Fe,targetY:Fe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Dr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Fe,underlineThickness:Fe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Fe,values:null,vAlphabetic:Fe,vMathematical:Fe,vectorEffect:null,vHanging:Fe,vIdeographic:Fe,version:null,vertAdvY:Fe,vertOriginX:Fe,vertOriginY:Fe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Fe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),vF=/^data[-\w.:]+$/i,z1=/-[a-z]/g,_F=/[A-Z]/g;function wF(n,e){const t=Gm(e);let i=e,s=Kr;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&vF.test(e)){if(e.charAt(4)==="-"){const l=e.slice(5).replace(z1,SF);i="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=e.slice(4);if(!z1.test(l)){let c=l.replace(_F,xF);c.charAt(0)!=="-"&&(c="-"+c),e="data"+c}}s=Jg}return new s(i,e)}function xF(n){return"-"+n.toLowerCase()}function SF(n){return n.charAt(1).toUpperCase()}const TF={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},EF=vA([xA,wA,EA,MA,yF],"html"),$g=vA([xA,wA,EA,MA,bF],"svg");function MF(n){return n.join(" ").trim()}var vo={},Np,B1;function AF(){if(B1)return Np;B1=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,h=/^\s+|\s+$/g,f=`
`,d="/",p="*",g="",y="comment",b="declaration";Np=function(S,w){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];w=w||{};var _=1,R=1;function A(Y){var W=Y.match(e);W&&(_+=W.length);var re=Y.lastIndexOf(f);R=~re?Y.length-re:R+Y.length}function k(){var Y={line:_,column:R};return function(W){return W.position=new U(Y),H(),W}}function U(Y){this.start=Y,this.end={line:_,column:R},this.source=w.source}U.prototype.content=S;function E(Y){var W=new Error(w.source+":"+_+":"+R+": "+Y);if(W.reason=Y,W.filename=w.source,W.line=_,W.column=R,W.source=S,!w.silent)throw W}function N(Y){var W=Y.exec(S);if(W){var re=W[0];return A(re),S=S.slice(re.length),W}}function H(){N(t)}function C(Y){var W;for(Y=Y||[];W=D();)W!==!1&&Y.push(W);return Y}function D(){var Y=k();if(!(d!=S.charAt(0)||p!=S.charAt(1))){for(var W=2;g!=S.charAt(W)&&(p!=S.charAt(W)||d!=S.charAt(W+1));)++W;if(W+=2,g===S.charAt(W-1))return E("End of comment missing");var re=S.slice(2,W-2);return R+=2,A(re),S=S.slice(W),R+=2,Y({type:y,comment:re})}}function F(){var Y=k(),W=N(i);if(W){if(D(),!N(s))return E("property missing ':'");var re=N(l),j=Y({type:b,property:x(W[0].replace(n,g)),value:re?x(re[0].replace(n,g)):g});return N(c),j}}function J(){var Y=[];C(Y);for(var W;W=F();)W!==!1&&(Y.push(W),C(Y));return Y}return H(),J()};function x(S){return S?S.replace(h,g):g}return Np}var H1;function CF(){if(H1)return vo;H1=1;var n=vo&&vo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(vo,"__esModule",{value:!0}),vo.default=t;var e=n(AF());function t(i,s){var l=null;if(!i||typeof i!="string")return l;var c=(0,e.default)(i),h=typeof s=="function";return c.forEach(function(f){if(f.type==="declaration"){var d=f.property,p=f.value;h?s(d,p,f):p&&(l=l||{},l[d]=p)}}),l}return vo}var DF=CF();const V1=$m(DF),RF=V1.default||V1,AA=CA("end"),e0=CA("start");function CA(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function kF(n){const e=e0(n),t=AA(n);if(e&&t)return{start:e,end:t}}function rc(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?G1(n.position):"start"in n||"end"in n?G1(n):"line"in n||"column"in n?qm(n):""}function qm(n){return j1(n&&n.line)+":"+j1(n&&n.column)}function G1(n){return qm(n&&n.start)+"-"+qm(n&&n.end)}function j1(n){return n&&typeof n=="number"?n:1}class ir extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let s="",l={},c=!1;if(t&&("line"in t&&"column"in t?l={place:t}:"start"in t&&"end"in t?l={place:t}:"type"in t?l={ancestors:[t],place:t.position}:l={...t}),typeof e=="string"?s=e:!l.cause&&e&&(c=!0,s=e.message,l.cause=e),!l.ruleId&&!l.source&&typeof i=="string"){const f=i.indexOf(":");f===-1?l.ruleId=i:(l.source=i.slice(0,f),l.ruleId=i.slice(f+1))}if(!l.place&&l.ancestors&&l.ancestors){const f=l.ancestors[l.ancestors.length-1];f&&(l.place=f.position)}const h=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=h?h.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=h?h.line:void 0,this.name=rc(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=c&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual,this.expected,this.note,this.url}}ir.prototype.file="";ir.prototype.name="";ir.prototype.reason="";ir.prototype.message="";ir.prototype.stack="";ir.prototype.column=void 0;ir.prototype.line=void 0;ir.prototype.ancestors=void 0;ir.prototype.cause=void 0;ir.prototype.fatal=void 0;ir.prototype.place=void 0;ir.prototype.ruleId=void 0;ir.prototype.source=void 0;const t0={}.hasOwnProperty,PF=new Map,LF=/[A-Z]/g,IF=/-([a-z])/g,OF=new Set(["table","tbody","thead","tfoot","tr"]),UF=new Set(["td","th"]),DA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function NF(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=qF(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=jF(t,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?$g:EF,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},l=RA(s,n,void 0);return l&&typeof l!="string"?l:s.create(n,s.Fragment,{children:l||void 0},void 0)}function RA(n,e,t){if(e.type==="element")return FF(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return zF(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return HF(n,e,t);if(e.type==="mdxjsEsm")return BF(n,e);if(e.type==="root")return VF(n,e,t);if(e.type==="text")return GF(n,e)}function FF(n,e,t){const i=n.schema;let s=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(s=$g,n.schema=s),n.ancestors.push(e);const l=PA(n,e.tagName,!1),c=WF(n,e);let h=r0(n,e);return OF.has(e.tagName)&&(h=h.filter(function(f){return typeof f=="string"?!pF(f):!0})),kA(n,c,l,e),n0(c,h),n.ancestors.pop(),n.schema=i,n.create(e,l,c,t)}function zF(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}dc(n,e.position)}function BF(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);dc(n,e.position)}function HF(n,e,t){const i=n.schema;let s=i;e.name==="svg"&&i.space==="html"&&(s=$g,n.schema=s),n.ancestors.push(e);const l=e.name===null?n.Fragment:PA(n,e.name,!0),c=YF(n,e),h=r0(n,e);return kA(n,c,l,e),n0(c,h),n.ancestors.pop(),n.schema=i,n.create(e,l,c,t)}function VF(n,e,t){const i={};return n0(i,r0(n,e)),n.create(e,n.Fragment,i,t)}function GF(n,e){return e.value}function kA(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function n0(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function jF(n,e,t){return i;function i(s,l,c,h){const d=Array.isArray(c.children)?t:e;return h?d(l,c,h):d(l,c)}}function qF(n,e){return t;function t(i,s,l,c){const h=Array.isArray(l.children),f=e0(i);return e(s,l,c,h,{columnNumber:f?f.column-1:void 0,fileName:n,lineNumber:f?f.line:void 0},void 0)}}function WF(n,e){const t={};let i,s;for(s in e.properties)if(s!=="children"&&t0.call(e.properties,s)){const l=XF(n,s,e.properties[s]);if(l){const[c,h]=l;n.tableCellAlignToStyle&&c==="align"&&typeof h=="string"&&UF.has(e.tagName)?i=h:t[c]=h}}if(i){const l=t.style||(t.style={});l[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function YF(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const l=i.data.estree.body[0];l.type;const c=l.expression;c.type;const h=c.properties[0];h.type,Object.assign(t,n.evaluater.evaluateExpression(h.argument))}else dc(n,e.position);else{const s=i.name;let l;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const h=i.value.data.estree.body[0];h.type,l=n.evaluater.evaluateExpression(h.expression)}else dc(n,e.position);else l=i.value===null?!0:i.value;t[s]=l}return t}function r0(n,e){const t=[];let i=-1;const s=n.passKeys?new Map:PF;for(;++i<e.children.length;){const l=e.children[i];let c;if(n.passKeys){const f=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(f){const d=s.get(f)||0;c=f+"-"+d,s.set(f,d+1)}}const h=RA(n,l,c);h!==void 0&&t.push(h)}return t}function XF(n,e,t){const i=wF(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?cF(t):MF(t)),i.property==="style"){let s=typeof t=="object"?t:QF(n,String(t));return n.stylePropertyNameCase==="css"&&(s=ZF(s)),["style",s]}return[n.elementAttributeNameCase==="react"&&i.space?TF[i.property]||i.property:i.attribute,t]}}function QF(n,e){const t={};try{RF(e,i)}catch(s){if(!n.ignoreInvalidStyle){const l=s,c=new ir("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:l,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw c.file=n.filePath||void 0,c.url=DA+"#cannot-parse-style-attribute",c}}return t;function i(s,l){let c=s;c.slice(0,2)!=="--"&&(c.slice(0,4)==="-ms-"&&(c="ms-"+c.slice(4)),c=c.replace(IF,JF)),t[c]=l}}function PA(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let l=-1,c;for(;++l<s.length;){const h=U1(s[l])?{type:"Identifier",name:s[l]}:{type:"Literal",value:s[l]};c=c?{type:"MemberExpression",object:c,property:h,computed:!!(l&&h.type==="Literal"),optional:!1}:h}i=c}else i=U1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const s=i.value;return t0.call(n.components,s)?n.components[s]:s}if(n.evaluater)return n.evaluater.evaluateExpression(i);dc(n)}function dc(n,e){const t=new ir("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=DA+"#cannot-handle-mdx-estrees-without-createevaluater",t}function ZF(n){const e={};let t;for(t in n)t0.call(n,t)&&(e[KF(t)]=n[t]);return e}function KF(n){let e=n.replace(LF,$F);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function JF(n,e){return e.toUpperCase()}function $F(n){return"-"+n.toLowerCase()}const Fp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ez={};function tz(n,e){const t=ez,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,s=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return LA(n,i,s)}function LA(n,e,t){if(nz(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return q1(n.children,e,t)}return Array.isArray(n)?q1(n,e,t):""}function q1(n,e,t){const i=[];let s=-1;for(;++s<n.length;)i[s]=LA(n[s],e,t);return i.join("")}function nz(n){return!!(n&&typeof n=="object")}const W1=document.createElement("i");function i0(n){const e="&"+n+";";W1.innerHTML=e;const t=W1.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Ei(n,e,t,i){const s=n.length;let l=0,c;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,t=t>0?t:0,i.length<1e4)c=Array.from(i),c.unshift(e,t),n.splice(...c);else for(t&&n.splice(e,t);l<i.length;)c=i.slice(l,l+1e4),c.unshift(e,0),n.splice(...c),l+=1e4,e+=1e4}function Yr(n,e){return n.length>0?(Ei(n,n.length,0,e),n):e}const Y1={}.hasOwnProperty;function rz(n){const e={};let t=-1;for(;++t<n.length;)iz(e,n[t]);return e}function iz(n,e){let t;for(t in e){const s=(Y1.call(n,t)?n[t]:void 0)||(n[t]={}),l=e[t];let c;if(l)for(c in l){Y1.call(s,c)||(s[c]=[]);const h=l[c];az(s[c],Array.isArray(h)?h:h?[h]:[])}}}function az(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);Ei(n,0,0,i)}function IA(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Po(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _i=za(/[A-Za-z]/),Ir=za(/[\dA-Za-z]/),sz=za(/[#-'*+\--9=?A-Z^-~]/);function Wm(n){return n!==null&&(n<32||n===127)}const Ym=za(/\d/),oz=za(/[\dA-Fa-f]/),lz=za(/[!-/:-@[-`{-~]/);function St(n){return n!==null&&n<-2}function _r(n){return n!==null&&(n<0||n===32)}function Kt(n){return n===-2||n===-1||n===32}const cz=za(new RegExp("\\p{P}|\\p{S}","u")),uz=za(/\s/);function za(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Vo(n){const e=[];let t=-1,i=0,s=0;for(;++t<n.length;){const l=n.charCodeAt(t);let c="";if(l===37&&Ir(n.charCodeAt(t+1))&&Ir(n.charCodeAt(t+2)))s=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(c=String.fromCharCode(l));else if(l>55295&&l<57344){const h=n.charCodeAt(t+1);l<56320&&h>56319&&h<57344?(c=String.fromCharCode(l,h),s=1):c=""}else c=String.fromCharCode(l);c&&(e.push(n.slice(i,t),encodeURIComponent(c)),i=t+s+1,c=""),s&&(t+=s,s=0)}return e.join("")+n.slice(i)}function pn(n,e,t,i){const s=i?i-1:Number.POSITIVE_INFINITY;let l=0;return c;function c(f){return Kt(f)?(n.enter(t),h(f)):e(f)}function h(f){return Kt(f)&&l++<s?(n.consume(f),h):(n.exit(t),e(f))}}const hz={tokenize:dz};function dz(n){const e=n.attempt(this.parser.constructs.contentInitial,i,s);let t;return e;function i(h){if(h===null){n.consume(h);return}return n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),pn(n,e,"linePrefix")}function s(h){return n.enter("paragraph"),l(h)}function l(h){const f=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=f),t=f,c(h)}function c(h){if(h===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(h);return}return St(h)?(n.consume(h),n.exit("chunkText"),l):(n.consume(h),c)}}const fz={tokenize:pz},X1={tokenize:mz};function pz(n){const e=this,t=[];let i=0,s,l,c;return h;function h(A){if(i<t.length){const k=t[i];return e.containerState=k[1],n.attempt(k[0].continuation,f,d)(A)}return d(A)}function f(A){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&R();const k=e.events.length;let U=k,E;for(;U--;)if(e.events[U][0]==="exit"&&e.events[U][1].type==="chunkFlow"){E=e.events[U][1].end;break}_(i);let N=k;for(;N<e.events.length;)e.events[N][1].end={...E},N++;return Ei(e.events,U+1,0,e.events.slice(k)),e.events.length=N,d(A)}return h(A)}function d(A){if(i===t.length){if(!s)return y(A);if(s.currentConstruct&&s.currentConstruct.concrete)return x(A);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(X1,p,g)(A)}function p(A){return s&&R(),_(i),y(A)}function g(A){return e.parser.lazy[e.now().line]=i!==t.length,c=e.now().offset,x(A)}function y(A){return e.containerState={},n.attempt(X1,b,x)(A)}function b(A){return i++,t.push([e.currentConstruct,e.containerState]),y(A)}function x(A){if(A===null){s&&R(),_(0),n.consume(A);return}return s=s||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:l}),S(A)}function S(A){if(A===null){w(n.exit("chunkFlow"),!0),_(0),n.consume(A);return}return St(A)?(n.consume(A),w(n.exit("chunkFlow")),i=0,e.interrupt=void 0,h):(n.consume(A),S)}function w(A,k){const U=e.sliceStream(A);if(k&&U.push(null),A.previous=l,l&&(l.next=A),l=A,s.defineSkip(A.start),s.write(U),e.parser.lazy[A.start.line]){let E=s.events.length;for(;E--;)if(s.events[E][1].start.offset<c&&(!s.events[E][1].end||s.events[E][1].end.offset>c))return;const N=e.events.length;let H=N,C,D;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){if(C){D=e.events[H][1].end;break}C=!0}for(_(i),E=N;E<e.events.length;)e.events[E][1].end={...D},E++;Ei(e.events,H+1,0,e.events.slice(N)),e.events.length=E}}function _(A){let k=t.length;for(;k-- >A;){const U=t[k];e.containerState=U[1],U[0].exit.call(e,n)}t.length=A}function R(){s.write([null]),l=void 0,s=void 0,e.containerState._closeFlow=void 0}}function mz(n,e,t){return pn(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Q1(n){if(n===null||_r(n)||uz(n))return 1;if(cz(n))return 2}function a0(n,e,t){const i=[];let s=-1;for(;++s<n.length;){const l=n[s].resolveAll;l&&!i.includes(l)&&(e=l(e,t),i.push(l))}return e}const Xm={name:"attention",resolveAll:gz,tokenize:yz};function gz(n,e){let t=-1,i,s,l,c,h,f,d,p;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;f=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const g={...n[i][1].end},y={...n[t][1].start};Z1(g,-f),Z1(y,f),c={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...n[i][1].end}},h={type:f>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:y},l={type:f>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},s={type:f>1?"strong":"emphasis",start:{...c.start},end:{...h.end}},n[i][1].end={...c.start},n[t][1].start={...h.end},d=[],n[i][1].end.offset-n[i][1].start.offset&&(d=Yr(d,[["enter",n[i][1],e],["exit",n[i][1],e]])),d=Yr(d,[["enter",s,e],["enter",c,e],["exit",c,e],["enter",l,e]]),d=Yr(d,a0(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),d=Yr(d,[["exit",l,e],["enter",h,e],["exit",h,e],["exit",s,e]]),n[t][1].end.offset-n[t][1].start.offset?(p=2,d=Yr(d,[["enter",n[t][1],e],["exit",n[t][1],e]])):p=0,Ei(n,i-1,t-i+3,d),t=i+d.length-p-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function yz(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,s=Q1(i);let l;return c;function c(f){return l=f,n.enter("attentionSequence"),h(f)}function h(f){if(f===l)return n.consume(f),h;const d=n.exit("attentionSequence"),p=Q1(f),g=!p||p===2&&s||t.includes(f),y=!s||s===2&&p||t.includes(i);return d._open=!!(l===42?g:g&&(s||!y)),d._close=!!(l===42?y:y&&(p||!g)),e(f)}}function Z1(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const bz={name:"autolink",tokenize:vz};function vz(n,e,t){let i=0;return s;function s(b){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(b),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),l}function l(b){return _i(b)?(n.consume(b),c):b===64?t(b):d(b)}function c(b){return b===43||b===45||b===46||Ir(b)?(i=1,h(b)):d(b)}function h(b){return b===58?(n.consume(b),i=0,f):(b===43||b===45||b===46||Ir(b))&&i++<32?(n.consume(b),h):(i=0,d(b))}function f(b){return b===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(b),n.exit("autolinkMarker"),n.exit("autolink"),e):b===null||b===32||b===60||Wm(b)?t(b):(n.consume(b),f)}function d(b){return b===64?(n.consume(b),p):sz(b)?(n.consume(b),d):t(b)}function p(b){return Ir(b)?g(b):t(b)}function g(b){return b===46?(n.consume(b),i=0,p):b===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(b),n.exit("autolinkMarker"),n.exit("autolink"),e):y(b)}function y(b){if((b===45||Ir(b))&&i++<63){const x=b===45?y:g;return n.consume(b),x}return t(b)}}const Bh={partial:!0,tokenize:_z};function _z(n,e,t){return i;function i(l){return Kt(l)?pn(n,s,"linePrefix")(l):s(l)}function s(l){return l===null||St(l)?e(l):t(l)}}const OA={continuation:{tokenize:xz},exit:Sz,name:"blockQuote",tokenize:wz};function wz(n,e,t){const i=this;return s;function s(c){if(c===62){const h=i.containerState;return h.open||(n.enter("blockQuote",{_container:!0}),h.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(c),n.exit("blockQuoteMarker"),l}return t(c)}function l(c){return Kt(c)?(n.enter("blockQuotePrefixWhitespace"),n.consume(c),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(c))}}function xz(n,e,t){const i=this;return s;function s(c){return Kt(c)?pn(n,l,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):l(c)}function l(c){return n.attempt(OA,e,t)(c)}}function Sz(n){n.exit("blockQuote")}const UA={name:"characterEscape",tokenize:Tz};function Tz(n,e,t){return i;function i(l){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(l),n.exit("escapeMarker"),s}function s(l){return lz(l)?(n.enter("characterEscapeValue"),n.consume(l),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(l)}}const NA={name:"characterReference",tokenize:Ez};function Ez(n,e,t){const i=this;let s=0,l,c;return h;function h(g){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),f}function f(g){return g===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(g),n.exit("characterReferenceMarkerNumeric"),d):(n.enter("characterReferenceValue"),l=31,c=Ir,p(g))}function d(g){return g===88||g===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(g),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),l=6,c=oz,p):(n.enter("characterReferenceValue"),l=7,c=Ym,p(g))}function p(g){if(g===59&&s){const y=n.exit("characterReferenceValue");return c===Ir&&!i0(i.sliceSerialize(y))?t(g):(n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return c(g)&&s++<l?(n.consume(g),p):t(g)}}const K1={partial:!0,tokenize:Az},J1={concrete:!0,name:"codeFenced",tokenize:Mz};function Mz(n,e,t){const i=this,s={partial:!0,tokenize:U};let l=0,c=0,h;return f;function f(E){return d(E)}function d(E){const N=i.events[i.events.length-1];return l=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,h=E,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p(E)}function p(E){return E===h?(c++,n.consume(E),p):c<3?t(E):(n.exit("codeFencedFenceSequence"),Kt(E)?pn(n,g,"whitespace")(E):g(E))}function g(E){return E===null||St(E)?(n.exit("codeFencedFence"),i.interrupt?e(E):n.check(K1,S,k)(E)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),y(E))}function y(E){return E===null||St(E)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),g(E)):Kt(E)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),pn(n,b,"whitespace")(E)):E===96&&E===h?t(E):(n.consume(E),y)}function b(E){return E===null||St(E)?g(E):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),x(E))}function x(E){return E===null||St(E)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),g(E)):E===96&&E===h?t(E):(n.consume(E),x)}function S(E){return n.attempt(s,k,w)(E)}function w(E){return n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),_}function _(E){return l>0&&Kt(E)?pn(n,R,"linePrefix",l+1)(E):R(E)}function R(E){return E===null||St(E)?n.check(K1,S,k)(E):(n.enter("codeFlowValue"),A(E))}function A(E){return E===null||St(E)?(n.exit("codeFlowValue"),R(E)):(n.consume(E),A)}function k(E){return n.exit("codeFenced"),e(E)}function U(E,N,H){let C=0;return D;function D(re){return E.enter("lineEnding"),E.consume(re),E.exit("lineEnding"),F}function F(re){return E.enter("codeFencedFence"),Kt(re)?pn(E,J,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(re):J(re)}function J(re){return re===h?(E.enter("codeFencedFenceSequence"),Y(re)):H(re)}function Y(re){return re===h?(C++,E.consume(re),Y):C>=c?(E.exit("codeFencedFenceSequence"),Kt(re)?pn(E,W,"whitespace")(re):W(re)):H(re)}function W(re){return re===null||St(re)?(E.exit("codeFencedFence"),N(re)):H(re)}}}function Az(n,e,t){const i=this;return s;function s(c){return c===null?t(c):(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),l)}function l(c){return i.parser.lazy[i.now().line]?t(c):e(c)}}const zp={name:"codeIndented",tokenize:Dz},Cz={partial:!0,tokenize:Rz};function Dz(n,e,t){const i=this;return s;function s(d){return n.enter("codeIndented"),pn(n,l,"linePrefix",5)(d)}function l(d){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?c(d):t(d)}function c(d){return d===null?f(d):St(d)?n.attempt(Cz,c,f)(d):(n.enter("codeFlowValue"),h(d))}function h(d){return d===null||St(d)?(n.exit("codeFlowValue"),c(d)):(n.consume(d),h)}function f(d){return n.exit("codeIndented"),e(d)}}function Rz(n,e,t){const i=this;return s;function s(c){return i.parser.lazy[i.now().line]?t(c):St(c)?(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),s):pn(n,l,"linePrefix",5)(c)}function l(c){const h=i.events[i.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(c):St(c)?s(c):t(c)}}const kz={name:"codeText",previous:Lz,resolve:Pz,tokenize:Iz};function Pz(n){let e=n.length-4,t=3,i,s;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)s===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(s=i):(i===e||n[i][1].type==="lineEnding")&&(n[s][1].type="codeTextData",i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),e-=i-s-2,i=s+2),s=void 0);return n}function Lz(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Iz(n,e,t){let i=0,s,l;return c;function c(g){return n.enter("codeText"),n.enter("codeTextSequence"),h(g)}function h(g){return g===96?(n.consume(g),i++,h):(n.exit("codeTextSequence"),f(g))}function f(g){return g===null?t(g):g===32?(n.enter("space"),n.consume(g),n.exit("space"),f):g===96?(l=n.enter("codeTextSequence"),s=0,p(g)):St(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),f):(n.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||St(g)?(n.exit("codeTextData"),f(g)):(n.consume(g),d)}function p(g){return g===96?(n.consume(g),s++,p):s===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(g)):(l.type="codeTextData",d(g))}}class Oz{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const s=t||0;this.setCursor(Math.trunc(e));const l=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return i&&Yl(this.left,i),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Yl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Yl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Yl(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Yl(this.left,t.reverse())}}}function Yl(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function FA(n){const e={};let t=-1,i,s,l,c,h,f,d;const p=new Oz(n);for(;++t<p.length;){for(;t in e;)t=e[t];if(i=p.get(t),t&&i[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(f=i[1]._tokenizer.events,l=0,l<f.length&&f[l][1].type==="lineEndingBlank"&&(l+=2),l<f.length&&f[l][1].type==="content"))for(;++l<f.length&&f[l][1].type!=="content";)f[l][1].type==="chunkText"&&(f[l][1]._isInFirstContentOfListItem=!0,l++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,Uz(p,t)),t=e[t],d=!0);else if(i[1]._container){for(l=t,s=void 0;l--;)if(c=p.get(l),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(s&&(p.get(s)[1].type="lineEndingBlank"),c[1].type="lineEnding",s=l);else if(c[1].type!=="linePrefix")break;s&&(i[1].end={...p.get(s)[1].start},h=p.slice(s,t),h.unshift(i),p.splice(s,t-s+1,h))}}return Ei(n,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function Uz(n,e){const t=n.get(e)[1],i=n.get(e)[2];let s=e-1;const l=[],c=t._tokenizer||i.parser[t.contentType](t.start),h=c.events,f=[],d={};let p,g,y=-1,b=t,x=0,S=0;const w=[S];for(;b;){for(;n.get(++s)[1]!==b;);l.push(s),b._tokenizer||(p=i.sliceStream(b),b.next||p.push(null),g&&c.defineSkip(b.start),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(p),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),g=b,b=b.next}for(b=t;++y<h.length;)h[y][0]==="exit"&&h[y-1][0]==="enter"&&h[y][1].type===h[y-1][1].type&&h[y][1].start.line!==h[y][1].end.line&&(S=y+1,w.push(S),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(c.events=[],b?(b._tokenizer=void 0,b.previous=void 0):w.pop(),y=w.length;y--;){const _=h.slice(w[y],w[y+1]),R=l.pop();f.push([R,R+_.length-1]),n.splice(R,2,_)}for(f.reverse(),y=-1;++y<f.length;)d[x+f[y][0]]=x+f[y][1],x+=f[y][1]-f[y][0]-1;return d}const Nz={resolve:zz,tokenize:Bz},Fz={partial:!0,tokenize:Hz};function zz(n){return FA(n),n}function Bz(n,e){let t;return i;function i(h){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),s(h)}function s(h){return h===null?l(h):St(h)?n.check(Fz,c,l)(h):(n.consume(h),s)}function l(h){return n.exit("chunkContent"),n.exit("content"),e(h)}function c(h){return n.consume(h),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,s}}function Hz(n,e,t){const i=this;return s;function s(c){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),pn(n,l,"linePrefix")}function l(c){if(c===null||St(c))return t(c);const h=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(c):n.interrupt(i.parser.constructs.flow,t,e)(c)}}function zA(n,e,t,i,s,l,c,h,f){const d=f||Number.POSITIVE_INFINITY;let p=0;return g;function g(_){return _===60?(n.enter(i),n.enter(s),n.enter(l),n.consume(_),n.exit(l),y):_===null||_===32||_===41||Wm(_)?t(_):(n.enter(i),n.enter(c),n.enter(h),n.enter("chunkString",{contentType:"string"}),S(_))}function y(_){return _===62?(n.enter(l),n.consume(_),n.exit(l),n.exit(s),n.exit(i),e):(n.enter(h),n.enter("chunkString",{contentType:"string"}),b(_))}function b(_){return _===62?(n.exit("chunkString"),n.exit(h),y(_)):_===null||_===60||St(_)?t(_):(n.consume(_),_===92?x:b)}function x(_){return _===60||_===62||_===92?(n.consume(_),b):b(_)}function S(_){return!p&&(_===null||_===41||_r(_))?(n.exit("chunkString"),n.exit(h),n.exit(c),n.exit(i),e(_)):p<d&&_===40?(n.consume(_),p++,S):_===41?(n.consume(_),p--,S):_===null||_===32||_===40||Wm(_)?t(_):(n.consume(_),_===92?w:S)}function w(_){return _===40||_===41||_===92?(n.consume(_),S):S(_)}}function BA(n,e,t,i,s,l){const c=this;let h=0,f;return d;function d(b){return n.enter(i),n.enter(s),n.consume(b),n.exit(s),n.enter(l),p}function p(b){return h>999||b===null||b===91||b===93&&!f||b===94&&!h&&"_hiddenFootnoteSupport"in c.parser.constructs?t(b):b===93?(n.exit(l),n.enter(s),n.consume(b),n.exit(s),n.exit(i),e):St(b)?(n.enter("lineEnding"),n.consume(b),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||b===91||b===93||St(b)||h++>999?(n.exit("chunkString"),p(b)):(n.consume(b),f||(f=!Kt(b)),b===92?y:g)}function y(b){return b===91||b===92||b===93?(n.consume(b),h++,g):g(b)}}function HA(n,e,t,i,s,l){let c;return h;function h(y){return y===34||y===39||y===40?(n.enter(i),n.enter(s),n.consume(y),n.exit(s),c=y===40?41:y,f):t(y)}function f(y){return y===c?(n.enter(s),n.consume(y),n.exit(s),n.exit(i),e):(n.enter(l),d(y))}function d(y){return y===c?(n.exit(l),f(c)):y===null?t(y):St(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),pn(n,d,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===c||y===null||St(y)?(n.exit("chunkString"),d(y)):(n.consume(y),y===92?g:p)}function g(y){return y===c||y===92?(n.consume(y),p):p(y)}}function ic(n,e){let t;return i;function i(s){return St(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),t=!0,i):Kt(s)?pn(n,i,t?"linePrefix":"lineSuffix")(s):e(s)}}const Vz={name:"definition",tokenize:jz},Gz={partial:!0,tokenize:qz};function jz(n,e,t){const i=this;let s;return l;function l(b){return n.enter("definition"),c(b)}function c(b){return BA.call(i,n,h,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function h(b){return s=Po(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),b===58?(n.enter("definitionMarker"),n.consume(b),n.exit("definitionMarker"),f):t(b)}function f(b){return _r(b)?ic(n,d)(b):d(b)}function d(b){return zA(n,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function p(b){return n.attempt(Gz,g,g)(b)}function g(b){return Kt(b)?pn(n,y,"whitespace")(b):y(b)}function y(b){return b===null||St(b)?(n.exit("definition"),i.parser.defined.push(s),e(b)):t(b)}}function qz(n,e,t){return i;function i(h){return _r(h)?ic(n,s)(h):t(h)}function s(h){return HA(n,l,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(h)}function l(h){return Kt(h)?pn(n,c,"whitespace")(h):c(h)}function c(h){return h===null||St(h)?e(h):t(h)}}const Wz={name:"hardBreakEscape",tokenize:Yz};function Yz(n,e,t){return i;function i(l){return n.enter("hardBreakEscape"),n.consume(l),s}function s(l){return St(l)?(n.exit("hardBreakEscape"),e(l)):t(l)}}const Xz={name:"headingAtx",resolve:Qz,tokenize:Zz};function Qz(n,e){let t=n.length-2,i=3,s,l;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(s={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},l={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},Ei(n,i,t-i+1,[["enter",s,e],["enter",l,e],["exit",l,e],["exit",s,e]])),n}function Zz(n,e,t){let i=0;return s;function s(p){return n.enter("atxHeading"),l(p)}function l(p){return n.enter("atxHeadingSequence"),c(p)}function c(p){return p===35&&i++<6?(n.consume(p),c):p===null||_r(p)?(n.exit("atxHeadingSequence"),h(p)):t(p)}function h(p){return p===35?(n.enter("atxHeadingSequence"),f(p)):p===null||St(p)?(n.exit("atxHeading"),e(p)):Kt(p)?pn(n,h,"whitespace")(p):(n.enter("atxHeadingText"),d(p))}function f(p){return p===35?(n.consume(p),f):(n.exit("atxHeadingSequence"),h(p))}function d(p){return p===null||p===35||_r(p)?(n.exit("atxHeadingText"),h(p)):(n.consume(p),d)}}const Kz=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$1=["pre","script","style","textarea"],Jz={concrete:!0,name:"htmlFlow",resolveTo:t6,tokenize:n6},$z={partial:!0,tokenize:i6},e6={partial:!0,tokenize:r6};function t6(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function n6(n,e,t){const i=this;let s,l,c,h,f;return d;function d(O){return p(O)}function p(O){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(O),g}function g(O){return O===33?(n.consume(O),y):O===47?(n.consume(O),l=!0,S):O===63?(n.consume(O),s=3,i.interrupt?e:T):_i(O)?(n.consume(O),c=String.fromCharCode(O),w):t(O)}function y(O){return O===45?(n.consume(O),s=2,b):O===91?(n.consume(O),s=5,h=0,x):_i(O)?(n.consume(O),s=4,i.interrupt?e:T):t(O)}function b(O){return O===45?(n.consume(O),i.interrupt?e:T):t(O)}function x(O){const Q="CDATA[";return O===Q.charCodeAt(h++)?(n.consume(O),h===Q.length?i.interrupt?e:J:x):t(O)}function S(O){return _i(O)?(n.consume(O),c=String.fromCharCode(O),w):t(O)}function w(O){if(O===null||O===47||O===62||_r(O)){const Q=O===47,be=c.toLowerCase();return!Q&&!l&&$1.includes(be)?(s=1,i.interrupt?e(O):J(O)):Kz.includes(c.toLowerCase())?(s=6,Q?(n.consume(O),_):i.interrupt?e(O):J(O)):(s=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(O):l?R(O):A(O))}return O===45||Ir(O)?(n.consume(O),c+=String.fromCharCode(O),w):t(O)}function _(O){return O===62?(n.consume(O),i.interrupt?e:J):t(O)}function R(O){return Kt(O)?(n.consume(O),R):D(O)}function A(O){return O===47?(n.consume(O),D):O===58||O===95||_i(O)?(n.consume(O),k):Kt(O)?(n.consume(O),A):D(O)}function k(O){return O===45||O===46||O===58||O===95||Ir(O)?(n.consume(O),k):U(O)}function U(O){return O===61?(n.consume(O),E):Kt(O)?(n.consume(O),U):A(O)}function E(O){return O===null||O===60||O===61||O===62||O===96?t(O):O===34||O===39?(n.consume(O),f=O,N):Kt(O)?(n.consume(O),E):H(O)}function N(O){return O===f?(n.consume(O),f=null,C):O===null||St(O)?t(O):(n.consume(O),N)}function H(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||_r(O)?U(O):(n.consume(O),H)}function C(O){return O===47||O===62||Kt(O)?A(O):t(O)}function D(O){return O===62?(n.consume(O),F):t(O)}function F(O){return O===null||St(O)?J(O):Kt(O)?(n.consume(O),F):t(O)}function J(O){return O===45&&s===2?(n.consume(O),j):O===60&&s===1?(n.consume(O),ce):O===62&&s===4?(n.consume(O),se):O===63&&s===3?(n.consume(O),T):O===93&&s===5?(n.consume(O),_e):St(O)&&(s===6||s===7)?(n.exit("htmlFlowData"),n.check($z,Ee,Y)(O)):O===null||St(O)?(n.exit("htmlFlowData"),Y(O)):(n.consume(O),J)}function Y(O){return n.check(e6,W,Ee)(O)}function W(O){return n.enter("lineEnding"),n.consume(O),n.exit("lineEnding"),re}function re(O){return O===null||St(O)?Y(O):(n.enter("htmlFlowData"),J(O))}function j(O){return O===45?(n.consume(O),T):J(O)}function ce(O){return O===47?(n.consume(O),c="",X):J(O)}function X(O){if(O===62){const Q=c.toLowerCase();return $1.includes(Q)?(n.consume(O),se):J(O)}return _i(O)&&c.length<8?(n.consume(O),c+=String.fromCharCode(O),X):J(O)}function _e(O){return O===93?(n.consume(O),T):J(O)}function T(O){return O===62?(n.consume(O),se):O===45&&s===2?(n.consume(O),T):J(O)}function se(O){return O===null||St(O)?(n.exit("htmlFlowData"),Ee(O)):(n.consume(O),se)}function Ee(O){return n.exit("htmlFlow"),e(O)}}function r6(n,e,t){const i=this;return s;function s(c){return St(c)?(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),l):t(c)}function l(c){return i.parser.lazy[i.now().line]?t(c):e(c)}}function i6(n,e,t){return i;function i(s){return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),n.attempt(Bh,e,t)}}const a6={name:"htmlText",tokenize:s6};function s6(n,e,t){const i=this;let s,l,c;return h;function h(T){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(T),f}function f(T){return T===33?(n.consume(T),d):T===47?(n.consume(T),U):T===63?(n.consume(T),A):_i(T)?(n.consume(T),H):t(T)}function d(T){return T===45?(n.consume(T),p):T===91?(n.consume(T),l=0,x):_i(T)?(n.consume(T),R):t(T)}function p(T){return T===45?(n.consume(T),b):t(T)}function g(T){return T===null?t(T):T===45?(n.consume(T),y):St(T)?(c=g,ce(T)):(n.consume(T),g)}function y(T){return T===45?(n.consume(T),b):g(T)}function b(T){return T===62?j(T):T===45?y(T):g(T)}function x(T){const se="CDATA[";return T===se.charCodeAt(l++)?(n.consume(T),l===se.length?S:x):t(T)}function S(T){return T===null?t(T):T===93?(n.consume(T),w):St(T)?(c=S,ce(T)):(n.consume(T),S)}function w(T){return T===93?(n.consume(T),_):S(T)}function _(T){return T===62?j(T):T===93?(n.consume(T),_):S(T)}function R(T){return T===null||T===62?j(T):St(T)?(c=R,ce(T)):(n.consume(T),R)}function A(T){return T===null?t(T):T===63?(n.consume(T),k):St(T)?(c=A,ce(T)):(n.consume(T),A)}function k(T){return T===62?j(T):A(T)}function U(T){return _i(T)?(n.consume(T),E):t(T)}function E(T){return T===45||Ir(T)?(n.consume(T),E):N(T)}function N(T){return St(T)?(c=N,ce(T)):Kt(T)?(n.consume(T),N):j(T)}function H(T){return T===45||Ir(T)?(n.consume(T),H):T===47||T===62||_r(T)?C(T):t(T)}function C(T){return T===47?(n.consume(T),j):T===58||T===95||_i(T)?(n.consume(T),D):St(T)?(c=C,ce(T)):Kt(T)?(n.consume(T),C):j(T)}function D(T){return T===45||T===46||T===58||T===95||Ir(T)?(n.consume(T),D):F(T)}function F(T){return T===61?(n.consume(T),J):St(T)?(c=F,ce(T)):Kt(T)?(n.consume(T),F):C(T)}function J(T){return T===null||T===60||T===61||T===62||T===96?t(T):T===34||T===39?(n.consume(T),s=T,Y):St(T)?(c=J,ce(T)):Kt(T)?(n.consume(T),J):(n.consume(T),W)}function Y(T){return T===s?(n.consume(T),s=void 0,re):T===null?t(T):St(T)?(c=Y,ce(T)):(n.consume(T),Y)}function W(T){return T===null||T===34||T===39||T===60||T===61||T===96?t(T):T===47||T===62||_r(T)?C(T):(n.consume(T),W)}function re(T){return T===47||T===62||_r(T)?C(T):t(T)}function j(T){return T===62?(n.consume(T),n.exit("htmlTextData"),n.exit("htmlText"),e):t(T)}function ce(T){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(T),n.exit("lineEnding"),X}function X(T){return Kt(T)?pn(n,_e,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):_e(T)}function _e(T){return n.enter("htmlTextData"),c(T)}}const s0={name:"labelEnd",resolveAll:u6,resolveTo:h6,tokenize:d6},o6={tokenize:f6},l6={tokenize:p6},c6={tokenize:m6};function u6(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const s=i.type==="labelImage"?4:2;i.type="data",e+=s}}return n.length!==t.length&&Ei(n,0,n.length,t),n}function h6(n,e){let t=n.length,i=0,s,l,c,h;for(;t--;)if(s=n[t][1],l){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;n[t][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(c){if(n[t][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(l=t,s.type!=="labelLink")){i=2;break}}else s.type==="labelEnd"&&(c=t);const f={type:n[l][1].type==="labelLink"?"link":"image",start:{...n[l][1].start},end:{...n[n.length-1][1].end}},d={type:"label",start:{...n[l][1].start},end:{...n[c][1].end}},p={type:"labelText",start:{...n[l+i+2][1].end},end:{...n[c-2][1].start}};return h=[["enter",f,e],["enter",d,e]],h=Yr(h,n.slice(l+1,l+i+3)),h=Yr(h,[["enter",p,e]]),h=Yr(h,a0(e.parser.constructs.insideSpan.null,n.slice(l+i+4,c-3),e)),h=Yr(h,[["exit",p,e],n[c-2],n[c-1],["exit",d,e]]),h=Yr(h,n.slice(c+1)),h=Yr(h,[["exit",f,e]]),Ei(n,l,n.length,h),n}function d6(n,e,t){const i=this;let s=i.events.length,l,c;for(;s--;)if((i.events[s][1].type==="labelImage"||i.events[s][1].type==="labelLink")&&!i.events[s][1]._balanced){l=i.events[s][1];break}return h;function h(y){return l?l._inactive?g(y):(c=i.parser.defined.includes(Po(i.sliceSerialize({start:l.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(y),n.exit("labelMarker"),n.exit("labelEnd"),f):t(y)}function f(y){return y===40?n.attempt(o6,p,c?p:g)(y):y===91?n.attempt(l6,p,c?d:g)(y):c?p(y):g(y)}function d(y){return n.attempt(c6,p,g)(y)}function p(y){return e(y)}function g(y){return l._balanced=!0,t(y)}}function f6(n,e,t){return i;function i(g){return n.enter("resource"),n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),s}function s(g){return _r(g)?ic(n,l)(g):l(g)}function l(g){return g===41?p(g):zA(n,c,h,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function c(g){return _r(g)?ic(n,f)(g):p(g)}function h(g){return t(g)}function f(g){return g===34||g===39||g===40?HA(n,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function d(g){return _r(g)?ic(n,p)(g):p(g)}function p(g){return g===41?(n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),n.exit("resource"),e):t(g)}}function p6(n,e,t){const i=this;return s;function s(h){return BA.call(i,n,l,c,"reference","referenceMarker","referenceString")(h)}function l(h){return i.parser.defined.includes(Po(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(h):t(h)}function c(h){return t(h)}}function m6(n,e,t){return i;function i(l){return n.enter("reference"),n.enter("referenceMarker"),n.consume(l),n.exit("referenceMarker"),s}function s(l){return l===93?(n.enter("referenceMarker"),n.consume(l),n.exit("referenceMarker"),n.exit("reference"),e):t(l)}}const g6={name:"labelStartImage",resolveAll:s0.resolveAll,tokenize:y6};function y6(n,e,t){const i=this;return s;function s(h){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(h),n.exit("labelImageMarker"),l}function l(h){return h===91?(n.enter("labelMarker"),n.consume(h),n.exit("labelMarker"),n.exit("labelImage"),c):t(h)}function c(h){return h===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(h):e(h)}}const b6={name:"labelStartLink",resolveAll:s0.resolveAll,tokenize:v6};function v6(n,e,t){const i=this;return s;function s(c){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(c),n.exit("labelMarker"),n.exit("labelLink"),l}function l(c){return c===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(c):e(c)}}const Bp={name:"lineEnding",tokenize:_6};function _6(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),pn(n,e,"linePrefix")}}const gh={name:"thematicBreak",tokenize:w6};function w6(n,e,t){let i=0,s;return l;function l(d){return n.enter("thematicBreak"),c(d)}function c(d){return s=d,h(d)}function h(d){return d===s?(n.enter("thematicBreakSequence"),f(d)):i>=3&&(d===null||St(d))?(n.exit("thematicBreak"),e(d)):t(d)}function f(d){return d===s?(n.consume(d),i++,f):(n.exit("thematicBreakSequence"),Kt(d)?pn(n,h,"whitespace")(d):h(d))}}const vr={continuation:{tokenize:E6},exit:A6,name:"list",tokenize:T6},x6={partial:!0,tokenize:C6},S6={partial:!0,tokenize:M6};function T6(n,e,t){const i=this,s=i.events[i.events.length-1];let l=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,c=0;return h;function h(b){const x=i.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!i.containerState.marker||b===i.containerState.marker:Ym(b)){if(i.containerState.type||(i.containerState.type=x,n.enter(x,{_container:!0})),x==="listUnordered")return n.enter("listItemPrefix"),b===42||b===45?n.check(gh,t,d)(b):d(b);if(!i.interrupt||b===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),f(b)}return t(b)}function f(b){return Ym(b)&&++c<10?(n.consume(b),f):(!i.interrupt||c<2)&&(i.containerState.marker?b===i.containerState.marker:b===41||b===46)?(n.exit("listItemValue"),d(b)):t(b)}function d(b){return n.enter("listItemMarker"),n.consume(b),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||b,n.check(Bh,i.interrupt?t:p,n.attempt(x6,y,g))}function p(b){return i.containerState.initialBlankLine=!0,l++,y(b)}function g(b){return Kt(b)?(n.enter("listItemPrefixWhitespace"),n.consume(b),n.exit("listItemPrefixWhitespace"),y):t(b)}function y(b){return i.containerState.size=l+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(b)}}function E6(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(Bh,s,l);function s(h){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,pn(n,e,"listItemIndent",i.containerState.size+1)(h)}function l(h){return i.containerState.furtherBlankLines||!Kt(h)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,c(h)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(S6,e,c)(h))}function c(h){return i.containerState._closeFlow=!0,i.interrupt=void 0,pn(n,n.attempt(vr,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h)}}function M6(n,e,t){const i=this;return pn(n,s,"listItemIndent",i.containerState.size+1);function s(l){const c=i.events[i.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===i.containerState.size?e(l):t(l)}}function A6(n){n.exit(this.containerState.type)}function C6(n,e,t){const i=this;return pn(n,s,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(l){const c=i.events[i.events.length-1];return!Kt(l)&&c&&c[1].type==="listItemPrefixWhitespace"?e(l):t(l)}}const e_={name:"setextUnderline",resolveTo:D6,tokenize:R6};function D6(n,e){let t=n.length,i,s,l;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(s=t)}else n[t][1].type==="content"&&n.splice(t,1),!l&&n[t][1].type==="definition"&&(l=t);const c={type:"setextHeading",start:{...n[s][1].start},end:{...n[n.length-1][1].end}};return n[s][1].type="setextHeadingText",l?(n.splice(s,0,["enter",c,e]),n.splice(l+1,0,["exit",n[i][1],e]),n[i][1].end={...n[l][1].end}):n[i][1]=c,n.push(["exit",c,e]),n}function R6(n,e,t){const i=this;let s;return l;function l(d){let p=i.events.length,g;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){g=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||g)?(n.enter("setextHeadingLine"),s=d,c(d)):t(d)}function c(d){return n.enter("setextHeadingLineSequence"),h(d)}function h(d){return d===s?(n.consume(d),h):(n.exit("setextHeadingLineSequence"),Kt(d)?pn(n,f,"lineSuffix")(d):f(d))}function f(d){return d===null||St(d)?(n.exit("setextHeadingLine"),e(d)):t(d)}}const k6={tokenize:P6};function P6(n){const e=this,t=n.attempt(Bh,i,n.attempt(this.parser.constructs.flowInitial,s,pn(n,n.attempt(this.parser.constructs.flow,s,n.attempt(Nz,s)),"linePrefix")));return t;function i(l){if(l===null){n.consume(l);return}return n.enter("lineEndingBlank"),n.consume(l),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function s(l){if(l===null){n.consume(l);return}return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const L6={resolveAll:GA()},I6=VA("string"),O6=VA("text");function VA(n){return{resolveAll:GA(n==="text"?U6:void 0),tokenize:e};function e(t){const i=this,s=this.parser.constructs[n],l=t.attempt(s,c,h);return c;function c(p){return d(p)?l(p):h(p)}function h(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),f}function f(p){return d(p)?(t.exit("data"),l(p)):(t.consume(p),f)}function d(p){if(p===null)return!0;const g=s[p];let y=-1;if(g)for(;++y<g.length;){const b=g[y];if(!b.previous||b.previous.call(i,i.previous))return!0}return!1}}}function GA(n){return e;function e(t,i){let s=-1,l;for(;++s<=t.length;)l===void 0?t[s]&&t[s][1].type==="data"&&(l=s,s++):(!t[s]||t[s][1].type!=="data")&&(s!==l+2&&(t[l][1].end=t[s-1][1].end,t.splice(l+2,s-l-2),s=l+2),l=void 0);return n?n(t,i):t}}function U6(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],s=e.sliceStream(i);let l=s.length,c=-1,h=0,f;for(;l--;){const d=s[l];if(typeof d=="string"){for(c=d.length;d.charCodeAt(c-1)===32;)h++,c--;if(c)break;c=-1}else if(d===-2)f=!0,h++;else if(d!==-1){l++;break}}if(h){const d={type:t===n.length||f||h<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?c:i.start._bufferIndex+c,_index:i.start._index+l,line:i.end.line,column:i.end.column-h,offset:i.end.offset-h},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(n.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return n}const N6={42:vr,43:vr,45:vr,48:vr,49:vr,50:vr,51:vr,52:vr,53:vr,54:vr,55:vr,56:vr,57:vr,62:OA},F6={91:Vz},z6={[-2]:zp,[-1]:zp,32:zp},B6={35:Xz,42:gh,45:[e_,gh],60:Jz,61:e_,95:gh,96:J1,126:J1},H6={38:NA,92:UA},V6={[-5]:Bp,[-4]:Bp,[-3]:Bp,33:g6,38:NA,42:Xm,60:[bz,a6],91:b6,92:[Wz,UA],93:s0,95:Xm,96:kz},G6={null:[Xm,L6]},j6={null:[42,95]},q6={null:[]},W6=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:j6,contentInitial:F6,disable:q6,document:N6,flow:B6,flowInitial:z6,insideSpan:G6,string:H6,text:V6},Symbol.toStringTag,{value:"Module"}));function Y6(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const s={},l=[];let c=[],h=[];const f={attempt:N(U),check:N(E),consume:R,enter:A,exit:k,interrupt:N(E,{interrupt:!0})},d={code:null,containerState:{},defineSkip:S,events:[],now:x,parser:n,previous:null,sliceSerialize:y,sliceStream:b,write:g};let p=e.tokenize.call(d,f);return e.resolveAll&&l.push(e),d;function g(F){return c=Yr(c,F),w(),c[c.length-1]!==null?[]:(H(e,0),d.events=a0(l,d.events,d),d.events)}function y(F,J){return Q6(b(F),J)}function b(F){return X6(c,F)}function x(){const{_bufferIndex:F,_index:J,line:Y,column:W,offset:re}=i;return{_bufferIndex:F,_index:J,line:Y,column:W,offset:re}}function S(F){s[F.line]=F.column,D()}function w(){let F;for(;i._index<c.length;){const J=c[i._index];if(typeof J=="string")for(F=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===F&&i._bufferIndex<J.length;)_(J.charCodeAt(i._bufferIndex));else _(J)}}function _(F){p=p(F)}function R(F){St(F)?(i.line++,i.column=1,i.offset+=F===-3?2:1,D()):F!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===c[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=F}function A(F,J){const Y=J||{};return Y.type=F,Y.start=x(),d.events.push(["enter",Y,d]),h.push(Y),Y}function k(F){const J=h.pop();return J.end=x(),d.events.push(["exit",J,d]),J}function U(F,J){H(F,J.from)}function E(F,J){J.restore()}function N(F,J){return Y;function Y(W,re,j){let ce,X,_e,T;return Array.isArray(W)?Ee(W):"tokenize"in W?Ee([W]):se(W);function se(ve){return Ie;function Ie(Ne){const rt=Ne!==null&&ve[Ne],Ue=Ne!==null&&ve.null,Tt=[...Array.isArray(rt)?rt:rt?[rt]:[],...Array.isArray(Ue)?Ue:Ue?[Ue]:[]];return Ee(Tt)(Ne)}}function Ee(ve){return ce=ve,X=0,ve.length===0?j:O(ve[X])}function O(ve){return Ie;function Ie(Ne){return T=C(),_e=ve,ve.partial||(d.currentConstruct=ve),ve.name&&d.parser.constructs.disable.null.includes(ve.name)?be():ve.tokenize.call(J?Object.assign(Object.create(d),J):d,f,Q,be)(Ne)}}function Q(ve){return F(_e,T),re}function be(ve){return T.restore(),++X<ce.length?O(ce[X]):j}}}function H(F,J){F.resolveAll&&!l.includes(F)&&l.push(F),F.resolve&&Ei(d.events,J,d.events.length-J,F.resolve(d.events.slice(J),d)),F.resolveTo&&(d.events=F.resolveTo(d.events,d))}function C(){const F=x(),J=d.previous,Y=d.currentConstruct,W=d.events.length,re=Array.from(h);return{from:W,restore:j};function j(){i=F,d.previous=J,d.currentConstruct=Y,d.events.length=W,h=re,D()}}function D(){i.line in s&&i.column<2&&(i.column=s[i.line],i.offset+=s[i.line]-1)}}function X6(n,e){const t=e.start._index,i=e.start._bufferIndex,s=e.end._index,l=e.end._bufferIndex;let c;if(t===s)c=[n[t].slice(i,l)];else{if(c=n.slice(t,s),i>-1){const h=c[0];typeof h=="string"?c[0]=h.slice(i):c.shift()}l>0&&c.push(n[s].slice(0,l))}return c}function Q6(n,e){let t=-1;const i=[];let s;for(;++t<n.length;){const l=n[t];let c;if(typeof l=="string")c=l;else switch(l){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=e?" ":"	";break}case-1:{if(!e&&s)continue;c=" ";break}default:c=String.fromCharCode(l)}s=l===-2,i.push(c)}return i.join("")}function Z6(n){const i={constructs:rz([W6,...(n||{}).extensions||[]]),content:s(hz),defined:[],document:s(fz),flow:s(k6),lazy:{},string:s(I6),text:s(O6)};return i;function s(l){return c;function c(h){return Y6(i,l,h)}}}function K6(n){for(;!FA(n););return n}const t_=/[\0\t\n\r]/g;function J6(){let n=1,e="",t=!0,i;return s;function s(l,c,h){const f=[];let d,p,g,y,b;for(l=e+(typeof l=="string"?l.toString():new TextDecoder(c||void 0).decode(l)),g=0,e="",t&&(l.charCodeAt(0)===65279&&g++,t=void 0);g<l.length;){if(t_.lastIndex=g,d=t_.exec(l),y=d&&d.index!==void 0?d.index:l.length,b=l.charCodeAt(y),!d){e=l.slice(g);break}if(b===10&&g===y&&i)f.push(-3),i=void 0;else switch(i&&(f.push(-5),i=void 0),g<y&&(f.push(l.slice(g,y)),n+=y-g),b){case 0:{f.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,f.push(-2);n++<p;)f.push(-1);break}case 10:{f.push(-4),n=1;break}default:i=!0,n=1}g=y+1}return h&&(i&&f.push(-5),e&&f.push(e),f.push(null)),f}}const $6=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eB(n){return n.replace($6,tB)}function tB(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const s=t.charCodeAt(1),l=s===120||s===88;return IA(t.slice(l?2:1),l?16:10)}return i0(t)||n}const jA={}.hasOwnProperty;function nB(n,e,t){return typeof e!="string"&&(t=e,e=void 0),rB(t)(K6(Z6(t).document().write(J6()(n,e,!0))))}function rB(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(jt),autolinkProtocol:C,autolinkEmail:C,atxHeading:l(mn),blockQuote:l(Ue),characterEscape:C,characterReference:C,codeFenced:l(Tt),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(Tt,c),codeText:l(Ft,c),codeTextData:C,data:C,codeFlowValue:C,definition:l(xt),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(q),hardBreakEscape:l(ht),hardBreakTrailing:l(ht),htmlFlow:l(yt,c),htmlFlowData:C,htmlText:l(yt,c),htmlTextData:C,image:l(st),label:c,link:l(jt),listItem:l(z),listItemValue:y,listOrdered:l(it,g),listUnordered:l(it),paragraph:l(P),reference:O,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(mn),strong:l(ue),thematicBreak:l(De)},exit:{atxHeading:f(),atxHeadingSequence:U,autolink:f(),autolinkEmail:rt,autolinkProtocol:Ne,blockQuote:f(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:be,characterReferenceMarkerNumeric:be,characterReferenceValue:ve,characterReference:Ie,codeFenced:f(w),codeFencedFence:S,codeFencedFenceInfo:b,codeFencedFenceMeta:x,codeFlowValue:D,codeIndented:f(_),codeText:f(re),codeTextData:D,data:D,definition:f(),definitionDestinationString:k,definitionLabelString:R,definitionTitleString:A,emphasis:f(),hardBreakEscape:f(J),hardBreakTrailing:f(J),htmlFlow:f(Y),htmlFlowData:D,htmlText:f(W),htmlTextData:D,image:f(ce),label:_e,labelText:X,lineEnding:F,link:f(j),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:Q,resourceDestinationString:T,resourceTitleString:se,resource:Ee,setextHeading:f(H),setextHeadingLineSequence:N,setextHeadingText:E,strong:f(),thematicBreak:f()}};qA(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(V){let pe={type:"root",children:[]};const xe={stack:[pe],tokenStack:[],config:e,enter:h,exit:d,buffer:c,resume:p,data:t},Re=[];let Je=-1;for(;++Je<V.length;)if(V[Je][1].type==="listOrdered"||V[Je][1].type==="listUnordered")if(V[Je][0]==="enter")Re.push(Je);else{const Ce=Re.pop();Je=s(V,Ce,Je)}for(Je=-1;++Je<V.length;){const Ce=e[V[Je][0]];jA.call(Ce,V[Je][1].type)&&Ce[V[Je][1].type].call(Object.assign({sliceSerialize:V[Je][2].sliceSerialize},xe),V[Je][1])}if(xe.tokenStack.length>0){const Ce=xe.tokenStack[xe.tokenStack.length-1];(Ce[1]||n_).call(xe,void 0,Ce[0])}for(pe.position={start:Ca(V.length>0?V[0][1].start:{line:1,column:1,offset:0}),end:Ca(V.length>0?V[V.length-2][1].end:{line:1,column:1,offset:0})},Je=-1;++Je<e.transforms.length;)pe=e.transforms[Je](pe)||pe;return pe}function s(V,pe,xe){let Re=pe-1,Je=-1,Ce=!1,je,Ze,Ke,Ye;for(;++Re<=xe;){const ot=V[Re];switch(ot[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ot[0]==="enter"?Je++:Je--,Ye=void 0;break}case"lineEndingBlank":{ot[0]==="enter"&&(je&&!Ye&&!Je&&!Ke&&(Ke=Re),Ye=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ye=void 0}if(!Je&&ot[0]==="enter"&&ot[1].type==="listItemPrefix"||Je===-1&&ot[0]==="exit"&&(ot[1].type==="listUnordered"||ot[1].type==="listOrdered")){if(je){let $e=Re;for(Ze=void 0;$e--;){const Rt=V[$e];if(Rt[1].type==="lineEnding"||Rt[1].type==="lineEndingBlank"){if(Rt[0]==="exit")continue;Ze&&(V[Ze][1].type="lineEndingBlank",Ce=!0),Rt[1].type="lineEnding",Ze=$e}else if(!(Rt[1].type==="linePrefix"||Rt[1].type==="blockQuotePrefix"||Rt[1].type==="blockQuotePrefixWhitespace"||Rt[1].type==="blockQuoteMarker"||Rt[1].type==="listItemIndent"))break}Ke&&(!Ze||Ke<Ze)&&(je._spread=!0),je.end=Object.assign({},Ze?V[Ze][1].start:ot[1].end),V.splice(Ze||Re,0,["exit",je,ot[2]]),Re++,xe++}if(ot[1].type==="listItemPrefix"){const $e={type:"listItem",_spread:!1,start:Object.assign({},ot[1].start),end:void 0};je=$e,V.splice(Re,0,["enter",$e,ot[2]]),Re++,xe++,Ke=void 0,Ye=!0}}}return V[pe][1]._spread=Ce,xe}function l(V,pe){return xe;function xe(Re){h.call(this,V(Re),Re),pe&&pe.call(this,Re)}}function c(){this.stack.push({type:"fragment",children:[]})}function h(V,pe,xe){this.stack[this.stack.length-1].children.push(V),this.stack.push(V),this.tokenStack.push([pe,xe||void 0]),V.position={start:Ca(pe.start),end:void 0}}function f(V){return pe;function pe(xe){V&&V.call(this,xe),d.call(this,xe)}}function d(V,pe){const xe=this.stack.pop(),Re=this.tokenStack.pop();if(Re)Re[0].type!==V.type&&(pe?pe.call(this,V,Re[0]):(Re[1]||n_).call(this,V,Re[0]));else throw new Error("Cannot close `"+V.type+"` ("+rc({start:V.start,end:V.end})+"): its not open");xe.position.end=Ca(V.end)}function p(){return tz(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function y(V){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(V),10),this.data.expectingFirstListItemValue=void 0}}function b(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=V}function x(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=V}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.value=V.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.value=V.replace(/(\r?\n|\r)$/g,"")}function R(V){const pe=this.resume(),xe=this.stack[this.stack.length-1];xe.label=pe,xe.identifier=Po(this.sliceSerialize(V)).toLowerCase()}function A(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.title=V}function k(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.url=V}function U(V){const pe=this.stack[this.stack.length-1];if(!pe.depth){const xe=this.sliceSerialize(V).length;pe.depth=xe}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function N(V){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(V).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function C(V){const xe=this.stack[this.stack.length-1].children;let Re=xe[xe.length-1];(!Re||Re.type!=="text")&&(Re=Se(),Re.position={start:Ca(V.start),end:void 0},xe.push(Re)),this.stack.push(Re)}function D(V){const pe=this.stack.pop();pe.value+=this.sliceSerialize(V),pe.position.end=Ca(V.end)}function F(V){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xe=pe.children[pe.children.length-1];xe.position.end=Ca(V.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(pe.type)&&(C.call(this,V),D.call(this,V))}function J(){this.data.atHardBreak=!0}function Y(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.value=V}function W(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.value=V}function re(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.value=V}function j(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=pe,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function ce(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=pe,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function X(V){const pe=this.sliceSerialize(V),xe=this.stack[this.stack.length-2];xe.label=eB(pe),xe.identifier=Po(pe).toLowerCase()}function _e(){const V=this.stack[this.stack.length-1],pe=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){const Re=V.children;xe.children=Re}else xe.alt=pe}function T(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.url=V}function se(){const V=this.resume(),pe=this.stack[this.stack.length-1];pe.title=V}function Ee(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function Q(V){const pe=this.resume(),xe=this.stack[this.stack.length-1];xe.label=pe,xe.identifier=Po(this.sliceSerialize(V)).toLowerCase(),this.data.referenceType="full"}function be(V){this.data.characterReferenceType=V.type}function ve(V){const pe=this.sliceSerialize(V),xe=this.data.characterReferenceType;let Re;xe?(Re=IA(pe,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Re=i0(pe);const Je=this.stack[this.stack.length-1];Je.value+=Re}function Ie(V){const pe=this.stack.pop();pe.position.end=Ca(V.end)}function Ne(V){D.call(this,V);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(V)}function rt(V){D.call(this,V);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(V)}function Ue(){return{type:"blockquote",children:[]}}function Tt(){return{type:"code",lang:null,meta:null,value:""}}function Ft(){return{type:"inlineCode",value:""}}function xt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function q(){return{type:"emphasis",children:[]}}function mn(){return{type:"heading",depth:0,children:[]}}function ht(){return{type:"break"}}function yt(){return{type:"html",value:""}}function st(){return{type:"image",title:null,url:"",alt:null}}function jt(){return{type:"link",title:null,url:"",children:[]}}function it(V){return{type:"list",ordered:V.type==="listOrdered",start:null,spread:V._spread,children:[]}}function z(V){return{type:"listItem",spread:V._spread,checked:null,children:[]}}function P(){return{type:"paragraph",children:[]}}function ue(){return{type:"strong",children:[]}}function Se(){return{type:"text",value:""}}function De(){return{type:"thematicBreak"}}}function Ca(n){return{line:n.line,column:n.column,offset:n.offset}}function qA(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?qA(n,i):iB(n,i)}}function iB(n,e){let t;for(t in e)if(jA.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function n_(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+rc({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+rc({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+rc({start:e.start,end:e.end})+") is still open")}function aB(n){const e=this;e.parser=t;function t(i){return nB(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function sB(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function oB(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function lB(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(s.data={meta:e.meta}),n.patch(e,s),s=n.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},n.patch(e,s),s}function cB(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function uB(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function hB(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),s=Vo(i.toLowerCase()),l=n.footnoteOrder.indexOf(i);let c,h=n.footnoteCounts.get(i);h===void 0?(h=0,n.footnoteOrder.push(i),c=n.footnoteOrder.length):c=l+1,h+=1,n.footnoteCounts.set(i,h);const f={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+s,id:t+"fnref-"+s+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};n.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return n.patch(e,d),n.applyData(e,d)}function dB(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function fB(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function WA(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const s=n.all(e),l=s[0];l&&l.type==="text"?l.value="["+l.value:s.unshift({type:"text",value:"["});const c=s[s.length-1];return c&&c.type==="text"?c.value+=i:s.push({type:"text",value:i}),s}function pB(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return WA(n,e);const s={src:Vo(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(s.title=i.title);const l={type:"element",tagName:"img",properties:s,children:[]};return n.patch(e,l),n.applyData(e,l)}function mB(n,e){const t={src:Vo(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function gB(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function yB(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return WA(n,e);const s={href:Vo(i.url||"")};i.title!==null&&i.title!==void 0&&(s.title=i.title);const l={type:"element",tagName:"a",properties:s,children:n.all(e)};return n.patch(e,l),n.applyData(e,l)}function bB(n,e){const t={href:Vo(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function vB(n,e,t){const i=n.all(e),s=t?_B(t):YA(e),l={},c=[];if(typeof e.checked=="boolean"){const p=i[0];let g;p&&p.type==="element"&&p.tagName==="p"?g=p:(g={type:"element",tagName:"p",properties:{},children:[]},i.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let h=-1;for(;++h<i.length;){const p=i[h];(s||h!==0||p.type!=="element"||p.tagName!=="p")&&c.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!s?c.push(...p.children):c.push(p)}const f=i[i.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&c.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:l,children:c};return n.patch(e,d),n.applyData(e,d)}function _B(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=YA(t[i])}return e}function YA(n){const e=n.spread;return e??n.children.length>1}function wB(n,e){const t={},i=n.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++s<i.length;){const c=i[s];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const l={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,l),n.applyData(e,l)}function xB(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function SB(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function TB(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function EB(n,e){const t=n.all(e),i=t.shift(),s=[];if(i){const c={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],c),s.push(c)}if(t.length>0){const c={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},h=e0(e.children[1]),f=AA(e.children[e.children.length-1]);h&&f&&(c.position={start:h,end:f}),s.push(c)}const l={type:"element",tagName:"table",properties:{},children:n.wrap(s,!0)};return n.patch(e,l),n.applyData(e,l)}function MB(n,e,t){const i=t?t.children:void 0,l=(i?i.indexOf(e):1)===0?"th":"td",c=t&&t.type==="table"?t.align:void 0,h=c?c.length:e.children.length;let f=-1;const d=[];for(;++f<h;){const g=e.children[f],y={},b=c?c[f]:void 0;b&&(y.align=b);let x={type:"element",tagName:l,properties:y,children:[]};g&&(x.children=n.all(g),n.patch(g,x),x=n.applyData(g,x)),d.push(x)}const p={type:"element",tagName:"tr",properties:{},children:n.wrap(d,!0)};return n.patch(e,p),n.applyData(e,p)}function AB(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const r_=9,i_=32;function CB(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),s=0;const l=[];for(;i;)l.push(a_(e.slice(s,i.index),s>0,!0),i[0]),s=i.index+i[0].length,i=t.exec(e);return l.push(a_(e.slice(s),s>0,!1)),l.join("")}function a_(n,e,t){let i=0,s=n.length;if(e){let l=n.codePointAt(i);for(;l===r_||l===i_;)i++,l=n.codePointAt(i)}if(t){let l=n.codePointAt(s-1);for(;l===r_||l===i_;)s--,l=n.codePointAt(s-1)}return s>i?n.slice(i,s):""}function DB(n,e){const t={type:"text",value:CB(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function RB(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const kB={blockquote:sB,break:oB,code:lB,delete:cB,emphasis:uB,footnoteReference:hB,heading:dB,html:fB,imageReference:pB,image:mB,inlineCode:gB,linkReference:yB,link:bB,listItem:vB,list:wB,paragraph:xB,root:SB,strong:TB,table:EB,tableCell:AB,tableRow:MB,text:DB,thematicBreak:RB,toml:th,yaml:th,definition:th,footnoteDefinition:th};function th(){}const XA=-1,Hh=0,ac=1,Mh=2,o0=3,l0=4,c0=5,u0=6,QA=7,ZA=8,s_=typeof self=="object"?self:globalThis,PB=(n,e)=>{const t=(s,l)=>(n.set(l,s),s),i=s=>{if(n.has(s))return n.get(s);const[l,c]=e[s];switch(l){case Hh:case XA:return t(c,s);case ac:{const h=t([],s);for(const f of c)h.push(i(f));return h}case Mh:{const h=t({},s);for(const[f,d]of c)h[i(f)]=i(d);return h}case o0:return t(new Date(c),s);case l0:{const{source:h,flags:f}=c;return t(new RegExp(h,f),s)}case c0:{const h=t(new Map,s);for(const[f,d]of c)h.set(i(f),i(d));return h}case u0:{const h=t(new Set,s);for(const f of c)h.add(i(f));return h}case QA:{const{name:h,message:f}=c;return t(new s_[h](f),s)}case ZA:return t(BigInt(c),s);case"BigInt":return t(Object(BigInt(c)),s);case"ArrayBuffer":return t(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:h}=new Uint8Array(c);return t(new DataView(h),c)}}return t(new s_[l](c),s)};return i},o_=n=>PB(new Map,n)(0),_o="",{toString:LB}={},{keys:IB}=Object,Xl=n=>{const e=typeof n;if(e!=="object"||!n)return[Hh,e];const t=LB.call(n).slice(8,-1);switch(t){case"Array":return[ac,_o];case"Object":return[Mh,_o];case"Date":return[o0,_o];case"RegExp":return[l0,_o];case"Map":return[c0,_o];case"Set":return[u0,_o];case"DataView":return[ac,t]}return t.includes("Array")?[ac,t]:t.includes("Error")?[QA,t]:[Mh,t]},nh=([n,e])=>n===Hh&&(e==="function"||e==="symbol"),OB=(n,e,t,i)=>{const s=(c,h)=>{const f=i.push(c)-1;return t.set(h,f),f},l=c=>{if(t.has(c))return t.get(c);let[h,f]=Xl(c);switch(h){case Hh:{let p=c;switch(f){case"bigint":h=ZA,p=c.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+f);p=null;break;case"undefined":return s([XA],c)}return s([h,p],c)}case ac:{if(f){let y=c;return f==="DataView"?y=new Uint8Array(c.buffer):f==="ArrayBuffer"&&(y=new Uint8Array(c)),s([f,[...y]],c)}const p=[],g=s([h,p],c);for(const y of c)p.push(l(y));return g}case Mh:{if(f)switch(f){case"BigInt":return s([f,c.toString()],c);case"Boolean":case"Number":case"String":return s([f,c.valueOf()],c)}if(e&&"toJSON"in c)return l(c.toJSON());const p=[],g=s([h,p],c);for(const y of IB(c))(n||!nh(Xl(c[y])))&&p.push([l(y),l(c[y])]);return g}case o0:return s([h,c.toISOString()],c);case l0:{const{source:p,flags:g}=c;return s([h,{source:p,flags:g}],c)}case c0:{const p=[],g=s([h,p],c);for(const[y,b]of c)(n||!(nh(Xl(y))||nh(Xl(b))))&&p.push([l(y),l(b)]);return g}case u0:{const p=[],g=s([h,p],c);for(const y of c)(n||!nh(Xl(y)))&&p.push(l(y));return g}}const{message:d}=c;return s([h,{name:f,message:d}],c)};return l},l_=(n,{json:e,lossy:t}={})=>{const i=[];return OB(!(e||t),!!e,new Map,i)(n),i},Ah=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?o_(l_(n,e)):structuredClone(n):(n,e)=>o_(l_(n,e));function UB(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function NB(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function FB(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||UB,i=n.options.footnoteBackLabel||NB,s=n.options.footnoteLabel||"Footnotes",l=n.options.footnoteLabelTagName||"h2",c=n.options.footnoteLabelProperties||{className:["sr-only"]},h=[];let f=-1;for(;++f<n.footnoteOrder.length;){const d=n.footnoteById.get(n.footnoteOrder[f]);if(!d)continue;const p=n.all(d),g=String(d.identifier).toUpperCase(),y=Vo(g.toLowerCase());let b=0;const x=[],S=n.footnoteCounts.get(g);for(;S!==void 0&&++b<=S;){x.length>0&&x.push({type:"text",value:" "});let R=typeof t=="string"?t:t(f,b);typeof R=="string"&&(R={type:"text",value:R}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(f,b),className:["data-footnote-backref"]},children:Array.isArray(R)?R:[R]})}const w=p[p.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const R=w.children[w.children.length-1];R&&R.type==="text"?R.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...x)}else p.push(...x);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:n.wrap(p,!0)};n.patch(d,_),h.push(_)}if(h.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...Ah(c),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(h,!0)},{type:"text",value:`
`}]}}const KA=function(n){if(n==null)return VB;if(typeof n=="function")return Vh(n);if(typeof n=="object")return Array.isArray(n)?zB(n):BB(n);if(typeof n=="string")return HB(n);throw new Error("Expected function, string, or object as test")};function zB(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=KA(n[t]);return Vh(i);function i(...s){let l=-1;for(;++l<e.length;)if(e[l].apply(this,s))return!0;return!1}}function BB(n){const e=n;return Vh(t);function t(i){const s=i;let l;for(l in n)if(s[l]!==e[l])return!1;return!0}}function HB(n){return Vh(e);function e(t){return t&&t.type===n}}function Vh(n){return e;function e(t,i,s){return!!(GB(t)&&n.call(this,t,typeof i=="number"?i:void 0,s||void 0))}}function VB(){return!0}function GB(n){return n!==null&&typeof n=="object"&&"type"in n}const JA=[],jB=!0,c_=!1,qB="skip";function WB(n,e,t,i){let s;typeof e=="function"&&typeof t!="function"?(i=t,t=e):s=e;const l=KA(s),c=i?-1:1;h(n,void 0,[])();function h(f,d,p){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const b=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(f.type+(b?"<"+b+">":""))+")"})}return y;function y(){let b=JA,x,S,w;if((!e||l(f,d,p[p.length-1]||void 0))&&(b=YB(t(f,p)),b[0]===c_))return b;if("children"in f&&f.children){const _=f;if(_.children&&b[0]!==qB)for(S=(i?_.children.length:-1)+c,w=p.concat(_);S>-1&&S<_.children.length;){const R=_.children[S];if(x=h(R,S,w)(),x[0]===c_)return x;S=typeof x[1]=="number"?x[1]:S+c}}return b}}}function YB(n){return Array.isArray(n)?n:typeof n=="number"?[jB,n]:n==null?JA:[n]}function $A(n,e,t,i){let s,l,c;typeof e=="function"&&typeof t!="function"?(l=void 0,c=e,s=t):(l=e,c=t,s=i),WB(n,l,h,s);function h(f,d){const p=d[d.length-1],g=p?p.children.indexOf(f):void 0;return c(f,g,p)}}const Qm={}.hasOwnProperty,XB={};function QB(n,e){const t=e||XB,i=new Map,s=new Map,l=new Map,c={...kB,...t.handlers},h={all:d,applyData:KB,definitionById:i,footnoteById:s,footnoteCounts:l,footnoteOrder:[],handlers:c,one:f,options:t,patch:ZB,wrap:$B};return $A(n,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const g=p.type==="definition"?i:s,y=String(p.identifier).toUpperCase();g.has(y)||g.set(y,p)}}),h;function f(p,g){const y=p.type,b=h.handlers[y];if(Qm.call(h.handlers,y)&&b)return b(h,p,g);if(h.options.passThrough&&h.options.passThrough.includes(y)){if("children"in p){const{children:S,...w}=p,_=Ah(w);return _.children=h.all(p),_}return Ah(p)}return(h.options.unknownHandler||JB)(h,p,g)}function d(p){const g=[];if("children"in p){const y=p.children;let b=-1;for(;++b<y.length;){const x=h.one(y[b],p);if(x){if(b&&y[b-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=u_(x.value)),!Array.isArray(x)&&x.type==="element")){const S=x.children[0];S&&S.type==="text"&&(S.value=u_(S.value))}Array.isArray(x)?g.push(...x):g.push(x)}}}return g}}function ZB(n,e){n.position&&(e.position=kF(n))}function KB(n,e){let t=e;if(n&&n.data){const i=n.data.hName,s=n.data.hChildren,l=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const c="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:c}}t.type==="element"&&l&&Object.assign(t.properties,Ah(l)),"children"in t&&t.children&&s!==null&&s!==void 0&&(t.children=s)}return t}function JB(n,e){const t=e.data||{},i="value"in e&&!(Qm.call(t,"hProperties")||Qm.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function $B(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function u_(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function h_(n,e){const t=QB(n,e),i=t.one(n,void 0),s=FB(t),l=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return s&&l.children.push({type:"text",value:`
`},s),l}function e7(n,e){return n&&"run"in n?async function(t,i){const s=h_(t,{file:i,...e});await n.run(s,i)}:function(t,i){return h_(t,{file:i,...n||e})}}function d_(n){if(n)throw n}var Hp,f_;function t7(){if(f_)return Hp;f_=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},l=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=n.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&n.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var y;for(y in d);return typeof y>"u"||n.call(d,y)},c=function(d,p){t&&p.name==="__proto__"?t(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},h=function(d,p){if(p==="__proto__")if(n.call(d,p)){if(i)return i(d,p).value}else return;return d[p]};return Hp=function f(){var d,p,g,y,b,x,S=arguments[0],w=1,_=arguments.length,R=!1;for(typeof S=="boolean"&&(R=S,S=arguments[1]||{},w=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});w<_;++w)if(d=arguments[w],d!=null)for(p in d)g=h(S,p),y=h(d,p),S!==y&&(R&&y&&(l(y)||(b=s(y)))?(b?(b=!1,x=g&&s(g)?g:[]):x=g&&l(g)?g:{},c(S,{name:p,newValue:f(R,x,y)})):typeof y<"u"&&c(S,{name:p,newValue:y}));return S},Hp}var n7=t7();const Vp=$m(n7);function Zm(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function r7(){const n=[],e={run:t,use:i};return e;function t(...s){let l=-1;const c=s.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);h(null,...s);function h(f,...d){const p=n[++l];let g=-1;if(f){c(f);return}for(;++g<s.length;)(d[g]===null||d[g]===void 0)&&(d[g]=s[g]);s=d,p?i7(p,h)(...d):c(null,...d)}}function i(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return n.push(s),e}}function i7(n,e){let t;return i;function i(...c){const h=n.length>c.length;let f;h&&c.push(s);try{f=n.apply(this,c)}catch(d){const p=d;if(h&&t)throw p;return s(p)}h||(f&&f.then&&typeof f.then=="function"?f.then(l,s):f instanceof Error?s(f):l(f))}function s(c,...h){t||(t=!0,e(c,...h))}function l(c){s(null,c)}}const bi={basename:a7,dirname:s7,extname:o7,join:l7,sep:"/"};function a7(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');xc(n);let t=0,i=-1,s=n.length,l;if(e===void 0||e.length===0||e.length>n.length){for(;s--;)if(n.codePointAt(s)===47){if(l){t=s+1;break}}else i<0&&(l=!0,i=s+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let c=-1,h=e.length-1;for(;s--;)if(n.codePointAt(s)===47){if(l){t=s+1;break}}else c<0&&(l=!0,c=s+1),h>-1&&(n.codePointAt(s)===e.codePointAt(h--)?h<0&&(i=s):(h=-1,i=c));return t===i?i=c:i<0&&(i=n.length),n.slice(t,i)}function s7(n){if(xc(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function o7(n){xc(n);let e=n.length,t=-1,i=0,s=-1,l=0,c;for(;e--;){const h=n.codePointAt(e);if(h===47){if(c){i=e+1;break}continue}t<0&&(c=!0,t=e+1),h===46?s<0?s=e:l!==1&&(l=1):s>-1&&(l=-1)}return s<0||t<0||l===0||l===1&&s===t-1&&s===i+1?"":n.slice(s,t)}function l7(...n){let e=-1,t;for(;++e<n.length;)xc(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":c7(t)}function c7(n){xc(n);const e=n.codePointAt(0)===47;let t=u7(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function u7(n,e){let t="",i=0,s=-1,l=0,c=-1,h,f;for(;++c<=n.length;){if(c<n.length)h=n.codePointAt(c);else{if(h===47)break;h=47}if(h===47){if(!(s===c-1||l===1))if(s!==c-1&&l===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(f=t.lastIndexOf("/"),f!==t.length-1){f<0?(t="",i=0):(t=t.slice(0,f),i=t.length-1-t.lastIndexOf("/")),s=c,l=0;continue}}else if(t.length>0){t="",i=0,s=c,l=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(s+1,c):t=n.slice(s+1,c),i=c-s-1;s=c,l=0}else h===46&&l>-1?l++:l=-1}return t}function xc(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const h7={cwd:d7};function d7(){return"/"}function Km(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function f7(n){if(typeof n=="string")n=new URL(n);else if(!Km(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return p7(n)}function p7(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Gp=["history","path","basename","stem","extname","dirname"];class eC{constructor(e){let t;e?Km(e)?t={path:e}:typeof e=="string"||m7(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":h7.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Gp.length;){const l=Gp[i];l in t&&t[l]!==void 0&&t[l]!==null&&(this[l]=l==="history"?[...t[l]]:t[l])}let s;for(s in t)Gp.includes(s)||(this[s]=t[s])}get basename(){return typeof this.path=="string"?bi.basename(this.path):void 0}set basename(e){qp(e,"basename"),jp(e,"basename"),this.path=bi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?bi.dirname(this.path):void 0}set dirname(e){p_(this.basename,"dirname"),this.path=bi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?bi.extname(this.path):void 0}set extname(e){if(jp(e,"extname"),p_(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=bi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Km(e)&&(e=f7(e)),qp(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?bi.basename(this.path,this.extname):void 0}set stem(e){qp(e,"stem"),jp(e,"stem"),this.path=bi.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const s=this.message(e,t,i);throw s.fatal=!0,s}info(e,t,i){const s=this.message(e,t,i);return s.fatal=void 0,s}message(e,t,i){const s=new ir(e,t,i);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function jp(n,e){if(n&&n.includes(bi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+bi.sep+"`")}function qp(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function p_(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function m7(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const g7=function(n){const i=this.constructor.prototype,s=i[n],l=function(){return s.apply(l,arguments)};return Object.setPrototypeOf(l,i),l},y7={}.hasOwnProperty;class h0 extends g7{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=r7()}copy(){const e=new h0;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(Vp(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(Xp("data",this.frozen),this.namespace[e]=t,this):y7.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Xp("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const s=t.call(e,...i);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=rh(e),i=this.parser||this.Parser;return Wp("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),Wp("process",this.parser||this.Parser),Yp("process",this.compiler||this.Compiler),t?s(void 0,t):new Promise(s);function s(l,c){const h=rh(e),f=i.parse(h);i.run(f,h,function(p,g,y){if(p||!g||!y)return d(p);const b=g,x=i.stringify(b,y);_7(x)?y.value=x:y.result=x,d(p,y)});function d(p,g){p||!g?c(p):l?l(g):t(void 0,g)}}}processSync(e){let t=!1,i;return this.freeze(),Wp("processSync",this.parser||this.Parser),Yp("processSync",this.compiler||this.Compiler),this.process(e,s),g_("processSync","process",t),i;function s(l,c){t=!0,d_(l),i=c}}run(e,t,i){m_(e),this.freeze();const s=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?l(void 0,i):new Promise(l);function l(c,h){const f=rh(t);s.run(e,f,d);function d(p,g,y){const b=g||e;p?h(p):c?c(b):i(void 0,b,y)}}}runSync(e,t){let i=!1,s;return this.run(e,t,l),g_("runSync","run",i),s;function l(c,h){d_(c),s=h,i=!0}}stringify(e,t){this.freeze();const i=rh(t),s=this.compiler||this.Compiler;return Yp("stringify",s),m_(e),s(e,i)}use(e,...t){const i=this.attachers,s=this.namespace;if(Xp("use",this.frozen),e!=null)if(typeof e=="function")f(e,t);else if(typeof e=="object")Array.isArray(e)?h(e):c(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function l(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...g]=d;f(p,g)}else c(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function c(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");h(d.plugins),d.settings&&(s.settings=Vp(!0,s.settings,d.settings))}function h(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const g=d[p];l(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,p){let g=-1,y=-1;for(;++g<i.length;)if(i[g][0]===d){y=g;break}if(y===-1)i.push([d,...p]);else if(p.length>0){let[b,...x]=p;const S=i[y][1];Zm(S)&&Zm(b)&&(b=Vp(!0,S,b)),i[y]=[d,b,...x]}}}}const b7=new h0().freeze();function Wp(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function Yp(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function Xp(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function m_(n){if(!Zm(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function g_(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function rh(n){return v7(n)?n:new eC(n)}function v7(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function _7(n){return typeof n=="string"||w7(n)}function w7(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const x7="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",y_=[],b_={allowDangerousHtml:!0},S7=/^(https?|ircs?|mailto|xmpp)$/i,T7=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function d0(n){const e=n.allowedElements,t=n.allowElement,i=n.children||"",s=n.className,l=n.components,c=n.disallowedElements,h=n.rehypePlugins||y_,f=n.remarkPlugins||y_,d=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...b_}:b_,p=n.skipHtml,g=n.unwrapDisallowed,y=n.urlTransform||E7,b=b7().use(aB).use(f).use(e7,d).use(h),x=new eC;typeof i=="string"&&(x.value=i);for(const R of T7)Object.hasOwn(n,R.from)&&(""+R.from+(R.to?"use `"+R.to+"` instead":"remove it")+x7+R.id,void 0);const S=b.parse(x);let w=b.runSync(S,x);return s&&(w={type:"element",tagName:"div",properties:{className:s},children:w.type==="root"?w.children:[w]}),$A(w,_),NF(w,{Fragment:ae.Fragment,components:l,ignoreInvalidStyle:!0,jsx:ae.jsx,jsxs:ae.jsxs,passKeys:!0,passNode:!0});function _(R,A,k){if(R.type==="raw"&&k&&typeof A=="number")return p?k.children.splice(A,1):k.children[A]={type:"text",value:R.value},A;if(R.type==="element"){let U;for(U in Fp)if(Object.hasOwn(Fp,U)&&Object.hasOwn(R.properties,U)){const E=R.properties[U],N=Fp[U];(N===null||N.includes(R.tagName))&&(R.properties[U]=y(String(E||""),U,R))}}if(R.type==="element"){let U=e?!e.includes(R.tagName):c?c.includes(R.tagName):!1;if(!U&&t&&typeof A=="number"&&(U=!t(R,A,k)),U&&k&&typeof A=="number")return g&&R.children?k.children.splice(A,1,...R.children):k.children.splice(A,1),A}}}function E7(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),s=n.indexOf("/");return e===-1||s!==-1&&e>s||t!==-1&&e>t||i!==-1&&e>i||S7.test(n.slice(0,e))?n:""}function M7(){const{name:n}=og(),e=Dg.find(d=>d.name===n);if(!e)throw new Error("Project not found");const{title:t,date:i,desc:s,content:l}=e,c=d=>{try{if(d.startsWith("http"))return d;const p=d.split("/").pop().trim(),g=d.includes("/blog/")||d.startsWith("blog/"),y=d.includes("/portfolio/")||d.startsWith("portfolio/");let b=g?"blog":y?"portfolio":"";return b?new URL(Object.assign({"../assets/blog/2021-09-26--01.png":kw,"../assets/blog/2021-09-26--02.png":Pw,"../assets/blog/2021-09-26--03.png":Lw,"../assets/blog/2021-09-26--04.png":Iw,"../assets/blog/2021-09-26--05.png":Ow,"../assets/blog/2021-09-26--06.png":Uw,"../assets/blog/2021-09-26--07.png":Nw,"../assets/blog/2021-09-26--08.png":Fw,"../assets/blog/2021-09-26--09.png":zw,"../assets/blog/2021-09-26--10.png":Bw,"../assets/blog/2021-09-26--11.png":Hw,"../assets/blog/2021-09-26--12.png":Vw,"../assets/blog/2021-09-26--13.png":Gw,"../assets/blog/2021-09-26--14.png":jw,"../assets/blog/2021-09-26--15.png":qw,"../assets/blog/2021-09-26--16.png":Ww,"../assets/blog/2021-10-03--01.png":Yw,"../assets/blog/2021-10-03--02.png":Xw,"../assets/blog/2021-10-03--03.png":Qw,"../assets/blog/2021-10-03--04.png":Zw,"../assets/blog/2021-10-03--05.png":Kw,"../assets/blog/2021-10-03--06.png":Jw,"../assets/blog/2021-10-03--07.png":$w,"../assets/blog/2021-10-03--08.png":ex,"../assets/blog/2021-10-03--09.png":tx,"../assets/blog/2021-10-03--10.png":nx,"../assets/blog/2021-10-03--11.png":rx,"../assets/blog/2021-10-03--12.png":ix,"../assets/blog/2021-10-03--13.png":ax,"../assets/blog/2021-10-03--14.png":sx,"../assets/blog/2021-10-03--15.png":ox,"../assets/blog/2021-10-03--16.png":lx,"../assets/blog/2021-10-03--17.png":cx,"../assets/blog/2021-10-03--18.png":ux,"../assets/blog/2021-10-03--19.png":hx,"../assets/blog/2021-10-03--20.png":dx,"../assets/blog/2021-10-03--21.png":fx,"../assets/blog/2021-10-03--22.png":px,"../assets/blog/2021-10-03--23.png":mx,"../assets/blog/2021-10-03--24.png":gx,"../assets/blog/2021-10-03--25.png":yx,"../assets/blog/2021-10-03--26.png":bx,"../assets/blog/2021-10-03--27.png":vx,"../assets/blog/2021-10-03--28.png":_x,"../assets/blog/2021-10-03--29.png":wx,"../assets/blog/2021-10-10--01.png":xx,"../assets/blog/2021-10-10--02.png":Sx,"../assets/blog/2021-10-10--03.png":Tx,"../assets/blog/2021-10-10--04.png":Ex,"../assets/blog/2021-10-10--05.png":Mx,"../assets/blog/2021-10-10--06.png":Ax,"../assets/blog/2021-10-10--07.png":Cx,"../assets/blog/2021-10-10--08.png":Dx,"../assets/blog/2021-10-10--09.png":Rx,"../assets/blog/2021-10-10--10.png":kx,"../assets/blog/2021-10-10--11.png":Px,"../assets/blog/2021-10-10--12.png":Lx,"../assets/blog/2021-10-10--13.png":Ix,"../assets/blog/2021-10-10--14.png":Ox,"../assets/blog/2021-10-10--15.png":Ux,"../assets/blog/2021-10-10--16.png":Nx,"../assets/blog/2021-10-10--17.png":Fx,"../assets/blog/2021-10-10--18.png":zx,"../assets/blog/2021-10-10--19.png":Bx,"../assets/blog/2021-10-10--20.png":Hx,"../assets/blog/2021-10-10--21.png":Vx,"../assets/blog/2021-10-10--22.png":Gx,"../assets/blog/2021-10-10--22a.png":jx,"../assets/blog/2021-10-10--23.png":qx,"../assets/blog/2021-10-10--23a.png":Wx,"../assets/blog/2021-10-10--24.png":Yx,"../assets/blog/2021-10-10--24a.png":Xx,"../assets/blog/2021-10-17--01.png":Qx,"../assets/blog/2021-10-17--02.png":Zx,"../assets/blog/2021-10-17--03.png":Kx,"../assets/blog/2021-10-17--04.png":Jx,"../assets/blog/2021-10-17--05.png":$x,"../assets/blog/2021-10-17--06.png":eS,"../assets/blog/2021-10-17--07.png":tS,"../assets/blog/2021-10-17--08.png":nS,"../assets/blog/2021-10-24--01.png":rS,"../assets/blog/2021-10-24--02.png":iS,"../assets/blog/2021-10-24--03.png":aS,"../assets/blog/2021-10-24--04.png":sS,"../assets/blog/2021-10-24--05.png":oS,"../assets/blog/2021-10-24--06.png":lS,"../assets/blog/2021-10-24--07.png":cS,"../assets/blog/2021-10-24--08.png":uS,"../assets/blog/2021-10-24--09.png":hS,"../assets/blog/2021-10-24--10.png":dS,"../assets/blog/2021-10-24--11.png":fS,"../assets/blog/2021-10-24--12.png":pS,"../assets/blog/2021-10-24--13.png":mS,"../assets/blog/2021-10-24--14.png":gS,"../assets/blog/2021-10-24--15.png":yS,"../assets/blog/2021-10-24--16.png":bS,"../assets/blog/2021-10-24--17.png":vS,"../assets/blog/2021-10-31--01.png":_S,"../assets/blog/2021-10-31--02.png":wS,"../assets/blog/2021-10-31--03.png":xS,"../assets/blog/2021-10-31--04.png":SS,"../assets/blog/2021-12-18--01.png":TS,"../assets/blog/2021-12-18--02.png":ES,"../assets/blog/2021-12-18--03.png":MS,"../assets/blog/2021-12-18--04.png":AS,"../assets/blog/2021-12-18--05.png":CS,"../assets/blog/2021-12-18--06.png":DS,"../assets/blog/2021-12-18--07.png":RS,"../assets/blog/2021-12-18--08.png":kS,"../assets/blog/2021-12-18--08a.png":PS,"../assets/blog/2021-12-18--09.png":LS,"../assets/blog/2021-12-18--10.png":IS,"../assets/blog/2022-01-12--00.png":OS,"../assets/blog/2022-01-12--01.png":US,"../assets/blog/2022-01-12--02.png":NS,"../assets/blog/2022-01-12--03.png":FS,"../assets/blog/2022-01-12--04.png":zS,"../assets/blog/2022-01-12--05.png":BS,"../assets/blog/2022-01-12--06.png":HS,"../assets/blog/2022-01-12--07.png":VS,"../assets/blog/2022-01-12--08.png":GS,"../assets/blog/2022-01-12--09.png":jS,"../assets/blog/2022-01-12--10.png":qS,"../assets/blog/2022-02-27--01.png":WS,"../assets/blog/2022-02-27--02.png":YS,"../assets/blog/2022-02-27--03.png":XS,"../assets/blog/2022-02-27--04.png":QS,"../assets/blog/2022-02-27--05.png":ZS,"../assets/blog/2022-02-27--06.png":KS,"../assets/blog/2022-02-27--07.png":JS,"../assets/blog/2022-02-27--08.png":$S,"../assets/blog/2022-04-17--01.png":eT,"../assets/blog/2022-04-17--02.png":tT,"../assets/blog/2022-04-17--03.png":nT,"../assets/blog/2022-04-17--04.png":rT,"../assets/blog/2022-04-17--05.png":iT,"../assets/blog/2022-04-17--06.png":aT,"../assets/blog/2022-04-17--07.png":sT,"../assets/blog/2022-04-17--08.png":oT,"../assets/blog/2022-04-17--09.png":lT,"../assets/blog/2022-04-17--10.png":cT,"../assets/blog/2022-04-17--11.png":uT,"../assets/blog/2022-04-17--12.png":hT,"../assets/blog/2022-04-17--13.png":dT,"../assets/blog/2022-04-17--14.png":fT,"../assets/blog/2022-04-17--15.png":pT,"../assets/blog/2022-04-17--16.png":mT,"../assets/blog/2022-04-17--17.png":gT,"../assets/blog/2022-04-17--18.png":yT,"../assets/blog/2022-04-17--19.png":bT,"../assets/blog/2022-04-17--20.png":vT,"../assets/blog/2022-04-17--21.png":_T,"../assets/blog/2022-04-17--22.png":wT,"../assets/blog/2022-04-17--23.png":xT,"../assets/blog/2022-04-17--24.png":ST,"../assets/blog/2022-04-17--25.png":TT,"../assets/blog/2022-04-17--26.png":ET,"../assets/blog/2022-04-17--27.png":MT,"../assets/blog/2022-04-17--28.png":AT,"../assets/blog/2022-04-27--01.png":CT,"../assets/blog/2022-04-27--02.png":DT,"../assets/blog/2022-04-27--03.png":RT,"../assets/blog/2022-04-27--04.png":kT,"../assets/blog/2022-04-27--05.png":PT,"../assets/blog/2022-04-27--06.png":LT,"../assets/blog/2022-04-27--07.png":IT,"../assets/blog/2022-04-27--08.png":OT,"../assets/blog/2022-04-27--09.png":UT,"../assets/blog/2022-04-27--10.png":NT,"../assets/blog/2022-06-22--00.png":FT,"../assets/blog/2022-06-22--01.png":zT,"../assets/blog/2022-06-22--02.png":BT,"../assets/blog/2022-06-22--03.png":HT,"../assets/blog/2022-06-22--04.png":VT,"../assets/blog/2022-06-22--05.png":GT,"../assets/blog/2022-06-22--06.png":jT,"../assets/blog/2022-07-31--01.png":qT,"../assets/blog/2022-07-31--02.png":WT,"../assets/blog/2022-07-31--03.png":YT,"../assets/blog/2022-07-31--04.png":XT,"../assets/blog/2022-08-27--01.png":QT,"../assets/blog/2022-08-27--01a.png":ZT,"../assets/blog/2022-08-27--02.png":KT,"../assets/blog/2022-08-27--03.png":JT,"../assets/blog/2022-08-27--04.png":$T,"../assets/blog/2022-08-27--05.png":eE,"../assets/blog/2022-08-27--06.png":tE,"../assets/blog/2022-08-27--07.png":nE,"../assets/blog/2022-08-27--08.png":rE,"../assets/blog/2022-08-27--09.png":iE,"../assets/blog/2022-08-27--10.png":aE,"../assets/blog/2022-08-27--11.png":sE,"../assets/blog/2022-08-27--12.png":oE,"../assets/blog/2022-08-27--13.png":lE,"../assets/blog/2022-08-27--14.png":cE,"../assets/blog/2022-08-27--15.png":uE,"../assets/blog/2022-08-27--16.png":hE,"../assets/blog/2022-08-27--17.png":dE,"../assets/blog/2022-08-27--18.png":fE,"../assets/blog/2022-09-19--01.png":pE,"../assets/blog/2022-09-19--02.png":mE,"../assets/blog/2022-09-19--03.png":gE,"../assets/blog/2022-09-19--04.png":yE,"../assets/blog/2022-09-19--05.png":bE,"../assets/blog/2022-09-19--06.png":vE,"../assets/blog/2022-09-19--07.png":_E,"../assets/blog/2022-09-19--08.png":wE,"../assets/blog/2022-09-19--09.png":xE,"../assets/blog/2022-09-19--10.png":SE,"../assets/blog/2022-09-19--11.png":TE,"../assets/blog/2022-09-19--12.png":EE,"../assets/blog/2022-09-19--13.png":ME,"../assets/blog/2022-09-19--14.png":AE,"../assets/blog/2022-09-19--15.png":CE,"../assets/blog/2022-09-19--16.png":DE,"../assets/blog/2022-10-29--01.png":RE,"../assets/blog/2022-10-29--02.png":kE,"../assets/blog/2022-10-29--03.png":PE,"../assets/blog/2022-10-29--04.png":LE,"../assets/blog/2022-10-29--05.png":IE,"../assets/blog/2022-10-29--06.png":OE,"../assets/blog/2022-10-29--07.png":UE,"../assets/blog/2022-10-29--08.png":NE,"../assets/blog/2022-10-29--09.png":FE,"../assets/blog/2022-10-29--10.png":zE,"../assets/blog/2022-10-29--11.png":BE,"../assets/blog/2022-10-29--12.png":HE,"../assets/blog/2022-10-29--13.png":VE,"../assets/blog/2022-10-29--14.png":GE,"../assets/blog/2022-10-29--15.png":jE,"../assets/blog/2022-10-29--16.png":qE,"../assets/blog/2022-10-29--17.png":WE,"../assets/blog/2022-10-29--18.png":YE,"../assets/blog/2022-10-29--19.png":XE,"../assets/blog/2022-10-29--20.png":QE,"../assets/blog/2022-10-29--21.png":ZE,"../assets/blog/2022-10-29--22.png":KE,"../assets/blog/2022-10-29--23.png":JE,"../assets/blog/2022-10-29--24.png":$E,"../assets/blog/2022-10-29--25.png":eM,"../assets/blog/2022-10-29--26.png":tM,"../assets/blog/2022-10-29--27.png":nM,"../assets/blog/2022-10-29--28.png":rM,"../assets/blog/2022-10-29--29.png":iM,"../assets/blog/2022-10-29--30.png":aM,"../assets/blog/2022-10-29--31.png":sM,"../assets/blog/2022-10-29--32.png":oM,"../assets/blog/2022-10-29--33.png":lM,"../assets/blog/2022-11-26--01.png":cM,"../assets/blog/2022-11-26--02.png":uM,"../assets/blog/2022-11-26--03.png":hM,"../assets/blog/2022-11-26--04.png":dM,"../assets/blog/2022-11-26--05.png":fM,"../assets/blog/2022-11-26--06.png":pM,"../assets/blog/2022-11-26--07.png":mM,"../assets/blog/2022-11-26--08.png":gM,"../assets/blog/2022-11-26--09.png":yM,"../assets/blog/2022-11-26--10.png":bM,"../assets/blog/2022-11-26--11.png":vM,"../assets/blog/2022-11-26--12.png":_M,"../assets/blog/2022-11-26--13.png":wM,"../assets/blog/2022-11-26--14.png":xM,"../assets/blog/2022-11-26--15.png":SM,"../assets/blog/2022-11-26--16.png":TM,"../assets/blog/2022-11-26--17.png":EM,"../assets/blog/2022-11-26--18.png":MM,"../assets/blog/2022-11-26--19.png":AM,"../assets/blog/2022-11-26--20.png":CM,"../assets/blog/2022-11-26--21.png":DM,"../assets/blog/2022-11-26--22.png":RM,"../assets/blog/2022-11-26--23.png":kM,"../assets/blog/2022-11-26--24.png":PM,"../assets/blog/2022-11-26--25.png":LM,"../assets/blog/2022-11-26--26.png":IM,"../assets/blog/2022-11-26--27.png":OM,"../assets/blog/2022-11-26--28.png":UM,"../assets/blog/2022-11-26--29.png":NM,"../assets/blog/2022-11-26--30.png":FM,"../assets/blog/2023-03-11--01.png":zM,"../assets/blog/2023-03-11--02.png":BM,"../assets/blog/2023-03-11--03.png":HM,"../assets/blog/2023-03-11--04.png":VM,"../assets/blog/2023-03-11--05.png":GM,"../assets/blog/2023-03-11--06.png":jM,"../assets/blog/2023-03-11--07.png":qM,"../assets/blog/2023-03-11--08.png":WM,"../assets/blog/2023-03-11--09.png":YM,"../assets/blog/2023-03-11--10.png":XM,"../assets/blog/2023-03-11--11.png":QM,"../assets/blog/2023-03-11--12.png":ZM,"../assets/blog/2023-03-11--13.png":KM,"../assets/blog/2023-03-11--14.png":JM,"../assets/blog/2023-03-11--15.png":$M,"../assets/blog/2023-03-11--16.png":e3,"../assets/blog/2023-03-11--17.png":t3,"../assets/blog/2023-03-11--18.png":n3,"../assets/blog/2023-03-11--19.png":r3,"../assets/blog/2023-03-11--20.png":i3,"../assets/blog/2023-03-11--21.png":a3,"../assets/blog/2023-10-07--01.png":s3,"../assets/blog/2023-10-07--02.png":o3,"../assets/blog/2023-10-07--03.png":l3,"../assets/blog/2023-10-07--04.png":c3,"../assets/blog/2023-10-07--05.png":u3,"../assets/blog/2023-10-07--06.png":h3,"../assets/blog/2023-10-07--07.png":d3,"../assets/blog/2023-10-07--08.png":f3,"../assets/blog/2023-10-07--09.png":p3,"../assets/blog/2023-10-07--10.png":m3,"../assets/blog/2023-10-07--11.png":g3,"../assets/blog/2023-10-07--12.png":y3,"../assets/blog/2023-10-07--13.png":b3,"../assets/blog/2023-10-07--14.png":v3,"../assets/blog/2023-10-07--15.png":_3,"../assets/blog/2023-10-07--16.png":w3,"../assets/blog/2024-03-28--01.png":x3,"../assets/blog/2024-03-28--02.png":S3,"../assets/blog/2024-03-28--03.png":T3,"../assets/blog/2024-03-28--04.png":E3,"../assets/blog/2024-03-28--05.png":M3,"../assets/blog/2024-03-28--06.png":A3,"../assets/blog/2024-03-28--07.png":C3,"../assets/blog/2024-03-28--08.png":D3,"../assets/blog/2024-03-28--09.png":R3,"../assets/blog/2024-03-28--10.png":k3,"../assets/blog/2024-03-28--11.png":P3,"../assets/blog/2024-03-28--12.png":L3,"../assets/blog/2024-03-28--13.png":I3,"../assets/blog/2024-10-07--01.png":O3,"../assets/blog/2024-10-07--02.png":U3,"../assets/blog/2024-10-07--03.png":N3,"../assets/blog/2024-10-07--04.png":F3,"../assets/blog/2024-10-07--05.png":z3,"../assets/blog/2024-10-07--06.png":B3,"../assets/blog/2024-10-07--07.png":H3,"../assets/blog/2024-10-07--08.png":V3,"../assets/blog/2024-10-07--09.png":G3,"../assets/blog/2024-10-07--10.png":j3,"../assets/blog/2024-10-07--11.png":q3,"../assets/blog/2024-10-07--12.png":W3,"../assets/blog/2024-10-07--13.png":Y3,"../assets/blog/2024-10-07--14.png":X3,"../assets/blog/2024-10-07--15.png":Q3,"../assets/blog/2024-10-07--16.png":Z3,"../assets/blog/2024-10-07--17.png":K3,"../assets/blog/2024-10-07--18.png":J3,"../assets/blog/2024-10-07--19.png":$3,"../assets/blog/2024-10-07--20.png":eA,"../assets/blog/2024-10-07--21.png":tA,"../assets/blog/2024-10-07--22.png":nA,"../assets/blog/2024-10-07--23.png":rA,"../assets/blog/2024-10-07--24.png":iA,"../assets/blog/2024-10-07--25.png":aA,"../assets/blog/2024-10-07--26.png":sA,"../assets/blog/2024-10-07--27.png":oA,"../assets/blog/2024-10-07--28.png":lA,"../assets/blog/2024-10-07--29.png":cA,"../assets/blog/2024-10-07--30.png":uA,"../assets/blog/2024-10-07--31.png":hA,"../assets/blog/2024-10-07--32.png":dA,"../assets/blog/2024-10-07--33.png":fA,"../assets/blog/2024-10-07--34.png":pA,"../assets/blog/2024-10-07--35.png":mA,"../assets/blog/2024-10-07--36.png":gA,"../assets/blog/Date_times_to_convert.xlsx":yA,"../assets/blog/Time_zone_offsets_and_DST_observations.xlsx":bA,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency-original.png":kg,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.gif":Pg,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.png":Lg,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-original-trimmed.png":Ig,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-original.png":Og,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-previous.png":Ug,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.gif":Ng,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.png":Fg,"../assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace-trimmed.png":zg,"../assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace.png":Bg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb-original.png":Hg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb-previous.png":Vg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.gif":Gg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.png":jg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance-original.png":qg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance.gif":Wg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance.png":Yg,"../assets/portfolio/img-2022-08-satellite-launch-overview.gif":Xg,"../assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast-original.png":Qg,"../assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast.gif":Zg,"../assets/portfolio/img-2022-11-power-bi-appsource-deneb-maps.gif":Kg,"../assets/readings/12-rules-for-life-by-jordan-b-peterson.png":Nh,"../assets/readings/elon-musk-by-walter-isaacson.png":Fh,"../assets/readings/mastery-by-robert-greene.png":zh})[`../assets/${b}/${p}`],import.meta.url).href:""}catch(p){return console.error(`Error loading image: ${d}`,p),""}},f=(d=>d.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(p,g,y)=>{try{const b=c(y);return`![${g}](${b})`}catch(b){return console.error(`Image not found: ${y}`,b),`![${g}](#)`}}))(l);return ae.jsxs("content",{children:[ae.jsx("h3",{children:i||"This project does not have a date"}),ae.jsx("h1",{children:t||"This project does not have a title"}),ae.jsx("h2",{children:s||"This project does not have a description"}),ae.jsx(d0,{children:f||"This project does not have content"})]})}function f0(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let As=f0();function tC(n){As=n}const sc={exec:()=>null};function Jt(n,e=""){let t=typeof n=="string"?n:n.source;const i={replace:(s,l)=>{let c=typeof l=="string"?l:l.source;return c=c.replace(ur.caret,"$1"),t=t.replace(s,c),i},getRegex:()=>new RegExp(t,e)};return i}const ur={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},A7=/^(?:[ \t]*(?:\n|$))+/,C7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,D7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Sc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,R7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,p0=/(?:[*+-]|\d{1,9}[.)])/,nC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,rC=Jt(nC).replace(/bull/g,p0).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),k7=Jt(nC).replace(/bull/g,p0).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),m0=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,P7=/^[^\n]+/,g0=/(?!\s*\])(?:\\.|[^\[\]\\])+/,L7=Jt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",g0).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),I7=Jt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,p0).getRegex(),Gh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",y0=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,O7=Jt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",y0).replace("tag",Gh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),iC=Jt(m0).replace("hr",Sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gh).getRegex(),U7=Jt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",iC).getRegex(),b0={blockquote:U7,code:C7,def:L7,fences:D7,heading:R7,hr:Sc,html:O7,lheading:rC,list:I7,newline:A7,paragraph:iC,table:sc,text:P7},v_=Jt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gh).getRegex(),N7={...b0,lheading:k7,table:v_,paragraph:Jt(m0).replace("hr",Sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",v_).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gh).getRegex()},F7={...b0,html:Jt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",y0).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Jt(m0).replace("hr",Sc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",rC).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},z7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,B7=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,aC=/^( {2,}|\\)\n(?!\s*$)/,H7=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,jh=/[\p{P}\p{S}]/u,v0=/[\s\p{P}\p{S}]/u,sC=/[^\s\p{P}\p{S}]/u,V7=Jt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,v0).getRegex(),oC=/(?!~)[\p{P}\p{S}]/u,G7=/(?!~)[\s\p{P}\p{S}]/u,j7=/(?:[^\s\p{P}\p{S}]|~)/u,q7=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,lC=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,W7=Jt(lC,"u").replace(/punct/g,jh).getRegex(),Y7=Jt(lC,"u").replace(/punct/g,oC).getRegex(),cC="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",X7=Jt(cC,"gu").replace(/notPunctSpace/g,sC).replace(/punctSpace/g,v0).replace(/punct/g,jh).getRegex(),Q7=Jt(cC,"gu").replace(/notPunctSpace/g,j7).replace(/punctSpace/g,G7).replace(/punct/g,oC).getRegex(),Z7=Jt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,sC).replace(/punctSpace/g,v0).replace(/punct/g,jh).getRegex(),K7=Jt(/\\(punct)/,"gu").replace(/punct/g,jh).getRegex(),J7=Jt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$7=Jt(y0).replace("(?:-->|$)","-->").getRegex(),e9=Jt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$7).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ch=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,t9=Jt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ch).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),uC=Jt(/^!?\[(label)\]\[(ref)\]/).replace("label",Ch).replace("ref",g0).getRegex(),hC=Jt(/^!?\[(ref)\](?:\[\])?/).replace("ref",g0).getRegex(),n9=Jt("reflink|nolink(?!\\()","g").replace("reflink",uC).replace("nolink",hC).getRegex(),_0={_backpedal:sc,anyPunctuation:K7,autolink:J7,blockSkip:q7,br:aC,code:B7,del:sc,emStrongLDelim:W7,emStrongRDelimAst:X7,emStrongRDelimUnd:Z7,escape:z7,link:t9,nolink:hC,punctuation:V7,reflink:uC,reflinkSearch:n9,tag:e9,text:H7,url:sc},r9={..._0,link:Jt(/^!?\[(label)\]\((.*?)\)/).replace("label",Ch).getRegex(),reflink:Jt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ch).getRegex()},Jm={..._0,emStrongRDelimAst:Q7,emStrongLDelim:Y7,url:Jt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},i9={...Jm,br:Jt(aC).replace("{2,}","*").getRegex(),text:Jt(Jm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ih={normal:b0,gfm:N7,pedantic:F7},Ql={normal:_0,gfm:Jm,breaks:i9,pedantic:r9},a9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},__=n=>a9[n];function yi(n,e){if(e){if(ur.escapeTest.test(n))return n.replace(ur.escapeReplace,__)}else if(ur.escapeTestNoEncode.test(n))return n.replace(ur.escapeReplaceNoEncode,__);return n}function w_(n){try{n=encodeURI(n).replace(ur.percentDecode,"%")}catch{return null}return n}function x_(n,e){var l;const t=n.replace(ur.findPipe,(c,h,f)=>{let d=!1,p=h;for(;--p>=0&&f[p]==="\\";)d=!d;return d?"|":" |"}),i=t.split(ur.splitPipe);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!((l=i.at(-1))!=null&&l.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(ur.slashPipe,"|");return i}function Zl(n,e,t){const i=n.length;if(i===0)return"";let s=0;for(;s<i&&n.charAt(i-s-1)===e;)s++;return n.slice(0,i-s)}function s9(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return-1}function S_(n,e,t,i,s){const l=e.href,c=e.title||null,h=n[1].replace(s.other.outputLinkReplace,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const f={type:"link",raw:t,href:l,title:c,text:h,tokens:i.inlineTokens(h)};return i.state.inLink=!1,f}return{type:"image",raw:t,href:l,title:c,text:h}}function o9(n,e,t){const i=n.match(t.other.indentCodeCompensation);if(i===null)return e;const s=i[1];return e.split(`
`).map(l=>{const c=l.match(t.other.beginningSpace);if(c===null)return l;const[h]=c;return h.length>=s.length?l.slice(s.length):l}).join(`
`)}class Dh{constructor(e){cn(this,"options");cn(this,"rules");cn(this,"lexer");this.options=e||As}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Zl(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],s=o9(i,t[3]||"",this.rules);return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(this.rules.other.endingHash.test(i)){const s=Zl(i,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(i=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Zl(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=Zl(t[0],`
`).split(`
`),s="",l="";const c=[];for(;i.length>0;){let h=!1;const f=[];let d;for(d=0;d<i.length;d++)if(this.rules.other.blockquoteStart.test(i[d]))f.push(i[d]),h=!0;else if(!h)f.push(i[d]);else break;i=i.slice(d);const p=f.join(`
`),g=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${p}`:p,l=l?`${l}
${g}`:g;const y=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(g,c,!0),this.lexer.state.top=y,i.length===0)break;const b=c.at(-1);if((b==null?void 0:b.type)==="code")break;if((b==null?void 0:b.type)==="blockquote"){const x=b,S=x.raw+`
`+i.join(`
`),w=this.blockquote(S);c[c.length-1]=w,s=s.substring(0,s.length-x.raw.length)+w.raw,l=l.substring(0,l.length-x.text.length)+w.text;break}else if((b==null?void 0:b.type)==="list"){const x=b,S=x.raw+`
`+i.join(`
`),w=this.list(S);c[c.length-1]=w,s=s.substring(0,s.length-b.raw.length)+w.raw,l=l.substring(0,l.length-x.raw.length)+w.raw,i=S.substring(c.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:c,text:l}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const s=i.length>1,l={type:"list",raw:"",ordered:s,start:s?+i.slice(0,-1):"",loose:!1,items:[]};i=s?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=s?i:"[*+-]");const c=this.rules.other.listItemRegex(i);let h=!1;for(;e;){let d=!1,p="",g="";if(!(t=c.exec(e))||this.rules.block.hr.test(e))break;p=t[0],e=e.substring(p.length);let y=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,R=>" ".repeat(3*R.length)),b=e.split(`
`,1)[0],x=!y.trim(),S=0;if(this.options.pedantic?(S=2,g=y.trimStart()):x?S=t[1].length+1:(S=t[2].search(this.rules.other.nonSpaceChar),S=S>4?1:S,g=y.slice(S),S+=t[1].length),x&&this.rules.other.blankLine.test(b)&&(p+=b+`
`,e=e.substring(b.length+1),d=!0),!d){const R=this.rules.other.nextBulletRegex(S),A=this.rules.other.hrRegex(S),k=this.rules.other.fencesBeginRegex(S),U=this.rules.other.headingBeginRegex(S),E=this.rules.other.htmlBeginRegex(S);for(;e;){const N=e.split(`
`,1)[0];let H;if(b=N,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),H=b):H=b.replace(this.rules.other.tabCharGlobal,"    "),k.test(b)||U.test(b)||E.test(b)||R.test(b)||A.test(b))break;if(H.search(this.rules.other.nonSpaceChar)>=S||!b.trim())g+=`
`+H.slice(S);else{if(x||y.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||k.test(y)||U.test(y)||A.test(y))break;g+=`
`+b}!x&&!b.trim()&&(x=!0),p+=N+`
`,e=e.substring(N.length+1),y=H.slice(S)}}l.loose||(h?l.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(h=!0));let w=null,_;this.options.gfm&&(w=this.rules.other.listIsTask.exec(g),w&&(_=w[0]!=="[ ] ",g=g.replace(this.rules.other.listReplaceTask,""))),l.items.push({type:"list_item",raw:p,task:!!w,checked:_,loose:!1,text:g,tokens:[]}),l.raw+=p}const f=l.items.at(-1);if(f)f.raw=f.raw.trimEnd(),f.text=f.text.trimEnd();else return;l.raw=l.raw.trimEnd();for(let d=0;d<l.items.length;d++)if(this.lexer.state.top=!1,l.items[d].tokens=this.lexer.blockTokens(l.items[d].text,[]),!l.loose){const p=l.items[d].tokens.filter(y=>y.type==="space"),g=p.length>0&&p.some(y=>this.rules.other.anyLine.test(y.raw));l.loose=g}if(l.loose)for(let d=0;d<l.items.length;d++)l.items[d].loose=!0;return l}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",l=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:s,title:l}}}table(e){var h;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const i=x_(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),l=(h=t[3])!=null&&h.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],c={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===s.length){for(const f of s)this.rules.other.tableAlignRight.test(f)?c.align.push("right"):this.rules.other.tableAlignCenter.test(f)?c.align.push("center"):this.rules.other.tableAlignLeft.test(f)?c.align.push("left"):c.align.push(null);for(let f=0;f<i.length;f++)c.header.push({text:i[f],tokens:this.lexer.inline(i[f]),header:!0,align:c.align[f]});for(const f of l)c.rows.push(x_(f,c.header.length).map((d,p)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:c.align[p]})));return c}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;const c=Zl(i.slice(0,-1),"\\");if((i.length-c.length)%2===0)return}else{const c=s9(t[2],"()");if(c>-1){const f=(t[0].indexOf("!")===0?5:4)+t[1].length+c;t[2]=t[2].substring(0,c),t[0]=t[0].substring(0,f).trim(),t[3]=""}}let s=t[2],l="";if(this.options.pedantic){const c=this.rules.other.pedanticHrefTitle.exec(s);c&&(s=c[1],l=c[3])}else l=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?s=s.slice(1):s=s.slice(1,-1)),S_(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:l&&l.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const s=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),l=t[s.toLowerCase()];if(!l){const c=i[0].charAt(0);return{type:"text",raw:c,text:c}}return S_(i,l,i[0],this.lexer,this.rules)}}emStrong(e,t,i=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&i.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const c=[...s[0]].length-1;let h,f,d=c,p=0;const g=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(g.lastIndex=0,t=t.slice(-1*e.length+c);(s=g.exec(t))!=null;){if(h=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!h)continue;if(f=[...h].length,s[3]||s[4]){d+=f;continue}else if((s[5]||s[6])&&c%3&&!((c+f)%3)){p+=f;continue}if(d-=f,d>0)continue;f=Math.min(f,f+d+p);const y=[...s[0]][0].length,b=e.slice(0,c+s.index+y+f);if(Math.min(c,f)%2){const S=b.slice(1,-1);return{type:"em",raw:b,text:S,tokens:this.lexer.inlineTokens(S)}}const x=b.slice(2,-2);return{type:"strong",raw:b,text:x,tokens:this.lexer.inlineTokens(x)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(i),l=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return s&&l&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,s;return t[2]==="@"?(i=t[1],s="mailto:"+i):(i=t[1],s=i),{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e){var i;let t;if(t=this.rules.inline.url.exec(e)){let s,l;if(t[2]==="@")s=t[0],l="mailto:"+s;else{let c;do c=t[0],t[0]=((i=this.rules.inline._backpedal.exec(t[0]))==null?void 0:i[0])??"";while(c!==t[0]);s=t[0],t[1]==="www."?l="http://"+t[0]:l=t[0]}return{type:"link",raw:t[0],text:s,href:l,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const i=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:i}}}}class Xr{constructor(e){cn(this,"tokens");cn(this,"options");cn(this,"state");cn(this,"tokenizer");cn(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||As,this.options.tokenizer=this.options.tokenizer||new Dh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:ur,block:ih.normal,inline:Ql.normal};this.options.pedantic?(t.block=ih.pedantic,t.inline=Ql.pedantic):this.options.gfm&&(t.block=ih.gfm,this.options.breaks?t.inline=Ql.breaks:t.inline=Ql.gfm),this.tokenizer.rules=t}static get rules(){return{block:ih,inline:Ql}}static lex(e,t){return new Xr(t).lex(e)}static lexInline(e,t){return new Xr(t).inlineTokens(e)}lex(e){e=e.replace(ur.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){var s,l,c;for(this.options.pedantic&&(e=e.replace(ur.tabCharGlobal,"    ").replace(ur.spaceLine,""));e;){let h;if((l=(s=this.options.extensions)==null?void 0:s.block)!=null&&l.some(d=>(h=d.call({lexer:this},e,t))?(e=e.substring(h.raw.length),t.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);const d=t.at(-1);h.raw.length===1&&d!==void 0?d.raw+=`
`:t.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);const d=t.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=`
`+h.raw,d.text+=`
`+h.text,this.inlineQueue.at(-1).src=d.text):t.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);const d=t.at(-1);(d==null?void 0:d.type)==="paragraph"||(d==null?void 0:d.type)==="text"?(d.raw+=`
`+h.raw,d.text+=`
`+h.raw,this.inlineQueue.at(-1).src=d.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),t.push(h);continue}let f=e;if((c=this.options.extensions)!=null&&c.startBlock){let d=1/0;const p=e.slice(1);let g;this.options.extensions.startBlock.forEach(y=>{g=y.call({lexer:this},p),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(f=e.substring(0,d+1))}if(this.state.top&&(h=this.tokenizer.paragraph(f))){const d=t.at(-1);i&&(d==null?void 0:d.type)==="paragraph"?(d.raw+=`
`+h.raw,d.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):t.push(h),i=f.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);const d=t.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=`
`+h.raw,d.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=d.text):t.push(h);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var h,f,d;let i=e,s=null;if(this.tokens.links){const p=Object.keys(this.tokens.links);if(p.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)p.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,s.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l=!1,c="";for(;e;){l||(c=""),l=!1;let p;if((f=(h=this.options.extensions)==null?void 0:h.inline)!=null&&f.some(y=>(p=y.call({lexer:this},e,t))?(e=e.substring(p.raw.length),t.push(p),!0):!1))continue;if(p=this.tokenizer.escape(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.tag(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.link(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(p.raw.length);const y=t.at(-1);p.type==="text"&&(y==null?void 0:y.type)==="text"?(y.raw+=p.raw,y.text+=p.text):t.push(p);continue}if(p=this.tokenizer.emStrong(e,i,c)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.codespan(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.br(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.del(e)){e=e.substring(p.raw.length),t.push(p);continue}if(p=this.tokenizer.autolink(e)){e=e.substring(p.raw.length),t.push(p);continue}if(!this.state.inLink&&(p=this.tokenizer.url(e))){e=e.substring(p.raw.length),t.push(p);continue}let g=e;if((d=this.options.extensions)!=null&&d.startInline){let y=1/0;const b=e.slice(1);let x;this.options.extensions.startInline.forEach(S=>{x=S.call({lexer:this},b),typeof x=="number"&&x>=0&&(y=Math.min(y,x))}),y<1/0&&y>=0&&(g=e.substring(0,y+1))}if(p=this.tokenizer.inlineText(g)){e=e.substring(p.raw.length),p.raw.slice(-1)!=="_"&&(c=p.raw.slice(-1)),l=!0;const y=t.at(-1);(y==null?void 0:y.type)==="text"?(y.raw+=p.raw,y.text+=p.text):t.push(p);continue}if(e){const y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return t}}class Rh{constructor(e){cn(this,"options");cn(this,"parser");this.options=e||As}space(e){return""}code({text:e,lang:t,escaped:i}){var c;const s=(c=(t||"").match(ur.notSpaceStart))==null?void 0:c[0],l=e.replace(ur.endingNewline,"")+`
`;return s?'<pre><code class="language-'+yi(s)+'">'+(i?l:yi(l,!0))+`</code></pre>
`:"<pre><code>"+(i?l:yi(l,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let s="";for(let h=0;h<e.items.length;h++){const f=e.items[h];s+=this.listitem(f)}const l=t?"ol":"ul",c=t&&i!==1?' start="'+i+'"':"";return"<"+l+c+`>
`+s+"</"+l+`>
`}listitem(e){var i;let t="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((i=e.tokens[0])==null?void 0:i.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+yi(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let l=0;l<e.header.length;l++)i+=this.tablecell(e.header[l]);t+=this.tablerow({text:i});let s="";for(let l=0;l<e.rows.length;l++){const c=e.rows[l];i="";for(let h=0;h<c.length;h++)i+=this.tablecell(c[h]);s+=this.tablerow({text:i})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${yi(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const s=this.parser.parseInline(i),l=w_(e);if(l===null)return s;e=l;let c='<a href="'+e+'"';return t&&(c+=' title="'+yi(t)+'"'),c+=">"+s+"</a>",c}image({href:e,title:t,text:i}){const s=w_(e);if(s===null)return yi(i);e=s;let l=`<img src="${e}" alt="${i}"`;return t&&(l+=` title="${yi(t)}"`),l+=">",l}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:yi(e.text)}}class w0{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Qr{constructor(e){cn(this,"options");cn(this,"renderer");cn(this,"textRenderer");this.options=e||As,this.options.renderer=this.options.renderer||new Rh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new w0}static parse(e,t){return new Qr(t).parse(e)}static parseInline(e,t){return new Qr(t).parseInline(e)}parse(e,t=!0){var s,l;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((l=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&l[h.type]){const d=h,p=this.options.extensions.renderers[d.type].call({parser:this},d);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)){i+=p||"";continue}}const f=h;switch(f.type){case"space":{i+=this.renderer.space(f);continue}case"hr":{i+=this.renderer.hr(f);continue}case"heading":{i+=this.renderer.heading(f);continue}case"code":{i+=this.renderer.code(f);continue}case"table":{i+=this.renderer.table(f);continue}case"blockquote":{i+=this.renderer.blockquote(f);continue}case"list":{i+=this.renderer.list(f);continue}case"html":{i+=this.renderer.html(f);continue}case"paragraph":{i+=this.renderer.paragraph(f);continue}case"text":{let d=f,p=this.renderer.text(d);for(;c+1<e.length&&e[c+1].type==="text";)d=e[++c],p+=`
`+this.renderer.text(d);t?i+=this.renderer.paragraph({type:"paragraph",raw:p,text:p,tokens:[{type:"text",raw:p,text:p,escaped:!0}]}):i+=p;continue}default:{const d='Token with "'+f.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return i}parseInline(e,t=this.renderer){var s,l;let i="";for(let c=0;c<e.length;c++){const h=e[c];if((l=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&l[h.type]){const d=this.options.extensions.renderers[h.type].call({parser:this},h);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){i+=d||"";continue}}const f=h;switch(f.type){case"escape":{i+=t.text(f);break}case"html":{i+=t.html(f);break}case"link":{i+=t.link(f);break}case"image":{i+=t.image(f);break}case"strong":{i+=t.strong(f);break}case"em":{i+=t.em(f);break}case"codespan":{i+=t.codespan(f);break}case"br":{i+=t.br(f);break}case"del":{i+=t.del(f);break}case"text":{i+=t.text(f);break}default:{const d='Token with "'+f.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return i}}class oc{constructor(e){cn(this,"options");cn(this,"block");this.options=e||As}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Xr.lex:Xr.lexInline}provideParser(){return this.block?Qr.parse:Qr.parseInline}}cn(oc,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class l9{constructor(...e){cn(this,"defaults",f0());cn(this,"options",this.setOptions);cn(this,"parse",this.parseMarkdown(!0));cn(this,"parseInline",this.parseMarkdown(!1));cn(this,"Parser",Qr);cn(this,"Renderer",Rh);cn(this,"TextRenderer",w0);cn(this,"Lexer",Xr);cn(this,"Tokenizer",Dh);cn(this,"Hooks",oc);this.use(...e)}walkTokens(e,t){var s,l;let i=[];for(const c of e)switch(i=i.concat(t.call(this,c)),c.type){case"table":{const h=c;for(const f of h.header)i=i.concat(this.walkTokens(f.tokens,t));for(const f of h.rows)for(const d of f)i=i.concat(this.walkTokens(d.tokens,t));break}case"list":{const h=c;i=i.concat(this.walkTokens(h.items,t));break}default:{const h=c;(l=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&l[h.type]?this.defaults.extensions.childTokens[h.type].forEach(f=>{const d=h[f].flat(1/0);i=i.concat(this.walkTokens(d,t))}):h.tokens&&(i=i.concat(this.walkTokens(h.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const s={...i};if(s.async=this.defaults.async||s.async||!1,i.extensions&&(i.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if("renderer"in l){const c=t.renderers[l.name];c?t.renderers[l.name]=function(...h){let f=l.renderer.apply(this,h);return f===!1&&(f=c.apply(this,h)),f}:t.renderers[l.name]=l.renderer}if("tokenizer"in l){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const c=t[l.level];c?c.unshift(l.tokenizer):t[l.level]=[l.tokenizer],l.start&&(l.level==="block"?t.startBlock?t.startBlock.push(l.start):t.startBlock=[l.start]:l.level==="inline"&&(t.startInline?t.startInline.push(l.start):t.startInline=[l.start]))}"childTokens"in l&&l.childTokens&&(t.childTokens[l.name]=l.childTokens)}),s.extensions=t),i.renderer){const l=this.defaults.renderer||new Rh(this.defaults);for(const c in i.renderer){if(!(c in l))throw new Error(`renderer '${c}' does not exist`);if(["options","parser"].includes(c))continue;const h=c,f=i.renderer[h],d=l[h];l[h]=(...p)=>{let g=f.apply(l,p);return g===!1&&(g=d.apply(l,p)),g||""}}s.renderer=l}if(i.tokenizer){const l=this.defaults.tokenizer||new Dh(this.defaults);for(const c in i.tokenizer){if(!(c in l))throw new Error(`tokenizer '${c}' does not exist`);if(["options","rules","lexer"].includes(c))continue;const h=c,f=i.tokenizer[h],d=l[h];l[h]=(...p)=>{let g=f.apply(l,p);return g===!1&&(g=d.apply(l,p)),g}}s.tokenizer=l}if(i.hooks){const l=this.defaults.hooks||new oc;for(const c in i.hooks){if(!(c in l))throw new Error(`hook '${c}' does not exist`);if(["options","block"].includes(c))continue;const h=c,f=i.hooks[h],d=l[h];oc.passThroughHooks.has(c)?l[h]=p=>{if(this.defaults.async)return Promise.resolve(f.call(l,p)).then(y=>d.call(l,y));const g=f.call(l,p);return d.call(l,g)}:l[h]=(...p)=>{let g=f.apply(l,p);return g===!1&&(g=d.apply(l,p)),g}}s.hooks=l}if(i.walkTokens){const l=this.defaults.walkTokens,c=i.walkTokens;s.walkTokens=function(h){let f=[];return f.push(c.call(this,h)),l&&(f=f.concat(l.call(this,h))),f}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Xr.lex(e,t??this.defaults)}parser(e,t){return Qr.parse(e,t??this.defaults)}parseMarkdown(e){return(i,s)=>{const l={...s},c={...this.defaults,...l},h=this.onError(!!c.silent,!!c.async);if(this.defaults.async===!0&&l.async===!1)return h(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return h(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return h(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));c.hooks&&(c.hooks.options=c,c.hooks.block=e);const f=c.hooks?c.hooks.provideLexer():e?Xr.lex:Xr.lexInline,d=c.hooks?c.hooks.provideParser():e?Qr.parse:Qr.parseInline;if(c.async)return Promise.resolve(c.hooks?c.hooks.preprocess(i):i).then(p=>f(p,c)).then(p=>c.hooks?c.hooks.processAllTokens(p):p).then(p=>c.walkTokens?Promise.all(this.walkTokens(p,c.walkTokens)).then(()=>p):p).then(p=>d(p,c)).then(p=>c.hooks?c.hooks.postprocess(p):p).catch(h);try{c.hooks&&(i=c.hooks.preprocess(i));let p=f(i,c);c.hooks&&(p=c.hooks.processAllTokens(p)),c.walkTokens&&this.walkTokens(p,c.walkTokens);let g=d(p,c);return c.hooks&&(g=c.hooks.postprocess(g)),g}catch(p){return h(p)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+yi(i.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(i);throw i}}}const Ss=new l9;function $t(n,e){return Ss.parse(n,e)}$t.options=$t.setOptions=function(n){return Ss.setOptions(n),$t.defaults=Ss.defaults,tC($t.defaults),$t};$t.getDefaults=f0;$t.defaults=As;$t.use=function(...n){return Ss.use(...n),$t.defaults=Ss.defaults,tC($t.defaults),$t};$t.walkTokens=function(n,e){return Ss.walkTokens(n,e)};$t.parseInline=Ss.parseInline;$t.Parser=Qr;$t.parser=Qr.parse;$t.Renderer=Rh;$t.TextRenderer=w0;$t.Lexer=Xr;$t.lexer=Xr.lex;$t.Tokenizer=Dh;$t.Hooks=oc;$t.parse=$t;$t.options;$t.setOptions;$t.use;$t.walkTokens;$t.parseInline;Qr.parse;Xr.lex;function c9({posts:n}){const[e,t]=ge.useState(null),i=n.flatMap(h=>JSON.parse(h.tags)),s=[...new Set(i)].sort(),l=e?n.filter(h=>JSON.parse(h.tags).includes(e)):n,c={color:"var(--button-font-color-hover)",border:"1px solid var(--button-font-color-hover)"};return ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"filter",children:[ae.jsx("button",{onClick:()=>t(null),style:e===null?c:{},children:"ALL POSTS"}),s.map(h=>ae.jsx("button",{onClick:()=>t(h),style:e===h?c:{},children:h},h))]}),ae.jsx("div",{id:"blog-list",children:l.map(h=>{const d=$t(h.content).replace(/<[^>]*>/g,"").split(" ").slice(0,30).join(" ")+" . . . ";return ae.jsxs(Na,{to:"/blog/"+h.name,children:[ae.jsx("h4",{children:h.title}),ae.jsx("h5",{children:h.date}),ae.jsx("p",{children:d})]},h.name)})})]})}function u9(){return ae.jsxs(ae.Fragment,{children:[ae.jsx("center",{children:ae.jsx("h1",{children:"BLOG"})}),ae.jsx(c9,{posts:Rg})]})}function h9(){const{name:n}=og(),e=Rg.find(f=>f.name===n);if(!e)throw new Error("Post not found");const{title:t,date:i,content:s}=e,l=f=>{try{if(f.startsWith("http"))return f;const d=f.split("/").pop().trim(),p=f.includes("/blog/")||f.startsWith("blog/"),g=f.includes("/portfolio/")||f.startsWith("portfolio/");let y=p?"blog":g?"portfolio":"";return y?new URL(Object.assign({"../assets/blog/2021-09-26--01.png":kw,"../assets/blog/2021-09-26--02.png":Pw,"../assets/blog/2021-09-26--03.png":Lw,"../assets/blog/2021-09-26--04.png":Iw,"../assets/blog/2021-09-26--05.png":Ow,"../assets/blog/2021-09-26--06.png":Uw,"../assets/blog/2021-09-26--07.png":Nw,"../assets/blog/2021-09-26--08.png":Fw,"../assets/blog/2021-09-26--09.png":zw,"../assets/blog/2021-09-26--10.png":Bw,"../assets/blog/2021-09-26--11.png":Hw,"../assets/blog/2021-09-26--12.png":Vw,"../assets/blog/2021-09-26--13.png":Gw,"../assets/blog/2021-09-26--14.png":jw,"../assets/blog/2021-09-26--15.png":qw,"../assets/blog/2021-09-26--16.png":Ww,"../assets/blog/2021-10-03--01.png":Yw,"../assets/blog/2021-10-03--02.png":Xw,"../assets/blog/2021-10-03--03.png":Qw,"../assets/blog/2021-10-03--04.png":Zw,"../assets/blog/2021-10-03--05.png":Kw,"../assets/blog/2021-10-03--06.png":Jw,"../assets/blog/2021-10-03--07.png":$w,"../assets/blog/2021-10-03--08.png":ex,"../assets/blog/2021-10-03--09.png":tx,"../assets/blog/2021-10-03--10.png":nx,"../assets/blog/2021-10-03--11.png":rx,"../assets/blog/2021-10-03--12.png":ix,"../assets/blog/2021-10-03--13.png":ax,"../assets/blog/2021-10-03--14.png":sx,"../assets/blog/2021-10-03--15.png":ox,"../assets/blog/2021-10-03--16.png":lx,"../assets/blog/2021-10-03--17.png":cx,"../assets/blog/2021-10-03--18.png":ux,"../assets/blog/2021-10-03--19.png":hx,"../assets/blog/2021-10-03--20.png":dx,"../assets/blog/2021-10-03--21.png":fx,"../assets/blog/2021-10-03--22.png":px,"../assets/blog/2021-10-03--23.png":mx,"../assets/blog/2021-10-03--24.png":gx,"../assets/blog/2021-10-03--25.png":yx,"../assets/blog/2021-10-03--26.png":bx,"../assets/blog/2021-10-03--27.png":vx,"../assets/blog/2021-10-03--28.png":_x,"../assets/blog/2021-10-03--29.png":wx,"../assets/blog/2021-10-10--01.png":xx,"../assets/blog/2021-10-10--02.png":Sx,"../assets/blog/2021-10-10--03.png":Tx,"../assets/blog/2021-10-10--04.png":Ex,"../assets/blog/2021-10-10--05.png":Mx,"../assets/blog/2021-10-10--06.png":Ax,"../assets/blog/2021-10-10--07.png":Cx,"../assets/blog/2021-10-10--08.png":Dx,"../assets/blog/2021-10-10--09.png":Rx,"../assets/blog/2021-10-10--10.png":kx,"../assets/blog/2021-10-10--11.png":Px,"../assets/blog/2021-10-10--12.png":Lx,"../assets/blog/2021-10-10--13.png":Ix,"../assets/blog/2021-10-10--14.png":Ox,"../assets/blog/2021-10-10--15.png":Ux,"../assets/blog/2021-10-10--16.png":Nx,"../assets/blog/2021-10-10--17.png":Fx,"../assets/blog/2021-10-10--18.png":zx,"../assets/blog/2021-10-10--19.png":Bx,"../assets/blog/2021-10-10--20.png":Hx,"../assets/blog/2021-10-10--21.png":Vx,"../assets/blog/2021-10-10--22.png":Gx,"../assets/blog/2021-10-10--22a.png":jx,"../assets/blog/2021-10-10--23.png":qx,"../assets/blog/2021-10-10--23a.png":Wx,"../assets/blog/2021-10-10--24.png":Yx,"../assets/blog/2021-10-10--24a.png":Xx,"../assets/blog/2021-10-17--01.png":Qx,"../assets/blog/2021-10-17--02.png":Zx,"../assets/blog/2021-10-17--03.png":Kx,"../assets/blog/2021-10-17--04.png":Jx,"../assets/blog/2021-10-17--05.png":$x,"../assets/blog/2021-10-17--06.png":eS,"../assets/blog/2021-10-17--07.png":tS,"../assets/blog/2021-10-17--08.png":nS,"../assets/blog/2021-10-24--01.png":rS,"../assets/blog/2021-10-24--02.png":iS,"../assets/blog/2021-10-24--03.png":aS,"../assets/blog/2021-10-24--04.png":sS,"../assets/blog/2021-10-24--05.png":oS,"../assets/blog/2021-10-24--06.png":lS,"../assets/blog/2021-10-24--07.png":cS,"../assets/blog/2021-10-24--08.png":uS,"../assets/blog/2021-10-24--09.png":hS,"../assets/blog/2021-10-24--10.png":dS,"../assets/blog/2021-10-24--11.png":fS,"../assets/blog/2021-10-24--12.png":pS,"../assets/blog/2021-10-24--13.png":mS,"../assets/blog/2021-10-24--14.png":gS,"../assets/blog/2021-10-24--15.png":yS,"../assets/blog/2021-10-24--16.png":bS,"../assets/blog/2021-10-24--17.png":vS,"../assets/blog/2021-10-31--01.png":_S,"../assets/blog/2021-10-31--02.png":wS,"../assets/blog/2021-10-31--03.png":xS,"../assets/blog/2021-10-31--04.png":SS,"../assets/blog/2021-12-18--01.png":TS,"../assets/blog/2021-12-18--02.png":ES,"../assets/blog/2021-12-18--03.png":MS,"../assets/blog/2021-12-18--04.png":AS,"../assets/blog/2021-12-18--05.png":CS,"../assets/blog/2021-12-18--06.png":DS,"../assets/blog/2021-12-18--07.png":RS,"../assets/blog/2021-12-18--08.png":kS,"../assets/blog/2021-12-18--08a.png":PS,"../assets/blog/2021-12-18--09.png":LS,"../assets/blog/2021-12-18--10.png":IS,"../assets/blog/2022-01-12--00.png":OS,"../assets/blog/2022-01-12--01.png":US,"../assets/blog/2022-01-12--02.png":NS,"../assets/blog/2022-01-12--03.png":FS,"../assets/blog/2022-01-12--04.png":zS,"../assets/blog/2022-01-12--05.png":BS,"../assets/blog/2022-01-12--06.png":HS,"../assets/blog/2022-01-12--07.png":VS,"../assets/blog/2022-01-12--08.png":GS,"../assets/blog/2022-01-12--09.png":jS,"../assets/blog/2022-01-12--10.png":qS,"../assets/blog/2022-02-27--01.png":WS,"../assets/blog/2022-02-27--02.png":YS,"../assets/blog/2022-02-27--03.png":XS,"../assets/blog/2022-02-27--04.png":QS,"../assets/blog/2022-02-27--05.png":ZS,"../assets/blog/2022-02-27--06.png":KS,"../assets/blog/2022-02-27--07.png":JS,"../assets/blog/2022-02-27--08.png":$S,"../assets/blog/2022-04-17--01.png":eT,"../assets/blog/2022-04-17--02.png":tT,"../assets/blog/2022-04-17--03.png":nT,"../assets/blog/2022-04-17--04.png":rT,"../assets/blog/2022-04-17--05.png":iT,"../assets/blog/2022-04-17--06.png":aT,"../assets/blog/2022-04-17--07.png":sT,"../assets/blog/2022-04-17--08.png":oT,"../assets/blog/2022-04-17--09.png":lT,"../assets/blog/2022-04-17--10.png":cT,"../assets/blog/2022-04-17--11.png":uT,"../assets/blog/2022-04-17--12.png":hT,"../assets/blog/2022-04-17--13.png":dT,"../assets/blog/2022-04-17--14.png":fT,"../assets/blog/2022-04-17--15.png":pT,"../assets/blog/2022-04-17--16.png":mT,"../assets/blog/2022-04-17--17.png":gT,"../assets/blog/2022-04-17--18.png":yT,"../assets/blog/2022-04-17--19.png":bT,"../assets/blog/2022-04-17--20.png":vT,"../assets/blog/2022-04-17--21.png":_T,"../assets/blog/2022-04-17--22.png":wT,"../assets/blog/2022-04-17--23.png":xT,"../assets/blog/2022-04-17--24.png":ST,"../assets/blog/2022-04-17--25.png":TT,"../assets/blog/2022-04-17--26.png":ET,"../assets/blog/2022-04-17--27.png":MT,"../assets/blog/2022-04-17--28.png":AT,"../assets/blog/2022-04-27--01.png":CT,"../assets/blog/2022-04-27--02.png":DT,"../assets/blog/2022-04-27--03.png":RT,"../assets/blog/2022-04-27--04.png":kT,"../assets/blog/2022-04-27--05.png":PT,"../assets/blog/2022-04-27--06.png":LT,"../assets/blog/2022-04-27--07.png":IT,"../assets/blog/2022-04-27--08.png":OT,"../assets/blog/2022-04-27--09.png":UT,"../assets/blog/2022-04-27--10.png":NT,"../assets/blog/2022-06-22--00.png":FT,"../assets/blog/2022-06-22--01.png":zT,"../assets/blog/2022-06-22--02.png":BT,"../assets/blog/2022-06-22--03.png":HT,"../assets/blog/2022-06-22--04.png":VT,"../assets/blog/2022-06-22--05.png":GT,"../assets/blog/2022-06-22--06.png":jT,"../assets/blog/2022-07-31--01.png":qT,"../assets/blog/2022-07-31--02.png":WT,"../assets/blog/2022-07-31--03.png":YT,"../assets/blog/2022-07-31--04.png":XT,"../assets/blog/2022-08-27--01.png":QT,"../assets/blog/2022-08-27--01a.png":ZT,"../assets/blog/2022-08-27--02.png":KT,"../assets/blog/2022-08-27--03.png":JT,"../assets/blog/2022-08-27--04.png":$T,"../assets/blog/2022-08-27--05.png":eE,"../assets/blog/2022-08-27--06.png":tE,"../assets/blog/2022-08-27--07.png":nE,"../assets/blog/2022-08-27--08.png":rE,"../assets/blog/2022-08-27--09.png":iE,"../assets/blog/2022-08-27--10.png":aE,"../assets/blog/2022-08-27--11.png":sE,"../assets/blog/2022-08-27--12.png":oE,"../assets/blog/2022-08-27--13.png":lE,"../assets/blog/2022-08-27--14.png":cE,"../assets/blog/2022-08-27--15.png":uE,"../assets/blog/2022-08-27--16.png":hE,"../assets/blog/2022-08-27--17.png":dE,"../assets/blog/2022-08-27--18.png":fE,"../assets/blog/2022-09-19--01.png":pE,"../assets/blog/2022-09-19--02.png":mE,"../assets/blog/2022-09-19--03.png":gE,"../assets/blog/2022-09-19--04.png":yE,"../assets/blog/2022-09-19--05.png":bE,"../assets/blog/2022-09-19--06.png":vE,"../assets/blog/2022-09-19--07.png":_E,"../assets/blog/2022-09-19--08.png":wE,"../assets/blog/2022-09-19--09.png":xE,"../assets/blog/2022-09-19--10.png":SE,"../assets/blog/2022-09-19--11.png":TE,"../assets/blog/2022-09-19--12.png":EE,"../assets/blog/2022-09-19--13.png":ME,"../assets/blog/2022-09-19--14.png":AE,"../assets/blog/2022-09-19--15.png":CE,"../assets/blog/2022-09-19--16.png":DE,"../assets/blog/2022-10-29--01.png":RE,"../assets/blog/2022-10-29--02.png":kE,"../assets/blog/2022-10-29--03.png":PE,"../assets/blog/2022-10-29--04.png":LE,"../assets/blog/2022-10-29--05.png":IE,"../assets/blog/2022-10-29--06.png":OE,"../assets/blog/2022-10-29--07.png":UE,"../assets/blog/2022-10-29--08.png":NE,"../assets/blog/2022-10-29--09.png":FE,"../assets/blog/2022-10-29--10.png":zE,"../assets/blog/2022-10-29--11.png":BE,"../assets/blog/2022-10-29--12.png":HE,"../assets/blog/2022-10-29--13.png":VE,"../assets/blog/2022-10-29--14.png":GE,"../assets/blog/2022-10-29--15.png":jE,"../assets/blog/2022-10-29--16.png":qE,"../assets/blog/2022-10-29--17.png":WE,"../assets/blog/2022-10-29--18.png":YE,"../assets/blog/2022-10-29--19.png":XE,"../assets/blog/2022-10-29--20.png":QE,"../assets/blog/2022-10-29--21.png":ZE,"../assets/blog/2022-10-29--22.png":KE,"../assets/blog/2022-10-29--23.png":JE,"../assets/blog/2022-10-29--24.png":$E,"../assets/blog/2022-10-29--25.png":eM,"../assets/blog/2022-10-29--26.png":tM,"../assets/blog/2022-10-29--27.png":nM,"../assets/blog/2022-10-29--28.png":rM,"../assets/blog/2022-10-29--29.png":iM,"../assets/blog/2022-10-29--30.png":aM,"../assets/blog/2022-10-29--31.png":sM,"../assets/blog/2022-10-29--32.png":oM,"../assets/blog/2022-10-29--33.png":lM,"../assets/blog/2022-11-26--01.png":cM,"../assets/blog/2022-11-26--02.png":uM,"../assets/blog/2022-11-26--03.png":hM,"../assets/blog/2022-11-26--04.png":dM,"../assets/blog/2022-11-26--05.png":fM,"../assets/blog/2022-11-26--06.png":pM,"../assets/blog/2022-11-26--07.png":mM,"../assets/blog/2022-11-26--08.png":gM,"../assets/blog/2022-11-26--09.png":yM,"../assets/blog/2022-11-26--10.png":bM,"../assets/blog/2022-11-26--11.png":vM,"../assets/blog/2022-11-26--12.png":_M,"../assets/blog/2022-11-26--13.png":wM,"../assets/blog/2022-11-26--14.png":xM,"../assets/blog/2022-11-26--15.png":SM,"../assets/blog/2022-11-26--16.png":TM,"../assets/blog/2022-11-26--17.png":EM,"../assets/blog/2022-11-26--18.png":MM,"../assets/blog/2022-11-26--19.png":AM,"../assets/blog/2022-11-26--20.png":CM,"../assets/blog/2022-11-26--21.png":DM,"../assets/blog/2022-11-26--22.png":RM,"../assets/blog/2022-11-26--23.png":kM,"../assets/blog/2022-11-26--24.png":PM,"../assets/blog/2022-11-26--25.png":LM,"../assets/blog/2022-11-26--26.png":IM,"../assets/blog/2022-11-26--27.png":OM,"../assets/blog/2022-11-26--28.png":UM,"../assets/blog/2022-11-26--29.png":NM,"../assets/blog/2022-11-26--30.png":FM,"../assets/blog/2023-03-11--01.png":zM,"../assets/blog/2023-03-11--02.png":BM,"../assets/blog/2023-03-11--03.png":HM,"../assets/blog/2023-03-11--04.png":VM,"../assets/blog/2023-03-11--05.png":GM,"../assets/blog/2023-03-11--06.png":jM,"../assets/blog/2023-03-11--07.png":qM,"../assets/blog/2023-03-11--08.png":WM,"../assets/blog/2023-03-11--09.png":YM,"../assets/blog/2023-03-11--10.png":XM,"../assets/blog/2023-03-11--11.png":QM,"../assets/blog/2023-03-11--12.png":ZM,"../assets/blog/2023-03-11--13.png":KM,"../assets/blog/2023-03-11--14.png":JM,"../assets/blog/2023-03-11--15.png":$M,"../assets/blog/2023-03-11--16.png":e3,"../assets/blog/2023-03-11--17.png":t3,"../assets/blog/2023-03-11--18.png":n3,"../assets/blog/2023-03-11--19.png":r3,"../assets/blog/2023-03-11--20.png":i3,"../assets/blog/2023-03-11--21.png":a3,"../assets/blog/2023-10-07--01.png":s3,"../assets/blog/2023-10-07--02.png":o3,"../assets/blog/2023-10-07--03.png":l3,"../assets/blog/2023-10-07--04.png":c3,"../assets/blog/2023-10-07--05.png":u3,"../assets/blog/2023-10-07--06.png":h3,"../assets/blog/2023-10-07--07.png":d3,"../assets/blog/2023-10-07--08.png":f3,"../assets/blog/2023-10-07--09.png":p3,"../assets/blog/2023-10-07--10.png":m3,"../assets/blog/2023-10-07--11.png":g3,"../assets/blog/2023-10-07--12.png":y3,"../assets/blog/2023-10-07--13.png":b3,"../assets/blog/2023-10-07--14.png":v3,"../assets/blog/2023-10-07--15.png":_3,"../assets/blog/2023-10-07--16.png":w3,"../assets/blog/2024-03-28--01.png":x3,"../assets/blog/2024-03-28--02.png":S3,"../assets/blog/2024-03-28--03.png":T3,"../assets/blog/2024-03-28--04.png":E3,"../assets/blog/2024-03-28--05.png":M3,"../assets/blog/2024-03-28--06.png":A3,"../assets/blog/2024-03-28--07.png":C3,"../assets/blog/2024-03-28--08.png":D3,"../assets/blog/2024-03-28--09.png":R3,"../assets/blog/2024-03-28--10.png":k3,"../assets/blog/2024-03-28--11.png":P3,"../assets/blog/2024-03-28--12.png":L3,"../assets/blog/2024-03-28--13.png":I3,"../assets/blog/2024-10-07--01.png":O3,"../assets/blog/2024-10-07--02.png":U3,"../assets/blog/2024-10-07--03.png":N3,"../assets/blog/2024-10-07--04.png":F3,"../assets/blog/2024-10-07--05.png":z3,"../assets/blog/2024-10-07--06.png":B3,"../assets/blog/2024-10-07--07.png":H3,"../assets/blog/2024-10-07--08.png":V3,"../assets/blog/2024-10-07--09.png":G3,"../assets/blog/2024-10-07--10.png":j3,"../assets/blog/2024-10-07--11.png":q3,"../assets/blog/2024-10-07--12.png":W3,"../assets/blog/2024-10-07--13.png":Y3,"../assets/blog/2024-10-07--14.png":X3,"../assets/blog/2024-10-07--15.png":Q3,"../assets/blog/2024-10-07--16.png":Z3,"../assets/blog/2024-10-07--17.png":K3,"../assets/blog/2024-10-07--18.png":J3,"../assets/blog/2024-10-07--19.png":$3,"../assets/blog/2024-10-07--20.png":eA,"../assets/blog/2024-10-07--21.png":tA,"../assets/blog/2024-10-07--22.png":nA,"../assets/blog/2024-10-07--23.png":rA,"../assets/blog/2024-10-07--24.png":iA,"../assets/blog/2024-10-07--25.png":aA,"../assets/blog/2024-10-07--26.png":sA,"../assets/blog/2024-10-07--27.png":oA,"../assets/blog/2024-10-07--28.png":lA,"../assets/blog/2024-10-07--29.png":cA,"../assets/blog/2024-10-07--30.png":uA,"../assets/blog/2024-10-07--31.png":hA,"../assets/blog/2024-10-07--32.png":dA,"../assets/blog/2024-10-07--33.png":fA,"../assets/blog/2024-10-07--34.png":pA,"../assets/blog/2024-10-07--35.png":mA,"../assets/blog/2024-10-07--36.png":gA,"../assets/blog/Date_times_to_convert.xlsx":yA,"../assets/blog/Time_zone_offsets_and_DST_observations.xlsx":bA,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency-original.png":kg,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.gif":Pg,"../assets/portfolio/img-2021-10-power-bi-quarterly-singapore-rental-prices-by-currency.png":Lg,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-original-trimmed.png":Ig,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-original.png":Og,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support-previous.png":Ug,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.gif":Ng,"../assets/portfolio/img-2021-11-power-bi-follow-the-sun-customer-support.png":Fg,"../assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace-trimmed.png":zg,"../assets/portfolio/img-2022-01-sql-server-integration-services-international-marketplace.png":Bg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb-original.png":Hg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb-previous.png":Vg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.gif":Gg,"../assets/portfolio/img-2022-04-power-bi-international-marketplace-python-deneb.png":jg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance-original.png":qg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance.gif":Wg,"../assets/portfolio/img-2022-06-excel-customer-support-agent-performance.png":Yg,"../assets/portfolio/img-2022-08-satellite-launch-overview.gif":Xg,"../assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast-original.png":Qg,"../assets/portfolio/img-2022-10-excel-international-marketplace-profit-forecast.gif":Zg,"../assets/portfolio/img-2022-11-power-bi-appsource-deneb-maps.gif":Kg,"../assets/readings/12-rules-for-life-by-jordan-b-peterson.png":Nh,"../assets/readings/elon-musk-by-walter-isaacson.png":Fh,"../assets/readings/mastery-by-robert-greene.png":zh})[`../assets/${y}/${d}`],import.meta.url).href:""}catch(d){return console.error(`Error loading image: ${f}`,d),""}},h=(f=>f.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(d,p,g)=>{try{const y=l(g);return`![${p}](${y})`}catch(y){return console.error(`Image not found: ${g}`,y),`![${p}](#)`}}))(s);return ae.jsxs("content",{children:[ae.jsx("h1",{children:t||"This post does not have a title"}),ae.jsx("h3",{children:i||"This post does not have a date"}),ae.jsx(d0,{children:h||"This post does not have content"})]})}function d9({readings:n}){const[e,t]=ge.useState(null);if(!n)return ae.jsx("div",{children:"No readings available"});const i=n.flatMap(h=>JSON.parse(h.tags)),s=[...new Set(i)].sort(),l=e?n.filter(h=>JSON.parse(h.tags).includes(e)):n,c={color:"var(--button-font-color-hover)",border:"1px solid var(--button-font-color-hover)"};return ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"filter",children:[ae.jsx("button",{onClick:()=>t(null),style:e===null?c:{},children:"ALL BOOKS"}),s.map(h=>ae.jsx("button",{onClick:()=>t(h),style:e===h?c:{},children:h},h))]}),ae.jsx("div",{id:"readings-list",children:l.map(h=>{const d=h.photo.startsWith("http")?h.photo:new URL(Object.assign({"../assets/readings/12-rules-for-life-by-jordan-b-peterson.png":Nh,"../assets/readings/elon-musk-by-walter-isaacson.png":Fh,"../assets/readings/mastery-by-robert-greene.png":zh})[`../assets/readings/${h.photo.split("/").pop().trim()}`],import.meta.url).href;return ae.jsxs(Na,{to:"/readings/"+h.name,children:[ae.jsxs("h4",{children:[h.title," by ",h.author]}),ae.jsx("h5",{children:h.date}),ae.jsx("img",{src:d,loading:"lazy",alt:h.title}),ae.jsx("p",{children:h.desc})]},h.name)})})]})}const dC=JSON.parse(`[{"id":1749996000,"title":"Mastery\\r","name":"mastery","author":"Robert Greene\\r","publisher":"Profie Books\\r","publisherURL":"https://profilebooks.com/work/mastery\\r","photo":"../assets/readings/mastery-by-robert-greene.png\\r","category":"personal development\\r","date":"16 June 2025\\r","desc":"An exploration into how to determine your Life's Task and strategies to accomplishing it with anecdotes of the journeys of key historical masters.\\r","tags":"[\\"Personal development\\", \\"Business\\"]\\r","content":"![Mastery by Robert Greene](/src/assets/readings/mastery-by-robert-greene.png)\\r\\n\\r\\n\\r\\nThis book covers the author's strategies on finding your Life's Task and navigating the phases to achieve mastery for that task.\\r\\n\\r\\nThe blog post below is my effort to extract the practical elements from the book's principles for my own reminder and ease of personal application. Though it was not until some time into writing it that I found the \\"Concise\\" versions of the author's books render my effort essentially moot, but I continued to finish this post.\\r\\n\\r\\nI realised this when I was buying my next book, \\"The Concise 33 Strategies of War\\", and compared it to its non-concise version. Essentially, the author's standard books are what you want to read because they include more anecdotes, whereas the Concise ones are what you need as a portable guide.\\r\\n\\r\\nI highly recommend this book. So much so I feel like it should be mandatory highschool reading. Or at least its principles be taught earlier on in a person's life.\\r\\n\\r\\n\\r\\n\\r\\n## Finding your life's task\\r\\n\\r\\n\\"Life's Task\\": the innate force of purpose which uniquely drives you and it may feel lost because you succumbed to counterforces like social conformity. Push past those counterforces and find it (p.26-28).\\r\\n\\r\\n5 strategies to combat counterforces:\\r\\n\\r\\n1. **Do NOT let the voices of others infect you**: Find something you are primally attracted to that's not infected by anyone else's desires by looking for signs that point to your origin's core (p.31-32).\\r\\n\\r\\n2. **Avoid fighting over limited resources**: The career world's politics and competition can wear you down. So start in a field that approximately your interests then:\\r\\n   - a. look for attractive side paths and stay on them until you find a niche, or\\r\\n   - b. master that first field, then combine it with others to make a unique one you own (p.35-36).\\r\\n\\r\\n3. **Avoid choosing false paths**:  Accept you chose your current career for wrong reasons (money, fame, attention, etc.). Fight the counterforces and establish your own identity (p.37-38).\\r\\n\\r\\n4. **Do not get stuck in the past**: Your loyalty should be to your Life's Task, rather than to a career or company. Adapt your Life's Task to your changing situation by letting go of past ways of doing things to avoid falling behind (p.40).\\r\\n\\r\\n5. **Avoid losing your way**: Listen to your deep frustrations about your incorrect deviation from your Life's Task and let them guide you back onto the right path (p.42-43).\\r\\n\\r\\nIn summary, resist the temptation to be like others. Apply yourself to the small things you are good at to build a foundation whilst learning diligence, discipline, and focus. Extraordinary people are clearly loyal to their calling. Define your Life's Task to set yourself onto the path of its mastery (p.45-46).\\r\\n\\r\\nThere are 3 phases toward mastery\\r\\n* **Apprenticeship**: Learning basic elements and rules of the field.\\r\\n* **Creative-Active**: Through practice and immersion, you have a comprehensive understanding of the field and are now able to experiment and play.\\r\\n* **Mastery**: Deep knowledge, experience, and focus lets you see the complete picture and giving you greater command over the real world (p.3).\\r\\n\\r\\n\\r\\n\\r\\n## APPRENTICESHIP PHASE\\r\\n\\r\\nOnly focus on transforming your mind and character. Be grounded in objective reality by learning to work with others, be disciplined, and handle criticism. Choose workplaces and positions with the most learning of practical knowledge with challenges to toughen and improve you (p.55).\\r\\n\\r\\nThis phase has 3 modes of being and strategies to navigate them:\\r\\n\\r\\n1. **Deep observation / passive mode**: Set aside your needs, desires, ego, and preconceptions. Observe the reality of your environment by submitting to it and show your desire to learn. Pay attention to unstated rules and communication flow (p.56-58).\\r\\n\\r\\n2. **Skills acquisition / practice mode**: Train your hands-on knowledge by aiming for the \\"cycle of accelerated returns\\" whereby practice becomes easier and enthusiasm makes you go for longer.\\r\\n  \\r\\n   To reach this cycle:\\r\\n   - Start mastering only one skill so you can also learn to concentrate.\\r\\n   - Embrace the tedium of practice because it embeds the skill so you can do it subconsciously.\\r\\n   - Once your skill is automatic, observe yourself practicing and correct your flaws (p.59-60).\\r\\n\\r\\n3. **Experimentation / active mode**: Take on more responsibility, exposing yourself to peer or public criticism and take it constructively. When you feel there is nothing left to learn, the apprenticeship phase is over (p.63).\\r\\n\\r\\n### 8 Strategies to complete the ideal apprenticeship\\r\\n\\r\\n1. Value learning over money\\r\\n   - Find a place with people and mentors who can inspire and teach you (p.67).\\r\\n\\r\\n2. Keep expanding your horizons\\r\\n   - Keep moving, otherwise the world closes in on you due to your self-confinement.\\r\\n   - Mingle with many types of people, forcing yourself to look for new challenges (p.68-71).\\r\\n\\r\\n3. Revert to a feeling of inferiority\\r\\n   - Avoid having a sense of superiority and closed-mindedness about your existing knowledge.\\r\\n   - Foster your child-like sense of wonder and curiosity by participating as deeply as possible until you've learned to be independent (p.73-74).\\r\\n\\r\\n4. Trust the process\\r\\n   - Do not give up. Take your time learning so you can internalise it.\\r\\n   - The only real hinders to your progress are your feelings of boredom, panic, frustration, and insecurity (p.77).\\r\\n\\r\\n5. Move towards resistance and pain\\r\\n   - Fight off the tendency to shrirk away from difficult things.\\r\\n   - Do more than the conventional practice others have done.\\r\\n   - **\\"Resistance Practice\\"**:\\r\\n      - Do not be kind to yourself during practice.\\r\\n      - Be your own worst critic by recognising and prioritising your weaknesses, then invent exercises to address them.\\r\\n      - Keep concentrating even if it means doubling the intensity.\\r\\n      - Give yourself arbitrary deadlines and standards, and push yourself past your perceived limits (p.80-81).\\r\\n\\r\\n6. Apprentice yourself in failure\\r\\n   - There are 2 types of failure:\\r\\n     - Never trying an idea out of fear or waiting for right time; timidity is self-destructive.\\r\\n     - Having a bold and adventurous spirit; failings become learnings that outweigh any reputational hit.\\r\\n   - Repeated failure toughens you and shows what needs to be done (p.84).\\r\\n\\r\\n7. Combine the \\"how\\" and the \\"what\\"\\r\\n   - Don't just focus on visual design. Grasp how something works by studying its technology, as there is beauty in functional essence (p.87).\\r\\n\\r\\n8. Advance through trial and error\\r\\n   - This is a satisfying, non-rigid, and patched-together path to improvement.\\r\\n   - Learn many skills in the direction that circumstances lead, but only if they relate to your deepest interests.\\r\\n   - In your 20s, wander around to expand your skill base and possibilities.\\r\\n   - Avoid following one career path, as that gets you in a career dead-end by your 40s (p.87-90).\\r\\n\\r\\n\\r\\n\\r\\n## Mentor Dynamic\\r\\n\\r\\nMentors have the experience to tailor their lessons to your circumstances, whereas books and such do not, making mentor's lessons more efficient and internalised (p.103).\\r\\n\\r\\nA good mentor encourages your separation from them once you've learned all you need and remains a lifelong ally. You needn't feel any guilt when leaving as your objective was independence via learning from them (p.100 & 107).\\r\\n\\r\\n### 4 strategies to deepen the dynamic with your mentor\\r\\n\\r\\n1. Choose your mentor based on your needs, inclinations, Life's Task, and future envisionment of yourself\\r\\n   - Look for one who would give you the support, confidence, direction, and space to discover things on your own.\\r\\n   - Be conscious of their methods or styles that rub you the wrong way as they may be a sign to move on.\\r\\n   - Move on once you learned everything you want and begin the search again (p.109-112).\\r\\n\\r\\n2. Gaze deep into your mentor's mirror\\r\\n   - Your mentor must give you sharp doses of reality, and as an apprentice you must build from the feedback (p.115-116).\\r\\n\\r\\n3. Transfigure your mentor's ideas\\r\\n   - Adapt your mentor's ideas to your own circumstances to address the sense of identity loss from being taught (p.119).\\r\\n\\r\\n4. Create a back-and-forth dynamic\\r\\n   - Both need to keep the dynamic animated so the apprentice can learn as much as they can.\\r\\n   - Improves on your mentor's teachings and discusses these with them (p.121).\\r\\n\\r\\nThe author cites Leonardo da Vinci: \\"Poor is the apprentice who does not surpass his Master\\" (p.119).\\r\\n\\r\\n\\r\\n\\r\\n## Social intelligence\\r\\n\\r\\nDo not be naive. Be socially intelligent. This is characterised by accepting the futility of changing another person's fundamental traits and having tolerance to allow them to live as they are, and understand them enough to influence their behaviour (p.125, 130, 137).\\r\\n\\r\\n### Reading an individual's nature\\r\\n\\r\\nYou can induce how another person sees the world:\\r\\n- Pay less attention to their words.\\r\\n- Pay attention to their vocal tone, the look in their eyes, body language, and emotional signals for anxiety, resentment, and falseness.\\r\\n  - Observe their actions and decisions to derive motives.\\r\\n  - Extreme behaviours may be a mask e.g. them being overly friendly because they are secretly aggressive, or they tell jokes to hide their mean-spiritedness.\\r\\n- Refrain from judging people straight away, and let the passing months reveal more because people have a public persona for self-protection.\\r\\n- Understand that people are in a state of flux and you are just up-to-date tabs on them, so do not fixate on one image of them (p.139-140).\\r\\n\\r\\n### 7 realities of general human nature\\r\\n\\r\\nThese are 7 patterns of negative behaviour and strategies on how to find and address them.\\r\\n\\r\\n1. Envy\\r\\n   - Identifiers:\\r\\n     - People who praise you too much or are overly friendly on first meeting.\\r\\n     - People with unusual levels of insecurity.\\r\\n   - Strategy: Can only be countered by preventing it from being triggered.\\r\\n     - If you are strong in one area, demonstrate a weakness in another to humanise yourself.\\r\\n     - If the envious person is an insecure type, display interest in their work by turning to them for advice.\\r\\n     - Do not be boastful about success and instead ascribe it to good luck (p.141-142).\\r\\n\\r\\n2. Conformism\\r\\n   - Identifiers:\\r\\n     - People feel compelled to display opinions or ideas matching the group's standards.\\r\\n     - The group's overseers can be dangerous.\\r\\n   - Strategy: Do not display your difference from the group too overtly.\\r\\n     - Wear a mask for the workplace, and reserve your colourfulness for your friends.\\r\\n     - \\"Be careful in what you say--it is not worth the bother of freely expressing your opinions\\".\\r\\n     - If you do differ, do not give the group the material needed to attack you for some other reason (p.142).\\r\\n\\r\\n3. Rigidity\\r\\n   - Identifiers:\\r\\n     - People following procedures without knowing why.\\r\\n     - People get defensive when their methodologies are questioned, especially if logic disproves them.\\r\\n     - Group members get irritable or panicky at hints of change.\\r\\n   - Strategy: Accept the fact others are rigid.\\r\\n     - Outwardly display deference to their need for order, because championing change creates hidden enemies.\\r\\n     - Independently maintain your openness to change, let go of bad habits, and create new ideas (p.143).\\r\\n\\r\\n4. Self-obsessiveness\\r\\n   - Identifier:\\r\\n     - People justify their actions with morality or a saintly aura, but appeals to their assumed charitability results in decline because they have nothing to gain.\\r\\n   - Strategy:\\r\\n     - Make conversations revolve around them and their interests, and offer something concrete in return for their efforts (p.143-144).\\r\\n\\r\\n5. Laziness\\r\\n   - Identifiers:\\r\\n     - People steal your ideas.\\r\\n     - People want to collaborate but contribute less, with unfair expectation of equal rewards.\\r\\n   - Strategy: Be prudent and keep your ideas, or at least details to yourself.\\r\\n     - Be wary of people who want to collaborate.\\r\\n     - In some workplaces a superior takes full credit for your work with your name excluded, but don't let same-level colleagues get away with it (p.144).\\r\\n\\r\\n6. Flightiness\\r\\n   - Identifier:\\r\\n     - People whose ideas or feelings on matters change based on their mood.\\r\\n   - Strategy:\\r\\n     - Never assume what someone says is a permanent statement.\\r\\n     - Be detached to people's shifting emotions, and focus instead on their actions (p.144-145).\\r\\n\\r\\n7. Passive aggression (p.145)\\r\\n   - Identifiers:\\r\\n     - Person fears direct confrontation.\\r\\n     - Low-level behaviours include:\\r\\n       - Procrastinating on a project\\r\\n       - Showing up late\\r\\n       - Making off-handed offensive comments\\r\\n     - Full passive-aggressive attacks have an outwardly friendly exterior contrasting negative actions.\\r\\n     - \\"Passive-aggressive warriors\\" are so overflowing with insecurities that they'd be happy to ruin your life.\\r\\n   - Strategies:\\r\\n     - For low-level passive aggressives, if they are harmless then ignore them, otherwise call them out.\\r\\n     - For passive-aggressive warriors, learn to identify such people and avoid them like the plague, there'll be evidence of past skirmishes.\\r\\n     - For full passive-aggressive attacks there are 2 options:\\r\\n       - 1. Get out of their way, or\\r\\n       - 2. Return the attack with something equally indirect to signal they'll pay a price to continue. Only do this if you can be emotionally unentangled.\\r\\n\\r\\n### 4 strategies to acquire social intelligence\\r\\n\\r\\n1. Speak through your work by being efficient and detail-orientated in what you do (p.152).\\r\\n2. Craft the appropriate persona for the world and continuously adjust it ahead of problemsby not settling on a single image and avoid being completely figured out (p.155).\\r\\n3. See yourself as others see you, and correct your social flaws, especially ones with a pattern of worsening social dynamics (p.159).\\r\\n4. Suffer fools gladly by accepting you too have been one, such that you accept the foolishness in others or at least tolerate them, instead of trying to change them. If you lack the patience for this, then stay away from those situations (p.163-164).\\r\\n\\r\\n\\r\\n\\r\\n## CREATIVE-ACTIVE PHASE\\r\\n\\r\\nThe author outlines 3 states of mind we grow through:\\r\\n\\r\\n* **Original mind**: During childhood we thought preverbally in images and sensations with a receptiveness to new information.\\r\\n* **Conventional mind**: During adulthood we stop wondering about things as they and become defensive about the world we take for granted with a not-so engaged nor creative mind.\\r\\n* **Dimensional mind**: Masters blend the conventional mind's discipline with original mind's child-like creativity by creating rather than consuming (p.175-178). Awakening this mind involves 4 methods:\\r\\n\\r\\n### Method 1: Choosing the Creative Task to maximise your skills and knowledge\\r\\n\\r\\nYour creative task selection must be like your Life's Task selection, connecting something so deep within you that you are committed to solve it regardless of the years of failures it may involve. Your genuine excitement will reflect as greater details in your output (p.179-180).\\r\\n\\r\\n2 important notes:\\r\\n1. Your chosen task must be realistic, reasonable, and can be a little above this if you're ambitious. But your skills and knowledge must be suited to pull it off.\\r\\n2. Throw away your need for comfort and security, because creative ventures are inherently uncertain. Be an explorer who leaves the shore (p.181).\\r\\n\\r\\n### Method 2: 5 creative strategies to loosen the mind\\r\\n\\r\\nThe mind \\"tightens\\" over time from a preference for consistency and from the narrowing of viewpoints whilst being focused (p.181). Here are 5 strategies to counter this.\\r\\n\\r\\n1. Cultivate negative capability a.k.a. the ability to endure uncertainty by suspending your ego, opinions, judgment, and confirmation bias, and entertain a broad range of ideas and the unfamiliar (p.182-183).\\r\\n\\r\\n2. Allow for serendipity by opening up to other stimuli and other research fields, giving full attention to unexpected ideas and where they lead (p.184-185).\\r\\n\\r\\n3. Alternate your mind through your explanations of observations by speculating against your inherent scepticism, being willing to confirm or disconfirm your theories, and making tangible objects of them e.g. prototypes (p.189-190).\\r\\n\\r\\n4. Alter your perspective and subvert your conventional mind by looking at problems holistically and at different angles, paying attention to anomalies without letting paradigms explain them away, and looking for what is absent as clue for unmet needs (p.191-193).\\r\\n\\r\\n5. Revert to primordial forms of intelligence by thinking with your senses which can take the form of visualisation, diagrams, models, scents, and rubber ball squeezing (p.197-198)?\\r\\n\\r\\n###  Method 3: Creative breakthrough -- tension and insight\\r\\n\\r\\nYou will reach a breaking point where you lose your initial energy. Accept this as a natural part of the process, and an indicator to distance yourself temporarily, which may give you the chance to reinvigorate. One approach is by manufacturing deadlines (p.199-201).\\r\\n\\r\\nHere are 6 emotional pitfalls to avoid during the creative-active phase and how to address them:\\r\\n1. Complacency: Constantly remind yourself how little you know to uphold your value of wonder.\\r\\n2. Conservatism: Make creativity your goal, not comfort.\\r\\n3. Dependency: Develop high internal standards and independence to find yourself without the opinion of others.\\r\\n4. Impatience: Build an enjoyment for rigorous practice to go past your limits and apply yourself with the same vigour across projects.\\r\\n5. Grandiosity: Build an attitude that regards public attention as a distraction and focus on the work and process itself.\\r\\n6. Inflexibility: Avoid emotional extremes by feeling optimism and doubt at the same time, and be able to bend to the moment (p.202-204).\\r\\n\\r\\n###  Method 4: 9 strategies for creative-active phase\\r\\n1. Develop an authentic voice by being patient and mastering the basics of your intended skill (p.209).\\r\\n2. Be opportunistic and open minded to search for an empirical fact that does not fit the paradigm and is of great yield and let it lead you, rather than beginning with a problem to solve or goal to pursue with trivial implications (p.214).\\r\\n3. Mechanical intelligence can be a source of creativity by testing and using your own design or experiencing the product as a whole (p.219).\\r\\n4. Natural powers of the brain can be leveraged by having a loose start in the creative process, having a wide knowledge in other fields, constantly improve your ideas through an ongoing sense of dissatisfaction, and enjoying the overall creative process regardless of time (p.223-224).\\r\\n5. Look inward to express your unique inner self that's not sparked by a trend, consciously going against dead conventions, and create space to plant your new thing in our cluttered culture (p.228-229).\\r\\n6. Understand the big picture and purpose, and avoid perceiving problems based on your technical knowledge to broaden your investigation paths (p.231).\\r\\n7. Let accidents and contingencies play a role in the creative process, like finding other ways to use things (p.235-236).\\r\\n8. Take a holistic approach by looking at things from many angles and dimensions to help unravel the truth (p.242).\\r\\n9. Move beyond a duality perception by examining contradictions and going to a level past those opposites (p.245).\\r\\n\\r\\nTo make a discovery or creative work first requires great discipline, self-control, and emotional stability to master your field (p.245-246).\\r\\n\\r\\n\\r\\n\\r\\n## MASTERY PHASE\\r\\n\\r\\nMastery is \\"...a sensation of suddenly possessing heightened intellectual powers after years of immersion in their field\\", experienced as intuiting or feeling more with high-level intuition of the whole being the ultimate sign of mastery (p.256-258). It allows you to \\"...maintain a sense of destiny, and feel continuously connected to it\\" (p.261).\\r\\n\\r\\n### Keys to mastery\\r\\n\\r\\n1. Roots of mastery intuition\\r\\n\\r\\n\\"Primitive\\" or \\"high-level\\" intuition is driven by memory, and keeping it in memory requires repetition, intensity of experience, and paying attention. In time-critical endeavours, a master's intuited decisions are more effective than attempts to analyse all information. However, we live in an age where technology does that remembering for us, making our brains flabby from the decreased use. To counter this, take up hobbies that are fun and strengthen your brain's memory capacity (p.263-265).\\r\\n\\r\\n2. Return to reality\\r\\n\\r\\nThe ultimate reality is that all life is interrelated with every event being a consequence of another. As specialists connect their disciplines to those of others, it is in a way creating the connections that return us to reality. We can participate in this trend of creating connections by pursuing mastery (p.267-268).\\r\\n\\r\\n\\"The brain of a Master is so richly interconnected that it comes to resemble the physical world, and becomes a vibrant ecosystem in which all forms of thinking associate and connect\\" (p.269).\\r\\n\\r\\n### Strategies to attain mastery\\r\\n\\r\\nMasters know that trying to fit into a conventional mould dampens their spirit because the reality they seek eludes them. So they forge their own route, one others will see as unconventional. This requires an X factor necessary for attaining mastery (p.269).\\r\\n\\r\\nHere are 7 examples of this X factor.\\r\\n\\r\\n1. Connect to your environment - Primal Powers\\r\\n\\r\\n   Achieve this by observing it and consider everything in it as a potential sign, constructing a system that has a sense for changes before they happen. We are in an era where we mustn't be distracted by technology, remember that technology is the means not the ends lest your brain atrophies (p.273).\\r\\n\\r\\n2. Play to your strengths - Supreme focus\\r\\n\\r\\n   Figure out your mental and psychological strengths, and work with them to find a path to mastery that suits you and brings you joy and unburdened by conventions that go against your nature, for example, Einstein's strongest qualities were not his knowledge of mathematics and physics, but his patience and tenacity (p.279).\\r\\n\\r\\n3. Transform yourself through practice - The fingertip feel\\r\\n\\r\\n   When you practice a skill long enough, the skill becomes automatic, with the sensation that the mind and body are operating together as one in a way that resembles animal instincts and it is the nature of the brain to be trained through repetition (p.288-289).\\r\\n\\r\\n4. Internalise the details - The life force\\r\\n\\r\\n   Love immersing yourself in the details for its own sake, and detest having to skip them. People these days are too much in a hurry to create a splash that they skimp on the details, so their efforts doesn't connect deeply with the public. Your creations need a life of their own, not momentary attention (p.293).\\r\\n\\r\\n5. Widen your vision - the global perspective\\r\\n\\r\\n   In competitive environments, a wider and more global perspective prevails because it goes beyond the moment to control the overall dynamic via strategy, whilst most people are locked in the present. You can increase your outlook by constantly reminding yourself of the purpose and your long-term goals (p.297).\\r\\n\\r\\n6. Submit to the other - the inside-out perspective\\r\\n\\r\\n   We have a prejudice to observe things from the outside to preserve our objectivity, but that may lead to incorrect assumptions. We never truly understand what other people experience, unless we continually expose ourselves to them to try to think from their perspective and without imposing our own values on them (p.303).\\r\\n\\r\\n7. Synthesize all forms of knowledge - The universal man/woman\\r\\n\\r\\n   One type of mastery is the ability connect different subjects, which is regarded as a universalising process. The human brain desires to create connections and this is what gives it its own will (p.309).\\r\\n\\r\\n\\r\\nFailing to pursue mastery or deny its existence leads to feelings of powerlessness, disappointment, and enslavement to a false version of yourself which was constructed from other people trying to make you conform to their ideas, including your own self-deception that such mastery is only for geniuses. Do not waste your uniqueness. Find the most fundamental and natural inclinations you have, and express them as you pursue mastery (p.309-310).\\r\\n\\r\\n\\r\\n\\r\\n## Reflection\\r\\n\\r\\nThis book feels like a sign post for those of us in the 99% of humanity who give up on ourselves, and shows how people who started off at the same or worse baselines than us, were able to craft themselves into masters.\\r\\n\\r\\nThe principles in it are timeless, and really should be mandatory reading for high schoolers.\\r\\n\\r\\nAs a self development book, this one felt more goal orientated compared to the \\"12 Rules For Life\\" by Jordan Peterson which felt more for daily living. Though I prefer this book more for its ease of reading and its mission-based intent.\\r\\n\\r\\nLike most when I was young, I was fed the preconceptions of having to get into university and then get a job, with no questioning of why we had to do things that way. I feel it is better and more honest to say upfront that life is not a fixed path you have to follow, that opportunities are all around you no matter the age, and you need to seize them. That point is what makes this book work tremendously well.\\r\\n\\r\\nYou only have one life, and all the circumstances leading up to your existence were highly improbable, so use it for the core of who you are.\\r\\n\\r\\nIn terms of the anecdotes, my favourites included:\\r\\n\\r\\n* Leonardo da Vinci's study into single piece moulding of a bronze statue (p.24), which was reminiscent of Elon Musk's idea for Tesla's chassis to be made of a single piece based on a toy car.\\r\\n\\r\\n* Cesar Rodriguez who trusted the process of training and pushing himself, going from a benched panicked pilot, to becoming nicknamed the \\"Last American Ace\\" fighter pilot (p.77)\\r\\n\\r\\n* William Harvey's approach of thoroughly experimenting his hypothesis before trying to push it onto others\\r\\n  - He wisely confided his discoveries to the King early on to gain his trust and support.\\r\\n  - Behaved humbly and with self-deprecation\\r\\n  - Played the role of court diplomat and avoided aligning with any faction nor got involved in intrigue (p.150).\\r\\n\\r\\nThe book has a number of other wisdoms, but I'll list only a few of my favourites below. You can read the book to discover more.\\r\\n\\r\\n* Following the lead of others or a book's advice is self-defeating (p.55). A little ironic here.\\r\\n\\r\\n* \\"In the future, the great division will be between ... those who can acquire skills and discipline their minds and those who are irrevocably distracted by all the media around them and can never focus enough to learn\\" (p.64).\\r\\n\\r\\n* \\"The very desire to find shortcuts makes you eminently unsuited for any kind of mastery\\" (p.90).\\r\\n\\r\\n* \\"The problem with all students, ...is that they inevitably stop somewhere. They hear an idea and hold on to it until it becomes dead; they want to flatter themselves that they know the truth. But true Zen never stops, never congeals into such truths. That is why everyone must constantly be pushed to the abyss, starting over and feeling their utter worthlessness as a student. Without suffering and doubts, the mind will come to rest on cliches and stay there, until the spirit dies as well...You must continually start over and challenge yourself\\" (p.115). \\r\\n\\r\\n\\r\\n\\r\\n### Reference\\r\\n\\r\\n* **[Mastery by Robert Greene (2012)](https://profilebooks.com/work/mastery)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/readings/205-03-16.md)** for this reading page's markdown file in GitHub."},{"id":1745071200,"title":"Elon Musk\\r","name":"elon-musk","author":"Walter Isaacson\\r","publisher":"Simon & Schuster\\r","publisherURL":"https://www.simonandschuster.com.au/books/Elon-Musk/Walter-Isaacson/9781761427978\\r","photo":"../assets/readings/elon-musk-by-walter-isaacson.png\\r","category":"biography\\r","date":"20 April 2025\\r","desc":"A chronicle of Elon Musk's journey from a difficult childhood to his successive founding of multiple industry-redefining companies up until the early establishing of X.AI in 2023.\\r","tags":"[\\"Biography\\", \\"Technology\\", \\"Business\\"]\\r","content":"![Elon Musk by Walter Isaacson](/src/assets/readings/elon-musk-by-walter-isaacson.png)\\r\\n\\r\\n\\r\\nThis book chronicles the biographee's life from a challenging childhood to the founding of multiple companies that revolutionised key technology industries.\\r\\n\\r\\nGiven the plethora of lessons, this post does not attempt to summarise the categories they relate to, e.g. leadership, team dynamics, communication, etc. as that would add unnecessary fluff.\\r\\n\\r\\nSo instead, I list in bullet points the business-relevant lessons from the book for my ease of reference and potential personal application.\\r\\n\\r\\nFor transparency, I used Grok to initially group and order the points I noted, though I ultimately combed through them and reorganised quite a bit.\\r\\n\\r\\nThe nature of this listing takes away the roller coaster ride of anecdotes that colour this book and its lessons. I recommend reading the biography first, and to just use this list as a general reference.\\r\\n\\r\\nThis book includes many other types of lessons covering morality, integrity, relationships, politics, and more, but those won't be covered here. The anecdotes which the lessons derive from won't be covered either. Again, please read the book for that information.\\r\\n\\r\\n\\r\\n## PERSONAL MINDSET\\r\\n\\r\\n### Define who you are\\r\\n Even if you really enjoy doing something, be clear whether or not that something really is the best way to spend your life. Is there something else you want to do which will have more impact? (p.56).\\r\\n\\r\\n Be clear with yourself as soon as you can, as to whether or not you are okay with working for other people (p.48), or if you prefer to be the one having people work for you so you can commit to your preferred approach.\\r\\n\\r\\n One tactic to validate your mental state is to talk about yourself on a long-form platform like a podcast (p.297).\\r\\n\\r\\n### Live by learning through risk-taking\\r\\n Do not let your decisions be guided by fear (p.25).\\r\\n\\r\\n Learn to view risk as a type of fuel rather than as something to avoid (p.252).\\r\\n\\r\\n When you are at a crossroads and one of the options is a once-in-a-lifetime opportunity, shoot for that opportunity. But if there's a way to create a fallback plan despite the unlikelihood of your future self needing to use it, you should set that up too (p.58-59).\\r\\n\\r\\n Even when your attempts at risk-taking fail, do your best to make every bad situation salvageable (p.116).\\r\\n\\r\\n You can either use the wealth you earn for short-term pleasure which doesn't really achieve anything, or you can choose to invest it all back into the game of life and business again (p.67).\\r\\n\\r\\n Conventional entrepreneurs are not risk takers, they are risk mitigators, constantly figuring out the controllable variables to minimise their risk (p.86).\\r\\n\\r\\n### Problem-solving\\r\\n \\"It's OK to be wrong. Just don't be confident and wrong\\" (p.286).\\r\\n\\r\\n Take an iterative approach and learn by failing, with the attitude of quickly getting back up by identifying problems so you can fix them (p.114).\\r\\n\\r\\n Know when to step back to reframe a problem, especially when you're getting mad about it. For example, rather than changing some aspect of your product, perhaps you may be able to change the context it is in (p.99 & 247).\\r\\n\\r\\n###\\t\\"Polytopia life lessons\\"\\r\\nPolytopia is a video game that the biographee recommended to his brother on learning how to be a CEO.\\r\\n\\r\\n1.\\t\\"Empathy is not an asset\\", it will hurt you in business (p.426).\\r\\n2.\\t\\"Play life like a game\\" (p.426).\\r\\n3.\\t\\"Do not fear losing\\", it is inevitable and will happen many times. Get used to losing so you play each subsequent game with less emotion, become more fearless, and take more risks (p.426).\\r\\n4.\\t\\"Be proactive\\", you can never win unless you take charge of setting the strategy (p.426-427).\\r\\n5.\\t\\"Optimize every turn...you only get a set number of turns in life\\" so do not let them slide (p.427).\\r\\n6.\\t\\"Double down\\", put everything back into the game to grow (p.427).\\r\\n7.\\t\\"Pick your battles\\", if you try to attack at everything that surrounds you, you will lose all your resources. Use front minimisation tactics (p.427).\\r\\n8.\\t\\"Unplug at times\\", remove distractions because they waste brain cycles (p.427).\\r\\n\\r\\n\\r\\n\\r\\n## STRATEGY AND VISION\\r\\n\\r\\n### Business Mission\\r\\n When your company mission is important enough, optimism and pessimism are irrelevant. All that matters is taking the steps forward to achieve the mission (p.177). \\r\\n\\r\\n You can either be in the business of making niche products, or remaking entire industries (p.79). \\r\\n\\r\\n A road less taken is to start with the mission, then work backward to figure out how to make it work financially (p.93).\\r\\n\\r\\n One option is to come up with a business concept that helps avoid the commonly made mistake of many corporate leaders when defining their business. Such as by defining your company as a type of innovation company (p.253-254). This is also advantageous in case of any future acquisitions or mergers, in that the merger will be less challenged if it falls in line with that core innovation mission (p.255).\\r\\n\\r\\n### Opportunities\\r\\n Do not let incumbent industry mindset inhibit you from seeing opportunities in that industry (p.48). \\r\\n\\r\\n Before entering an industry that isn't doing well in terms of product sales, figure out the reasons why it isn't doing well, and simplify the process for the customer by taking on the legwork to fix those problems (p.252).\\r\\n\\r\\n Be open to other business models as a way to side-fund your main model. For example, if part of your supply chain creates a component needed by another business, consider selling that component to that other business (p.193).\\r\\n\\r\\n Endeavours that are seemingly independent might be able to be tied together into a new one (p.244). \\r\\n\\r\\n The data your company collects can be a gold mine if you are able to use it for something other than its originally intended purpose (p.243). \\r\\n\\r\\n Having an \\"...online payment system would have the added benefit of authenticating users\\" (p.456).\\r\\n\\r\\n Be willing to sell your first company when the time is right, so you can move on to build your next ones (p.65). \\r\\n\\r\\n### Organisational Attitude\\r\\n A \\"maniacal sense of urgency\\" is needed as an operating principle for companies to avoid being flabby and slow (p.286 & 349), because complacency can be a scourge to business (p.508). \\r\\n\\r\\n If your company is too conservative and long-lived, it may be good to accept that you need to change, and adopt entrepreneurial efforts (p.222).\\r\\n\\r\\n### Mergers and Acquisitions\\r\\n If there are two competing companies whose clash will result in only one or the other surviving, it may make sense to merge them instead (p.76). \\r\\n\\r\\n If you want to genuinely fix a company, you cannot effectively do so as a mere shareholder. You would need to take it private then fix it to prevent distractions that would otherwise interfere or slow down the fix effort (p.452). \\r\\n\\r\\n When making a deal to buy out a company, make it contingent on full due diligence to minimise the trouble it would otherwise cause later (p.463).\\r\\n\\r\\n When you acquire a software company, you can create a team to \\"...forman analysis unit that would assess the code-writing skills, productivity, and even the attitudes\\" of engineering staff (p.518).\\r\\n\\r\\nPotential methodology for software company staff-cutting:\\r\\n\\r\\n  *  Search to see who has done a hundred lines of code or more in the last month and see who has been committing code (p.518), and make software engineers send samples of code they have recently written (p.556).\\r\\n\\r\\n  *  Begin with those who have the highest level to the software stack (p.549).\\r\\n\\r\\n  *  After finding those did a non-trivial amount of coding, from that group find the ones who did the best coding (p.518).\\r\\n\\r\\n  *  Other than just singling out strong individuals, it is important to find teams that work well together, because team accomplishments can be greater than what a single person does (p.519).\\r\\n\\r\\n  *  One tactic is that if you lay off staff before the date bonuses and options are due, then you don't have to pay them. However, that may trigger breach of contract and employment law violations which may cost you more than simply waiting after the contracted bonuses are distributed (p.522).\\r\\n\\r\\n  *  Check Slack messages and social media postings of employees to see who may be disloyal, disgruntled, or a threat (p.549).\\r\\n\\r\\n  *  Give people the option to opt-in to the company after acquisition with a company-wide email outlining the work expectations after the acquisition, and the option to opt-out with severance (p.550).\\r\\n\\r\\n### Market Strategy\\r\\n One market strategy is making your product a platform for incumbent industry leaders (p.63), but that would relegate your company to the status of \\"an unbranded vendor\\" for that industry (p.65). \\r\\n\\r\\n \\"True product people have a compulsion to sell directly to consumers, without middlemen muddying things up\\" (p.65). \\r\\n\\r\\n For high-cost industries, the strategy would be to create a high-price and quality iteration first, before designing a mass-market model (p.127). \\r\\n\\r\\n Be a product company, not a sales company. The philosophy is that if you make a great product, the sales would follow, so there shouldn't be as much need to put much effort into sales and marketing (p.253). \\r\\n\\r\\n If your company mission has wide social impact, one strategy you can come up with for problem-solving, is to hold an international design competition for students, as it additionally provides you information on potentially great candidates to employ (p.258).\\r\\n\\r\\n### External Relationships and Contracts\\r\\n \\"Great things will never happen with VCs or professional managers...They don't have the creativity or the insight\\" -- cited from Inc. Magazine (p.65). \\r\\n\\r\\n If your company is competing against other vendors and the contractor is using a no-bid contract to prop up a competitor, consider suing if it seems wrong and corrupt (p.122). \\r\\n\\r\\n Cost-plus contracts are where you are paid for your costs plus guaranteed profit, which is ineffective as it is an incentive to never finish work. If such a system is in place, challenge it with outcomes-based fixed pricing where companies should be risking their own capital (p.123). \\r\\n\\r\\n\\r\\n\\r\\n## LEADERSHIP\\r\\n\\r\\n### Product Leadership\\r\\n Even if you do not want to be CEO, you will need to be if you truly want to be the chief technology or product officer (p.63).\\r\\n\\r\\n Take the kind of initiative where if you're raising public awareness of your company, that you push to have the product or prototype ready for display to the public (p.121 & 194).\\r\\n\\r\\n Focus on a key metric for your business, like the cost per pound to get a payload into orbit (p.101).\\r\\n\\r\\n### Roles and Responsibilities\\r\\n Be clear about roles in relation to contributions. A combination of inspiration, perspiration, and risk is needed to be regarded as a legitimate cofounder (p.109). \\r\\n\\r\\n An issue with startups is with who should be in charge, but it should be made clear initially, though the one with most equity typically has ultimate authority (p.134).\\r\\n\\r\\n Delegate roles and responsibilities if you do not have the time to do everything (p.188).\\r\\n\\r\\n When there needs to be clear segregation of duties and relationships, make it clear to the employees. For example, if you are trying to drive down costs, ensure your financial analysts understand they are not to befriend the engineers who set the costs, because the analysts need to serve as judges of the engineers (p.363). \\r\\n\\r\\n Internal transparency and integrity are important. If there is a conflict of interest, the person in question has little incentive to reveal it, so it takes proactive asking and investigating staff to confirm and remove people who are in such positions (p.571).\\r\\n\\r\\n### General Leadership\\r\\n As a leader of a team, it is not your job to make people love you, as that can lead to counterproductivity (p.64).\\r\\n\\r\\n As an effective leader, it is important you are able to be brought around by evidence, even if it goes against your perception on the issue (p.407).\\r\\n\\r\\n Be the kind of leader that takes in the risk information and data from your team, make a quick assessment, and shift responsibility from them to yourself (p.210).\\r\\n\\r\\n A good leader takes responsibility for their mistake, even if it is done publicly (p.282).\\r\\n\\r\\n Like how a general is on a battlefield to motivate the troops, a leader should be on the factory floor with the workers (p.480). \\r\\n\\r\\n \\"Never ask your troops to do something you're not willing to do\\" (p.286). \\r\\n\\r\\n \\"All technical managers must have hands-on experience. For example, managers of software teams must spend at least 20% of their time coding. Solar roof managers must spend time on the roofs doing installations. Otherwise, they are like a cavalry leader who can't ride a horse or a general who can't use a sword\\" (p.285).\\r\\n\\r\\n After a massive mission-critical failure, it's a good idea to make the next attempt a tight but do-able timeframe to re-energise your team as a demonstration of your will to not give up (p.184).\\r\\n\\r\\n Even if 20 of your 100 command decisions are going to be wrong, they can be amended later. The urgency of making decisions fast and hard in order to prevent a company's death is important (p.279).\\r\\n\\r\\n### Communication\\r\\n When you invest in a company, you should spend your time on the shop floor and listen to the suggestions of the floor workers (p.157). \\r\\n\\r\\n Rather than talking with company executives, speak with workers to get information regarding limits you can go beyond (p.328). \\r\\n\\r\\n \\"Whenever there are problems to solve, don't just meet with your managers\\" perform skip-level meetings so that employees can bypass their direct supervisors and have their ideas heard (p.286). \\r\\n\\r\\n It's important as a leader to have at least someone who can tell you the truth you can act upon without wanting to fire that said someone (p.329).\\r\\n\\r\\n To support your leader when they are making a bad decision out of emotion, inform them as such and have others raise it with them to show consensus. Then avoid carrying out reactionary orders from that leader until the storm of emotion passes, and they are able to properly process the inputs (p.539).\\r\\n\\r\\n Treat people politely and respectfully, as not treating them well may make them disinclined to tell you where problems that need to be fixed are (p.166).\\r\\n\\r\\n One way to show you are listening in meetings, is to parrot back what others are saying (p.368).\\r\\n\\r\\n When discussing the critical future strategy for a company, it is best to keep phones away, as they could be otherwise used to monitor the conversation (p.604).\\r\\n\\r\\n\\r\\n\\r\\n## TEAM DYNAMICS\\r\\n\\r\\n### Development\\r\\n When your company is hosting an event that doubles as a recruiting drive, it is not a good idea to use very technical slides for the main presentation (p.396).\\r\\n\\r\\n \\"When hiring, look for people with the right attitude. Skills can be taught. Attitude changes require a brain transplant\\" (p.286).\\r\\n\\r\\n Prioritise an attitude to work maniacally hard over skills listed on a resume (p.350).\\r\\n\\r\\n Be wary of anyone whose confidence is greater than their competence (p.512).\\r\\n\\r\\n If you want to have a hardcore, fanatic work culture, you need to have a staffing method that cuts to the bone (p.522).\\r\\n\\r\\n If you're wanting to start a company that will require highly specialised talent, it's best to physically start the company where that talent is geographically congregated (p.95).\\r\\n\\r\\n Be careful of working in environments that reduce your probability of success, but if you have no choice, then frame it as a challenge that forges and bonds your team together (p.147).\\r\\n\\r\\n When an intern goes above and beyond, be sure to give them an immediate reward (p.148).\\r\\n\\r\\n Do not assign blame until you have found physical evidence for the cause of an issue (p.152).\\r\\n\\r\\n### Independent members\\r\\n As an employee, it's important to be proactive, if you can foresee an issue that can crop up and you can take responsibility for it, do so before it becomes a problem even without asking permission (p.526).\\r\\n\\r\\n By trying to be nice to members who've made mistakes, you're conversely being not nice to the others who are doing their jobs well (p.273).\\r\\n\\r\\n Comradery can be dangerous because it makes it hard for people to challenge each other's work. There is a tendency to not want to throw a colleague under the bus, and that rendency needs to be avoided (p.285).\\r\\n\\r\\n When you receive critical or hardcore feedback, you will need a good feedback loop and be able to actively seek criticism from others and improve (p.365).\\r\\n\\r\\n It is good to have employees who are willing to keep projects alive quietly as shadow projects, in case those projects are needed later (p.502).\\r\\n\\r\\n If your manager is trying to move you to a completely different team but you are wanting to stay in your current role because you are working on a project that has greater impact, show your manager the benefits of that project to convince them (p.593-594).\\r\\n\\r\\n### Being present\\r\\n There is value in showing up to work in person, it offers opportunities you wouldn't have gotten working from home (p.519).\\r\\n\\r\\n Being together at the office facilitates the flow of ideas and energy (p.541).\\r\\n\\r\\n### Operational Efficiency\\r\\n Setting unrealistic deadlines and aggressive schedules can make a company achieve things that others do not, but setting physically impossible ones can be demoralising for staff. Though you may miss schedules and cost targets, you at least will beat your competition (p.114).\\r\\n\\r\\n When your company is projected to run out of cash within weeks, call in a SWAT team. It's not the product that leads a company to success, it's the ability to make it cost efficient, i.e. it's how you design the factory (p.156).\\r\\n\\r\\n Leaders need to step in when analysis paralysis is happening, to make decisions that will move efforts forward fast by trying, failing, then fixing, instead of spending months on analysis (p.388). \\r\\n\\r\\n \\"phoning in rich\\" is a concept where people have been in a company for a long time, and because they have enough money and vacation homes, they no longer have the drive to stay all night on the factory floor to get things moving (p.302).\\r\\n\\r\\n\\r\\n\\r\\n## PRODUCT DEVELOPMENT\\r\\n\\r\\n### Innovation\\r\\n First principles thinking involves \\"...drilling down to the basic physics of the situation and building up from there\\" (p.99). \\r\\n\\r\\n Technology does not automatically improve. It only improves if people work hard to make it better (p.93). \\r\\n\\r\\n Innovative business ideas can come from finding the inefficiencies of existing technologies, like the time take to manually type information into a computer (p.399).\\r\\n\\r\\n \\"Some of the best innovations come from combining two previous innovations\\" (p.61). \\r\\n\\r\\n Innovation is driven by setting clear metrics, like how many photons are collected by a satellite versus how many it shoots back to Earth (p.355).\\r\\n\\r\\n \\"The only rules are the ones dictated by the laws of physics. Everything else is a recommendation\\" (p.286).\\r\\n\\r\\n \\"If conventional thinking makes your mission impossible ... then unconventional thinking is necessary (p.283).\\r\\n\\r\\n If you are using a neural network to solve a problem and want to convince someone it is superior to a conventional programmed rules-based method, show the instances where the performance is better (p.595).\\r\\n\\r\\n### Problem-Solving\\r\\n If your company doesn't know how to solve a problem, then try to gain a deep understanding of the issue and follow up by asking experts (p.55).\\r\\n\\r\\n Understand the fundamental nature of the problem your company is trying to solve, what seems to be the main problem may just be a layer on top of another underlying problem that the product needs to address (p.250).\\r\\n\\r\\n### Design\\r\\n For brainstorming a product, think of the materials that should be used to build it first, the reasonings to use those materials, and the product's structure, as the starting point for the product's visual design (p.316).\\r\\n\\r\\n Separating the design of a product from its engineering is a recipe for dysfunction. Designers have to feel the immediate pain if something they devised is hard to engineer. For this reason, engineers rather than the product managers should lead the team in the design process (p.79). \\r\\n\\r\\n Have designers and engineers work together in the same room so they can have a \\"throw-it-over-the-fence\\" mentality such that designers think like engineers, and engineers who think like designers, because \\"...true industrial design must connect the looks of a product to its engineering\\" (p.200). \\r\\n\\r\\n Be hardcore about making the product actually beautiful (p.137).\\r\\n\\r\\n When first developing a product, one approach can be to have the team members create a detailed chart of any functionality they want and the cost of manufacturing it at scale (p.486). \\r\\n\\r\\n Having a good design-manufacturing feedback loop gives a competitive advantage because it allows daily innovation (p.218). \\r\\n\\r\\n When you are developing a vision for your product or enhancing it, you can try projecting your revenue for potential new features (p.456).\\r\\n\\r\\n If you're building a software product, design it with the aim to do things with the least number of keystrokes (p.76).\\r\\n\\r\\n### Launch\\r\\n You only get to first release your product once, so make it something that wows customers (p.135).\\r\\n\\r\\n An important element when launching a new product is creating a buzz that transforms it into an object of desire (p.140). \\r\\n\\r\\n### Market Perception\\r\\n When your product has the potential to cause fatalities, there is a logical stance that the product should be viewed that overall it leads to less accidents, versus the emotional stance that the nature of the product's capacity for fatality being inherently provocative. You'll need to be mindful of the marketing around these views (p.248). \\r\\n\\r\\n Uploading a milestone in progress of your product's development to YouTube can be good for marketing (p.403).\\r\\n\\r\\n Be mindful that you are not providing services to customers whose use of your product may negatively impact your company's reputation significantly (p.386).\\r\\n\\r\\n\\r\\n\\r\\n## MANUFACTURING\\r\\n\\r\\n### Resource Management\\r\\n When rebuilding an area, try scavenging for components that could be cheaply repurposed (p.205). \\r\\n\\r\\n Although outsourcing may be cheaper, a poor international supply chain can be a logistical nightmare and cause cash-flow problems (p.160).\\r\\n\\r\\n### Cost Optimization\\r\\n Challenge your suppliers on costs charged on components, especially if there are equivalent components in other industries that go for cheaper. If they are still charging it too high, look to make it in-house at a fraction of their price (p.112). \\r\\n\\r\\n Do not allow someone who is not being real about the numbers or actual costs (e.g. not having a bill of materials) to continue their current methodology (p.161).\\r\\n\\r\\n### Production Design and Layout\\r\\n When designing a factory, make the layout so that an assembly line person can collar a designer or engineer and hold them accountable to bad designs (p.109). This can be achieved by placing the cubicles for the engineers beside the assembly lines, so they can see when something goes wrong and hear complaints if their design causes a slowdown (p.219).\\r\\n\\r\\n Do not separate the design and production groups. Make the designer responsible for the production process, that way if the design is expensive to produce, it'll require changing the design (p.390).\\r\\n\\r\\n \\"...designing a good factory [ is ] like designing a microchip. It [ is ] important to create, in each patch, the right density, flow, and processes...[ Setup ] each station on the assembly line with a green or red light indicate whether it [ is ] flowing properly\\" (p.278). \\r\\n\\r\\n Coral the engineers to walk up and the down the assembly lines with you to assess the production line's efficiency (p.219).\\r\\n\\r\\n Sometimes military history can provide insight into strategies that can help commercial, such as building production lines in your factory's parking lot when trying to meet a critical quota (p.282).\\r\\n\\r\\n If you are using a metric to measure your product engineering performance, they can treat it like a game by setting the current metric value on a large monitor (p.596).\\r\\n\\r\\n### Production Efficiency\\r\\n Key components should be made inhouse to control quality, costs, and supply chain, whilst aiming for vertical integration (p.132).\\r\\n\\r\\n You can cleverly get 24 hours of production with 16 hours of human labour using machines and careful prediction of when human intervention would be necessary, to get around a country's labour laws around maximum work hours per day (p.158-159).\\r\\n\\r\\n There are good manufacturing process inspirations from toys, like using a cold casting mould method, rather than piecing together hundreds of pieces for the same output (p.338).\\r\\n\\r\\n A high-level indicator if your company is inefficient is to compare the staff numbers used to perform equivalent task between companies (p.463).\\r\\n\\r\\n Be cautious of underestimating the complexity of what you are building and do not to over-automate (p.57). \\r\\n\\r\\n### \\"Idiot Index\\" and \\"The algorithm\\" i.e. Efficiency Improvement\\r\\n\\r\\nThe **idiot index** is used to identify the priority components in the production process that need to be addressed, and **the algorithm** is a methodology to improve the production process.\\r\\n\\r\\n The **idiot index** is \\"...the ratio of the total cost of a component to the cost of its raw materials. Something with a high idiot index--say a component that cost $1,000 when the aluminum that composed it only cost $100--was likely to have a design that was too complex or a manufacturing process that was too inefficient...If the ratio is high, you're an idiot\\" (p.363).\\r\\n\\r\\n **\\"The algorithm\\"** is a 5-point checklist\\r\\n\\r\\n  1. \\"Question every requirement. Each should come with the name of the person who made it. You should never accept that a requirement came from a department...You need to know the name of the real person who made that requirement. Then you should question it, no matter how smart that person is. Requirements from smart people are the most dangerous, because people are less likely to question them...Then make the requirements less dumb\\" (p.284-285).\\r\\n\\r\\n  2. \\"Delete any part or process you can. You may have to add them back later. In fact, if you do not end up adding back at least 10% of them, then you didn't delete enough\\" (p.285).\\r\\n\\r\\n  3. \\"Simplify and optimize. This should come after step two. A common mistake is to simplify and optimize a part or a process that should not exist\\" (p.285).\\r\\n\\r\\n  4. \\"Accelerate cycle time. Every process can be [ sped ] up. But only do this after you have followed the first three steps\\", it is a mistake to automate first, because some time accelerating processes may need to be removed altogether (p.285).\\r\\n\\r\\n  5. Automate. This comes last in designing the production process, wait until all requirements have been questioned, and all unnecessary parts and processes deleted and bugs removed (p.274 & 285).\\r\\n\\r\\n### Automation and Technology\\r\\n It is not a correct approach to attempt to automate absolutely everything in a production line, as this will result in you having to find the parts of that process that don't work to de-automate and replace with people for more efficiency (p.274).\\r\\n\\r\\n Production lines can halt when a safety sensor is triggered, especially if they are over-sensitive, so it is worth testing them and removing them if they are not critical (p.280). \\r\\n\\r\\n Factory settings on the control console for robotic arms can be poorly configured for your manufacturing task, so check it and reconfigure as needed for top efficiency (p.280). \\r\\n\\r\\n There are some tasks that humans do better than robots, so perils may come with pursuing automation too relentlessly (p.281).\\r\\n\\r\\n Before you take down a data centre, ensure there are no hard-coded references to that data centre (p.590).\\r\\n\\r\\n\\r\\n\\r\\n## LEGAL AND ETHICAL CONSIDERATIONS\\r\\n If someone tries to patent a crucial component or workflow for your company, double-check to see if it is something that has been discussed historically, and consider suing to stop the patent (p.228).\\r\\n\\r\\n Avoid allowing your product or service to be used as a potential trigger mechanism for a nuclear war (p.431-432).\\r\\n\\r\\n Do not engage with the endeavours of those who are short-selling your company's stock (p.438).\\r\\n\\r\\n An audacious tactic when taking over a company: There is a dual trigger mechanism, delisting of the stock and the change of control, which are required for stakeholders to collect severance and vest their stock options. With careful timing, you could fire the holders of the stock options (e.g. executives) \\"for cause\\" before their stock options can vest (p.512) by sending letters of dismissal, cut off their email, and exit them from the building, precisely once the money is transferred and necessary documents signed, before they submit their resignations (p.513).\\r\\n\\r\\n\\r\\n\\r\\n## NEGOTIATION & INVESTMENT\\r\\n When trying to impress visiting potential investors, dressing up your equipment to look more than it is, is one strategy to garner interest (p.62).\\r\\n\\r\\n If you have a potential partner (another company) hesitant to join forces with yours, one strategy is to demonstrate at a very large scale, that yours is willing to plough ahead with the endeavour even without them (p.221).\\r\\n\\r\\n During a business negotiation, if your counterpart is exaggerating numbers and making an offer that would be considered logically ridiculous, be patient and consider the possibility that it is just their opening move, before walking away from the table. Some people just like to play games (p.77).\\r\\n\\r\\n If you're getting something at a bargain, don't gloat by telling the seller that (p.78).\\r\\n\\r\\n Even when you struggle and fail to get a company's vision to take the path you want and decide to leave, do so calmy and gracefully. Being civil about it may pay off in the future (p.85).\\r\\n\\r\\n If you end up in a discussion with someone who looks like they're from a movie's mob scene, just walk away (p.79).\\r\\n\\r\\n One way to raise money is hosting a demonstration day showing where you are trying to push the industry forward (p.333).\\r\\n\\r\\n Chinese law requires forming a joint venture with a Chinese company to manufacture there, unless you can find someone who can convince the government that it would be beneficial even without a joint venture (p.313).\\r\\n\\r\\n A strategy that short sellers of a company's stock may use includes insider information and drones that fly over your factory for up-to-date data (p.277). This can also lead to their undoing in the sense they become overly dependent on their predictions using that data (p.278).\\r\\n\\r\\n\\r\\n\\r\\n## Reflection\\r\\n\\r\\nSetting aside the practical business lessons cited above, this is the first biography I ever read, and it was difficult for me to make the purchase because I've long carried the preconception that biographies are uncomfortably intrusive. Like reading some stranger's diary. However, my curiosity to understand how someone like this can possibly exist won me over.\\r\\n\\r\\nBefore reading this book, my initial knowledge on the biographee was very superficial as I had only seen a few interview clips on YouTube. After reading this book, I better appreciate how ridiculously rare he is as an individual, and can see why some conspiracy theorists may equate this rarity to him being an extraterrestrial.\\r\\n\\r\\nIn all seriousness, he has undergone misfortunes in his life which may be enough to cause other people to give up and take darker or less productive life paths:\\r\\n\\r\\n- Born into a country where daily fatal violence in public areas is the norm.\\r\\n- Physically bullied to near death as a child.\\r\\n- Impacted by a challenging relationship with a now estranged father since childhood.\\r\\n- Single mother who worked multiple jobs to make ends meet.\\r\\n- Unable to make friends until he started university.\\r\\n- Passing away of his first-born infant son.\\r\\n- His political enemies manipulating one of his other children, causing estrangement between them.\\r\\n- Romantic breakup leading to severe depression and impacting work performance.\\r\\n- Ongoing neck injury.\\r\\n- A seemingly chaotic-neutral or chaotic-good alignment that constantly desires being in intense situations.\\r\\n\\r\\nYet despite these obstacles, he still crusades for the practical elevation of humanity as a collective species, even if it costs him in other respects.\\r\\n\\r\\nAn excerpt:\\r\\n\\r\\n*\\"Elon cares a lot about humanity, but humanity in more of a very macro sense...He's willing to just throw his entire being at his mission, and that's what he expects in return...That has a good and bad side. You definitely realize that you're a tool being used to achieve this larger objective, and that's great. But sometimes, tools get worn down and he feels he can just replace the tool...Working for Elon is one of the most exciting things you can do, but it doesn't allow time for a lot else in your life\\"* -- cited from Lucas Hughes (p.367).\\r\\n\\r\\nHere is a list of authors and books mentioned as having been read by the biographee:\\r\\n\\r\\n\`\`\`\\r\\nAuthors:\\r\\n* Martin Heideggar\\r\\n* Friedrich Nietzsche\\r\\n* Arthur Schopenhauer\\r\\n\\r\\nBooks:\\r\\n* Douglas Adams\\r\\n   \\"Hitchhiker's Guide to the Galaxy\\" (1979, sci-fi)\\r\\n* Isaac Asmiov\\r\\n   \\"Robots and Empire\\" (1985, sci-fi)\\r\\n   \\"Foundation\\" series (1951-1993, sci-fi)\\r\\n* Iain Banks\\r\\n   \\"Culture\\" series (1987-2012, sci-fi)\\r\\n* Clayton Christensen\\r\\n   \\"The Innovator's Dilemma\\" (1997, business)\\r\\n* Winston Churchill\\r\\n   \\"The Second World War\\" (1948-1953, history)\\r\\n* Robert Heinlein\\r\\n   \\"The Moon Is a Harsh Mistress\\" (1966, sci-fi)\\r\\n* The Onion\\r\\n   \\"Our Dumb Century\\" (1999, satire)\\r\\n\\r\\nMagazines:\\r\\n* Amazing Stories magazine (1926-1939, sci-fi)\\r\\n\`\`\`\\r\\n\\r\\nThe biographee envisions humanity being more technologically advanced than now to achieve species-level self-determination in the universe. His success in making tangible steps toward this explains why his contributive efforts are often widely acclaimed.\\r\\n\\r\\nIn summary, the book is engaging and offers multiple and oftentimes opposing perspectives from involved people. The biographee is very much human with many anecdotes spanning tears to triumphs and painful facepalm moments to comical joy. There are also moments that underscore the author's restrained misgivings toward the biographee, though that increases the book's feeling of authenticity:\\r\\n\\r\\n\\"One of Elon's greatest skills is the ability to pass off his vision as a mandate from heaven\\" (p.94).\\r\\n\\r\\nThis book is an excellent testament to how belief in humanity, curiosity, intelligence, sheer force of will, luck, and karma can overcome near-impossible odds and make a tangible difference on humanity. It also shows the depth of sacrifice and toll it takes to pursue such a path.\\r\\n\\r\\nAfter reading it, this book may provoke your surrendered existential nihilism, an existential crisis of self-comparison, or inspiration for positive change--choose wisely. Personally, I'll opt for the more hopeful outlook.\\r\\n\\r\\nP.S. I do not think I'll be reading another biography anytime soon. The information is too dense, difficult to extract, and organise. But it was definitely a worthwhile read.\\r\\n\\r\\n\\r\\n\\r\\n### Reference\\r\\n\\r\\n* **[Elon Musk by Walter Isaacson (2023)](https://www.simonandschuster.com.au/books/Elon-Musk/Walter-Isaacson/9781761427978)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/readings/2025-04-20.md)** for this reading page's markdown file in GitHub."},{"id":1742043600,"title":"12 Rules for Life\\r","name":"12-rules-for-life","author":"Jordan B. Peterson\\r","publisher":"Penguin Random House UK\\r","publisherURL":"https://www.penguin.co.uk/books/309610/12-rules-for-life-by-peterson-jordan-b/9780141988511\\r","photo":"../assets/readings/12-rules-for-life-by-jordan-b-peterson.png\\r","category":"personal development\\r","date":"16 March 2025\\r","desc":"A philosophical guide on foundational approaches to help live a better life supported with anecdotes from the author's personal life and clinical practice, science, religion, and fiction.\\r","tags":"[\\"Personal development\\", \\"Philosophy\\"]\\r","content":"![12 Rules for Life by Jordan B. Peterson](/src/assets/readings/12-rules-for-life-by-jordan-b-peterson.png)\\r\\n\\r\\nThis book covers 12 of the author's rules for life. Note \\"The\\" is purposely absent from the title, implying there are more.\\r\\n\\r\\nI list the 12 covered in this book with a short summary of each for my own reminder and ease of personal application.\\r\\n\\r\\nSuch a summary may abstract away the weight and/or worth of these rules. So I do recommend reading the actual book for more in-depth, convincing, and poetic points and examples.\\r\\n\\r\\n\\r\\n## Rule 1: Stand up straight with your shoulders back\\r\\n\\r\\nHigher serotonin levels with low octopamine levels characterise dominators of conflicts and hierarchies, which also begets a foundation for recurring success, and a strong physical posture reflecting the comfort from those ongoing wins.\\r\\n\\r\\nConversely, low serotonin levels with high octopamine levels characterise those that repeatedly lose conflicts, are lower in hierarchies, and are afflicted by stresses leading to feedback loops that can lead to agoraphobic behaviours and posture.\\r\\n\\r\\nA crustacean analogy, whose species long preceded humanity, discern at first sight the posture of potential mates to infer an individual's conflict and hierarchy dominance, with attraction going to those with strong postures, and those with weak ones being ignored.\\r\\n\\r\\nHumans do the same. Achieving success in human society means being able to overcome conflicts and network effectively in hierarchies. People discern and judge at first sight based on posture and other factors, to make a similar inference.\\r\\n\\r\\nSo rather than walk around with a hunched back, correct your posture, and let your serotonin levels rise.\\r\\n\\r\\n\\r\\n## Rule 2: Treat yourself like someone you are responsible for helping\\r\\n\\r\\nGiven that individuals have greater knowledge of themselves than others have of them, people may bear self-contempt based on knowledge of their own flaws that others do not see. This can then result in an innate tendency to care for others better than they would themselves.\\r\\n\\r\\nWhen we genuinely help others for their intended good, we typically do so with a sense of respect and responsibility. That same respect and responsibility should be applied to how we treat ourselves, regardless of the faults we know of ourselves.\\r\\n\\r\\nThe intended purpose is to adopt the right attitude to help yourself get onto a life trajectory whose benefits and pride outweigh your self-criticisms.\\r\\n\\r\\n\\r\\n## Rule 3: Make friends with people who want the best for you\\r\\n\\r\\nPeople are different, and whilst their actions may seem the same on the surface, the motivations behind them are not. For example, there are people who want help to rise out of their suffering, versus people who cling onto their suffering to validate their victim signalling. There are people who help others out of naivety, versus people who help others out of narcissistic malevolence.\\r\\n\\r\\nIt is easier for an individual to follow their vices, wallow in misery, and choose failure, than it is for them to shoulder the burdern of improving their conditions, even though the latter would have greater long term benefit. It takes more strength and effort to become better.\\r\\n\\r\\nSo surround yourself with those who genuinely strive for their own self-improvement, and expect for your relationships with them to not be easy. It is better than having an effortless relationship with someone who sees your self-improvement efforts as a fault.\\r\\n\\r\\n\\r\\n## Rule 4: Compare yourself to who you were yesterday, not to who someone else is today\\r\\n\\r\\nSpend your time questioning who you are and your obligations. Be mindful that your self-evaluations aren't so over-rationalised they render life endeavours meaningless, and also avoid the trap of undervaluing your positives and overvaluing your negatives. Also, watch how you frame things, re-framing your problems may also give you insight to an alternate course of action.\\r\\n\\r\\nTake the approach of making changes, which can be more easily accomplished by aiming small, such as doing things today that make you a bit better than the you of yesterday. It is a tactic to help avoid the scenario of aiming too large, then surrendering to the innate desire of shirking the responsibility of performing a big change. As times go on, you can slowly increase the benchmark for that change.\\r\\n\\r\\nTake that energy, time, and concern for other's progress, and spend them on improving yourself.\\r\\n\\r\\n\\r\\n## Rule 5: Do not let your children do anything that makes you dislike them\\r\\n\\r\\nParents have a fundamental duty to act as proxies for the real world by onboarding their children to understand socially permissible boundaries, and learn to self-regulate their own behaviour. This duty takes precedence over all other aspects of the parent-child relationship, because parental failure to properly discipline a child means the world will do it instead, and the latter may not be as patient nor kind.\\r\\n\\r\\nThe degree of social immersion can affect a person's sanity. So it is important to discourage behaviours that lead to alienation, developmental cessation, and becoming a social disgrace. Such actions include angrily crying (an act of dominance that can be dealt with via timeouts), punching / kicking / biting (unless its for self-defence), and being mentally immature.\\r\\n\\r\\nParenting is also about rewarding children for actions that will make them socially accepted and successful in the world.\\r\\n\\r\\n\\r\\n## Rule 6: Set your house right before you criticize the world\\r\\n\\r\\nWhen you encounter the inevitable suffering that life deals you, you have the choice to either be so outraged that you become nihilistic, resentful, and believing that your vengeance is a moral imperative to dish back out at the world. \\r\\n\\r\\nOr alternatively, you can choose to learn from the experience. This is the better attitude to take, because there's only doom if you think the world conspires against you. You can start by questioning how much you contribute to the problems in your life. \\r\\n\\r\\nIdentify the things (big and small) that you could and would change to make your life better. Deconstruct yourself, and let the harmful and unnecessary parts of yourself die.\\r\\n\\r\\nHave the humility to not blame the world, and take responsibility for your own failure. After that, you can move to doing things that you can speak honourably of.\\r\\n\\r\\n\\r\\n## Rule 7: Pursue what is meaningful (not what is expedient)\\r\\n\\r\\nPursuing what is expedient means selfishly following short-term gains on blind impulse. Characterised by immaturity and irresponsibility to get its way, it involves lying, cheating, stealing, deceiving, manipulating, and uses the tragedy of life to justify its morally questionable actions. Over many iterations of such pursuits, it produces a demonic character.\\r\\n\\r\\nThe antithesis of pursuing expedience is pursuing meaning, which maturely regulates its impulses in its aim towards a good that pays for the debt of one's own existence. It sacrifices the pleasures of today for a better tomorrow, and the process of doing so creates social contracts through sharing, trade, and trust, and thus increases personal reputation. By living in a manner that builds towards your greatest possible self, you can raise those around you.\\r\\n\\r\\n\\r\\n## Rule 8: Tell the truth--or, at least, don't lie\\r\\n\\r\\nA person makes \\"life-lies\\" to corrupt the world with their perception. Examples of life-lies are imposing ideologies, justifying one's own cynicism, and avoiding responsibility. Living an invisible life is another type of lie, because it suppresses one's own potential and leads to obliterating their life's meaning and realising what they could be. This is characterised by avoiding conflict, false smiling whilst doing what one is told, and not questioning authority.\\r\\n\\r\\nWillful blindness is the worst lie because it lazily drowns itself in rationalisation and refusing to admit when the lie is wrong. Speaking lies leads to a weak character, and life mows down weak characters.\\r\\n\\r\\nThe author cites Nietzsche: \\"...a man's worth [ is ] determined by how much truth he could tolerate\\" (p.223).\\r\\n\\r\\nIdentify discrepancies between what you do and say to identify your weaknesses when misbehaving and misspeaking. The author's technique involves dividing oneself into two parts, \\"...one that spoke, and one, more detached, that paid attention and judged\\" (p.205). It helps identify when you are lying, and helping to decide to tell the truth when you are unsure what to do.\\r\\n\\r\\n\\r\\n## Rule 9: Assume that the person you are listening to might know something you don't\\r\\n\\r\\nThe highest form of wisdom is the continual search for it, and this requires accepting that knowing what you know is nothing, because sometimes you have to change the way you understand everything. You can do this by smartly being quiet and listening in conversations. However, there are different types of conversations where listening and speaking serve different purposes.\\r\\n\\r\\nSome types of conversations do not strive for such higher wisdom. For example, participants in dominance-hierarchy conversations like politics and economy merely seek attaining victory from their perception, leading to neither side learning. Genuine conversation involves listening to others without prematurely judging, understanding what the speaker thinks of their problem, and how the speaker plans to fix it. \\r\\n\\r\\nIt is important not to \\"steal\\" the speaker's problem by trying to solve it, because it is something that they should solve. Even if solving the problem is the purpose, be mindful about solving it too early in the conversation, as it may be perceived as a desire to escape from the problem-solving effort of the discussion.\\r\\n\\r\\nTips from the author include outlining the previous speaker's ideas and feelings to their satisfaction of your accuracy (also for your own understanding). You can also advise the speaker what their information has done for you, how it changed your presuppositions, and think of new questions, before speaking for yourself.\\r\\n\\r\\n\\r\\n## Rule 10: Be precise in your speech\\r\\n\\r\\nBeing precise and specific is necessary to admit to a problem, because that is the start of the problem solving process. Thus failing to specify means to also fail to define success, failure, and yourself, which can lead to growing hatred towards the confusion and suffering from the ignored reality.\\r\\n\\r\\nPursuing such care and honesty early on even if it risks facing conflict, spares you from trouble later down the line and preserves longer term truth and peace. As a start, consciously define the conversation's topic, otherwise it risks digressing to topics on everything.\\r\\n\\r\\nCommunicate your feelings to confront those feelings, such as admitting what you want, and saying what you mean so you know clearly what you intend. Even when your efforts to be precise still result in leaving the tragedy intact, at least those efforts chase away the obscurities.\\r\\n\\r\\n\\r\\n## Rule 11: Do not bother children when they are skateboarding\\r\\n\\r\\nIt is important to prioritise encouraging the development of your competency, which makes you safer than efforts to overprotect you. If you are overprotected, then you are more likely to fail when something unexpected, dangerous, yet full of opportunity appears, which it inevitably does.\\r\\n\\r\\nOverprotective parenting is a pathological problem that threatens a child's enlightenment, articulation, rationality, self-determination, strength and competence. This problem is an old one, the author cites the Oedipal mother concept, but focuses on the aspect of it that involves robbing another's potential as immoral.\\r\\n\\r\\nOther than overprotective parents, people with profoundly anti-human spirits also apply ugly solutions that inhibit those chances for competency development for implementation reasons that seem like lies. The author's example is that of skatestoppers, which prevented children from skateboarding nearby and learning to be competent against danger.\\r\\n\\r\\nLet yourself and others test the limits, and to gain the strength to bring more to the table. Men toughen up by pushing themselves and pushing each other. Foster the independence of your children (and of yourself), even if it causes you emotional distress.\\r\\n\\r\\nWe all need playgrounds dangerous enough to still be challenging.\\r\\n\\r\\n**Side note**: Don't forget Rule 5. Everything in moderation.\\r\\n\\r\\n\\r\\n## Rule 12: Pet a cat when you encounter one in the street\\r\\n\\r\\nYour life and being (including as a static existence) requires becoming something more, or at least different, which is only possible for someone who is limited. But despite those limitations and the inevitable tribulations that life throws at you, if you pay attention even on a bad day, you may be fortunate enough to be offered small opportunities such as petting a cat or a dog. Enjoy those small moments that distract you, or make you laugh at the absurdity of existence.\\r\\n\\r\\n\\r\\n## Reflection\\r\\n\\r\\nThis book was name-dropped in the author's YouTube lectures and interviews, so I bought a copy to try it. It is the first non-technical book I read since university, so it was not an easy transition to go from my preferred reading of factual and \\"to-the-point\\" near-discussionless information, to wading through such philosophical and life-orientated lessons.\\r\\n\\r\\nAdmittedly, I nearly dropped the book early on where it discussed the difference between light and darkness, as I felt it lingered too much on that point. I powered through that and was rewarded with interesting anecdotes from the author's life and clinical practice. Being careful not to spoil, the most memorable example for me is when the author and his wife looked after a neighbour's neglected child.\\r\\n\\r\\nA part of me wished I had the knowledge in this book at an earlier age in life, but I do wonder if youthful impatience would have prevented me from reading and properly incorporating the lessons.\\r\\n\\r\\nThe book encourages you to improve your internal locus of control, by setting your mindset and life in a constructive direction. One recurring way it does this is by confronting people so corrupted by their own nihilism, that they denounce humanity whilst hiding behind a false guise of being anti-prejudice.\\r\\n\\r\\nAn excerpt:\\r\\n\\r\\n*\\"Aim up. Pay attention. Fix what you can fix. Don't be arrogant in your knowledge. Strive for humility, because totalitarian pride manifests itself in intolerance, oppression, torture and death. Become aware of your own insufficiency--your cowardice, malevolence, resentment and hatred. Consider the murderousness of your own spirit before you dare accuse others, and before you attempt to repair the fabric of the world. Maybe it's not the world that's at fault. Maybe it's you. You've failed to make the mark. You've missed the target... And all of that is your contribution to the insufficiency and evil of the world. And, above all, don't lie\\"* (p.198)\\r\\n\\r\\nThe book has a number of other wisdoms, but I'll list only a few of my favourites below. The rest you can read the book to discover.\\r\\n\\r\\n* The author gives arithmetic proof of the \\"...genuine dominance of good over evil in the human heart\\", in that people constrain evil across the generations (p.154).\\r\\n\\r\\n* If you do not know why someone did something, look at the consequences then infer the motivation.\\r\\n\\r\\n* \\"If you will not reveal yourself to others, you cannot reveal yourself to yourself... It means that so much of what you could be will never be forced by necessity to come forward\\" (p.212).\\r\\n\\r\\n* \\"Set your ambitions, even if you are uncertain about what they should be. The better ambitions have to do with the development of character and ability, rather than status and power. Status you can lose. You carry character with you wherever you go, and it allows you to prevail against adversity\\" (p.224).\\r\\n\\r\\n* \\"...new genes in the central nervous system turn themselves on when an organism is placed (or places itself) in a new situation... You have to say something, go somewhere and do things to get turned on. And, if not ... you remain incomplete\\" (p.212).\\r\\n\\r\\nIn summary, the book may be a difficult read for the philosophically uninitiated, but the lessons are good. Truthfully, I prefer to listen to the author's lectures and interviews. They have less content, but there's more conciseness, logical reasoning, and stronger engagement in video format.\\r\\n\\r\\n\\r\\n\\r\\n### Reference\\r\\n\\r\\n* **[12 Rules for Life by Jordan B. Peterson (2018)](https://www.penguin.co.uk/books/309610/12-rules-for-life-by-peterson-jordan-b/9780141988511)**\\r\\n\\r\\n\\r\\n\\r\\nClick **[here](https://github.com/makuharistudio/makuharistudio.github.io/blob/main/src/markdown/readings/2025-03-16.md)** for this reading page's markdown file in GitHub."}]`);function f9(){return ae.jsxs(ae.Fragment,{children:[ae.jsxs("center",{children:[ae.jsx("h1",{children:"READINGS"}),ae.jsx("h3",{children:"This is a non-exhaustive list of books I have read along with summaries of lessons learned."})]}),ae.jsx(d9,{readings:dC})]})}function p9(){const{name:n}=og(),e=dC.find(d=>d.name===n);if(!e)throw new Error("Reading not found");const{title:t,author:i,date:s,content:l}=e,c=d=>{try{return d.startsWith("http")?d:new URL(Object.assign({"../assets/readings/12-rules-for-life-by-jordan-b-peterson.png":Nh,"../assets/readings/elon-musk-by-walter-isaacson.png":Fh,"../assets/readings/mastery-by-robert-greene.png":zh})[`../assets/readings/${d.split("/").pop()}`],import.meta.url).href}catch(p){return console.error(`Error loading image: ${d}`,p),""}},f=(d=>d.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(p,g,y)=>{try{const b=c(y);return`![${g}](${b})`}catch(b){return console.error(`Image not found: ${y}`,b),`![${g}](#)`}}))(l);return ae.jsxs("content",{children:[ae.jsx("h3",{children:s||"This reading does not have a date"}),ae.jsxs("h1",{children:[t||"This reading does not have a title"," by ",i||"This reading does not have a author"]}),ae.jsx(d0,{children:f||"This reading does not have content"})]})}function m9(){const n=ge.useRef();return ge.useEffect(()=>{let e;return n.current&&(e=Rw(n.current)),()=>{e&&e()}},[]),ae.jsxs("div",{className:"container page",children:[ae.jsx("div",{className:"interface"}),ae.jsx("div",{className:"bg-space",ref:n})]})}const g9=[{path:"/",element:ae.jsx(Y5,{}),errorElement:ae.jsx(X5,{}),children:[{path:"/",element:ae.jsx(sF,{})},{path:"/portfolio",element:ae.jsx(lF,{})},{path:"/portfolio/:name",element:ae.jsx(M7,{})},{path:"/blog",element:ae.jsx(u9,{})},{path:"/blog/:name",element:ae.jsx(h9,{})},{path:"/readings",element:ae.jsx(f9,{})},{path:"/readings/:name",element:ae.jsx(p9,{})},{path:"/test",element:ae.jsx(m9,{})}]}],y9=SP(g9);MR.createRoot(document.getElementById("root")).render(ae.jsx(ge.StrictMode,{children:ae.jsx(OP,{router:y9})}));
